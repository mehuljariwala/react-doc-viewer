const __vite__fileDeps=["./index-CiodtZIu.js","./index-CDs2tPxN.js","./index-BKD8Dact.js","./index-BAMY2Nnw.js","./util-DMkKVjcQ.js","./url-amwFPBqB.js","./index-DHa0OMiM.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var Cw=Object.defineProperty;var Tw=(i,e,t)=>e in i?Cw(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var xe=(i,e,t)=>(Tw(i,typeof e!="symbol"?e+"":e,t),t),cp=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var c=(i,e,t)=>(cp(i,e,"read from private field"),t?t.call(i):e.get(i)),A=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},T=(i,e,t,s)=>(cp(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t);var Zt=(i,e,t,s)=>({set _(n){T(i,e,n,t)},get _(){return c(i,e,s)}}),P=(i,e,t)=>(cp(i,e,"access private method"),t);import{r as j,c as Jo,g as ig}from"./index-CDs2tPxN.js";import{B as Qt}from"./index-BKD8Dact.js";import{p as Dr}from"./index-BAMY2Nnw.js";import{c as nd}from"./_commonjs-dynamic-modules-TDtrdbi3.js";import{_ as rd}from"./iframe-BRyD-XD9.js";import{i as Ve}from"./tiny-invariant-CopsF_GD.js";var rv={exports:{}},Mf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw=j,Rw=Symbol.for("react.element"),Lw=Symbol.for("react.fragment"),Nw=Object.prototype.hasOwnProperty,Iw=Pw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mw={key:!0,ref:!0,__self:!0,__source:!0};function iv(i,e,t){var s,n={},r=null,a=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(a=e.ref);for(s in e)Nw.call(e,s)&&!Mw.hasOwnProperty(s)&&(n[s]=e[s]);if(i&&i.defaultProps)for(s in e=i.defaultProps,e)n[s]===void 0&&(n[s]=e[s]);return{$$typeof:Rw,type:i,key:r,ref:a,props:n,_owner:Iw.current}}Mf.Fragment=Lw;Mf.jsx=iv;Mf.jsxs=iv;rv.exports=Mf;var k=rv.exports;const Dw="Document {{ currentFileNo }} of {{ allFilesCount }}",Fw="No renderer for file type: {{{ fileType }}}",Ow="Download file",Bw="Your file is broken. Please check it on your machine.",jw="Recipients",$w="Sender",zw="Loading...",Hw="Page {{ currentPage }}/{{ allPagesCount }}",Uw="Drop files here",Ww="Thumbnail sidebar",Vw="Show thumbnails",qw="Hide thumbnails",Gw="Annotation toolbar",Xw="Select",Yw="Highlight",Kw="Pen",Zw="Comment",Jw="Eraser",Qw="Add comment",eA="Delete annotation",tA="Save annotations",sA="Print",nA="Enter fullscreen",rA="Exit fullscreen",iA="This PDF is password protected",aA="Enter password",oA="Submit",lA="Incorrect password. Please try again.",cA="Search in document...",hA="No results found",dA="{{ current }} of {{ total }}",uA="Bookmarks",fA="Show bookmarks",pA="Hide bookmarks",mA="No bookmarks available",gA="Split view",bA="Sync scroll",vA={documentNavInfo:Dw,noRendererMessage:Fw,downloadButtonLabel:Ow,brokenFile:Bw,msgPluginRecipients:jw,msgPluginSender:$w,pdfPluginLoading:zw,pdfPluginPageNumber:Hw,dropFilesHere:Uw,thumbnailSidebar:Ww,showThumbnails:Vw,hideThumbnails:qw,annotationToolbar:Gw,selectTool:Xw,highlightTool:Yw,penTool:Kw,commentTool:Zw,eraserTool:Jw,addComment:Qw,deleteAnnotation:eA,saveAnnotations:tA,printButtonLabel:sA,fullscreenButtonLabel:nA,exitFullscreenButtonLabel:rA,passwordRequired:iA,passwordPlaceholder:aA,passwordSubmit:oA,passwordError:lA,searchPlaceholder:cA,searchNoResults:hA,searchMatchCount:dA,bookmarksSidebar:uA,showBookmarks:fA,hideBookmarks:pA,noBookmarks:mA,splitView:gA,syncScroll:bA},yA="Dokument {{ currentFileNo }} z {{ allFilesCount }}",_A="Brak funckji renderującej dla: {{{ fileType }}}",wA="Pobierz plik",AA="Twój plik jest uszkodzony. Sprawdź go na swoim komputerze.",kA="Odbiorcy",EA="Nadawca",SA="Wczytywanie...",xA="Strona {{ currentPage }}/{{ allPagesCount }}",CA="Print",TA="Enter fullscreen",PA="Exit fullscreen",RA="This PDF is password protected",LA="Enter password",NA="Submit",IA="Incorrect password. Please try again.",MA="Search in document...",DA="No results found",FA="{{ current }} of {{ total }}",OA="Bookmarks",BA="Show bookmarks",jA="Hide bookmarks",$A="No bookmarks available",zA="Split view",HA="Sync scroll",UA={documentNavInfo:yA,noRendererMessage:_A,downloadButtonLabel:wA,brokenFile:AA,msgPluginRecipients:kA,msgPluginSender:EA,pdfPluginLoading:SA,pdfPluginPageNumber:xA,printButtonLabel:CA,fullscreenButtonLabel:TA,exitFullscreenButtonLabel:PA,passwordRequired:RA,passwordPlaceholder:LA,passwordSubmit:NA,passwordError:IA,searchPlaceholder:MA,searchNoResults:DA,searchMatchCount:FA,bookmarksSidebar:OA,showBookmarks:BA,hideBookmarks:jA,noBookmarks:$A,splitView:zA,syncScroll:HA},WA="Documento {{ currentFileNo }} de {{ allFilesCount }}",VA="No hay procesador para el tipo de archivo: {{{ fileType }}}",qA="Descargar archivo",GA="Tu archivo está roto. Compruébalo en tu máquina.",XA="Destinatarios",YA="Remitente",KA="Cargando...",ZA="Página {{ currentPage }}/{{ allPagesCount }}",JA="Print",QA="Enter fullscreen",ek="Exit fullscreen",tk="This PDF is password protected",sk="Enter password",nk="Submit",rk="Incorrect password. Please try again.",ik="Search in document...",ak="No results found",ok="{{ current }} of {{ total }}",lk="Bookmarks",ck="Show bookmarks",hk="Hide bookmarks",dk="No bookmarks available",uk="Split view",fk="Sync scroll",pk={documentNavInfo:WA,noRendererMessage:VA,downloadButtonLabel:qA,brokenFile:GA,msgPluginRecipients:XA,msgPluginSender:YA,pdfPluginLoading:KA,pdfPluginPageNumber:ZA,printButtonLabel:JA,fullscreenButtonLabel:QA,exitFullscreenButtonLabel:ek,passwordRequired:tk,passwordPlaceholder:sk,passwordSubmit:nk,passwordError:rk,searchPlaceholder:ik,searchNoResults:ak,searchMatchCount:ok,bookmarksSidebar:lk,showBookmarks:ck,hideBookmarks:hk,noBookmarks:dk,splitView:uk,syncScroll:fk},mk="Dokument {{ currentFileNo }} von {{ allFilesCount }}",gk="Kein Renderer für Dateityp: {{{ fileType }}}",bk="Datei herunterladen",vk="Ihre Datei ist defekt. Bitte überprüfen Sie sie auf Ihrem Rechner.",yk="Empfänger",_k="Absender",wk="Wird geladen...",Ak="Seite {{ currentPage }}/{{ allPagesCount }}",kk="Print",Ek="Enter fullscreen",Sk="Exit fullscreen",xk="This PDF is password protected",Ck="Enter password",Tk="Submit",Pk="Incorrect password. Please try again.",Rk="Search in document...",Lk="No results found",Nk="{{ current }} of {{ total }}",Ik="Bookmarks",Mk="Show bookmarks",Dk="Hide bookmarks",Fk="No bookmarks available",Ok="Split view",Bk="Sync scroll",jk={documentNavInfo:mk,noRendererMessage:gk,downloadButtonLabel:bk,brokenFile:vk,msgPluginRecipients:yk,msgPluginSender:_k,pdfPluginLoading:wk,pdfPluginPageNumber:Ak,printButtonLabel:kk,fullscreenButtonLabel:Ek,exitFullscreenButtonLabel:Sk,passwordRequired:xk,passwordPlaceholder:Ck,passwordSubmit:Tk,passwordError:Pk,searchPlaceholder:Rk,searchNoResults:Lk,searchMatchCount:Nk,bookmarksSidebar:Ik,showBookmarks:Mk,hideBookmarks:Dk,noBookmarks:Fk,splitView:Ok,syncScroll:Bk},$k="Documento {{ currentFileNo }} di {{ allFilesCount }}",zk="Nessun renderer per il tipo di file: {{{ fileType }}}",Hk="Scarica file",Uk="Il tuo file è danneggiato. Controllalo sul tuo computer.",Wk="Destinatari",Vk="Mittente",qk="Caricamento in corso...",Gk="Pagina {{ currentPage }}/{{ allPagesCount }}",Xk="Print",Yk="Enter fullscreen",Kk="Exit fullscreen",Zk="This PDF is password protected",Jk="Enter password",Qk="Submit",eE="Incorrect password. Please try again.",tE="Search in document...",sE="No results found",nE="{{ current }} of {{ total }}",rE="Bookmarks",iE="Show bookmarks",aE="Hide bookmarks",oE="No bookmarks available",lE="Split view",cE="Sync scroll",hE={documentNavInfo:$k,noRendererMessage:zk,downloadButtonLabel:Hk,brokenFile:Uk,msgPluginRecipients:Wk,msgPluginSender:Vk,pdfPluginLoading:qk,pdfPluginPageNumber:Gk,printButtonLabel:Xk,fullscreenButtonLabel:Yk,exitFullscreenButtonLabel:Kk,passwordRequired:Zk,passwordPlaceholder:Jk,passwordSubmit:Qk,passwordError:eE,searchPlaceholder:tE,searchNoResults:sE,searchMatchCount:nE,bookmarksSidebar:rE,showBookmarks:iE,hideBookmarks:aE,noBookmarks:oE,splitView:lE,syncScroll:cE},dE="Documento {{ currentFileNo }} de {{ allFilesCount }}",uE="Nenhum renderizador para o tipo de arquivo: {{{ fileType }}}",fE="Baixar arquivo",pE="Seu arquivo está quebrado. Por favor, verifique-o em sua máquina.",mE="Destinatários",gE="Remetente",bE="Carregando...",vE="Página {{ currentPage }}/{{ allPagesCount }}",yE="Print",_E="Enter fullscreen",wE="Exit fullscreen",AE="This PDF is password protected",kE="Enter password",EE="Submit",SE="Incorrect password. Please try again.",xE="Search in document...",CE="No results found",TE="{{ current }} of {{ total }}",PE="Bookmarks",RE="Show bookmarks",LE="Hide bookmarks",NE="No bookmarks available",IE="Split view",ME="Sync scroll",DE={documentNavInfo:dE,noRendererMessage:uE,downloadButtonLabel:fE,brokenFile:pE,msgPluginRecipients:mE,msgPluginSender:gE,pdfPluginLoading:bE,pdfPluginPageNumber:vE,printButtonLabel:yE,fullscreenButtonLabel:_E,exitFullscreenButtonLabel:wE,passwordRequired:AE,passwordPlaceholder:kE,passwordSubmit:EE,passwordError:SE,searchPlaceholder:xE,searchNoResults:CE,searchMatchCount:TE,bookmarksSidebar:PE,showBookmarks:RE,hideBookmarks:LE,noBookmarks:NE,splitView:IE,syncScroll:ME},FE="Document {{ currentFileNo }} de {{ allFilesCount }}",OE="Aucun moteur de rendu pour le type de fichier : {{{ fileType }}}",BE="Télécharger le fichier",jE="Votre fichier est cassé. Veuillez le vérifier sur votre machine.",$E="Destinataires",zE="Expéditeur",HE="Chargement...",UE="Page {{ currentPage }}/{{ allPagesCount }}",WE="Print",VE="Enter fullscreen",qE="Exit fullscreen",GE="This PDF is password protected",XE="Enter password",YE="Submit",KE="Incorrect password. Please try again.",ZE="Search in document...",JE="No results found",QE="{{ current }} of {{ total }}",eS="Bookmarks",tS="Show bookmarks",sS="Hide bookmarks",nS="No bookmarks available",rS="Split view",iS="Sync scroll",aS={documentNavInfo:FE,noRendererMessage:OE,downloadButtonLabel:BE,brokenFile:jE,msgPluginRecipients:$E,msgPluginSender:zE,pdfPluginLoading:HE,pdfPluginPageNumber:UE,printButtonLabel:WE,fullscreenButtonLabel:VE,exitFullscreenButtonLabel:qE,passwordRequired:GE,passwordPlaceholder:XE,passwordSubmit:YE,passwordError:KE,searchPlaceholder:ZE,searchNoResults:JE,searchMatchCount:QE,bookmarksSidebar:eS,showBookmarks:tS,hideBookmarks:sS,noBookmarks:nS,splitView:rS,syncScroll:iS},oS="مستند {{ currentFileNo }} من {{ allFilesCount }}",lS="{{{ fileType }}} : لا يمكننا عرض هذا النوع من الملفات",cS="تحميل الملف",hS="الملف تالف، يرجى التحقق منه على جهازك الخاص.",dS="المستلمين",uS="المرسل",fS="تحميل ...",pS=" {{ allPagesCount }} \\ {{ currentPage }} صفحة ",mS="Print",gS="Enter fullscreen",bS="Exit fullscreen",vS="This PDF is password protected",yS="Enter password",_S="Submit",wS="Incorrect password. Please try again.",AS="Search in document...",kS="No results found",ES="{{ current }} of {{ total }}",SS="Bookmarks",xS="Show bookmarks",CS="Hide bookmarks",TS="No bookmarks available",PS="Split view",RS="Sync scroll",LS={documentNavInfo:oS,noRendererMessage:lS,downloadButtonLabel:cS,brokenFile:hS,msgPluginRecipients:dS,msgPluginSender:uS,pdfPluginLoading:fS,pdfPluginPageNumber:pS,printButtonLabel:mS,fullscreenButtonLabel:gS,exitFullscreenButtonLabel:bS,passwordRequired:vS,passwordPlaceholder:yS,passwordSubmit:_S,passwordError:wS,searchPlaceholder:AS,searchNoResults:kS,searchMatchCount:ES,bookmarksSidebar:SS,showBookmarks:xS,hideBookmarks:CS,noBookmarks:TS,splitView:PS,syncScroll:RS},NS="Dokument {{ currentFileNo }} od {{ allFilesCount }}",IS="Ne postoji pregledač za tip fajla: {{ fileType }}",MS="Preuzimanje fajla",DS="Vaš fajl nije dobar. Molimo Vas da probate da ga otvorite na vašem računaru.",FS="Primaoci",OS="Pošiljalac",BS="Učitavanje...",jS="Strana {{ currentPage }}/{{ allPagesCount }}",$S="Print",zS="Enter fullscreen",HS="Exit fullscreen",US="This PDF is password protected",WS="Enter password",VS="Submit",qS="Incorrect password. Please try again.",GS="Search in document...",XS="No results found",YS="{{ current }} of {{ total }}",KS="Bookmarks",ZS="Show bookmarks",JS="Hide bookmarks",QS="No bookmarks available",e1="Split view",t1="Sync scroll",s1={documentNavInfo:NS,noRendererMessage:IS,downloadButtonLabel:MS,brokenFile:DS,msgPluginRecipients:FS,msgPluginSender:OS,pdfPluginLoading:BS,pdfPluginPageNumber:jS,printButtonLabel:$S,fullscreenButtonLabel:zS,exitFullscreenButtonLabel:HS,passwordRequired:US,passwordPlaceholder:WS,passwordSubmit:VS,passwordError:qS,searchPlaceholder:GS,searchNoResults:XS,searchMatchCount:YS,bookmarksSidebar:KS,showBookmarks:ZS,hideBookmarks:JS,noBookmarks:QS,splitView:e1,syncScroll:t1},n1="Документ {{ currentFileNo }} od {{ allFilesCount }}",r1="Не постоји прегледач за тип фајла: {{ fileType }}",i1="Преузимање фајла",a1="Ваш фајл није добар. Молимо Вас да пробате да га отворите на вашем рачунару.",o1="Примаоци",l1="Пошиљалац",c1="Учитавање...",h1="Страна {{ currentPage }}/{{ allPagesCount }}",d1="Print",u1="Enter fullscreen",f1="Exit fullscreen",p1="This PDF is password protected",m1="Enter password",g1="Submit",b1="Incorrect password. Please try again.",v1="Search in document...",y1="No results found",_1="{{ current }} of {{ total }}",w1="Bookmarks",A1="Show bookmarks",k1="Hide bookmarks",E1="No bookmarks available",S1="Split view",x1="Sync scroll",C1={documentNavInfo:n1,noRendererMessage:r1,downloadButtonLabel:i1,brokenFile:a1,msgPluginRecipients:o1,msgPluginSender:l1,pdfPluginLoading:c1,pdfPluginPageNumber:h1,printButtonLabel:d1,fullscreenButtonLabel:u1,exitFullscreenButtonLabel:f1,passwordRequired:p1,passwordPlaceholder:m1,passwordSubmit:g1,passwordError:b1,searchPlaceholder:v1,searchNoResults:y1,searchMatchCount:_1,bookmarksSidebar:w1,showBookmarks:A1,hideBookmarks:k1,noBookmarks:E1,splitView:S1,syncScroll:x1},T1="ファイル {{ currentFileNo }} / {{ allFilesCount }}",P1="ファイルタイプに対応したレンダラーはありません: {{ fileType }}",R1="ダウンロード",L1="ファイルが壊れています。あなたのマシンでファイルを確認してください。",N1="受信者",I1="送信者",M1="ローティング中...",D1="ページ {{ currentPage }}/{{ allPagesCount }}",F1="Print",O1="Enter fullscreen",B1="Exit fullscreen",j1="This PDF is password protected",$1="Enter password",z1="Submit",H1="Incorrect password. Please try again.",U1="Search in document...",W1="No results found",V1="{{ current }} of {{ total }}",q1="Bookmarks",G1="Show bookmarks",X1="Hide bookmarks",Y1="No bookmarks available",K1="Split view",Z1="Sync scroll",J1={documentNavInfo:T1,noRendererMessage:P1,downloadButtonLabel:R1,brokenFile:L1,msgPluginRecipients:N1,msgPluginSender:I1,pdfPluginLoading:M1,pdfPluginPageNumber:D1,printButtonLabel:F1,fullscreenButtonLabel:O1,exitFullscreenButtonLabel:B1,passwordRequired:j1,passwordPlaceholder:$1,passwordSubmit:z1,passwordError:H1,searchPlaceholder:U1,searchNoResults:W1,searchMatchCount:V1,bookmarksSidebar:q1,showBookmarks:G1,hideBookmarks:X1,noBookmarks:Y1,splitView:K1,syncScroll:Z1},Q1="Документ {{ currentFileNo }} из {{ allFilesCount }}",ex="Данный тип файла не поддерживается рендером: {{{ fileType }}}",tx="Скачать файл",sx="Ваш файл сломан. Пожалуйста, проверьте его на своём комьютере.",nx="Получатели",rx="Отправитель",ix="Загрузка...",ax="Страница {{ currentPage }}/{{ allPagesCount }}",ox="Print",lx="Enter fullscreen",cx="Exit fullscreen",hx="This PDF is password protected",dx="Enter password",ux="Submit",fx="Incorrect password. Please try again.",px="Search in document...",mx="No results found",gx="{{ current }} of {{ total }}",bx="Bookmarks",vx="Show bookmarks",yx="Hide bookmarks",_x="No bookmarks available",wx="Split view",Ax="Sync scroll",kx={documentNavInfo:Q1,noRendererMessage:ex,downloadButtonLabel:tx,brokenFile:sx,msgPluginRecipients:nx,msgPluginSender:rx,pdfPluginLoading:ix,pdfPluginPageNumber:ax,printButtonLabel:ox,fullscreenButtonLabel:lx,exitFullscreenButtonLabel:cx,passwordRequired:hx,passwordPlaceholder:dx,passwordSubmit:ux,passwordError:fx,searchPlaceholder:px,searchNoResults:mx,searchMatchCount:gx,bookmarksSidebar:bx,showBookmarks:vx,hideBookmarks:yx,noBookmarks:_x,splitView:wx,syncScroll:Ax},Ex="Dokument {{ currentFileNo }} av {{ allFilesCount }}",Sx="Ingen renderare för filtypen: {{{ fileType }}}",xx="Ladda ner",Cx="Filen är trasig. Var vänlig kontrollera den på din maskin.",Tx="Mottagare",Px="Avsändare",Rx="Laddar...",Lx="Sida {{ currentPage }}/{{ allPagesCount }}",Nx="Print",Ix="Enter fullscreen",Mx="Exit fullscreen",Dx="This PDF is password protected",Fx="Enter password",Ox="Submit",Bx="Incorrect password. Please try again.",jx="Search in document...",$x="No results found",zx="{{ current }} of {{ total }}",Hx="Bookmarks",Ux="Show bookmarks",Wx="Hide bookmarks",Vx="No bookmarks available",qx="Split view",Gx="Sync scroll",Xx={documentNavInfo:Ex,noRendererMessage:Sx,downloadButtonLabel:xx,brokenFile:Cx,msgPluginRecipients:Tx,msgPluginSender:Px,pdfPluginLoading:Rx,pdfPluginPageNumber:Lx,printButtonLabel:Nx,fullscreenButtonLabel:Ix,exitFullscreenButtonLabel:Mx,passwordRequired:Dx,passwordPlaceholder:Fx,passwordSubmit:Ox,passwordError:Bx,searchPlaceholder:jx,searchNoResults:$x,searchMatchCount:zx,bookmarksSidebar:Hx,showBookmarks:Ux,hideBookmarks:Wx,noBookmarks:Vx,splitView:qx,syncScroll:Gx},Yx="Belge {{ currentFileNo }} / {{ allFilesCount }}",Kx="Dosya türü için görüntüleyici bulunamadı: {{{ fileType }}}",Zx="Dosyayı indir",Jx="Dosyanız bozuk. Lütfen kendi cihazınızda kontrol edin.",Qx="Alıcılar",eC="Gönderen",tC="Yükleniyor...",sC="Sayfa {{ currentPage }}/{{ allPagesCount }}",nC="Print",rC="Enter fullscreen",iC="Exit fullscreen",aC="This PDF is password protected",oC="Enter password",lC="Submit",cC="Incorrect password. Please try again.",hC="Search in document...",dC="No results found",uC="{{ current }} of {{ total }}",fC="Bookmarks",pC="Show bookmarks",mC="Hide bookmarks",gC="No bookmarks available",bC="Split view",vC="Sync scroll",yC={documentNavInfo:Yx,noRendererMessage:Kx,downloadButtonLabel:Zx,brokenFile:Jx,msgPluginRecipients:Qx,msgPluginSender:eC,pdfPluginLoading:tC,pdfPluginPageNumber:sC,printButtonLabel:nC,fullscreenButtonLabel:rC,exitFullscreenButtonLabel:iC,passwordRequired:aC,passwordPlaceholder:oC,passwordSubmit:lC,passwordError:cC,searchPlaceholder:hC,searchNoResults:dC,searchMatchCount:uC,bookmarksSidebar:fC,showBookmarks:pC,hideBookmarks:mC,noBookmarks:gC,splitView:bC,syncScroll:vC},Lp={en:vA,pl:UA,es:pk,de:jk,it:hE,pt:DE,fr:aS,ar:LS,sr:s1,sr_cyr:C1,ja:J1,ru:kx,se:Xx,tr:yC},ag="en",av="SET_ALL_DOCUMENTS",ov="SET_DOCUMENT_LOADING",lv="NEXT_DOCUMENT",cv="PREVIOUS_DOCUMENT",hv="UPDATE_CURRENT_DOCUMENT",dv="SET_RENDERER_RECT",uv="SET_MAIN_CONFIG",fv="ADD_DOCUMENTS_FROM_DROP",_C="SET_DRAG_STATE",pv="GO_TO_PAGE",wC=(i,e)=>({type:av,documents:i,initialActiveDocument:e}),hp=i=>({type:ov,value:i}),og=()=>({type:lv}),lg=()=>({type:cv}),Np=i=>({type:hv,document:i}),AC=i=>({type:dv,rect:i}),kC=i=>({type:uv,config:i}),EC=(i,e="append")=>({type:fv,documents:i,behavior:e}),Kg=i=>({type:pv,pageNumber:i}),zd={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[],language:ag,isDragging:!1,targetPage:void 0},SC=(i=zd,e)=>{switch(e.type){case av:{const{documents:t,initialActiveDocument:s}=e;return{...i,documents:t,currentDocument:s||t[0]||null,currentFileNo:s&&t.includes(s)?t.indexOf(s):zd.currentFileNo}}case ov:{const{value:t}=e;return{...i,documentLoading:t}}case lv:{if(i.currentFileNo>=i.documents.length-1)return i;const t=i.currentFileNo+1;return i.onDocumentChange&&i.onDocumentChange(i.documents[t]),{...i,currentFileNo:t,currentDocument:i.documents[t],documentLoading:!0}}case cv:{if(i.currentFileNo<=0)return i;const t=i.currentFileNo-1;return i.onDocumentChange&&i.onDocumentChange(i.documents[t]),{...i,currentFileNo:i.currentFileNo-1,currentDocument:i.documents[t],documentLoading:!0}}case hv:{const{document:t}=e;return{...i,currentDocument:t,currentFileNo:i.documents.findIndex(s=>s.uri===t.uri)}}case dv:{const{rect:t}=e;return{...i,rendererRect:t}}case uv:{const{config:t}=e;return{...i,config:t}}case fv:{const{documents:t,behavior:s}=e;if(t.length===0)return i;const n=s==="replace"?t:[...i.documents,...t],r=s==="replace"?0:i.documents.length;return{...i,documents:n,currentDocument:n[r],currentFileNo:r,documentLoading:!0}}case _C:{const{isDragging:t}=e;return{...i,isDragging:t}}case pv:{const{pageNumber:t}=e;return{...i,targetPage:t}}default:return i}},mv=({dragState:i,dropMessage:e="Drop files here"})=>i.isOverDropZone?k.jsx("div",{className:"rdv-dropzone-overlay",children:k.jsxs("div",{className:"rdv-dropzone-content",children:[k.jsx(xC,{}),k.jsx("span",{className:"rdv-dropzone-message",children:e})]})}):null,xC=()=>k.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),k.jsx("polyline",{points:"17 8 12 3 7 8"}),k.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]});mv.__docgenInfo={description:"",methods:[],displayName:"DropZoneOverlay",props:{dragState:{required:!0,tsType:{name:"IDragState"},description:""},dropMessage:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Drop files here"',computed:!1}}}};const CC=()=>{const[i,e]=j.useState({isDragging:!1,isOverDropZone:!1}),t=j.useRef(0),s=j.useCallback(l=>{l.preventDefault(),l.stopPropagation(),t.current++,l.dataTransfer.items&&l.dataTransfer.items.length>0&&e({isDragging:!0,isOverDropZone:!0})},[]),n=j.useCallback(l=>{l.preventDefault(),l.stopPropagation(),t.current--,t.current===0&&e({isDragging:!1,isOverDropZone:!1})},[]),r=j.useCallback(l=>{l.preventDefault(),l.stopPropagation()},[]),a=j.useCallback((l,h)=>{l.preventDefault(),l.stopPropagation(),t.current=0,e({isDragging:!1,isOverDropZone:!1});const d=Array.from(l.dataTransfer.files);d.length>0&&h(d)},[]),o=j.useCallback(()=>{t.current=0,e({isDragging:!1,isOverDropZone:!1})},[]);return{dragState:i,handleDragEnter:s,handleDragLeave:n,handleDragOver:r,handleDrop:a,resetDragState:o}},TC=["application/pdf","image/png","image/jpeg","image/gif","image/bmp","image/webp","image/tiff","text/plain","text/html","text/csv","video/mp4","video/webm"],PC=50*1024*1024,RC=i=>{const e=(i==null?void 0:i.acceptedFileTypes)||TC,t=(i==null?void 0:i.maxFileSize)||PC,s=j.useCallback(l=>{var u;const h=l.type.toLowerCase(),d=((u=l.name.split(".").pop())==null?void 0:u.toLowerCase())||"";return e.some(f=>{if(f.includes("*")){const[p]=f.split("/");return h.startsWith(p)}return f.startsWith(".")?`.${d}`===f.toLowerCase():h===f.toLowerCase()||d===f.toLowerCase()})},[e]),n=j.useCallback(l=>l.size<=t,[t]),r=j.useCallback(l=>new Promise((h,d)=>{const u=new FileReader;u.onload=()=>{const f=u.result;h({uri:URL.createObjectURL(l),fileType:l.type||LC(l.name),fileName:l.name,fileData:f})},u.onerror=()=>{d(new Error(`Failed to read file: ${l.name}`))},u.readAsDataURL(l)}),[]),a=j.useCallback(async l=>{const h=l.filter(u=>s(u)&&n(u));return(await Promise.all(h.map(r))).map(u=>({uri:u.uri,fileType:u.fileType,fileName:u.fileName,fileData:u.fileData}))},[s,n,r]),o=j.useCallback(l=>{const h=[],d=[],u=[];return l.forEach(f=>{s(f)?n(f)?h.push(f):u.push(f):d.push(f)}),{valid:h,invalidType:d,invalidSize:u}},[s,n]);return{processFiles:a,validateFiles:o,isFileTypeAccepted:s,isFileSizeValid:n}};function LC(i){var s;const e=((s=i.split(".").pop())==null?void 0:s.toLowerCase())||"";return{pdf:"application/pdf",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",bmp:"image/bmp",webp:"image/webp",tiff:"image/tiff",tif:"image/tiff",txt:"text/plain",html:"text/html",htm:"text/html",csv:"text/csv",mp4:"video/mp4",webm:"video/webm"}[e]||"application/octet-stream"}const Gn=j.createContext({state:zd,dispatch:()=>null}),gv=j.forwardRef((i,e)=>{const{children:t,documents:s,config:n,pluginRenderers:r,prefetchMethod:a,requestHeaders:o,initialActiveDocument:l,language:h,activeDocument:d,onDocumentChange:u,dragDropConfig:f,providerRef:p,jumpToPage:m}=i,{processFiles:g,validateFiles:v}=RC(f),[b,y]=j.useReducer(SC,{...zd,documents:s||[],currentDocument:s&&s.length?l||s[0]:void 0,config:n,pluginRenderers:r,prefetchMethod:a,requestHeaders:o,currentFileNo:l?s.findIndex(R=>R===l)??0:0,language:h&&Lp[h]?h:ag,activeDocument:d,onDocumentChange:u});j.useEffect(()=>{y(wC(s,l)),n&&y(kC(n))},[s,n,l]),j.useEffect(()=>{d&&y(Np(d))},[d]),j.useEffect(()=>{m!==void 0&&m>0&&y(Kg(m))},[m]);const E=j.useCallback(R=>{const M=(f==null?void 0:f.dropBehavior)||"append";y(EC(R,M))},[y,f]),C=j.useCallback(async R=>{const{valid:M,invalidType:D,invalidSize:x}=v(R);if(D.length>0&&(f!=null&&f.onDropRejected)&&f.onDropRejected(D,"file-type"),x.length>0&&(f!=null&&f.onDropRejected)&&f.onDropRejected(x,"file-size"),M.length>0){f!=null&&f.onDrop&&f.onDrop(M);const S=await g(M);S.length>0&&E(S)}},[v,g,E,f]);return j.useImperativeHandle(e,()=>({prev(){y(lg())},next(){y(og())},goToPage(R){y(Kg(R))}}),[y]),j.useEffect(()=>{p&&(p.current={handleFilesDropped:C})},[p,C]),k.jsx(Gn.Provider,{value:{state:b,dispatch:y,addDroppedDocuments:E},children:t})});gv.__docgenInfo={description:"",methods:[{name:"prev",docblock:null,modifiers:[],params:[],returns:null},{name:"next",docblock:null,modifiers:[],params:[],returns:null},{name:"goToPage",docblock:null,modifiers:[],params:[{name:"pageNumber",optional:!1,type:{name:"number"}}],returns:null}],displayName:"DocViewerProvider"};const bv={display:"flex",justifyContent:"center",alignItems:"center",width:35,height:35,padding:0,margin:0,border:0,outline:"none",cursor:"pointer",textDecoration:"none",borderRadius:35,boxSizing:"border-box"},Ip=({className:i="",style:e,...t})=>k.jsx("button",{className:`rdv-btn rdv-btn-secondary ${i}`,style:{...bv,...e},...t}),vv=({className:i="",style:e,...t})=>k.jsx("a",{className:`rdv-link-btn ${i}`,style:{...bv,...e},...t});Ip.__docgenInfo={description:"",methods:[],displayName:"ButtonSecondary",props:{className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};vv.__docgenInfo={description:"",methods:[],displayName:"LinkButton",props:{className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};const yv=i=>k.jsx(wv,{...i}),_v=i=>k.jsx(wv,{...i,reverse:!0}),wv=({color:i,size:e,reverse:t})=>k.jsx("svg",{width:e||"100%",height:e||"100%",style:{transform:`${t?"rotate(180deg)":""}`},id:"arrow_left",version:"1.1",viewBox:"0 0 32 32",xmlSpace:"preserve",children:k.jsx("path",{clipRule:"evenodd",d:"M31.106,15H3.278l8.325-8.293  c0.391-0.391,0.391-1.024,0-1.414c-0.391-0.391-1.024-0.391-1.414,0l-9.9,9.899c-0.385,0.385-0.385,1.029,0,1.414l9.9,9.9  c0.391,0.391,1.024,0.391,1.414,0c0.391-0.391,0.391-1.024,0-1.414L3.278,17h27.828c0.552,0,1-0.448,1-1  C32.106,15.448,31.658,15,31.106,15z",fill:i||"#aaa",fillRule:"evenodd",id:"Arrow_Back"})}),Av=i=>{const{color:e,size:t}=i;return k.jsx("svg",{width:t||"100%",height:t||"100%",version:"1.1",id:"Icons",viewBox:"0 0 32 32",xmlSpace:"preserve",style:{alignSelf:"center",justifySelf:"center"},children:k.jsxs("g",{children:[k.jsx("path",{fill:e||"#aaa",d:"M16,2c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1V3C17,2.4,16.6,2,16,2z"}),k.jsx("path",{fill:e||"#aaa",d:`M7.5,6.1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.5,6.1
		z`}),k.jsx("path",{fill:e||"#aaa",d:"M9,16c0-0.6-0.4-1-1-1H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5C8.6,17,9,16.6,9,16z"}),k.jsx("path",{fill:e||"#aaa",d:`M9.6,20.9l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4
		S10,20.6,9.6,20.9z`}),k.jsx("path",{fill:e||"#aaa",d:"M16,23c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1v-5C17,23.4,16.6,23,16,23z"}),k.jsx("path",{fill:e||"#aaa",d:`M22.4,20.9c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4
		L22.4,20.9z`}),k.jsx("path",{fill:e||"#aaa",d:"M29,15h-5c-0.6,0-1,0.4-1,1s0.4,1,1,1h5c0.6,0,1-0.4,1-1S29.6,15,29,15z"}),k.jsx("path",{fill:e||"#aaa",d:`M21.7,11.3c0.3,0,0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4
		C21.1,11.2,21.4,11.3,21.7,11.3z`})]})})};yv.__docgenInfo={description:"",methods:[],displayName:"PrevDocIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};_v.__docgenInfo={description:"",methods:[],displayName:"NextDocIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};Av.__docgenInfo={description:"",methods:[],displayName:"LoadingIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var NC=Object.prototype.toString,$o=Array.isArray||function(e){return NC.call(e)==="[object Array]"};function cg(i){return typeof i=="function"}function IC(i){return $o(i)?"array":typeof i}function dp(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Zg(i,e){return i!=null&&typeof i=="object"&&e in i}function MC(i,e){return i!=null&&typeof i!="object"&&i.hasOwnProperty&&i.hasOwnProperty(e)}var DC=RegExp.prototype.test;function FC(i,e){return DC.call(i,e)}var OC=/\S/;function BC(i){return!FC(OC,i)}var jC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function $C(i){return String(i).replace(/[&<>"'`=\/]/g,function(t){return jC[t]})}var zC=/\s*/,HC=/\s+/,Jg=/\s*=/,UC=/\s*\}/,WC=/#|\^|\/|>|\{|&|=|!/;function VC(i,e){if(!i)return[];var t=!1,s=[],n=[],r=[],a=!1,o=!1,l="",h=0;function d(){if(a&&!o)for(;r.length;)delete n[r.pop()];else r=[];a=!1,o=!1}var u,f,p;function m(x){if(typeof x=="string"&&(x=x.split(HC,2)),!$o(x)||x.length!==2)throw new Error("Invalid tags: "+x);u=new RegExp(dp(x[0])+"\\s*"),f=new RegExp("\\s*"+dp(x[1])),p=new RegExp("\\s*"+dp("}"+x[1]))}m(e||ls.tags);for(var g=new zh(i),v,b,y,E,C,R;!g.eos();){if(v=g.pos,y=g.scanUntil(u),y)for(var M=0,D=y.length;M<D;++M)E=y.charAt(M),BC(E)?(r.push(n.length),l+=E):(o=!0,t=!0,l+=" "),n.push(["text",E,v,v+1]),v+=1,E===`
`&&(d(),l="",h=0,t=!1);if(!g.scan(u))break;if(a=!0,b=g.scan(WC)||"name",g.scan(zC),b==="="?(y=g.scanUntil(Jg),g.scan(Jg),g.scanUntil(f)):b==="{"?(y=g.scanUntil(p),g.scan(UC),g.scanUntil(f),b="&"):y=g.scanUntil(f),!g.scan(f))throw new Error("Unclosed tag at "+g.pos);if(b==">"?C=[b,y,v,g.pos,l,h,t]:C=[b,y,v,g.pos],h++,n.push(C),b==="#"||b==="^")s.push(C);else if(b==="/"){if(R=s.pop(),!R)throw new Error('Unopened section "'+y+'" at '+v);if(R[1]!==y)throw new Error('Unclosed section "'+R[1]+'" at '+v)}else b==="name"||b==="{"||b==="&"?o=!0:b==="="&&m(y)}if(d(),R=s.pop(),R)throw new Error('Unclosed section "'+R[1]+'" at '+g.pos);return GC(qC(n))}function qC(i){for(var e=[],t,s,n=0,r=i.length;n<r;++n)t=i[n],t&&(t[0]==="text"&&s&&s[0]==="text"?(s[1]+=t[1],s[3]=t[3]):(e.push(t),s=t));return e}function GC(i){for(var e=[],t=e,s=[],n,r,a=0,o=i.length;a<o;++a)switch(n=i[a],n[0]){case"#":case"^":t.push(n),s.push(n),t=n[4]=[];break;case"/":r=s.pop(),r[5]=n[2],t=s.length>0?s[s.length-1][4]:e;break;default:t.push(n)}return e}function zh(i){this.string=i,this.tail=i,this.pos=0}zh.prototype.eos=function(){return this.tail===""};zh.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var s=t[0];return this.tail=this.tail.substring(s.length),this.pos+=s.length,s};zh.prototype.scanUntil=function(e){var t=this.tail.search(e),s;switch(t){case-1:s=this.tail,this.tail="";break;case 0:s="";break;default:s=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=s.length,s};function Bo(i,e){this.view=i,this.cache={".":this.view},this.parent=e}Bo.prototype.push=function(e){return new Bo(e,this)};Bo.prototype.lookup=function(e){var t=this.cache,s;if(t.hasOwnProperty(e))s=t[e];else{for(var n=this,r,a,o,l=!1;n;){if(e.indexOf(".")>0)for(r=n.view,a=e.split("."),o=0;r!=null&&o<a.length;)o===a.length-1&&(l=Zg(r,a[o])||MC(r,a[o])),r=r[a[o++]];else r=n.view[e],l=Zg(n.view,e);if(l){s=r;break}n=n.parent}t[e]=s}return cg(s)&&(s=s.call(this.view)),s};function zt(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}zt.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};zt.prototype.parse=function(e,t){var s=this.templateCache,n=e+":"+(t||ls.tags).join(":"),r=typeof s<"u",a=r?s.get(n):void 0;return a==null&&(a=VC(e,t),r&&s.set(n,a)),a};zt.prototype.render=function(e,t,s,n){var r=this.getConfigTags(n),a=this.parse(e,r),o=t instanceof Bo?t:new Bo(t,void 0);return this.renderTokens(a,o,s,e,n)};zt.prototype.renderTokens=function(e,t,s,n,r){for(var a="",o,l,h,d=0,u=e.length;d<u;++d)h=void 0,o=e[d],l=o[0],l==="#"?h=this.renderSection(o,t,s,n,r):l==="^"?h=this.renderInverted(o,t,s,n,r):l===">"?h=this.renderPartial(o,t,s,r):l==="&"?h=this.unescapedValue(o,t):l==="name"?h=this.escapedValue(o,t,r):l==="text"&&(h=this.rawValue(o)),h!==void 0&&(a+=h);return a};zt.prototype.renderSection=function(e,t,s,n,r){var a=this,o="",l=t.lookup(e[1]);function h(f){return a.render(f,t,s,r)}if(l){if($o(l))for(var d=0,u=l.length;d<u;++d)o+=this.renderTokens(e[4],t.push(l[d]),s,n,r);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")o+=this.renderTokens(e[4],t.push(l),s,n,r);else if(cg(l)){if(typeof n!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(t.view,n.slice(e[3],e[5]),h),l!=null&&(o+=l)}else o+=this.renderTokens(e[4],t,s,n,r);return o}};zt.prototype.renderInverted=function(e,t,s,n,r){var a=t.lookup(e[1]);if(!a||$o(a)&&a.length===0)return this.renderTokens(e[4],t,s,n,r)};zt.prototype.indentPartial=function(e,t,s){for(var n=t.replace(/[^ \t]/g,""),r=e.split(`
`),a=0;a<r.length;a++)r[a].length&&(a>0||!s)&&(r[a]=n+r[a]);return r.join(`
`)};zt.prototype.renderPartial=function(e,t,s,n){if(s){var r=this.getConfigTags(n),a=cg(s)?s(e[1]):s[e[1]];if(a!=null){var o=e[6],l=e[5],h=e[4],d=a;l==0&&h&&(d=this.indentPartial(a,h,o));var u=this.parse(d,r);return this.renderTokens(u,t,s,d,n)}}};zt.prototype.unescapedValue=function(e,t){var s=t.lookup(e[1]);if(s!=null)return s};zt.prototype.escapedValue=function(e,t,s){var n=this.getConfigEscape(s)||ls.escape,r=t.lookup(e[1]);if(r!=null)return typeof r=="number"&&n===ls.escape?String(r):n(r)};zt.prototype.rawValue=function(e){return e[1]};zt.prototype.getConfigTags=function(e){return $o(e)?e:e&&typeof e=="object"?e.tags:void 0};zt.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!$o(e))return e.escape};var ls={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(i){bl.templateCache=i},get templateCache(){return bl.templateCache}},bl=new zt;ls.clearCache=function(){return bl.clearCache()};ls.parse=function(e,t){return bl.parse(e,t)};ls.render=function(e,t,s,n){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+IC(e)+'" was given as the first argument for mustache#render(template, view, partials)');return bl.render(e,t,s,n)};ls.escape=$C;ls.Scanner=zh;ls.Context=Bo;ls.Writer=zt;const on=()=>{const{state:{language:i}}=j.useContext(Gn),e=Lp[ag];return{t:j.useCallback((s,n)=>{const r=Lp[i];return r[s]?ls.render(r[s],n):e[s]?ls.render(e[s],n):s},[i,e])}},kv=()=>{const{state:{currentDocument:i,currentFileNo:e,documents:t},dispatch:s}=j.useContext(Gn),{t:n}=on();if(t.length<=1||!i)return null;let r=i.uri||"";const a=r==null?void 0:r.split("/");return a.length&&(r=a[a.length-1]),k.jsxs("div",{id:"doc-nav",className:"rdv-doc-nav",children:[k.jsx("p",{id:"doc-nav-info",children:n("documentNavInfo",{currentFileNo:e+1,allFilesCount:t.length})}),k.jsx(Ip,{id:"doc-nav-prev",className:"rdv-doc-nav-btn-prev",onClick:()=>s(lg()),disabled:e===0,children:k.jsx(yv,{color:"#fff",size:"18"})}),k.jsx(Ip,{id:"doc-nav-next",className:"rdv-doc-nav-btn-next",onClick:()=>s(og()),disabled:e>=t.length-1,children:k.jsx(_v,{color:"#fff",size:"18"})})]})};kv.__docgenInfo={description:"",methods:[],displayName:"DocumentNav"};const Ev=(i,e)=>{var s;if(!i)return"";let t="";if(i.fileName)t=i.fileName;else{t=i.uri||"",t=decodeURI(t),e||(t=(s=t==null?void 0:t.split("?"))==null?void 0:s[0]);const n=t==null?void 0:t.split("/");n.length&&(t=n[n.length-1])}return t},Sv=()=>{var s,n;const{state:{config:i,currentDocument:e}}=j.useContext(Gn);if(!e||(s=i==null?void 0:i.header)!=null&&s.disableFileName)return null;const t=Ev(e,((n=i==null?void 0:i.header)==null?void 0:n.retainURLParams)||!1);return k.jsx("div",{id:"file-name","data-testid":"file-name",className:"rdv-file-name",children:t})};Sv.__docgenInfo={description:"",methods:[],displayName:"FileName"};const xv=()=>{var n,r,a;const{state:i,dispatch:e}=j.useContext(Gn),{config:t}=i;if((n=t==null?void 0:t.header)!=null&&n.disableHeader)return null;const s=(a=(r=t==null?void 0:t.header)==null?void 0:r.overrideComponent)==null?void 0:a.call(r,i,()=>e(lg()),()=>e(og()));return s||k.jsxs("div",{id:"header-bar","data-testid":"header-bar",className:"rdv-header-bar",children:[k.jsx(Sv,{}),k.jsx(kv,{})]})};xv.__docgenInfo={description:"",methods:[],displayName:"HeaderBar"};const hg=({documentURI:i,signal:e,fileLoaderComplete:t,readerTypeFunction:s,headers:n})=>fetch(i,{signal:e,headers:n}).then(async r=>{const a=await r.blob(),o=new FileReader;switch(o.addEventListener("loadend",()=>t(o)),s){case"arrayBuffer":o.readAsArrayBuffer(a);break;case"binaryString":o.readAsBinaryString(a);break;case"dataURL":o.readAsDataURL(a);break;case"text":o.readAsText(a);break}}).catch(r=>r),Cv=i=>hg({...i,readerTypeFunction:"arrayBuffer"}),Tv=i=>hg({...i,readerTypeFunction:"dataURL"}),Df=i=>hg({...i,readerTypeFunction:"text"}),XC=Tv,YC=()=>{const{state:{currentDocument:i,pluginRenderers:e}}=j.useContext(Gn),[t,s]=j.useState();return j.useEffect(()=>{if(!i)return;if(!i.fileType){s(void 0);return}const n=[];e==null||e.forEach(a=>{i.fileType!==void 0&&a.fileTypes.indexOf(i.fileType)>=0&&n.push(a)});const[r]=n.sort((a,o)=>o.weight-a.weight);s(r&&r!==void 0?()=>r:null)},[i,e]),{CurrentRenderer:t}},KC=()=>{const{state:i,dispatch:e}=j.useContext(Gn),{currentFileNo:t,currentDocument:s,prefetchMethod:n}=i,{CurrentRenderer:r}=YC(),a=(s==null?void 0:s.uri)||"";return j.useEffect(()=>{if(!s||s.fileType!==void 0)return;const o=new AbortController,{signal:l}=o;return fetch(a,{method:n||a.startsWith("blob:")?"GET":"HEAD",signal:l,headers:i==null?void 0:i.requestHeaders}).then(h=>{const d=h.headers.get("content-type"),u=(d==null?void 0:d.split(";"))||[],f=u.length?u[0]:void 0;e(Np({...s,fileType:f||void 0}))}).catch(h=>{if((h==null?void 0:h.name)!=="AbortError")throw h}),()=>{o.abort()}},[t,a,s]),j.useEffect(()=>{var u;if(!s||r===void 0)return;const o=new AbortController,{signal:l}=o,d={documentURI:a,signal:l,fileLoaderComplete:f=>{if(!s||!f){e(hp(!1));return}const p={...s};f.result!==null&&(p.fileData=f.result),e(Np(p)),e(hp(!1))},headers:i==null?void 0:i.requestHeaders};return r===null?e(hp(!1)):r.fileLoader!==void 0?(u=r.fileLoader)==null||u.call(r,d):XC(d),()=>{o.abort()}},[r,t]),{state:i,dispatch:e,CurrentRenderer:r}},ZC=()=>{const[i,e]=j.useState({width:void 0,height:void 0});return j.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),i},Mp=({children:i})=>{var r,a;const{state:e}=j.useContext(Gn),{config:t}=e,[s,n]=j.useState(((r=t==null?void 0:t.loadingRenderer)==null?void 0:r.showLoadingTimeout)===!1);return j.useEffect(()=>{var o;setTimeout(()=>{n(!0)},typeof((o=t==null?void 0:t.loadingRenderer)==null?void 0:o.showLoadingTimeout)=="number"?t.loadingRenderer.showLoadingTimeout:500)},[(a=t==null?void 0:t.loadingRenderer)==null?void 0:a.showLoadingTimeout]),s?k.jsx(k.Fragment,{children:i}):null};Mp.__docgenInfo={description:"",methods:[],displayName:"LoadingTimeout"};const Qi=1.8,ea="#4b5563",JC=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ea,strokeWidth:Qi,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),k.jsx("polyline",{points:"7 10 12 15 17 10"}),k.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),QC=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ea,strokeWidth:Qi,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),k.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),k.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),eT=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ea,strokeWidth:Qi,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("circle",{cx:"11",cy:"11",r:"8"}),k.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),k.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),k.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),tT=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ea,strokeWidth:Qi,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("circle",{cx:"11",cy:"11",r:"8"}),k.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),k.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),sT=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ea,strokeWidth:Qi,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M15 3h6v6"}),k.jsx("path",{d:"M9 21H3v-6"}),k.jsx("path",{d:"M21 3l-7 7"}),k.jsx("path",{d:"M3 21l7-7"})]}),nT=({color:i,size:e})=>k.jsx("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ea,strokeWidth:Qi,strokeLinecap:"round",strokeLinejoin:"round",children:k.jsx("polyline",{points:"15 18 9 12 15 6"})}),rT=({color:i,size:e})=>k.jsx("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ea,strokeWidth:Qi,strokeLinecap:"round",strokeLinejoin:"round",children:k.jsx("polyline",{points:"9 18 15 12 9 6"})}),iT=.25,aT=3,Hd=1,Pv=({zoomLevel:i,onZoomIn:e,onZoomOut:t,onZoomReset:s,numPages:n,currentPage:r,onPageChange:a})=>{var b;const{state:o}=j.useContext(Gn),{currentDocument:l}=o,[h,d]=j.useState(String(r)),u=j.useCallback(()=>{var C;if(!l)return;const y=l.fileData||l.uri,E=l.fileName||((C=l.uri)==null?void 0:C.split("/").pop())||"download";y&&fetch(y).then(R=>R.blob()).then(R=>{const M=URL.createObjectURL(R),D=document.createElement("a");D.href=M,D.download=E,D.click(),URL.revokeObjectURL(M)}).catch(()=>{const R=document.createElement("a");R.href=y,R.download=E,R.click()})},[l]),f=j.useCallback(()=>{window.print()},[]),p=j.useCallback(y=>{d(y.target.value)},[]),m=j.useCallback(()=>{const y=parseInt(h,10);!isNaN(y)&&y>=1&&y<=n?a(y):d(String(r))},[h,n,r,a]),g=j.useCallback(y=>{y.key==="Enter"&&m()},[m]),v=Math.round(i*100);return r!==parseInt(h,10)&&((b=document.activeElement)==null?void 0:b.className)!=="rdv-toolbar-page-input"&&d(String(r)),k.jsx("div",{className:"rdv-pdf-controls",children:k.jsxs("div",{className:"rdv-toolbar-inner",children:[n>1&&k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"rdv-toolbar-group",children:[k.jsx("button",{className:"rdv-toolbar-btn",title:"Previous page",onMouseDown:()=>a(r-1),disabled:r<=1,children:k.jsx(nT,{size:"16"})}),k.jsxs("div",{className:"rdv-toolbar-page-info",children:[k.jsx("input",{className:"rdv-toolbar-page-input",type:"text",value:h,onChange:p,onBlur:m,onKeyDown:g}),k.jsxs("span",{className:"rdv-toolbar-page-total",children:["of ",n]})]}),k.jsx("button",{className:"rdv-toolbar-btn",title:"Next page",onMouseDown:()=>a(r+1),disabled:r>=n,children:k.jsx(rT,{size:"16"})})]}),k.jsx("div",{className:"rdv-toolbar-divider"})]}),k.jsxs("div",{className:"rdv-toolbar-group",children:[k.jsx("button",{className:"rdv-toolbar-btn",title:"Download",onMouseDown:u,children:k.jsx(JC,{size:"16"})}),k.jsx("button",{className:"rdv-toolbar-btn",title:"Print",onMouseDown:f,children:k.jsx(QC,{size:"16"})})]}),k.jsx("div",{className:"rdv-toolbar-divider"}),k.jsxs("div",{className:"rdv-toolbar-group",children:[k.jsx("button",{className:"rdv-toolbar-btn",title:"Zoom out",onMouseDown:t,disabled:i<=iT,children:k.jsx(tT,{size:"16"})}),k.jsxs("span",{className:"rdv-toolbar-zoom-label",children:[v,"%"]}),k.jsx("button",{className:"rdv-toolbar-btn",title:"Zoom in",onMouseDown:e,disabled:i>=aT,children:k.jsx(eT,{size:"16"})}),k.jsx("button",{className:"rdv-toolbar-btn",title:"Reset zoom",onMouseDown:s,disabled:i===Hd,children:k.jsx(sT,{size:"16"})})]})]})})};Pv.__docgenInfo={description:"",methods:[],displayName:"CommonToolbar",props:{zoomLevel:{required:!0,tsType:{name:"number"},description:""},onZoomIn:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onZoomOut:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onZoomReset:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},numPages:{required:!0,tsType:{name:"number"},description:""},currentPage:{required:!0,tsType:{name:"number"},description:""},onPageChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(page: number) => void",signature:{arguments:[{type:{name:"number"},name:"page"}],return:{name:"void"}}},description:""}}};const Qg=.1,oT=.25,lT=3,cT=["section.rdv-docx",".react-pdf__Page"].join(", ");function hT(i){return Array.from(i.querySelectorAll(cT))}const dT=({documents:i,documentLoading:e,config:t,currentDocument:s,fileName:n,CurrentRenderer:r,state:a,zoomLevel:o,onZoomIn:l,onZoomOut:h,onZoomReset:d,numPages:u,currentPage:f,onPageChange:p,contentRef:m,t:g})=>{var v,b,y;if(i.length)if(e){if(t&&((v=t==null?void 0:t.loadingRenderer)!=null&&v.overrideComponent)){const E=t.loadingRenderer.overrideComponent;return k.jsx(Mp,{children:k.jsx(E,{document:s,fileName:n})})}return k.jsx(Mp,{children:k.jsx("div",{id:"loading-renderer","data-testid":"loading-renderer",className:"rdv-loading-container",children:k.jsx("div",{className:"rdv-loading-icon",children:k.jsx(Av,{color:"#444",size:40})})})})}else{if(r)return((b=r.fileTypes)==null?void 0:b.some(C=>C==="pdf"||C==="application/pdf"))?k.jsx(r,{mainState:a}):k.jsxs(k.Fragment,{children:[k.jsx(Pv,{zoomLevel:o,onZoomIn:l,onZoomOut:h,onZoomReset:d,numPages:u,currentPage:f,onPageChange:p}),k.jsx("div",{ref:m,className:"rdv-common-content-wrapper",style:{transformOrigin:"top center",transform:o===Hd?void 0:`scale(${o})`},children:k.jsx(r,{mainState:a})})]});if(r===void 0)return null;if(t&&((y=t==null?void 0:t.noRenderer)!=null&&y.overrideComponent)){const E=t.noRenderer.overrideComponent;return k.jsx(E,{document:s,fileName:n})}return k.jsxs("div",{id:"no-renderer","data-testid":"no-renderer",children:[g("noRendererMessage",{fileType:(s==null?void 0:s.fileType)??""}),k.jsx(vv,{id:"no-renderer-download",className:"rdv-download-btn",href:s==null?void 0:s.uri,download:s==null?void 0:s.uri,children:g("downloadButtonLabel")})]})}else return k.jsx("div",{id:"no-documents"})},Rv=()=>{var D;const{state:i,dispatch:e,CurrentRenderer:t}=KC(),{documents:s,documentLoading:n,currentDocument:r,config:a}=i,o=ZC(),{t:l}=on(),[h,d]=j.useState(Hd),[u,f]=j.useState(0),[p,m]=j.useState(1),g=j.useRef(null),v=j.useRef([]),b=j.useCallback(x=>{x&&e(AC(x==null?void 0:x.getBoundingClientRect()))},[o,e]);j.useEffect(()=>{const x=g.current;if(!x)return;const S=()=>{const z=hT(x);v.current=z,z.length>1?f(z.length):f(0)};S();const F=new MutationObserver(()=>{requestAnimationFrame(S)});return F.observe(x,{childList:!0,subtree:!0}),()=>F.disconnect()},[r]),j.useEffect(()=>{const x=g.current;if(!x||u<=1)return;const S=()=>{const F=v.current;if(!F.length)return;const z=x.getBoundingClientRect(),L=z.top+z.height*.3;let B=1,w=1/0;for(let G=0;G<F.length;G++){const re=F[G].getBoundingClientRect(),$=Math.abs(re.top-L);$<w&&(w=$,B=G+1)}m(B)};return x.addEventListener("scroll",S,{passive:!0}),()=>x.removeEventListener("scroll",S)},[u]);const y=j.useCallback(x=>{const S=v.current;if(x<1||x>S.length)return;const F=S[x-1];F&&(F.scrollIntoView({behavior:"smooth",block:"start"}),m(x))},[]),E=j.useCallback(()=>{d(x=>Math.min(x+Qg,lT))},[]),C=j.useCallback(()=>{d(x=>Math.max(x-Qg,oT))},[]),R=j.useCallback(()=>{d(Hd)},[]),M=Ev(r,((D=a==null?void 0:a.header)==null?void 0:D.retainURLParams)||!1);return k.jsx("div",{id:"proxy-renderer","data-testid":"proxy-renderer",ref:b,children:k.jsx(dT,{state:i,documents:s,documentLoading:n,config:a,currentDocument:r,fileName:M,CurrentRenderer:t,zoomLevel:h,onZoomIn:E,onZoomOut:C,onZoomReset:R,numPages:u,currentPage:p,onPageChange:y,contentRef:g,t:l})})};Rv.__docgenInfo={description:"",methods:[],displayName:"ProxyRenderer"};const eb={primary:"#fff",secondary:"#000",tertiary:"#ffffff99",textPrimary:"#000",textSecondary:"#fff",textTertiary:"#00000044",disableThemeScrollbar:!1},rn=({mainState:{currentDocument:i},children:e})=>i?k.jsx("div",{id:"image-renderer",className:"rdv-image-container",children:e||k.jsx("img",{id:"image-img",className:"rdv-image-img",src:i.fileData})}):null;rn.fileTypes=[];rn.weight=0;rn.__docgenInfo={description:"",methods:[],displayName:"ImageProxyRenderer"};const Ff=i=>k.jsx(rn,{...i});Ff.fileTypes=["bmp","image/bmp"];Ff.weight=0;Ff.__docgenInfo={description:"",methods:[],displayName:"BMPRenderer"};var Lv={exports:{}};(function(i,e){(function(t){i.exports=t()})(function(){return function t(s,n,r){function a(h,d){if(!n[h]){if(!s[h]){var u=typeof nd=="function"&&nd;if(!d&&u)return u(h,!0);if(o)return o(h,!0);var f=new Error("Cannot find module '"+h+"'");throw f.code="MODULE_NOT_FOUND",f}var p=n[h]={exports:{}};s[h][0].call(p.exports,function(m){var g=s[h][1][m];return a(g||m)},p,p.exports,t,s,n,r)}return n[h].exports}for(var o=typeof nd=="function"&&nd,l=0;l<r.length;l++)a(r[l]);return a}({1:[function(t,s,n){var r=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(l){for(var h,d,u,f,p,m,g,v=[],b=0,y=l.length,E=y,C=r.getTypeOf(l)!=="string";b<l.length;)E=y-b,u=C?(h=l[b++],d=b<y?l[b++]:0,b<y?l[b++]:0):(h=l.charCodeAt(b++),d=b<y?l.charCodeAt(b++):0,b<y?l.charCodeAt(b++):0),f=h>>2,p=(3&h)<<4|d>>4,m=1<E?(15&d)<<2|u>>6:64,g=2<E?63&u:64,v.push(o.charAt(f)+o.charAt(p)+o.charAt(m)+o.charAt(g));return v.join("")},n.decode=function(l){var h,d,u,f,p,m,g=0,v=0,b="data:";if(l.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var y,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(y=a.uint8array?new Uint8Array(0|E):new Array(0|E);g<l.length;)h=o.indexOf(l.charAt(g++))<<2|(f=o.indexOf(l.charAt(g++)))>>4,d=(15&f)<<4|(p=o.indexOf(l.charAt(g++)))>>2,u=(3&p)<<6|(m=o.indexOf(l.charAt(g++))),y[v++]=h,p!==64&&(y[v++]=d),m!==64&&(y[v++]=u);return y}},{"./support":30,"./utils":32}],2:[function(t,s,n){var r=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function h(d,u,f,p,m){this.compressedSize=d,this.uncompressedSize=u,this.crc32=f,this.compression=p,this.compressedContent=m}h.prototype={getContentWorker:function(){var d=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),u=this;return d.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(d,u,f){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(u.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",u)},s.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,s,n){var r=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,s,n){var r=t("./utils"),a=function(){for(var o,l=[],h=0;h<256;h++){o=h;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[h]=o}return l}();s.exports=function(o,l){return o!==void 0&&o.length?r.getTypeOf(o)!=="string"?function(h,d,u,f){var p=a,m=f+u;h^=-1;for(var g=f;g<m;g++)h=h>>>8^p[255&(h^d[g])];return-1^h}(0|l,o,o.length,0):function(h,d,u,f){var p=a,m=f+u;h^=-1;for(var g=f;g<m;g++)h=h>>>8^p[255&(h^d.charCodeAt(g))];return-1^h}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(t,s,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,s,n){var r=null;r=typeof Promise<"u"?Promise:t("lie"),s.exports={Promise:r}},{lie:37}],7:[function(t,s,n){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),h=r?"uint8array":"array";function d(u,f){l.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=f,this.meta={}}n.magic="\b\0",o.inherits(d,l),d.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(h,u.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(f){u.push({data:f,meta:u.meta})}},n.compressWorker=function(u){return new d("Deflate",u)},n.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,s,n){function r(p,m){var g,v="";for(g=0;g<m;g++)v+=String.fromCharCode(255&p),p>>>=8;return v}function a(p,m,g,v,b,y){var E,C,R=p.file,M=p.compression,D=y!==h.utf8encode,x=o.transformTo("string",y(R.name)),S=o.transformTo("string",h.utf8encode(R.name)),F=R.comment,z=o.transformTo("string",y(F)),L=o.transformTo("string",h.utf8encode(F)),B=S.length!==R.name.length,w=L.length!==F.length,G="",re="",$="",Q=R.dir,Y=R.date,le={crc32:0,compressedSize:0,uncompressedSize:0};m&&!g||(le.crc32=p.crc32,le.compressedSize=p.compressedSize,le.uncompressedSize=p.uncompressedSize);var H=0;m&&(H|=8),D||!B&&!w||(H|=2048);var O=0,ee=0;Q&&(O|=16),b==="UNIX"?(ee=798,O|=function(Z,me){var ue=Z;return Z||(ue=me?16893:33204),(65535&ue)<<16}(R.unixPermissions,Q)):(ee=20,O|=function(Z){return 63&(Z||0)}(R.dosPermissions)),E=Y.getUTCHours(),E<<=6,E|=Y.getUTCMinutes(),E<<=5,E|=Y.getUTCSeconds()/2,C=Y.getUTCFullYear()-1980,C<<=4,C|=Y.getUTCMonth()+1,C<<=5,C|=Y.getUTCDate(),B&&(re=r(1,1)+r(d(x),4)+S,G+="up"+r(re.length,2)+re),w&&($=r(1,1)+r(d(z),4)+L,G+="uc"+r($.length,2)+$);var ae="";return ae+=`
\0`,ae+=r(H,2),ae+=M.magic,ae+=r(E,2),ae+=r(C,2),ae+=r(le.crc32,4),ae+=r(le.compressedSize,4),ae+=r(le.uncompressedSize,4),ae+=r(x.length,2),ae+=r(G.length,2),{fileRecord:u.LOCAL_FILE_HEADER+ae+x+G,dirRecord:u.CENTRAL_FILE_HEADER+r(ee,2)+ae+r(z.length,2)+"\0\0\0\0"+r(O,4)+r(v,4)+x+G+z}}var o=t("../utils"),l=t("../stream/GenericWorker"),h=t("../utf8"),d=t("../crc32"),u=t("../signature");function f(p,m,g,v){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=g,this.encodeFileName=v,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(f,l),f.prototype.push=function(p){var m=p.meta.percent||0,g=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,l.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:g?(m+100*(g-v-1))/g:100}}))},f.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var m=this.streamFiles&&!p.file.dir;if(m){var g=a(p,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(p){this.accumulate=!1;var m=this.streamFiles&&!p.file.dir,g=a(p,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),m)this.push({data:function(v){return u.DATA_DESCRIPTOR+r(v.crc32,4)+r(v.compressedSize,4)+r(v.uncompressedSize,4)}(p),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var p=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var g=this.bytesWritten-p,v=function(b,y,E,C,R){var M=o.transformTo("string",R(C));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(b,2)+r(b,2)+r(y,4)+r(E,4)+r(M.length,2)+M}(this.dirRecords.length,g,p,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(p){this._sources.push(p);var m=this;return p.on("data",function(g){m.processChunk(g)}),p.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),p.on("error",function(g){m.error(g)}),this},f.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(p){var m=this._sources;if(!l.prototype.error.call(this,p))return!1;for(var g=0;g<m.length;g++)try{m[g].error(p)}catch{}return!0},f.prototype.lock=function(){l.prototype.lock.call(this);for(var p=this._sources,m=0;m<p.length;m++)p[m].lock()},s.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,s,n){var r=t("../compressions"),a=t("./ZipFileWorker");n.generateWorker=function(o,l,h){var d=new a(l.streamFiles,h,l.platform,l.encodeFileName),u=0;try{o.forEach(function(f,p){u++;var m=function(y,E){var C=y||E,R=r[C];if(!R)throw new Error(C+" is not a valid compression method !");return R}(p.options.compression,l.compression),g=p.options.compressionOptions||l.compressionOptions||{},v=p.dir,b=p.date;p._compressWorker(m,g).withStreamInfo("file",{name:f,dir:v,date:b,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(d)}),d.entriesCount=u}catch(f){d.error(f)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,s,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new r;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(a,o){return new r().loadAsync(a,o)},r.external=t("./external"),s.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,s,n){var r=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),h=t("./stream/Crc32Probe"),d=t("./nodejsUtils");function u(f){return new a.Promise(function(p,m){var g=f.decompressed.getContentWorker().pipe(new h);g.on("error",function(v){m(v)}).on("end",function(){g.streamInfo.crc32!==f.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}s.exports=function(f,p){var m=this;return p=r.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",f,!0,p.optimizedBinaryString,p.base64).then(function(g){var v=new l(p);return v.load(g),v}).then(function(g){var v=[a.Promise.resolve(g)],b=g.files;if(p.checkCRC32)for(var y=0;y<b.length;y++)v.push(u(b[y]));return a.Promise.all(v)}).then(function(g){for(var v=g.shift(),b=v.files,y=0;y<b.length;y++){var E=b[y],C=E.fileNameStr,R=r.resolve(E.fileNameStr);m.file(R,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:p.createFolders}),E.dir||(m.file(R).unsafeOriginalName=C)}return v.zipComment.length&&(m.comment=v.zipComment),m})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,s,n){var r=t("../utils"),a=t("../stream/GenericWorker");function o(l,h){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(h)}r.inherits(o,a),o.prototype._bindStream=function(l){var h=this;(this._stream=l).pause(),l.on("data",function(d){h.push({data:d,meta:{percent:0}})}).on("error",function(d){h.isPaused?this.generatedError=d:h.error(d)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,s,n){var r=t("readable-stream").Readable;function a(o,l,h){r.call(this,l),this._helper=o;var d=this;o.on("data",function(u,f){d.push(u)||d._helper.pause(),h&&h(f)}).on("error",function(u){d.emit("error",u)}).on("end",function(){d.push(null)})}t("../utils").inherits(a,r),a.prototype._read=function(){this._helper.resume()},s.exports=a},{"../utils":32,"readable-stream":16}],14:[function(t,s,n){s.exports={isNode:typeof Qt<"u",newBufferFrom:function(r,a){if(Qt.from&&Qt.from!==Uint8Array.from)return Qt.from(r,a);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Qt(r,a)},allocBuffer:function(r){if(Qt.alloc)return Qt.alloc(r);var a=new Qt(r);return a.fill(0),a},isBuffer:function(r){return Qt.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,s,n){function r(R,M,D){var x,S=o.getTypeOf(M),F=o.extend(D||{},d);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(R=b(R)),F.createFolders&&(x=v(R))&&y.call(this,x,!0);var z=S==="string"&&F.binary===!1&&F.base64===!1;D&&D.binary!==void 0||(F.binary=!z),(M instanceof u&&M.uncompressedSize===0||F.dir||!M||M.length===0)&&(F.base64=!1,F.binary=!0,M="",F.compression="STORE",S="string");var L=null;L=M instanceof u||M instanceof l?M:m.isNode&&m.isStream(M)?new g(R,M):o.prepareContent(R,M,F.binary,F.optimizedBinaryString,F.base64);var B=new f(R,L,F);this.files[R]=B}var a=t("./utf8"),o=t("./utils"),l=t("./stream/GenericWorker"),h=t("./stream/StreamHelper"),d=t("./defaults"),u=t("./compressedObject"),f=t("./zipObject"),p=t("./generate"),m=t("./nodejsUtils"),g=t("./nodejs/NodejsStreamInputAdapter"),v=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var M=R.lastIndexOf("/");return 0<M?R.substring(0,M):""},b=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},y=function(R,M){return M=M!==void 0?M:d.createFolders,R=b(R),this.files[R]||r.call(this,R,null,{dir:!0,createFolders:M}),this.files[R]};function E(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var M,D,x;for(M in this.files)x=this.files[M],(D=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&R(D,x)},filter:function(R){var M=[];return this.forEach(function(D,x){R(D,x)&&M.push(x)}),M},file:function(R,M,D){if(arguments.length!==1)return R=this.root+R,r.call(this,R,M,D),this;if(E(R)){var x=R;return this.filter(function(F,z){return!z.dir&&x.test(F)})}var S=this.files[this.root+R];return S&&!S.dir?S:null},folder:function(R){if(!R)return this;if(E(R))return this.filter(function(S,F){return F.dir&&R.test(S)});var M=this.root+R,D=y.call(this,M),x=this.clone();return x.root=D.name,x},remove:function(R){R=this.root+R;var M=this.files[R];if(M||(R.slice(-1)!=="/"&&(R+="/"),M=this.files[R]),M&&!M.dir)delete this.files[R];else for(var D=this.filter(function(S,F){return F.name.slice(0,R.length)===R}),x=0;x<D.length;x++)delete this.files[D[x].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var M,D={};try{if((D=o.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");o.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var x=D.comment||this.comment||"";M=p.generateWorker(this,D,x)}catch(S){(M=new l("error")).error(S)}return new h(M,D.type||"string",D.mimeType)},generateAsync:function(R,M){return this.generateInternalStream(R).accumulate(M)},generateNodeStream:function(R,M){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(M)}};s.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,s,n){s.exports=t("stream")},{stream:void 0}],17:[function(t,s,n){var r=t("./DataReader");function a(o){r.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}t("../utils").inherits(a,r),a.prototype.byteAt=function(o){return this.data[this.zero+o]},a.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),h=o.charCodeAt(1),d=o.charCodeAt(2),u=o.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===l&&this.data[f+1]===h&&this.data[f+2]===d&&this.data[f+3]===u)return f-this.zero;return-1},a.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),h=o.charCodeAt(1),d=o.charCodeAt(2),u=o.charCodeAt(3),f=this.readData(4);return l===f[0]&&h===f[1]&&d===f[2]&&u===f[3]},a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./DataReader":18}],18:[function(t,s,n){var r=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,h=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)h=(h<<8)+this.byteAt(l);return this.index+=o,h},readString:function(o){return r.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},s.exports=a},{"../utils":32}],19:[function(t,s,n){var r=t("./Uint8ArrayReader");function a(o){r.call(this,o)}t("../utils").inherits(a,r),a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,s,n){var r=t("./DataReader");function a(o){r.call(this,o)}t("../utils").inherits(a,r),a.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},a.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},a.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},a.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./DataReader":18}],21:[function(t,s,n){var r=t("./ArrayReader");function a(o){r.call(this,o)}t("../utils").inherits(a,r),a.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},s.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(t,s,n){var r=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),h=t("./NodeBufferReader"),d=t("./Uint8ArrayReader");s.exports=function(u){var f=r.getTypeOf(u);return r.checkSupport(f),f!=="string"||a.uint8array?f==="nodebuffer"?new h(u):a.uint8array?new d(r.transformTo("uint8array",u)):new o(r.transformTo("array",u)):new l(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,s,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,s,n){var r=t("./GenericWorker"),a=t("../utils");function o(l){r.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,r),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},s.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,s,n){var r=t("./GenericWorker"),a=t("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,r),o.prototype.processChunk=function(l){this.streamInfo.crc32=a(l.data,this.streamInfo.crc32||0),this.push(l)},s.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,s,n){var r=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}r.inherits(o,a),o.prototype.processChunk=function(l){if(l){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+l.data.length}a.prototype.processChunk.call(this,l)},s.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,s,n){var r=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){h.dataIsReady=!0,h.data=d,h.max=d&&d.length||0,h.type=r.getTypeOf(d),h.isPaused||h._tickAndRepeat()},function(d){h.error(d)})}r.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,h);break;case"uint8array":l=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":l=this.data.slice(this.index,h)}return this.index=h,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,s,n){function r(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return!this.isFinished&&(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var a=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},s.exports=r},{}],29:[function(t,s,n){var r=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),h=t("../support"),d=t("../external"),u=null;if(h.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(m,g){return new d.Promise(function(v,b){var y=[],E=m._internalType,C=m._outputType,R=m._mimeType;m.on("data",function(M,D){y.push(M),g&&g(D)}).on("error",function(M){y=[],b(M)}).on("end",function(){try{var M=function(D,x,S){switch(D){case"blob":return r.newBlob(r.transformTo("arraybuffer",x),S);case"base64":return l.encode(x);default:return r.transformTo(D,x)}}(C,function(D,x){var S,F=0,z=null,L=0;for(S=0;S<x.length;S++)L+=x[S].length;switch(D){case"string":return x.join("");case"array":return Array.prototype.concat.apply([],x);case"uint8array":for(z=new Uint8Array(L),S=0;S<x.length;S++)z.set(x[S],F),F+=x[S].length;return z;case"nodebuffer":return Qt.concat(x);default:throw new Error("concat : unsupported type '"+D+"'")}}(E,y),R);v(M)}catch(D){b(D)}y=[]}).resume()})}function p(m,g,v){var b=g;switch(g){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=g,this._mimeType=v,r.checkSupport(b),this._worker=m.pipe(new a(b)),m.lock()}catch(y){this._worker=new o("error"),this._worker.error(y)}}p.prototype={accumulate:function(m){return f(this,m)},on:function(m,g){var v=this;return m==="data"?this._worker.on(m,function(b){g.call(v,b.data,b.meta)}):this._worker.on(m,function(){r.delay(g,arguments,v)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(m){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},m)}},s.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,s,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Qt<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(r),n.blob=a.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(t,s,n){for(var r=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),h=new Array(256),d=0;d<256;d++)h[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;h[254]=h[254]=1;function u(){l.call(this,"utf-8 decode"),this.leftOver=null}function f(){l.call(this,"utf-8 encode")}n.utf8encode=function(p){return a.nodebuffer?o.newBufferFrom(p,"utf-8"):function(m){var g,v,b,y,E,C=m.length,R=0;for(y=0;y<C;y++)(64512&(v=m.charCodeAt(y)))==55296&&y+1<C&&(64512&(b=m.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(b-56320),y++),R+=v<128?1:v<2048?2:v<65536?3:4;for(g=a.uint8array?new Uint8Array(R):new Array(R),y=E=0;E<R;y++)(64512&(v=m.charCodeAt(y)))==55296&&y+1<C&&(64512&(b=m.charCodeAt(y+1)))==56320&&(v=65536+(v-55296<<10)+(b-56320),y++),v<128?g[E++]=v:(v<2048?g[E++]=192|v>>>6:(v<65536?g[E++]=224|v>>>12:(g[E++]=240|v>>>18,g[E++]=128|v>>>12&63),g[E++]=128|v>>>6&63),g[E++]=128|63&v);return g}(p)},n.utf8decode=function(p){return a.nodebuffer?r.transformTo("nodebuffer",p).toString("utf-8"):function(m){var g,v,b,y,E=m.length,C=new Array(2*E);for(g=v=0;g<E;)if((b=m[g++])<128)C[v++]=b;else if(4<(y=h[b]))C[v++]=65533,g+=y-1;else{for(b&=y===2?31:y===3?15:7;1<y&&g<E;)b=b<<6|63&m[g++],y--;1<y?C[v++]=65533:b<65536?C[v++]=b:(b-=65536,C[v++]=55296|b>>10&1023,C[v++]=56320|1023&b)}return C.length!==v&&(C.subarray?C=C.subarray(0,v):C.length=v),r.applyFromCharCode(C)}(p=r.transformTo(a.uint8array?"uint8array":"array",p))},r.inherits(u,l),u.prototype.processChunk=function(p){var m=r.transformTo(a.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var g=m;(m=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),m.set(g,this.leftOver.length)}else m=this.leftOver.concat(m);this.leftOver=null}var v=function(y,E){var C;for((E=E||y.length)>y.length&&(E=y.length),C=E-1;0<=C&&(192&y[C])==128;)C--;return C<0||C===0?E:C+h[y[C]]>E?C:E}(m),b=m;v!==m.length&&(a.uint8array?(b=m.subarray(0,v),this.leftOver=m.subarray(v,m.length)):(b=m.slice(0,v),this.leftOver=m.slice(v,m.length))),this.push({data:n.utf8decode(b),meta:p.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,r.inherits(f,l),f.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,s,n){var r=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("./external");function h(g){return g}function d(g,v){for(var b=0;b<g.length;++b)v[b]=255&g.charCodeAt(b);return v}t("setimmediate"),n.newBlob=function(g,v){n.checkSupport("blob");try{return new Blob([g],{type:v})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(g),b.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(g,v,b){var y=[],E=0,C=g.length;if(C<=b)return String.fromCharCode.apply(null,g);for(;E<C;)v==="array"||v==="nodebuffer"?y.push(String.fromCharCode.apply(null,g.slice(E,Math.min(E+b,C)))):y.push(String.fromCharCode.apply(null,g.subarray(E,Math.min(E+b,C)))),E+=b;return y.join("")},stringifyByChar:function(g){for(var v="",b=0;b<g.length;b++)v+=String.fromCharCode(g[b]);return v},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function f(g){var v=65536,b=n.getTypeOf(g),y=!0;if(b==="uint8array"?y=u.applyCanBeUsed.uint8array:b==="nodebuffer"&&(y=u.applyCanBeUsed.nodebuffer),y)for(;1<v;)try{return u.stringifyByChunk(g,b,v)}catch{v=Math.floor(v/2)}return u.stringifyByChar(g)}function p(g,v){for(var b=0;b<g.length;b++)v[b]=g[b];return v}n.applyFromCharCode=f;var m={};m.string={string:h,array:function(g){return d(g,new Array(g.length))},arraybuffer:function(g){return m.string.uint8array(g).buffer},uint8array:function(g){return d(g,new Uint8Array(g.length))},nodebuffer:function(g){return d(g,o.allocBuffer(g.length))}},m.array={string:f,array:h,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(g)}},m.arraybuffer={string:function(g){return f(new Uint8Array(g))},array:function(g){return p(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:h,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return o.newBufferFrom(new Uint8Array(g))}},m.uint8array={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:h,nodebuffer:function(g){return o.newBufferFrom(g)}},m.nodebuffer={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return m.nodebuffer.uint8array(g).buffer},uint8array:function(g){return p(g,new Uint8Array(g.length))},nodebuffer:h},n.transformTo=function(g,v){if(v=v||"",!g)return v;n.checkSupport(g);var b=n.getTypeOf(v);return m[b][g](v)},n.resolve=function(g){for(var v=g.split("/"),b=[],y=0;y<v.length;y++){var E=v[y];E==="."||E===""&&y!==0&&y!==v.length-1||(E===".."?b.pop():b.push(E))}return b.join("/")},n.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":r.nodebuffer&&o.isBuffer(g)?"nodebuffer":r.uint8array&&g instanceof Uint8Array?"uint8array":r.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(g){if(!r[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(g){var v,b,y="";for(b=0;b<(g||"").length;b++)y+="\\x"+((v=g.charCodeAt(b))<16?"0":"")+v.toString(16).toUpperCase();return y},n.delay=function(g,v,b){setImmediate(function(){g.apply(b||null,v||[])})},n.inherits=function(g,v){function b(){}b.prototype=v.prototype,g.prototype=new b},n.extend=function(){var g,v,b={};for(g=0;g<arguments.length;g++)for(v in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],v)&&b[v]===void 0&&(b[v]=arguments[g][v]);return b},n.prepareContent=function(g,v,b,y,E){return l.Promise.resolve(v).then(function(C){return r.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(R,M){var D=new FileReader;D.onload=function(x){R(x.target.result)},D.onerror=function(x){M(x.target.error)},D.readAsArrayBuffer(C)}):C}).then(function(C){var R=n.getTypeOf(C);return R?(R==="arraybuffer"?C=n.transformTo("uint8array",C):R==="string"&&(E?C=a.decode(C):b&&y!==!0&&(C=function(M){return d(M,r.uint8array?new Uint8Array(M.length):new Array(M.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,s,n){var r=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),h=t("./support");function d(u){this.files=[],this.loadOptions=u}d.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(u)+")")}},isSignature:function(u,f){var p=this.reader.index;this.reader.setIndex(u);var m=this.reader.readString(4)===f;return this.reader.setIndex(p),m},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),f=h.uint8array?"uint8array":"array",p=a.transformTo(f,u);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,f,p,m=this.zip64EndOfCentralSize-44;0<m;)u=this.reader.readInt(2),f=this.reader.readInt(4),p=this.reader.readData(f),this.zip64ExtensibleData[u]={id:u,length:f,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,f;for(u=0;u<this.files.length;u++)f=this.files[u],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(u=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var f=u;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var m=f-p;if(0<m)this.isSignature(f,o.CENTRAL_FILE_HEADER)||(this.reader.zero=m);else if(m<0)throw new Error("Corrupted zip: missing "+Math.abs(m)+" bytes.")},prepareReader:function(u){this.reader=r(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,s,n){var r=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),h=t("./utf8"),d=t("./compressions"),u=t("./support");function f(p,m){this.options=p,this.loadOptions=m}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var m,g;if(p.skip(22),this.fileNameLength=p.readInt(2),g=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((m=function(v){for(var b in d)if(Object.prototype.hasOwnProperty.call(d,b)&&d[b].magic===v)return d[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,m,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var m=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(m),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=r(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var m,g,v,b=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<b;)m=p.readInt(2),g=p.readInt(2),v=p.readData(g),this.extraFields[m]={id:m,length:g,value:v};p.setIndex(b)},handleUTF8:function(){var p=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var m=this.findExtraFieldUnicodePath();if(m!==null)this.fileNameStr=m;else{var g=a.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var b=a.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var m=r(p.value);return m.readInt(1)!==1||l(this.fileName)!==m.readInt(4)?null:h.utf8decode(m.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var m=r(p.value);return m.readInt(1)!==1||l(this.fileComment)!==m.readInt(4)?null:h.utf8decode(m.readData(p.length-5))}return null}},s.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,s,n){function r(m,g,v){this.name=m,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=g,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var a=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),l=t("./utf8"),h=t("./compressedObject"),d=t("./stream/GenericWorker");r.prototype={internalStream:function(m){var g=null,v="string";try{if(!m)throw new Error("No output type specified.");var b=(v=m.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),g=this._decompressWorker();var y=!this._dataBinary;y&&!b&&(g=g.pipe(new l.Utf8EncodeWorker)),!y&&b&&(g=g.pipe(new l.Utf8DecodeWorker))}catch(E){(g=new d("error")).error(E)}return new a(g,v,"")},async:function(m,g){return this.internalStream(m).accumulate(g)},nodeStream:function(m,g){return this.internalStream(m||"nodebuffer").toNodejsStream(g)},_compressWorker:function(m,g){if(this._data instanceof h&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new l.Utf8EncodeWorker)),h.createWorkerFrom(v,m,g)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<u.length;p++)r.prototype[u[p]]=f;s.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,s,n){(function(r){var a,o,l=r.MutationObserver||r.WebKitMutationObserver;if(l){var h=0,d=new l(m),u=r.document.createTextNode("");d.observe(u,{characterData:!0}),a=function(){u.data=h=++h%2}}else if(r.setImmediate||r.MessageChannel===void 0)a="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var g=r.document.createElement("script");g.onreadystatechange=function(){m(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},r.document.documentElement.appendChild(g)}:function(){setTimeout(m,0)};else{var f=new r.MessageChannel;f.port1.onmessage=m,a=function(){f.port2.postMessage(0)}}var p=[];function m(){var g,v;o=!0;for(var b=p.length;b;){for(v=p,p=[],g=-1;++g<b;)v[g]();b=p.length}o=!1}s.exports=function(g){p.push(g)!==1||o||a()}}).call(this,typeof Jo<"u"?Jo:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,s,n){var r=t("immediate");function a(){}var o={},l=["REJECTED"],h=["FULFILLED"],d=["PENDING"];function u(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,b!==a&&g(this,b)}function f(b,y,E){this.promise=b,typeof y=="function"&&(this.onFulfilled=y,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function p(b,y,E){r(function(){var C;try{C=y(E)}catch(R){return o.reject(b,R)}C===b?o.reject(b,new TypeError("Cannot resolve promise with itself")):o.resolve(b,C)})}function m(b){var y=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof y=="function")return function(){y.apply(b,arguments)}}function g(b,y){var E=!1;function C(D){E||(E=!0,o.reject(b,D))}function R(D){E||(E=!0,o.resolve(b,D))}var M=v(function(){y(R,C)});M.status==="error"&&C(M.value)}function v(b,y){var E={};try{E.value=b(y),E.status="success"}catch(C){E.status="error",E.value=C}return E}(s.exports=u).prototype.finally=function(b){if(typeof b!="function")return this;var y=this.constructor;return this.then(function(E){return y.resolve(b()).then(function(){return E})},function(E){return y.resolve(b()).then(function(){throw E})})},u.prototype.catch=function(b){return this.then(null,b)},u.prototype.then=function(b,y){if(typeof b!="function"&&this.state===h||typeof y!="function"&&this.state===l)return this;var E=new this.constructor(a);return this.state!==d?p(E,this.state===h?b:y,this.outcome):this.queue.push(new f(E,b,y)),E},f.prototype.callFulfilled=function(b){o.resolve(this.promise,b)},f.prototype.otherCallFulfilled=function(b){p(this.promise,this.onFulfilled,b)},f.prototype.callRejected=function(b){o.reject(this.promise,b)},f.prototype.otherCallRejected=function(b){p(this.promise,this.onRejected,b)},o.resolve=function(b,y){var E=v(m,y);if(E.status==="error")return o.reject(b,E.value);var C=E.value;if(C)g(b,C);else{b.state=h,b.outcome=y;for(var R=-1,M=b.queue.length;++R<M;)b.queue[R].callFulfilled(y)}return b},o.reject=function(b,y){b.state=l,b.outcome=y;for(var E=-1,C=b.queue.length;++E<C;)b.queue[E].callRejected(y);return b},u.resolve=function(b){return b instanceof this?b:o.resolve(new this(a),b)},u.reject=function(b){var y=new this(a);return o.reject(y,b)},u.all=function(b){var y=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,C=!1;if(!E)return this.resolve([]);for(var R=new Array(E),M=0,D=-1,x=new this(a);++D<E;)S(b[D],D);return x;function S(F,z){y.resolve(F).then(function(L){R[z]=L,++M!==E||C||(C=!0,o.resolve(x,R))},function(L){C||(C=!0,o.reject(x,L))})}},u.race=function(b){var y=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=b.length,C=!1;if(!E)return this.resolve([]);for(var R=-1,M=new this(a);++R<E;)D=b[R],y.resolve(D).then(function(x){C||(C=!0,o.resolve(M,x))},function(x){C||(C=!0,o.reject(M,x))});var D;return M}},{immediate:36}],38:[function(t,s,n){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),s.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,s,n){var r=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),h=t("./zlib/zstream"),d=Object.prototype.toString,u=0,f=-1,p=0,m=8;function g(b){if(!(this instanceof g))return new g(b);this.options=a.assign({level:f,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},b||{});var y=this.options;y.raw&&0<y.windowBits?y.windowBits=-y.windowBits:y.gzip&&0<y.windowBits&&y.windowBits<16&&(y.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var E=r.deflateInit2(this.strm,y.level,y.method,y.windowBits,y.memLevel,y.strategy);if(E!==u)throw new Error(l[E]);if(y.header&&r.deflateSetHeader(this.strm,y.header),y.dictionary){var C;if(C=typeof y.dictionary=="string"?o.string2buf(y.dictionary):d.call(y.dictionary)==="[object ArrayBuffer]"?new Uint8Array(y.dictionary):y.dictionary,(E=r.deflateSetDictionary(this.strm,C))!==u)throw new Error(l[E]);this._dict_set=!0}}function v(b,y){var E=new g(y);if(E.push(b,!0),E.err)throw E.msg||l[E.err];return E.result}g.prototype.push=function(b,y){var E,C,R=this.strm,M=this.options.chunkSize;if(this.ended)return!1;C=y===~~y?y:y===!0?4:0,typeof b=="string"?R.input=o.string2buf(b):d.call(b)==="[object ArrayBuffer]"?R.input=new Uint8Array(b):R.input=b,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new a.Buf8(M),R.next_out=0,R.avail_out=M),(E=r.deflate(R,C))!==1&&E!==u)return this.onEnd(E),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(R.output,R.next_out))):this.onData(a.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&E!==1);return C===4?(E=r.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===u):C!==2||(this.onEnd(u),!(R.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},n.Deflate=g,n.deflate=v,n.deflateRaw=function(b,y){return(y=y||{}).raw=!0,v(b,y)},n.gzip=function(b,y){return(y=y||{}).gzip=!0,v(b,y)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,s,n){var r=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),h=t("./zlib/messages"),d=t("./zlib/zstream"),u=t("./zlib/gzheader"),f=Object.prototype.toString;function p(g){if(!(this instanceof p))return new p(g);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},g||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||g&&g.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&!(15&v.windowBits)&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var b=r.inflateInit2(this.strm,v.windowBits);if(b!==l.Z_OK)throw new Error(h[b]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function m(g,v){var b=new p(v);if(b.push(g,!0),b.err)throw b.msg||h[b.err];return b.result}p.prototype.push=function(g,v){var b,y,E,C,R,M,D=this.strm,x=this.options.chunkSize,S=this.options.dictionary,F=!1;if(this.ended)return!1;y=v===~~v?v:v===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof g=="string"?D.input=o.binstring2buf(g):f.call(g)==="[object ArrayBuffer]"?D.input=new Uint8Array(g):D.input=g,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new a.Buf8(x),D.next_out=0,D.avail_out=x),(b=r.inflate(D,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&S&&(M=typeof S=="string"?o.string2buf(S):f.call(S)==="[object ArrayBuffer]"?new Uint8Array(S):S,b=r.inflateSetDictionary(this.strm,M)),b===l.Z_BUF_ERROR&&F===!0&&(b=l.Z_OK,F=!1),b!==l.Z_STREAM_END&&b!==l.Z_OK)return this.onEnd(b),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&b!==l.Z_STREAM_END&&(D.avail_in!==0||y!==l.Z_FINISH&&y!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(D.output,D.next_out),C=D.next_out-E,R=o.buf2string(D.output,E),D.next_out=C,D.avail_out=x-C,C&&a.arraySet(D.output,D.output,E,C,0),this.onData(R)):this.onData(a.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(F=!0)}while((0<D.avail_in||D.avail_out===0)&&b!==l.Z_STREAM_END);return b===l.Z_STREAM_END&&(y=l.Z_FINISH),y===l.Z_FINISH?(b=r.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===l.Z_OK):y!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(D.avail_out=0))},p.prototype.onData=function(g){this.chunks.push(g)},p.prototype.onEnd=function(g){g===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},n.Inflate=p,n.inflate=m,n.inflateRaw=function(g,v){return(v=v||{}).raw=!0,m(g,v)},n.ungzip=m},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,s,n){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(l){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var d=h.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var u in d)d.hasOwnProperty(u)&&(l[u]=d[u])}}return l},n.shrinkBuf=function(l,h){return l.length===h?l:l.subarray?l.subarray(0,h):(l.length=h,l)};var a={arraySet:function(l,h,d,u,f){if(h.subarray&&l.subarray)l.set(h.subarray(d,d+u),f);else for(var p=0;p<u;p++)l[f+p]=h[d+p]},flattenChunks:function(l){var h,d,u,f,p,m;for(h=u=0,d=l.length;h<d;h++)u+=l[h].length;for(m=new Uint8Array(u),h=f=0,d=l.length;h<d;h++)p=l[h],m.set(p,f),f+=p.length;return m}},o={arraySet:function(l,h,d,u,f){for(var p=0;p<u;p++)l[f+p]=h[d+p]},flattenChunks:function(l){return[].concat.apply([],l)}};n.setTyped=function(l){l?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,a)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(t,s,n){var r=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new r.Buf8(256),h=0;h<256;h++)l[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function d(u,f){if(f<65537&&(u.subarray&&o||!u.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(u,f));for(var p="",m=0;m<f;m++)p+=String.fromCharCode(u[m]);return p}l[254]=l[254]=1,n.string2buf=function(u){var f,p,m,g,v,b=u.length,y=0;for(g=0;g<b;g++)(64512&(p=u.charCodeAt(g)))==55296&&g+1<b&&(64512&(m=u.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(m-56320),g++),y+=p<128?1:p<2048?2:p<65536?3:4;for(f=new r.Buf8(y),g=v=0;v<y;g++)(64512&(p=u.charCodeAt(g)))==55296&&g+1<b&&(64512&(m=u.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(m-56320),g++),p<128?f[v++]=p:(p<2048?f[v++]=192|p>>>6:(p<65536?f[v++]=224|p>>>12:(f[v++]=240|p>>>18,f[v++]=128|p>>>12&63),f[v++]=128|p>>>6&63),f[v++]=128|63&p);return f},n.buf2binstring=function(u){return d(u,u.length)},n.binstring2buf=function(u){for(var f=new r.Buf8(u.length),p=0,m=f.length;p<m;p++)f[p]=u.charCodeAt(p);return f},n.buf2string=function(u,f){var p,m,g,v,b=f||u.length,y=new Array(2*b);for(p=m=0;p<b;)if((g=u[p++])<128)y[m++]=g;else if(4<(v=l[g]))y[m++]=65533,p+=v-1;else{for(g&=v===2?31:v===3?15:7;1<v&&p<b;)g=g<<6|63&u[p++],v--;1<v?y[m++]=65533:g<65536?y[m++]=g:(g-=65536,y[m++]=55296|g>>10&1023,y[m++]=56320|1023&g)}return d(y,m)},n.utf8border=function(u,f){var p;for((f=f||u.length)>u.length&&(f=u.length),p=f-1;0<=p&&(192&u[p])==128;)p--;return p<0||p===0?f:p+l[u[p]]>f?p:f}},{"./common":41}],43:[function(t,s,n){s.exports=function(r,a,o,l){for(var h=65535&r|0,d=r>>>16&65535|0,u=0;o!==0;){for(o-=u=2e3<o?2e3:o;d=d+(h=h+a[l++]|0)|0,--u;);h%=65521,d%=65521}return h|d<<16|0}},{}],44:[function(t,s,n){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,s,n){var r=function(){for(var a,o=[],l=0;l<256;l++){a=l;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;o[l]=a}return o}();s.exports=function(a,o,l,h){var d=r,u=h+l;a^=-1;for(var f=h;f<u;f++)a=a>>>8^d[255&(a^o[f])];return-1^a}},{}],46:[function(t,s,n){var r,a=t("../utils/common"),o=t("./trees"),l=t("./adler32"),h=t("./crc32"),d=t("./messages"),u=0,f=4,p=0,m=-2,g=-1,v=4,b=2,y=8,E=9,C=286,R=30,M=19,D=2*C+1,x=15,S=3,F=258,z=F+S+1,L=42,B=113,w=1,G=2,re=3,$=4;function Q(_,K){return _.msg=d[K],K}function Y(_){return(_<<1)-(4<_?9:0)}function le(_){for(var K=_.length;0<=--K;)_[K]=0}function H(_){var K=_.state,V=K.pending;V>_.avail_out&&(V=_.avail_out),V!==0&&(a.arraySet(_.output,K.pending_buf,K.pending_out,V,_.next_out),_.next_out+=V,K.pending_out+=V,_.total_out+=V,_.avail_out-=V,K.pending-=V,K.pending===0&&(K.pending_out=0))}function O(_,K){o._tr_flush_block(_,0<=_.block_start?_.block_start:-1,_.strstart-_.block_start,K),_.block_start=_.strstart,H(_.strm)}function ee(_,K){_.pending_buf[_.pending++]=K}function ae(_,K){_.pending_buf[_.pending++]=K>>>8&255,_.pending_buf[_.pending++]=255&K}function Z(_,K){var V,I,N=_.max_chain_length,U=_.strstart,te=_.prev_length,ne=_.nice_match,X=_.strstart>_.w_size-z?_.strstart-(_.w_size-z):0,ie=_.window,he=_.w_mask,se=_.prev,pe=_.strstart+F,we=ie[U+te-1],ke=ie[U+te];_.prev_length>=_.good_match&&(N>>=2),ne>_.lookahead&&(ne=_.lookahead);do if(ie[(V=K)+te]===ke&&ie[V+te-1]===we&&ie[V]===ie[U]&&ie[++V]===ie[U+1]){U+=2,V++;do;while(ie[++U]===ie[++V]&&ie[++U]===ie[++V]&&ie[++U]===ie[++V]&&ie[++U]===ie[++V]&&ie[++U]===ie[++V]&&ie[++U]===ie[++V]&&ie[++U]===ie[++V]&&ie[++U]===ie[++V]&&U<pe);if(I=F-(pe-U),U=pe-F,te<I){if(_.match_start=K,ne<=(te=I))break;we=ie[U+te-1],ke=ie[U+te]}}while((K=se[K&he])>X&&--N!=0);return te<=_.lookahead?te:_.lookahead}function me(_){var K,V,I,N,U,te,ne,X,ie,he,se=_.w_size;do{if(N=_.window_size-_.lookahead-_.strstart,_.strstart>=se+(se-z)){for(a.arraySet(_.window,_.window,se,se,0),_.match_start-=se,_.strstart-=se,_.block_start-=se,K=V=_.hash_size;I=_.head[--K],_.head[K]=se<=I?I-se:0,--V;);for(K=V=se;I=_.prev[--K],_.prev[K]=se<=I?I-se:0,--V;);N+=se}if(_.strm.avail_in===0)break;if(te=_.strm,ne=_.window,X=_.strstart+_.lookahead,ie=N,he=void 0,he=te.avail_in,ie<he&&(he=ie),V=he===0?0:(te.avail_in-=he,a.arraySet(ne,te.input,te.next_in,he,X),te.state.wrap===1?te.adler=l(te.adler,ne,he,X):te.state.wrap===2&&(te.adler=h(te.adler,ne,he,X)),te.next_in+=he,te.total_in+=he,he),_.lookahead+=V,_.lookahead+_.insert>=S)for(U=_.strstart-_.insert,_.ins_h=_.window[U],_.ins_h=(_.ins_h<<_.hash_shift^_.window[U+1])&_.hash_mask;_.insert&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[U+S-1])&_.hash_mask,_.prev[U&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=U,U++,_.insert--,!(_.lookahead+_.insert<S)););}while(_.lookahead<z&&_.strm.avail_in!==0)}function ue(_,K){for(var V,I;;){if(_.lookahead<z){if(me(_),_.lookahead<z&&K===u)return w;if(_.lookahead===0)break}if(V=0,_.lookahead>=S&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+S-1])&_.hash_mask,V=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),V!==0&&_.strstart-V<=_.w_size-z&&(_.match_length=Z(_,V)),_.match_length>=S)if(I=o._tr_tally(_,_.strstart-_.match_start,_.match_length-S),_.lookahead-=_.match_length,_.match_length<=_.max_lazy_match&&_.lookahead>=S){for(_.match_length--;_.strstart++,_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+S-1])&_.hash_mask,V=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart,--_.match_length!=0;);_.strstart++}else _.strstart+=_.match_length,_.match_length=0,_.ins_h=_.window[_.strstart],_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+1])&_.hash_mask;else I=o._tr_tally(_,0,_.window[_.strstart]),_.lookahead--,_.strstart++;if(I&&(O(_,!1),_.strm.avail_out===0))return w}return _.insert=_.strstart<S-1?_.strstart:S-1,K===f?(O(_,!0),_.strm.avail_out===0?re:$):_.last_lit&&(O(_,!1),_.strm.avail_out===0)?w:G}function fe(_,K){for(var V,I,N;;){if(_.lookahead<z){if(me(_),_.lookahead<z&&K===u)return w;if(_.lookahead===0)break}if(V=0,_.lookahead>=S&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+S-1])&_.hash_mask,V=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),_.prev_length=_.match_length,_.prev_match=_.match_start,_.match_length=S-1,V!==0&&_.prev_length<_.max_lazy_match&&_.strstart-V<=_.w_size-z&&(_.match_length=Z(_,V),_.match_length<=5&&(_.strategy===1||_.match_length===S&&4096<_.strstart-_.match_start)&&(_.match_length=S-1)),_.prev_length>=S&&_.match_length<=_.prev_length){for(N=_.strstart+_.lookahead-S,I=o._tr_tally(_,_.strstart-1-_.prev_match,_.prev_length-S),_.lookahead-=_.prev_length-1,_.prev_length-=2;++_.strstart<=N&&(_.ins_h=(_.ins_h<<_.hash_shift^_.window[_.strstart+S-1])&_.hash_mask,V=_.prev[_.strstart&_.w_mask]=_.head[_.ins_h],_.head[_.ins_h]=_.strstart),--_.prev_length!=0;);if(_.match_available=0,_.match_length=S-1,_.strstart++,I&&(O(_,!1),_.strm.avail_out===0))return w}else if(_.match_available){if((I=o._tr_tally(_,0,_.window[_.strstart-1]))&&O(_,!1),_.strstart++,_.lookahead--,_.strm.avail_out===0)return w}else _.match_available=1,_.strstart++,_.lookahead--}return _.match_available&&(I=o._tr_tally(_,0,_.window[_.strstart-1]),_.match_available=0),_.insert=_.strstart<S-1?_.strstart:S-1,K===f?(O(_,!0),_.strm.avail_out===0?re:$):_.last_lit&&(O(_,!1),_.strm.avail_out===0)?w:G}function oe(_,K,V,I,N){this.good_length=_,this.max_lazy=K,this.nice_length=V,this.max_chain=I,this.func=N}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*D),this.dyn_dtree=new a.Buf16(2*(2*R+1)),this.bl_tree=new a.Buf16(2*(2*M+1)),le(this.dyn_ltree),le(this.dyn_dtree),le(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(x+1),this.heap=new a.Buf16(2*C+1),le(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*C+1),le(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ye(_){var K;return _&&_.state?(_.total_in=_.total_out=0,_.data_type=b,(K=_.state).pending=0,K.pending_out=0,K.wrap<0&&(K.wrap=-K.wrap),K.status=K.wrap?L:B,_.adler=K.wrap===2?0:1,K.last_flush=u,o._tr_init(K),p):Q(_,m)}function Ce(_){var K=ye(_);return K===p&&function(V){V.window_size=2*V.w_size,le(V.head),V.max_lazy_match=r[V.level].max_lazy,V.good_match=r[V.level].good_length,V.nice_match=r[V.level].nice_length,V.max_chain_length=r[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=S-1,V.match_available=0,V.ins_h=0}(_.state),K}function ge(_,K,V,I,N,U){if(!_)return m;var te=1;if(K===g&&(K=6),I<0?(te=0,I=-I):15<I&&(te=2,I-=16),N<1||E<N||V!==y||I<8||15<I||K<0||9<K||U<0||v<U)return Q(_,m);I===8&&(I=9);var ne=new de;return(_.state=ne).strm=_,ne.wrap=te,ne.gzhead=null,ne.w_bits=I,ne.w_size=1<<ne.w_bits,ne.w_mask=ne.w_size-1,ne.hash_bits=N+7,ne.hash_size=1<<ne.hash_bits,ne.hash_mask=ne.hash_size-1,ne.hash_shift=~~((ne.hash_bits+S-1)/S),ne.window=new a.Buf8(2*ne.w_size),ne.head=new a.Buf16(ne.hash_size),ne.prev=new a.Buf16(ne.w_size),ne.lit_bufsize=1<<N+6,ne.pending_buf_size=4*ne.lit_bufsize,ne.pending_buf=new a.Buf8(ne.pending_buf_size),ne.d_buf=1*ne.lit_bufsize,ne.l_buf=3*ne.lit_bufsize,ne.level=K,ne.strategy=U,ne.method=V,Ce(_)}r=[new oe(0,0,0,0,function(_,K){var V=65535;for(V>_.pending_buf_size-5&&(V=_.pending_buf_size-5);;){if(_.lookahead<=1){if(me(_),_.lookahead===0&&K===u)return w;if(_.lookahead===0)break}_.strstart+=_.lookahead,_.lookahead=0;var I=_.block_start+V;if((_.strstart===0||_.strstart>=I)&&(_.lookahead=_.strstart-I,_.strstart=I,O(_,!1),_.strm.avail_out===0)||_.strstart-_.block_start>=_.w_size-z&&(O(_,!1),_.strm.avail_out===0))return w}return _.insert=0,K===f?(O(_,!0),_.strm.avail_out===0?re:$):(_.strstart>_.block_start&&(O(_,!1),_.strm.avail_out),w)}),new oe(4,4,8,4,ue),new oe(4,5,16,8,ue),new oe(4,6,32,32,ue),new oe(4,4,16,16,fe),new oe(8,16,32,32,fe),new oe(8,16,128,128,fe),new oe(8,32,128,256,fe),new oe(32,128,258,1024,fe),new oe(32,258,258,4096,fe)],n.deflateInit=function(_,K){return ge(_,K,y,15,8,0)},n.deflateInit2=ge,n.deflateReset=Ce,n.deflateResetKeep=ye,n.deflateSetHeader=function(_,K){return _&&_.state?_.state.wrap!==2?m:(_.state.gzhead=K,p):m},n.deflate=function(_,K){var V,I,N,U;if(!_||!_.state||5<K||K<0)return _?Q(_,m):m;if(I=_.state,!_.output||!_.input&&_.avail_in!==0||I.status===666&&K!==f)return Q(_,_.avail_out===0?-5:m);if(I.strm=_,V=I.last_flush,I.last_flush=K,I.status===L)if(I.wrap===2)_.adler=0,ee(I,31),ee(I,139),ee(I,8),I.gzhead?(ee(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),ee(I,255&I.gzhead.time),ee(I,I.gzhead.time>>8&255),ee(I,I.gzhead.time>>16&255),ee(I,I.gzhead.time>>24&255),ee(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),ee(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(ee(I,255&I.gzhead.extra.length),ee(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(_.adler=h(_.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(ee(I,0),ee(I,0),ee(I,0),ee(I,0),ee(I,0),ee(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),ee(I,3),I.status=B);else{var te=y+(I.w_bits-8<<4)<<8;te|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(te|=32),te+=31-te%31,I.status=B,ae(I,te),I.strstart!==0&&(ae(I,_.adler>>>16),ae(I,65535&_.adler)),_.adler=1}if(I.status===69)if(I.gzhead.extra){for(N=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>N&&(_.adler=h(_.adler,I.pending_buf,I.pending-N,N)),H(_),N=I.pending,I.pending!==I.pending_buf_size));)ee(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>N&&(_.adler=h(_.adler,I.pending_buf,I.pending-N,N)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){N=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>N&&(_.adler=h(_.adler,I.pending_buf,I.pending-N,N)),H(_),N=I.pending,I.pending===I.pending_buf_size)){U=1;break}U=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,ee(I,U)}while(U!==0);I.gzhead.hcrc&&I.pending>N&&(_.adler=h(_.adler,I.pending_buf,I.pending-N,N)),U===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){N=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>N&&(_.adler=h(_.adler,I.pending_buf,I.pending-N,N)),H(_),N=I.pending,I.pending===I.pending_buf_size)){U=1;break}U=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,ee(I,U)}while(U!==0);I.gzhead.hcrc&&I.pending>N&&(_.adler=h(_.adler,I.pending_buf,I.pending-N,N)),U===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&H(_),I.pending+2<=I.pending_buf_size&&(ee(I,255&_.adler),ee(I,_.adler>>8&255),_.adler=0,I.status=B)):I.status=B),I.pending!==0){if(H(_),_.avail_out===0)return I.last_flush=-1,p}else if(_.avail_in===0&&Y(K)<=Y(V)&&K!==f)return Q(_,-5);if(I.status===666&&_.avail_in!==0)return Q(_,-5);if(_.avail_in!==0||I.lookahead!==0||K!==u&&I.status!==666){var ne=I.strategy===2?function(X,ie){for(var he;;){if(X.lookahead===0&&(me(X),X.lookahead===0)){if(ie===u)return w;break}if(X.match_length=0,he=o._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++,he&&(O(X,!1),X.strm.avail_out===0))return w}return X.insert=0,ie===f?(O(X,!0),X.strm.avail_out===0?re:$):X.last_lit&&(O(X,!1),X.strm.avail_out===0)?w:G}(I,K):I.strategy===3?function(X,ie){for(var he,se,pe,we,ke=X.window;;){if(X.lookahead<=F){if(me(X),X.lookahead<=F&&ie===u)return w;if(X.lookahead===0)break}if(X.match_length=0,X.lookahead>=S&&0<X.strstart&&(se=ke[pe=X.strstart-1])===ke[++pe]&&se===ke[++pe]&&se===ke[++pe]){we=X.strstart+F;do;while(se===ke[++pe]&&se===ke[++pe]&&se===ke[++pe]&&se===ke[++pe]&&se===ke[++pe]&&se===ke[++pe]&&se===ke[++pe]&&se===ke[++pe]&&pe<we);X.match_length=F-(we-pe),X.match_length>X.lookahead&&(X.match_length=X.lookahead)}if(X.match_length>=S?(he=o._tr_tally(X,1,X.match_length-S),X.lookahead-=X.match_length,X.strstart+=X.match_length,X.match_length=0):(he=o._tr_tally(X,0,X.window[X.strstart]),X.lookahead--,X.strstart++),he&&(O(X,!1),X.strm.avail_out===0))return w}return X.insert=0,ie===f?(O(X,!0),X.strm.avail_out===0?re:$):X.last_lit&&(O(X,!1),X.strm.avail_out===0)?w:G}(I,K):r[I.level].func(I,K);if(ne!==re&&ne!==$||(I.status=666),ne===w||ne===re)return _.avail_out===0&&(I.last_flush=-1),p;if(ne===G&&(K===1?o._tr_align(I):K!==5&&(o._tr_stored_block(I,0,0,!1),K===3&&(le(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),H(_),_.avail_out===0))return I.last_flush=-1,p}return K!==f?p:I.wrap<=0?1:(I.wrap===2?(ee(I,255&_.adler),ee(I,_.adler>>8&255),ee(I,_.adler>>16&255),ee(I,_.adler>>24&255),ee(I,255&_.total_in),ee(I,_.total_in>>8&255),ee(I,_.total_in>>16&255),ee(I,_.total_in>>24&255)):(ae(I,_.adler>>>16),ae(I,65535&_.adler)),H(_),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?p:1)},n.deflateEnd=function(_){var K;return _&&_.state?(K=_.state.status)!==L&&K!==69&&K!==73&&K!==91&&K!==103&&K!==B&&K!==666?Q(_,m):(_.state=null,K===B?Q(_,-3):p):m},n.deflateSetDictionary=function(_,K){var V,I,N,U,te,ne,X,ie,he=K.length;if(!_||!_.state||(U=(V=_.state).wrap)===2||U===1&&V.status!==L||V.lookahead)return m;for(U===1&&(_.adler=l(_.adler,K,he,0)),V.wrap=0,he>=V.w_size&&(U===0&&(le(V.head),V.strstart=0,V.block_start=0,V.insert=0),ie=new a.Buf8(V.w_size),a.arraySet(ie,K,he-V.w_size,V.w_size,0),K=ie,he=V.w_size),te=_.avail_in,ne=_.next_in,X=_.input,_.avail_in=he,_.next_in=0,_.input=K,me(V);V.lookahead>=S;){for(I=V.strstart,N=V.lookahead-(S-1);V.ins_h=(V.ins_h<<V.hash_shift^V.window[I+S-1])&V.hash_mask,V.prev[I&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=I,I++,--N;);V.strstart=I,V.lookahead=S-1,me(V)}return V.strstart+=V.lookahead,V.block_start=V.strstart,V.insert=V.lookahead,V.lookahead=0,V.match_length=V.prev_length=S-1,V.match_available=0,_.next_in=ne,_.input=X,_.avail_in=te,V.wrap=U,p},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,s,n){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,s,n){s.exports=function(r,a){var o,l,h,d,u,f,p,m,g,v,b,y,E,C,R,M,D,x,S,F,z,L,B,w,G;o=r.state,l=r.next_in,w=r.input,h=l+(r.avail_in-5),d=r.next_out,G=r.output,u=d-(a-r.avail_out),f=d+(r.avail_out-257),p=o.dmax,m=o.wsize,g=o.whave,v=o.wnext,b=o.window,y=o.hold,E=o.bits,C=o.lencode,R=o.distcode,M=(1<<o.lenbits)-1,D=(1<<o.distbits)-1;e:do{E<15&&(y+=w[l++]<<E,E+=8,y+=w[l++]<<E,E+=8),x=C[y&M];t:for(;;){if(y>>>=S=x>>>24,E-=S,(S=x>>>16&255)===0)G[d++]=65535&x;else{if(!(16&S)){if(!(64&S)){x=C[(65535&x)+(y&(1<<S)-1)];continue t}if(32&S){o.mode=12;break e}r.msg="invalid literal/length code",o.mode=30;break e}F=65535&x,(S&=15)&&(E<S&&(y+=w[l++]<<E,E+=8),F+=y&(1<<S)-1,y>>>=S,E-=S),E<15&&(y+=w[l++]<<E,E+=8,y+=w[l++]<<E,E+=8),x=R[y&D];s:for(;;){if(y>>>=S=x>>>24,E-=S,!(16&(S=x>>>16&255))){if(!(64&S)){x=R[(65535&x)+(y&(1<<S)-1)];continue s}r.msg="invalid distance code",o.mode=30;break e}if(z=65535&x,E<(S&=15)&&(y+=w[l++]<<E,(E+=8)<S&&(y+=w[l++]<<E,E+=8)),p<(z+=y&(1<<S)-1)){r.msg="invalid distance too far back",o.mode=30;break e}if(y>>>=S,E-=S,(S=d-u)<z){if(g<(S=z-S)&&o.sane){r.msg="invalid distance too far back",o.mode=30;break e}if(B=b,(L=0)===v){if(L+=m-S,S<F){for(F-=S;G[d++]=b[L++],--S;);L=d-z,B=G}}else if(v<S){if(L+=m+v-S,(S-=v)<F){for(F-=S;G[d++]=b[L++],--S;);if(L=0,v<F){for(F-=S=v;G[d++]=b[L++],--S;);L=d-z,B=G}}}else if(L+=v-S,S<F){for(F-=S;G[d++]=b[L++],--S;);L=d-z,B=G}for(;2<F;)G[d++]=B[L++],G[d++]=B[L++],G[d++]=B[L++],F-=3;F&&(G[d++]=B[L++],1<F&&(G[d++]=B[L++]))}else{for(L=d-z;G[d++]=G[L++],G[d++]=G[L++],G[d++]=G[L++],2<(F-=3););F&&(G[d++]=G[L++],1<F&&(G[d++]=G[L++]))}break}}break}}while(l<h&&d<f);l-=F=E>>3,y&=(1<<(E-=F<<3))-1,r.next_in=l,r.next_out=d,r.avail_in=l<h?h-l+5:5-(l-h),r.avail_out=d<f?f-d+257:257-(d-f),o.hold=y,o.bits=E}},{}],49:[function(t,s,n){var r=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),h=t("./inftrees"),d=1,u=2,f=0,p=-2,m=1,g=852,v=592;function b(L){return(L>>>24&255)+(L>>>8&65280)+((65280&L)<<8)+((255&L)<<24)}function y(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(L){var B;return L&&L.state?(B=L.state,L.total_in=L.total_out=B.total=0,L.msg="",B.wrap&&(L.adler=1&B.wrap),B.mode=m,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new r.Buf32(g),B.distcode=B.distdyn=new r.Buf32(v),B.sane=1,B.back=-1,f):p}function C(L){var B;return L&&L.state?((B=L.state).wsize=0,B.whave=0,B.wnext=0,E(L)):p}function R(L,B){var w,G;return L&&L.state?(G=L.state,B<0?(w=0,B=-B):(w=1+(B>>4),B<48&&(B&=15)),B&&(B<8||15<B)?p:(G.window!==null&&G.wbits!==B&&(G.window=null),G.wrap=w,G.wbits=B,C(L))):p}function M(L,B){var w,G;return L?(G=new y,(L.state=G).window=null,(w=R(L,B))!==f&&(L.state=null),w):p}var D,x,S=!0;function F(L){if(S){var B;for(D=new r.Buf32(512),x=new r.Buf32(32),B=0;B<144;)L.lens[B++]=8;for(;B<256;)L.lens[B++]=9;for(;B<280;)L.lens[B++]=7;for(;B<288;)L.lens[B++]=8;for(h(d,L.lens,0,288,D,0,L.work,{bits:9}),B=0;B<32;)L.lens[B++]=5;h(u,L.lens,0,32,x,0,L.work,{bits:5}),S=!1}L.lencode=D,L.lenbits=9,L.distcode=x,L.distbits=5}function z(L,B,w,G){var re,$=L.state;return $.window===null&&($.wsize=1<<$.wbits,$.wnext=0,$.whave=0,$.window=new r.Buf8($.wsize)),G>=$.wsize?(r.arraySet($.window,B,w-$.wsize,$.wsize,0),$.wnext=0,$.whave=$.wsize):(G<(re=$.wsize-$.wnext)&&(re=G),r.arraySet($.window,B,w-G,re,$.wnext),(G-=re)?(r.arraySet($.window,B,w-G,G,0),$.wnext=G,$.whave=$.wsize):($.wnext+=re,$.wnext===$.wsize&&($.wnext=0),$.whave<$.wsize&&($.whave+=re))),0}n.inflateReset=C,n.inflateReset2=R,n.inflateResetKeep=E,n.inflateInit=function(L){return M(L,15)},n.inflateInit2=M,n.inflate=function(L,B){var w,G,re,$,Q,Y,le,H,O,ee,ae,Z,me,ue,fe,oe,de,ye,Ce,ge,_,K,V,I,N=0,U=new r.Buf8(4),te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!L||!L.state||!L.output||!L.input&&L.avail_in!==0)return p;(w=L.state).mode===12&&(w.mode=13),Q=L.next_out,re=L.output,le=L.avail_out,$=L.next_in,G=L.input,Y=L.avail_in,H=w.hold,O=w.bits,ee=Y,ae=le,K=f;e:for(;;)switch(w.mode){case m:if(w.wrap===0){w.mode=13;break}for(;O<16;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}if(2&w.wrap&&H===35615){U[w.check=0]=255&H,U[1]=H>>>8&255,w.check=o(w.check,U,2,0),O=H=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&H)<<8)+(H>>8))%31){L.msg="incorrect header check",w.mode=30;break}if((15&H)!=8){L.msg="unknown compression method",w.mode=30;break}if(O-=4,_=8+(15&(H>>>=4)),w.wbits===0)w.wbits=_;else if(_>w.wbits){L.msg="invalid window size",w.mode=30;break}w.dmax=1<<_,L.adler=w.check=1,w.mode=512&H?10:12,O=H=0;break;case 2:for(;O<16;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}if(w.flags=H,(255&w.flags)!=8){L.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){L.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=H>>8&1),512&w.flags&&(U[0]=255&H,U[1]=H>>>8&255,w.check=o(w.check,U,2,0)),O=H=0,w.mode=3;case 3:for(;O<32;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}w.head&&(w.head.time=H),512&w.flags&&(U[0]=255&H,U[1]=H>>>8&255,U[2]=H>>>16&255,U[3]=H>>>24&255,w.check=o(w.check,U,4,0)),O=H=0,w.mode=4;case 4:for(;O<16;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}w.head&&(w.head.xflags=255&H,w.head.os=H>>8),512&w.flags&&(U[0]=255&H,U[1]=H>>>8&255,w.check=o(w.check,U,2,0)),O=H=0,w.mode=5;case 5:if(1024&w.flags){for(;O<16;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}w.length=H,w.head&&(w.head.extra_len=H),512&w.flags&&(U[0]=255&H,U[1]=H>>>8&255,w.check=o(w.check,U,2,0)),O=H=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(Y<(Z=w.length)&&(Z=Y),Z&&(w.head&&(_=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),r.arraySet(w.head.extra,G,$,Z,_)),512&w.flags&&(w.check=o(w.check,G,Z,$)),Y-=Z,$+=Z,w.length-=Z),w.length))break e;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(Y===0)break e;for(Z=0;_=G[$+Z++],w.head&&_&&w.length<65536&&(w.head.name+=String.fromCharCode(_)),_&&Z<Y;);if(512&w.flags&&(w.check=o(w.check,G,Z,$)),Y-=Z,$+=Z,_)break e}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(Y===0)break e;for(Z=0;_=G[$+Z++],w.head&&_&&w.length<65536&&(w.head.comment+=String.fromCharCode(_)),_&&Z<Y;);if(512&w.flags&&(w.check=o(w.check,G,Z,$)),Y-=Z,$+=Z,_)break e}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;O<16;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}if(H!==(65535&w.check)){L.msg="header crc mismatch",w.mode=30;break}O=H=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),L.adler=w.check=0,w.mode=12;break;case 10:for(;O<32;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}L.adler=w.check=b(H),O=H=0,w.mode=11;case 11:if(w.havedict===0)return L.next_out=Q,L.avail_out=le,L.next_in=$,L.avail_in=Y,w.hold=H,w.bits=O,2;L.adler=w.check=1,w.mode=12;case 12:if(B===5||B===6)break e;case 13:if(w.last){H>>>=7&O,O-=7&O,w.mode=27;break}for(;O<3;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}switch(w.last=1&H,O-=1,3&(H>>>=1)){case 0:w.mode=14;break;case 1:if(F(w),w.mode=20,B!==6)break;H>>>=2,O-=2;break e;case 2:w.mode=17;break;case 3:L.msg="invalid block type",w.mode=30}H>>>=2,O-=2;break;case 14:for(H>>>=7&O,O-=7&O;O<32;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}if((65535&H)!=(H>>>16^65535)){L.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&H,O=H=0,w.mode=15,B===6)break e;case 15:w.mode=16;case 16:if(Z=w.length){if(Y<Z&&(Z=Y),le<Z&&(Z=le),Z===0)break e;r.arraySet(re,G,$,Z,Q),Y-=Z,$+=Z,le-=Z,Q+=Z,w.length-=Z;break}w.mode=12;break;case 17:for(;O<14;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}if(w.nlen=257+(31&H),H>>>=5,O-=5,w.ndist=1+(31&H),H>>>=5,O-=5,w.ncode=4+(15&H),H>>>=4,O-=4,286<w.nlen||30<w.ndist){L.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;O<3;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}w.lens[te[w.have++]]=7&H,H>>>=3,O-=3}for(;w.have<19;)w.lens[te[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,V={bits:w.lenbits},K=h(0,w.lens,0,19,w.lencode,0,w.work,V),w.lenbits=V.bits,K){L.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;oe=(N=w.lencode[H&(1<<w.lenbits)-1])>>>16&255,de=65535&N,!((fe=N>>>24)<=O);){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}if(de<16)H>>>=fe,O-=fe,w.lens[w.have++]=de;else{if(de===16){for(I=fe+2;O<I;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}if(H>>>=fe,O-=fe,w.have===0){L.msg="invalid bit length repeat",w.mode=30;break}_=w.lens[w.have-1],Z=3+(3&H),H>>>=2,O-=2}else if(de===17){for(I=fe+3;O<I;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}O-=fe,_=0,Z=3+(7&(H>>>=fe)),H>>>=3,O-=3}else{for(I=fe+7;O<I;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}O-=fe,_=0,Z=11+(127&(H>>>=fe)),H>>>=7,O-=7}if(w.have+Z>w.nlen+w.ndist){L.msg="invalid bit length repeat",w.mode=30;break}for(;Z--;)w.lens[w.have++]=_}}if(w.mode===30)break;if(w.lens[256]===0){L.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,V={bits:w.lenbits},K=h(d,w.lens,0,w.nlen,w.lencode,0,w.work,V),w.lenbits=V.bits,K){L.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,V={bits:w.distbits},K=h(u,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,V),w.distbits=V.bits,K){L.msg="invalid distances set",w.mode=30;break}if(w.mode=20,B===6)break e;case 20:w.mode=21;case 21:if(6<=Y&&258<=le){L.next_out=Q,L.avail_out=le,L.next_in=$,L.avail_in=Y,w.hold=H,w.bits=O,l(L,ae),Q=L.next_out,re=L.output,le=L.avail_out,$=L.next_in,G=L.input,Y=L.avail_in,H=w.hold,O=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;oe=(N=w.lencode[H&(1<<w.lenbits)-1])>>>16&255,de=65535&N,!((fe=N>>>24)<=O);){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}if(oe&&!(240&oe)){for(ye=fe,Ce=oe,ge=de;oe=(N=w.lencode[ge+((H&(1<<ye+Ce)-1)>>ye)])>>>16&255,de=65535&N,!(ye+(fe=N>>>24)<=O);){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}H>>>=ye,O-=ye,w.back+=ye}if(H>>>=fe,O-=fe,w.back+=fe,w.length=de,oe===0){w.mode=26;break}if(32&oe){w.back=-1,w.mode=12;break}if(64&oe){L.msg="invalid literal/length code",w.mode=30;break}w.extra=15&oe,w.mode=22;case 22:if(w.extra){for(I=w.extra;O<I;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}w.length+=H&(1<<w.extra)-1,H>>>=w.extra,O-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;oe=(N=w.distcode[H&(1<<w.distbits)-1])>>>16&255,de=65535&N,!((fe=N>>>24)<=O);){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}if(!(240&oe)){for(ye=fe,Ce=oe,ge=de;oe=(N=w.distcode[ge+((H&(1<<ye+Ce)-1)>>ye)])>>>16&255,de=65535&N,!(ye+(fe=N>>>24)<=O);){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}H>>>=ye,O-=ye,w.back+=ye}if(H>>>=fe,O-=fe,w.back+=fe,64&oe){L.msg="invalid distance code",w.mode=30;break}w.offset=de,w.extra=15&oe,w.mode=24;case 24:if(w.extra){for(I=w.extra;O<I;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}w.offset+=H&(1<<w.extra)-1,H>>>=w.extra,O-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){L.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(le===0)break e;if(Z=ae-le,w.offset>Z){if((Z=w.offset-Z)>w.whave&&w.sane){L.msg="invalid distance too far back",w.mode=30;break}me=Z>w.wnext?(Z-=w.wnext,w.wsize-Z):w.wnext-Z,Z>w.length&&(Z=w.length),ue=w.window}else ue=re,me=Q-w.offset,Z=w.length;for(le<Z&&(Z=le),le-=Z,w.length-=Z;re[Q++]=ue[me++],--Z;);w.length===0&&(w.mode=21);break;case 26:if(le===0)break e;re[Q++]=w.length,le--,w.mode=21;break;case 27:if(w.wrap){for(;O<32;){if(Y===0)break e;Y--,H|=G[$++]<<O,O+=8}if(ae-=le,L.total_out+=ae,w.total+=ae,ae&&(L.adler=w.check=w.flags?o(w.check,re,ae,Q-ae):a(w.check,re,ae,Q-ae)),ae=le,(w.flags?H:b(H))!==w.check){L.msg="incorrect data check",w.mode=30;break}O=H=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;O<32;){if(Y===0)break e;Y--,H+=G[$++]<<O,O+=8}if(H!==(4294967295&w.total)){L.msg="incorrect length check",w.mode=30;break}O=H=0}w.mode=29;case 29:K=1;break e;case 30:K=-3;break e;case 31:return-4;case 32:default:return p}return L.next_out=Q,L.avail_out=le,L.next_in=$,L.avail_in=Y,w.hold=H,w.bits=O,(w.wsize||ae!==L.avail_out&&w.mode<30&&(w.mode<27||B!==4))&&z(L,L.output,L.next_out,ae-L.avail_out)?(w.mode=31,-4):(ee-=L.avail_in,ae-=L.avail_out,L.total_in+=ee,L.total_out+=ae,w.total+=ae,w.wrap&&ae&&(L.adler=w.check=w.flags?o(w.check,re,ae,L.next_out-ae):a(w.check,re,ae,L.next_out-ae)),L.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(ee==0&&ae===0||B===4)&&K===f&&(K=-5),K)},n.inflateEnd=function(L){if(!L||!L.state)return p;var B=L.state;return B.window&&(B.window=null),L.state=null,f},n.inflateGetHeader=function(L,B){var w;return L&&L.state&&2&(w=L.state).wrap?((w.head=B).done=!1,f):p},n.inflateSetDictionary=function(L,B){var w,G=B.length;return L&&L.state?(w=L.state).wrap!==0&&w.mode!==11?p:w.mode===11&&a(1,B,G,0)!==w.check?-3:z(L,B,G,G)?(w.mode=31,-4):(w.havedict=1,f):p},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,s,n){var r=t("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(d,u,f,p,m,g,v,b){var y,E,C,R,M,D,x,S,F,z=b.bits,L=0,B=0,w=0,G=0,re=0,$=0,Q=0,Y=0,le=0,H=0,O=null,ee=0,ae=new r.Buf16(16),Z=new r.Buf16(16),me=null,ue=0;for(L=0;L<=15;L++)ae[L]=0;for(B=0;B<p;B++)ae[u[f+B]]++;for(re=z,G=15;1<=G&&ae[G]===0;G--);if(G<re&&(re=G),G===0)return m[g++]=20971520,m[g++]=20971520,b.bits=1,0;for(w=1;w<G&&ae[w]===0;w++);for(re<w&&(re=w),L=Y=1;L<=15;L++)if(Y<<=1,(Y-=ae[L])<0)return-1;if(0<Y&&(d===0||G!==1))return-1;for(Z[1]=0,L=1;L<15;L++)Z[L+1]=Z[L]+ae[L];for(B=0;B<p;B++)u[f+B]!==0&&(v[Z[u[f+B]]++]=B);if(D=d===0?(O=me=v,19):d===1?(O=a,ee-=257,me=o,ue-=257,256):(O=l,me=h,-1),L=w,M=g,Q=B=H=0,C=-1,R=(le=1<<($=re))-1,d===1&&852<le||d===2&&592<le)return 1;for(;;){for(x=L-Q,F=v[B]<D?(S=0,v[B]):v[B]>D?(S=me[ue+v[B]],O[ee+v[B]]):(S=96,0),y=1<<L-Q,w=E=1<<$;m[M+(H>>Q)+(E-=y)]=x<<24|S<<16|F|0,E!==0;);for(y=1<<L-1;H&y;)y>>=1;if(y!==0?(H&=y-1,H+=y):H=0,B++,--ae[L]==0){if(L===G)break;L=u[f+v[B]]}if(re<L&&(H&R)!==C){for(Q===0&&(Q=re),M+=w,Y=1<<($=L-Q);$+Q<G&&!((Y-=ae[$+Q])<=0);)$++,Y<<=1;if(le+=1<<$,d===1&&852<le||d===2&&592<le)return 1;m[C=H&R]=re<<24|$<<16|M-g|0}}return H!==0&&(m[M+H]=L-Q<<24|64<<16|0),b.bits=re,0}},{"../utils/common":41}],51:[function(t,s,n){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,s,n){var r=t("../utils/common"),a=0,o=1;function l(N){for(var U=N.length;0<=--U;)N[U]=0}var h=0,d=29,u=256,f=u+1+d,p=30,m=19,g=2*f+1,v=15,b=16,y=7,E=256,C=16,R=17,M=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=new Array(2*(f+2));l(z);var L=new Array(2*p);l(L);var B=new Array(512);l(B);var w=new Array(256);l(w);var G=new Array(d);l(G);var re,$,Q,Y=new Array(p);function le(N,U,te,ne,X){this.static_tree=N,this.extra_bits=U,this.extra_base=te,this.elems=ne,this.max_length=X,this.has_stree=N&&N.length}function H(N,U){this.dyn_tree=N,this.max_code=0,this.stat_desc=U}function O(N){return N<256?B[N]:B[256+(N>>>7)]}function ee(N,U){N.pending_buf[N.pending++]=255&U,N.pending_buf[N.pending++]=U>>>8&255}function ae(N,U,te){N.bi_valid>b-te?(N.bi_buf|=U<<N.bi_valid&65535,ee(N,N.bi_buf),N.bi_buf=U>>b-N.bi_valid,N.bi_valid+=te-b):(N.bi_buf|=U<<N.bi_valid&65535,N.bi_valid+=te)}function Z(N,U,te){ae(N,te[2*U],te[2*U+1])}function me(N,U){for(var te=0;te|=1&N,N>>>=1,te<<=1,0<--U;);return te>>>1}function ue(N,U,te){var ne,X,ie=new Array(v+1),he=0;for(ne=1;ne<=v;ne++)ie[ne]=he=he+te[ne-1]<<1;for(X=0;X<=U;X++){var se=N[2*X+1];se!==0&&(N[2*X]=me(ie[se]++,se))}}function fe(N){var U;for(U=0;U<f;U++)N.dyn_ltree[2*U]=0;for(U=0;U<p;U++)N.dyn_dtree[2*U]=0;for(U=0;U<m;U++)N.bl_tree[2*U]=0;N.dyn_ltree[2*E]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function oe(N){8<N.bi_valid?ee(N,N.bi_buf):0<N.bi_valid&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function de(N,U,te,ne){var X=2*U,ie=2*te;return N[X]<N[ie]||N[X]===N[ie]&&ne[U]<=ne[te]}function ye(N,U,te){for(var ne=N.heap[te],X=te<<1;X<=N.heap_len&&(X<N.heap_len&&de(U,N.heap[X+1],N.heap[X],N.depth)&&X++,!de(U,ne,N.heap[X],N.depth));)N.heap[te]=N.heap[X],te=X,X<<=1;N.heap[te]=ne}function Ce(N,U,te){var ne,X,ie,he,se=0;if(N.last_lit!==0)for(;ne=N.pending_buf[N.d_buf+2*se]<<8|N.pending_buf[N.d_buf+2*se+1],X=N.pending_buf[N.l_buf+se],se++,ne===0?Z(N,X,U):(Z(N,(ie=w[X])+u+1,U),(he=D[ie])!==0&&ae(N,X-=G[ie],he),Z(N,ie=O(--ne),te),(he=x[ie])!==0&&ae(N,ne-=Y[ie],he)),se<N.last_lit;);Z(N,E,U)}function ge(N,U){var te,ne,X,ie=U.dyn_tree,he=U.stat_desc.static_tree,se=U.stat_desc.has_stree,pe=U.stat_desc.elems,we=-1;for(N.heap_len=0,N.heap_max=g,te=0;te<pe;te++)ie[2*te]!==0?(N.heap[++N.heap_len]=we=te,N.depth[te]=0):ie[2*te+1]=0;for(;N.heap_len<2;)ie[2*(X=N.heap[++N.heap_len]=we<2?++we:0)]=1,N.depth[X]=0,N.opt_len--,se&&(N.static_len-=he[2*X+1]);for(U.max_code=we,te=N.heap_len>>1;1<=te;te--)ye(N,ie,te);for(X=pe;te=N.heap[1],N.heap[1]=N.heap[N.heap_len--],ye(N,ie,1),ne=N.heap[1],N.heap[--N.heap_max]=te,N.heap[--N.heap_max]=ne,ie[2*X]=ie[2*te]+ie[2*ne],N.depth[X]=(N.depth[te]>=N.depth[ne]?N.depth[te]:N.depth[ne])+1,ie[2*te+1]=ie[2*ne+1]=X,N.heap[1]=X++,ye(N,ie,1),2<=N.heap_len;);N.heap[--N.heap_max]=N.heap[1],function(ke,qe){var Xe,ze,Be,De,Ze,xt,st=qe.dyn_tree,ia=qe.max_code,zo=qe.stat_desc.static_tree,ip=qe.stat_desc.has_stree,aa=qe.stat_desc.extra_bits,Pr=qe.stat_desc.extra_base,Rr=qe.stat_desc.max_length,Ms=0;for(De=0;De<=v;De++)ke.bl_count[De]=0;for(st[2*ke.heap[ke.heap_max]+1]=0,Xe=ke.heap_max+1;Xe<g;Xe++)Rr<(De=st[2*st[2*(ze=ke.heap[Xe])+1]+1]+1)&&(De=Rr,Ms++),st[2*ze+1]=De,ia<ze||(ke.bl_count[De]++,Ze=0,Pr<=ze&&(Ze=aa[ze-Pr]),xt=st[2*ze],ke.opt_len+=xt*(De+Ze),ip&&(ke.static_len+=xt*(zo[2*ze+1]+Ze)));if(Ms!==0){do{for(De=Rr-1;ke.bl_count[De]===0;)De--;ke.bl_count[De]--,ke.bl_count[De+1]+=2,ke.bl_count[Rr]--,Ms-=2}while(0<Ms);for(De=Rr;De!==0;De--)for(ze=ke.bl_count[De];ze!==0;)ia<(Be=ke.heap[--Xe])||(st[2*Be+1]!==De&&(ke.opt_len+=(De-st[2*Be+1])*st[2*Be],st[2*Be+1]=De),ze--)}}(N,U),ue(ie,we,N.bl_count)}function _(N,U,te){var ne,X,ie=-1,he=U[1],se=0,pe=7,we=4;for(he===0&&(pe=138,we=3),U[2*(te+1)+1]=65535,ne=0;ne<=te;ne++)X=he,he=U[2*(ne+1)+1],++se<pe&&X===he||(se<we?N.bl_tree[2*X]+=se:X!==0?(X!==ie&&N.bl_tree[2*X]++,N.bl_tree[2*C]++):se<=10?N.bl_tree[2*R]++:N.bl_tree[2*M]++,ie=X,we=(se=0)===he?(pe=138,3):X===he?(pe=6,3):(pe=7,4))}function K(N,U,te){var ne,X,ie=-1,he=U[1],se=0,pe=7,we=4;for(he===0&&(pe=138,we=3),ne=0;ne<=te;ne++)if(X=he,he=U[2*(ne+1)+1],!(++se<pe&&X===he)){if(se<we)for(;Z(N,X,N.bl_tree),--se!=0;);else X!==0?(X!==ie&&(Z(N,X,N.bl_tree),se--),Z(N,C,N.bl_tree),ae(N,se-3,2)):se<=10?(Z(N,R,N.bl_tree),ae(N,se-3,3)):(Z(N,M,N.bl_tree),ae(N,se-11,7));ie=X,we=(se=0)===he?(pe=138,3):X===he?(pe=6,3):(pe=7,4)}}l(Y);var V=!1;function I(N,U,te,ne){ae(N,(h<<1)+(ne?1:0),3),function(X,ie,he,se){oe(X),ee(X,he),ee(X,~he),r.arraySet(X.pending_buf,X.window,ie,he,X.pending),X.pending+=he}(N,U,te)}n._tr_init=function(N){V||(function(){var U,te,ne,X,ie,he=new Array(v+1);for(X=ne=0;X<d-1;X++)for(G[X]=ne,U=0;U<1<<D[X];U++)w[ne++]=X;for(w[ne-1]=X,X=ie=0;X<16;X++)for(Y[X]=ie,U=0;U<1<<x[X];U++)B[ie++]=X;for(ie>>=7;X<p;X++)for(Y[X]=ie<<7,U=0;U<1<<x[X]-7;U++)B[256+ie++]=X;for(te=0;te<=v;te++)he[te]=0;for(U=0;U<=143;)z[2*U+1]=8,U++,he[8]++;for(;U<=255;)z[2*U+1]=9,U++,he[9]++;for(;U<=279;)z[2*U+1]=7,U++,he[7]++;for(;U<=287;)z[2*U+1]=8,U++,he[8]++;for(ue(z,f+1,he),U=0;U<p;U++)L[2*U+1]=5,L[2*U]=me(U,5);re=new le(z,D,u+1,f,v),$=new le(L,x,0,p,v),Q=new le(new Array(0),S,0,m,y)}(),V=!0),N.l_desc=new H(N.dyn_ltree,re),N.d_desc=new H(N.dyn_dtree,$),N.bl_desc=new H(N.bl_tree,Q),N.bi_buf=0,N.bi_valid=0,fe(N)},n._tr_stored_block=I,n._tr_flush_block=function(N,U,te,ne){var X,ie,he=0;0<N.level?(N.strm.data_type===2&&(N.strm.data_type=function(se){var pe,we=4093624447;for(pe=0;pe<=31;pe++,we>>>=1)if(1&we&&se.dyn_ltree[2*pe]!==0)return a;if(se.dyn_ltree[18]!==0||se.dyn_ltree[20]!==0||se.dyn_ltree[26]!==0)return o;for(pe=32;pe<u;pe++)if(se.dyn_ltree[2*pe]!==0)return o;return a}(N)),ge(N,N.l_desc),ge(N,N.d_desc),he=function(se){var pe;for(_(se,se.dyn_ltree,se.l_desc.max_code),_(se,se.dyn_dtree,se.d_desc.max_code),ge(se,se.bl_desc),pe=m-1;3<=pe&&se.bl_tree[2*F[pe]+1]===0;pe--);return se.opt_len+=3*(pe+1)+5+5+4,pe}(N),X=N.opt_len+3+7>>>3,(ie=N.static_len+3+7>>>3)<=X&&(X=ie)):X=ie=te+5,te+4<=X&&U!==-1?I(N,U,te,ne):N.strategy===4||ie===X?(ae(N,2+(ne?1:0),3),Ce(N,z,L)):(ae(N,4+(ne?1:0),3),function(se,pe,we,ke){var qe;for(ae(se,pe-257,5),ae(se,we-1,5),ae(se,ke-4,4),qe=0;qe<ke;qe++)ae(se,se.bl_tree[2*F[qe]+1],3);K(se,se.dyn_ltree,pe-1),K(se,se.dyn_dtree,we-1)}(N,N.l_desc.max_code+1,N.d_desc.max_code+1,he+1),Ce(N,N.dyn_ltree,N.dyn_dtree)),fe(N),ne&&oe(N)},n._tr_tally=function(N,U,te){return N.pending_buf[N.d_buf+2*N.last_lit]=U>>>8&255,N.pending_buf[N.d_buf+2*N.last_lit+1]=255&U,N.pending_buf[N.l_buf+N.last_lit]=255&te,N.last_lit++,U===0?N.dyn_ltree[2*te]++:(N.matches++,U--,N.dyn_ltree[2*(w[te]+u+1)]++,N.dyn_dtree[2*O(U)]++),N.last_lit===N.lit_bufsize-1},n._tr_align=function(N){ae(N,2,3),Z(N,E,z),function(U){U.bi_valid===16?(ee(U,U.bi_buf),U.bi_buf=0,U.bi_valid=0):8<=U.bi_valid&&(U.pending_buf[U.pending++]=255&U.bi_buf,U.bi_buf>>=8,U.bi_valid-=8)}(N)}},{"../utils/common":41}],53:[function(t,s,n){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,s,n){(function(r){(function(a,o){if(!a.setImmediate){var l,h,d,u,f=1,p={},m=!1,g=a.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(a);v=v&&v.setTimeout?v:a,l={}.toString.call(a.process)==="[object process]"?function(C){Dr.nextTick(function(){y(C)})}:function(){if(a.postMessage&&!a.importScripts){var C=!0,R=a.onmessage;return a.onmessage=function(){C=!1},a.postMessage("","*"),a.onmessage=R,C}}()?(u="setImmediate$"+Math.random()+"$",a.addEventListener?a.addEventListener("message",E,!1):a.attachEvent("onmessage",E),function(C){a.postMessage(u+C,"*")}):a.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){y(C.data)},function(C){d.port2.postMessage(C)}):g&&"onreadystatechange"in g.createElement("script")?(h=g.documentElement,function(C){var R=g.createElement("script");R.onreadystatechange=function(){y(C),R.onreadystatechange=null,h.removeChild(R),R=null},h.appendChild(R)}):function(C){setTimeout(y,0,C)},v.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var R=new Array(arguments.length-1),M=0;M<R.length;M++)R[M]=arguments[M+1];var D={callback:C,args:R};return p[f]=D,l(f),f++},v.clearImmediate=b}function b(C){delete p[C]}function y(C){if(m)setTimeout(y,0,C);else{var R=p[C];if(R){m=!0;try{(function(M){var D=M.callback,x=M.args;switch(x.length){case 0:D();break;case 1:D(x[0]);break;case 2:D(x[0],x[1]);break;case 3:D(x[0],x[1],x[2]);break;default:D.apply(o,x)}})(R)}finally{b(C),m=!1}}}}function E(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(u)===0&&y(+C.data.slice(u.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof Jo<"u"?Jo:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Lv);var uT=Lv.exports;const fT=ig(uT);/*
 * @license
 * docx-preview <https://github.com/VolodymyrBaydalka/docxjs>
 * Released under Apache License 2.0  <https://github.com/VolodymyrBaydalka/docxjs/blob/master/LICENSE>
 * Copyright Volodymyr Baydalka
 */var et;(function(i){i.OfficeDocument="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",i.FontTable="http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable",i.Image="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",i.Numbering="http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering",i.Styles="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",i.StylesWithEffects="http://schemas.microsoft.com/office/2007/relationships/stylesWithEffects",i.Theme="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",i.Settings="http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings",i.WebSettings="http://schemas.openxmlformats.org/officeDocument/2006/relationships/webSettings",i.Hyperlink="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",i.Footnotes="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes",i.Endnotes="http://schemas.openxmlformats.org/officeDocument/2006/relationships/endnotes",i.Footer="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",i.Header="http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",i.ExtendedProperties="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",i.CoreProperties="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",i.CustomProperties="http://schemas.openxmlformats.org/package/2006/relationships/metadata/custom-properties",i.Comments="http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",i.CommentsExtended="http://schemas.microsoft.com/office/2011/relationships/commentsExtended",i.AltChunk="http://schemas.openxmlformats.org/officeDocument/2006/relationships/aFChunk"})(et||(et={}));function pT(i,e){return e.elements(i).map(t=>({id:e.attr(t,"Id"),type:e.attr(t,"Type"),target:e.attr(t,"Target"),targetMode:e.attr(t,"TargetMode")}))}function mT(i){return i==null?void 0:i.replace(/[ .]+/g,"-").replace(/[&]+/g,"and").toLowerCase()}function Dp(i){return/^[^"'].*\s.*[^"']$/.test(i)?`'${i}'`:i}function fd(i){let e=i.lastIndexOf("/")+1,t=e==0?"":i.substring(0,e),s=e==0?i:i.substring(e);return[t,s]}function up(i,e){try{const t="http://docx/";return new URL(i,t+e).toString().substring(t.length)}catch{return`${e}${i}`}}function Zn(i,e){return i.reduce((t,s)=>(t[e(s)]=s,t),{})}function gT(i){return new Promise((e,t)=>{const s=new FileReader;s.onloadend=()=>e(s.result),s.onerror=()=>t(),s.readAsDataURL(i)})}function fp(i){return i&&typeof i=="object"&&!Array.isArray(i)}function bT(i){return typeof i=="string"||i instanceof String}function Ud(i,...e){if(!e.length)return i;const t=e.shift();if(fp(i)&&fp(t))for(const s in t)if(fp(t[s])){const n=i[s]??(i[s]={});Ud(n,t[s])}else i[s]=t[s];return Ud(i,...e)}function Ho(i){return Array.isArray(i)?i:[i]}function vT(i,e,t){return e>i?e:t<i?t:i}const Nv={wordml:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},it={Dxa:{mul:.05,unit:"pt"},Emu:{mul:1/12700,unit:"pt"},FontSize:{mul:.5,unit:"pt"},Border:{mul:.125,unit:"pt",min:.25,max:12},Point:{mul:1,unit:"pt"},Percent:{mul:.02,unit:"%"}};function Iv(i,e=it.Dxa){if(i==null||/.+(p[xt]|[%])$/.test(i))return i;var t=parseInt(i)*e.mul;return e.min&&e.max&&(t=vT(t,e.min,e.max)),`${t.toFixed(2)}${e.unit}`}function yT(i,e=!1){switch(i){case"1":return!0;case"0":return!1;case"on":return!0;case"off":return!1;case"true":return!0;case"false":return!1;default:return e}}function Mv(i,e,t){if(i.namespaceURI!=Nv.wordml)return!1;switch(i.localName){case"color":e.color=t.attr(i,"val");break;case"sz":e.fontSize=t.lengthAttr(i,"val",it.FontSize);break;default:return!1}return!0}function _T(i,e=!1){e&&(i=i.replace(/<[?].*[?]>/,"")),i=AT(i);const t=new DOMParser().parseFromString(i,"application/xml"),s=wT(t);if(s)throw new Error(s);return t}function wT(i){var e;return(e=i.getElementsByTagName("parsererror")[0])==null?void 0:e.textContent}function AT(i){return i.charCodeAt(0)===65279?i.substring(1):i}function kT(i){return new XMLSerializer().serializeToString(i)}class Dv{elements(e,t=null){const s=[];for(let n=0,r=e.childNodes.length;n<r;n++){let a=e.childNodes.item(n);a.nodeType==Node.ELEMENT_NODE&&(t==null||a.localName==t)&&s.push(a)}return s}element(e,t){for(let s=0,n=e.childNodes.length;s<n;s++){let r=e.childNodes.item(s);if(r.nodeType==1&&r.localName==t)return r}return null}elementAttr(e,t,s){var n=this.element(e,t);return n?this.attr(n,s):void 0}attrs(e){return Array.from(e.attributes)}attr(e,t){for(let s=0,n=e.attributes.length;s<n;s++){let r=e.attributes.item(s);if(r.localName==t)return r.value}return null}intAttr(e,t,s=null){var n=this.attr(e,t);return n?parseInt(n):s}hexAttr(e,t,s=null){var n=this.attr(e,t);return n?parseInt(n,16):s}floatAttr(e,t,s=null){var n=this.attr(e,t);return n?parseFloat(n):s}boolAttr(e,t,s=null){return yT(this.attr(e,t),s)}lengthAttr(e,t,s=it.Dxa){return Iv(this.attr(e,t),s)}}const q=new Dv;class cs{constructor(e,t){this._package=e,this.path=t}async load(){this.rels=await this._package.loadRelationships(this.path);const e=await this._package.load(this.path),t=this._package.parseXmlDocument(e);this._package.options.keepOrigin&&(this._xmlDocument=t),this.parseXml(t.firstElementChild)}save(){this._package.update(this.path,kT(this._xmlDocument))}parseXml(e){}}const ET={embedRegular:"regular",embedBold:"bold",embedItalic:"italic",embedBoldItalic:"boldItalic"};function ST(i,e){return e.elements(i).map(t=>xT(t,e))}function xT(i,e){let t={name:e.attr(i,"name"),embedFontRefs:[]};for(let s of e.elements(i))switch(s.localName){case"family":t.family=e.attr(s,"val");break;case"altName":t.altName=e.attr(s,"val");break;case"embedRegular":case"embedBold":case"embedItalic":case"embedBoldItalic":t.embedFontRefs.push(CT(s,e));break}return t}function CT(i,e){return{id:e.attr(i,"id"),key:e.attr(i,"fontKey"),type:ET[i.localName]}}class TT extends cs{parseXml(e){this.fonts=ST(e,this._package.xmlParser)}}class dg{constructor(e,t){this._zip=e,this.options=t,this.xmlParser=new Dv}get(e){const t=PT(e);return this._zip.files[t]??this._zip.files[t.replace(/\//g,"\\")]}update(e,t){this._zip.file(e,t)}static async load(e,t){const s=await fT.loadAsync(e);return new dg(s,t)}save(e="blob"){return this._zip.generateAsync({type:e})}load(e,t="string"){var s;return((s=this.get(e))==null?void 0:s.async(t))??Promise.resolve(null)}async loadRelationships(e=null){let t="_rels/.rels";if(e!=null){const[n,r]=fd(e);t=`${n}_rels/${r}.rels`}const s=await this.load(t);return s?pT(this.parseXmlDocument(s).firstElementChild,this.xmlParser):null}parseXmlDocument(e){return _T(e,this.options.trimXmlDeclaration)}}function PT(i){return i.startsWith("/")?i.substr(1):i}class RT extends cs{constructor(e,t,s){super(e,t),this._documentParser=s}parseXml(e){this.body=this._documentParser.parseDocumentFile(e)}}function id(i,e){return{type:e.attr(i,"val"),color:e.attr(i,"color"),size:e.lengthAttr(i,"sz",it.Border),offset:e.lengthAttr(i,"space",it.Point),frame:e.boolAttr(i,"frame"),shadow:e.boolAttr(i,"shadow")}}function LT(i,e){var t={};for(let s of e.elements(i))switch(s.localName){case"left":t.left=id(s,e);break;case"top":t.top=id(s,e);break;case"right":t.right=id(s,e);break;case"bottom":t.bottom=id(s,e);break}return t}var tb;(function(i){i.Continuous="continuous",i.NextPage="nextPage",i.NextColumn="nextColumn",i.EvenPage="evenPage",i.OddPage="oddPage"})(tb||(tb={}));function Fv(i,e=q){var t={};for(let s of e.elements(i))switch(s.localName){case"pgSz":t.pageSize={width:e.lengthAttr(s,"w"),height:e.lengthAttr(s,"h"),orientation:e.attr(s,"orient")};break;case"type":t.type=e.attr(s,"val");break;case"pgMar":t.pageMargins={left:e.lengthAttr(s,"left"),right:e.lengthAttr(s,"right"),top:e.lengthAttr(s,"top"),bottom:e.lengthAttr(s,"bottom"),header:e.lengthAttr(s,"header"),footer:e.lengthAttr(s,"footer"),gutter:e.lengthAttr(s,"gutter")};break;case"cols":t.columns=NT(s,e);break;case"headerReference":(t.headerRefs??(t.headerRefs=[])).push(sb(s,e));break;case"footerReference":(t.footerRefs??(t.footerRefs=[])).push(sb(s,e));break;case"titlePg":t.titlePage=e.boolAttr(s,"val",!0);break;case"pgBorders":t.pageBorders=LT(s,e);break;case"pgNumType":t.pageNumber=IT(s,e);break}return t}function NT(i,e){return{numberOfColumns:e.intAttr(i,"num"),space:e.lengthAttr(i,"space"),separator:e.boolAttr(i,"sep"),equalWidth:e.boolAttr(i,"equalWidth",!0),columns:e.elements(i,"col").map(t=>({width:e.lengthAttr(t,"w"),space:e.lengthAttr(t,"space")}))}}function IT(i,e){return{chapSep:e.attr(i,"chapSep"),chapStyle:e.attr(i,"chapStyle"),format:e.attr(i,"fmt"),start:e.intAttr(i,"start")}}function sb(i,e){return{id:e.attr(i,"id"),type:e.attr(i,"type")}}function MT(i,e){return{before:e.lengthAttr(i,"before"),after:e.lengthAttr(i,"after"),line:e.intAttr(i,"line"),lineRule:e.attr(i,"lineRule")}}function ug(i,e){let t={};for(let s of e.elements(i))DT(s,t,e);return t}function DT(i,e,t){return!!Mv(i,e,t)}function Ov(i,e){let t={};for(let s of e.elements(i))Bv(s,t,e);return t}function Bv(i,e,t){if(i.namespaceURI!=Nv.wordml)return!1;if(Mv(i,e,t))return!0;switch(i.localName){case"tabs":e.tabs=FT(i,t);break;case"sectPr":e.sectionProps=Fv(i,t);break;case"numPr":e.numbering=OT(i,t);break;case"spacing":return e.lineSpacing=MT(i,t),!1;case"textAlignment":return e.textAlignment=t.attr(i,"val"),!1;case"keepLines":e.keepLines=t.boolAttr(i,"val",!0);break;case"keepNext":e.keepNext=t.boolAttr(i,"val",!0);break;case"pageBreakBefore":e.pageBreakBefore=t.boolAttr(i,"val",!0);break;case"outlineLvl":e.outlineLevel=t.intAttr(i,"val");break;case"pStyle":e.styleName=t.attr(i,"val");break;case"rPr":e.runProps=ug(i,t);break;default:return!1}return!0}function FT(i,e){return e.elements(i,"tab").map(t=>({position:e.lengthAttr(t,"pos"),leader:e.attr(t,"leader"),style:e.attr(t,"val")}))}function OT(i,e){var t={};for(let s of e.elements(i))switch(s.localName){case"numId":t.id=e.attr(s,"val");break;case"ilvl":t.level=e.intAttr(s,"val");break}return t}function BT(i,e){let t={numberings:[],abstractNumberings:[],bulletPictures:[]};for(let s of e.elements(i))switch(s.localName){case"num":t.numberings.push(jT(s,e));break;case"abstractNum":t.abstractNumberings.push($T(s,e));break;case"numPicBullet":t.bulletPictures.push(HT(s,e));break}return t}function jT(i,e){let t={id:e.attr(i,"numId"),overrides:[]};for(let s of e.elements(i))switch(s.localName){case"abstractNumId":t.abstractId=e.attr(s,"val");break;case"lvlOverride":t.overrides.push(zT(s,e));break}return t}function $T(i,e){let t={id:e.attr(i,"abstractNumId"),levels:[]};for(let s of e.elements(i))switch(s.localName){case"name":t.name=e.attr(s,"val");break;case"multiLevelType":t.multiLevelType=e.attr(s,"val");break;case"numStyleLink":t.numberingStyleLink=e.attr(s,"val");break;case"styleLink":t.styleLink=e.attr(s,"val");break;case"lvl":t.levels.push(jv(s,e));break}return t}function jv(i,e){let t={level:e.intAttr(i,"ilvl")};for(let s of e.elements(i))switch(s.localName){case"start":t.start=e.attr(s,"val");break;case"lvlRestart":t.restart=e.intAttr(s,"val");break;case"numFmt":t.format=e.attr(s,"val");break;case"lvlText":t.text=e.attr(s,"val");break;case"lvlJc":t.justification=e.attr(s,"val");break;case"lvlPicBulletId":t.bulletPictureId=e.attr(s,"val");break;case"pStyle":t.paragraphStyle=e.attr(s,"val");break;case"pPr":t.paragraphProps=Ov(s,e);break;case"rPr":t.runProps=ug(s,e);break}return t}function zT(i,e){let t={level:e.intAttr(i,"ilvl")};for(let s of e.elements(i))switch(s.localName){case"startOverride":t.start=e.intAttr(s,"val");break;case"lvl":t.numberingLevel=jv(s,e);break}return t}function HT(i,e){var t=e.element(i,"pict"),s=t&&e.element(t,"shape"),n=s&&e.element(s,"imagedata");return n?{id:e.attr(i,"numPicBulletId"),referenceId:e.attr(n,"id"),style:e.attr(s,"style")}:null}class UT extends cs{constructor(e,t,s){super(e,t),this._documentParser=s}parseXml(e){Object.assign(this,BT(e,this._package.xmlParser)),this.domNumberings=this._documentParser.parseNumberingFile(e)}}class WT extends cs{constructor(e,t,s){super(e,t),this._documentParser=s}parseXml(e){this.styles=this._documentParser.parseStylesFile(e)}}var J;(function(i){i.Document="document",i.Paragraph="paragraph",i.Run="run",i.Break="break",i.NoBreakHyphen="noBreakHyphen",i.Table="table",i.Row="row",i.Cell="cell",i.Hyperlink="hyperlink",i.SmartTag="smartTag",i.Drawing="drawing",i.Image="image",i.Text="text",i.Tab="tab",i.Symbol="symbol",i.BookmarkStart="bookmarkStart",i.BookmarkEnd="bookmarkEnd",i.Footer="footer",i.Header="header",i.FootnoteReference="footnoteReference",i.EndnoteReference="endnoteReference",i.Footnote="footnote",i.Endnote="endnote",i.SimpleField="simpleField",i.ComplexField="complexField",i.Instruction="instruction",i.VmlPicture="vmlPicture",i.MmlMath="mmlMath",i.MmlMathParagraph="mmlMathParagraph",i.MmlFraction="mmlFraction",i.MmlFunction="mmlFunction",i.MmlFunctionName="mmlFunctionName",i.MmlNumerator="mmlNumerator",i.MmlDenominator="mmlDenominator",i.MmlRadical="mmlRadical",i.MmlBase="mmlBase",i.MmlDegree="mmlDegree",i.MmlSuperscript="mmlSuperscript",i.MmlSubscript="mmlSubscript",i.MmlPreSubSuper="mmlPreSubSuper",i.MmlSubArgument="mmlSubArgument",i.MmlSuperArgument="mmlSuperArgument",i.MmlNary="mmlNary",i.MmlDelimiter="mmlDelimiter",i.MmlRun="mmlRun",i.MmlEquationArray="mmlEquationArray",i.MmlLimit="mmlLimit",i.MmlLimitLower="mmlLimitLower",i.MmlMatrix="mmlMatrix",i.MmlMatrixRow="mmlMatrixRow",i.MmlBox="mmlBox",i.MmlBar="mmlBar",i.MmlGroupChar="mmlGroupChar",i.VmlElement="vmlElement",i.Inserted="inserted",i.Deleted="deleted",i.DeletedText="deletedText",i.Comment="comment",i.CommentReference="commentReference",i.CommentRangeStart="commentRangeStart",i.CommentRangeEnd="commentRangeEnd",i.AltChunk="altChunk"})(J||(J={}));class ta{constructor(){this.children=[],this.cssStyle={}}}class VT extends ta{constructor(){super(...arguments),this.type=J.Header}}class qT extends ta{constructor(){super(...arguments),this.type=J.Footer}}class $v extends cs{constructor(e,t,s){super(e,t),this._documentParser=s}parseXml(e){this.rootElement=this.createRootElement(),this.rootElement.children=this._documentParser.parseBodyElements(e)}}class GT extends $v{createRootElement(){return new VT}}class XT extends $v{createRootElement(){return new qT}}function YT(i,e){const t={};for(let s of e.elements(i))switch(s.localName){case"Template":t.template=s.textContent;break;case"Pages":t.pages=Uo(s.textContent);break;case"Words":t.words=Uo(s.textContent);break;case"Characters":t.characters=Uo(s.textContent);break;case"Application":t.application=s.textContent;break;case"Lines":t.lines=Uo(s.textContent);break;case"Paragraphs":t.paragraphs=Uo(s.textContent);break;case"Company":t.company=s.textContent;break;case"AppVersion":t.appVersion=s.textContent;break}return t}function Uo(i){if(!(typeof i>"u"))return parseInt(i)}class KT extends cs{parseXml(e){this.props=YT(e,this._package.xmlParser)}}function ZT(i,e){const t={};for(let s of e.elements(i))switch(s.localName){case"title":t.title=s.textContent;break;case"description":t.description=s.textContent;break;case"subject":t.subject=s.textContent;break;case"creator":t.creator=s.textContent;break;case"keywords":t.keywords=s.textContent;break;case"language":t.language=s.textContent;break;case"lastModifiedBy":t.lastModifiedBy=s.textContent;break;case"revision":s.textContent&&(t.revision=parseInt(s.textContent));break}return t}class JT extends cs{parseXml(e){this.props=ZT(e,this._package.xmlParser)}}class QT{}function eP(i,e){var t=new QT,s=e.element(i,"themeElements");for(let n of e.elements(s))switch(n.localName){case"clrScheme":t.colorScheme=tP(n,e);break;case"fontScheme":t.fontScheme=sP(n,e);break}return t}function tP(i,e){var t={name:e.attr(i,"name"),colors:{}};for(let r of e.elements(i)){var s=e.element(r,"srgbClr"),n=e.element(r,"sysClr");s?t.colors[r.localName]=e.attr(s,"val"):n&&(t.colors[r.localName]=e.attr(n,"lastClr"))}return t}function sP(i,e){var t={name:e.attr(i,"name")};for(let s of e.elements(i))switch(s.localName){case"majorFont":t.majorFont=nb(s,e);break;case"minorFont":t.minorFont=nb(s,e);break}return t}function nb(i,e){return{latinTypeface:e.elementAttr(i,"latin","typeface"),eaTypeface:e.elementAttr(i,"ea","typeface"),csTypeface:e.elementAttr(i,"cs","typeface")}}class nP extends cs{constructor(e,t){super(e,t)}parseXml(e){this.theme=eP(e,this._package.xmlParser)}}class zv{}class rP extends zv{constructor(){super(...arguments),this.type=J.Footnote}}class iP extends zv{constructor(){super(...arguments),this.type=J.Endnote}}class Hv extends cs{constructor(e,t,s){super(e,t),this._documentParser=s}}class aP extends Hv{constructor(e,t,s){super(e,t,s)}parseXml(e){this.notes=this._documentParser.parseNotes(e,"footnote",rP)}}class oP extends Hv{constructor(e,t,s){super(e,t,s)}parseXml(e){this.notes=this._documentParser.parseNotes(e,"endnote",iP)}}function lP(i,e){var t={};for(let s of e.elements(i))switch(s.localName){case"defaultTabStop":t.defaultTabStop=e.lengthAttr(s,"val");break;case"footnotePr":t.footnoteProps=rb(s,e);break;case"endnotePr":t.endnoteProps=rb(s,e);break;case"autoHyphenation":t.autoHyphenation=e.boolAttr(s,"val");break}return t}function rb(i,e){var t={defaultNoteIds:[]};for(let s of e.elements(i))switch(s.localName){case"numFmt":t.nummeringFormat=e.attr(s,"val");break;case"footnote":case"endnote":t.defaultNoteIds.push(e.attr(s,"id"));break}return t}class cP extends cs{constructor(e,t){super(e,t)}parseXml(e){this.settings=lP(e,this._package.xmlParser)}}function hP(i,e){return e.elements(i,"property").map(t=>{const s=t.firstChild;return{formatId:e.attr(t,"fmtid"),name:e.attr(t,"name"),type:s.nodeName,value:s.textContent}})}class dP extends cs{parseXml(e){this.props=hP(e,this._package.xmlParser)}}class uP extends cs{constructor(e,t,s){super(e,t),this._documentParser=s}parseXml(e){this.comments=this._documentParser.parseComments(e),this.commentMap=Zn(this.comments,t=>t.id)}}class fP extends cs{constructor(e,t){super(e,t),this.comments=[]}parseXml(e){const t=this._package.xmlParser;for(let s of t.elements(e,"commentEx"))this.comments.push({paraId:t.attr(s,"paraId"),paraIdParent:t.attr(s,"paraIdParent"),done:t.boolAttr(s,"done")});this.commentMap=Zn(this.comments,s=>s.paraId)}}const pP=[{type:et.OfficeDocument,target:"word/document.xml"},{type:et.ExtendedProperties,target:"docProps/app.xml"},{type:et.CoreProperties,target:"docProps/core.xml"},{type:et.CustomProperties,target:"docProps/custom.xml"}];class fg{constructor(){this.parts=[],this.partsMap={}}static async load(e,t,s){var n=new fg;return n._options=s,n._parser=t,n._package=await dg.load(e,s),n.rels=await n._package.loadRelationships(),await Promise.all(pP.map(r=>{const a=n.rels.find(o=>o.type===r.type)??r;return n.loadRelationshipPart(a.target,a.type)})),n}save(e="blob"){return this._package.save(e)}async loadRelationshipPart(e,t){var n;if(this.partsMap[e])return this.partsMap[e];if(!this._package.get(e))return null;let s=null;switch(t){case et.OfficeDocument:this.documentPart=s=new RT(this._package,e,this._parser);break;case et.FontTable:this.fontTablePart=s=new TT(this._package,e);break;case et.Numbering:this.numberingPart=s=new UT(this._package,e,this._parser);break;case et.Styles:this.stylesPart=s=new WT(this._package,e,this._parser);break;case et.Theme:this.themePart=s=new nP(this._package,e);break;case et.Footnotes:this.footnotesPart=s=new aP(this._package,e,this._parser);break;case et.Endnotes:this.endnotesPart=s=new oP(this._package,e,this._parser);break;case et.Footer:s=new XT(this._package,e,this._parser);break;case et.Header:s=new GT(this._package,e,this._parser);break;case et.CoreProperties:this.corePropsPart=s=new JT(this._package,e);break;case et.ExtendedProperties:this.extendedPropsPart=s=new KT(this._package,e);break;case et.CustomProperties:s=new dP(this._package,e);break;case et.Settings:this.settingsPart=s=new cP(this._package,e);break;case et.Comments:this.commentsPart=s=new uP(this._package,e,this._parser);break;case et.CommentsExtended:this.commentsExtendedPart=s=new fP(this._package,e);break}if(s==null)return Promise.resolve(null);if(this.partsMap[e]=s,this.parts.push(s),await s.load(),((n=s.rels)==null?void 0:n.length)>0){const[r]=fd(s.path);await Promise.all(s.rels.map(a=>this.loadRelationshipPart(up(a.target,r),a.type)))}return s}async loadDocumentImage(e,t){const s=await this.loadResource(t??this.documentPart,e,"blob");return this.blobToURL(s)}async loadNumberingImage(e){const t=await this.loadResource(this.numberingPart,e,"blob");return this.blobToURL(t)}async loadFont(e,t){const s=await this.loadResource(this.fontTablePart,e,"uint8array");return s&&this.blobToURL(new Blob([mP(s,t)]))}async loadAltChunk(e,t){return await this.loadResource(t??this.documentPart,e,"string")}blobToURL(e){return e?this._options.useBase64URL?gT(e):URL.createObjectURL(e):null}findPartByRelId(e,t=null){var s=(t.rels??this.rels).find(r=>r.id==e);const n=t?fd(t.path)[0]:"";return s?this.partsMap[up(s.target,n)]:null}getPathById(e,t){const s=e.rels.find(r=>r.id==t),[n]=fd(e.path);return s?up(s.target,n):null}loadResource(e,t,s){const n=this.getPathById(e,t);return n?this._package.load(n,s):Promise.resolve(null)}}function mP(i,e){const s=e.replace(/{|}|-/g,""),n=new Array(16);for(let r=0;r<16;r++)n[16-r-1]=parseInt(s.substring(r*2,r*2+2),16);for(let r=0;r<32;r++)i[r]=i[r]^n[r%16];return i}function gP(i,e){return{type:J.BookmarkStart,id:e.attr(i,"id"),name:e.attr(i,"name"),colFirst:e.intAttr(i,"colFirst"),colLast:e.intAttr(i,"colLast")}}function bP(i,e){return{type:J.BookmarkEnd,id:e.attr(i,"id")}}class vP extends ta{constructor(){super(...arguments),this.type=J.VmlElement,this.attrs={}}}function Uv(i,e){var t=new vP;switch(i.localName){case"rect":t.tagName="rect",Object.assign(t.attrs,{width:"100%",height:"100%"});break;case"oval":t.tagName="ellipse",Object.assign(t.attrs,{cx:"50%",cy:"50%",rx:"50%",ry:"50%"});break;case"line":t.tagName="line";break;case"shape":t.tagName="g";break;case"textbox":t.tagName="foreignObject",Object.assign(t.attrs,{width:"100%",height:"100%"});break;default:return null}for(const s of q.attrs(i))switch(s.localName){case"style":t.cssStyleText=s.value;break;case"fillcolor":t.attrs.fill=s.value;break;case"from":const[n,r]=ib(s.value);Object.assign(t.attrs,{x1:n,y1:r});break;case"to":const[a,o]=ib(s.value);Object.assign(t.attrs,{x2:a,y2:o});break}for(const s of q.elements(i))switch(s.localName){case"stroke":Object.assign(t.attrs,yP(s));break;case"fill":Object.assign(t.attrs,_P());break;case"imagedata":t.tagName="image",Object.assign(t.attrs,{width:"100%",height:"100%"}),t.imageHref={id:q.attr(s,"id"),title:q.attr(s,"title")};break;case"txbxContent":t.children.push(...e.parseBodyElements(s));break;default:const n=Uv(s,e);n&&t.children.push(n);break}return t}function yP(i){return{stroke:q.attr(i,"color"),"stroke-width":q.lengthAttr(i,"weight",it.Emu)??"1px"}}function _P(i){return{}}function ib(i){return i.split(",")}class wP extends ta{constructor(){super(...arguments),this.type=J.Comment}}class AP extends ta{constructor(e){super(),this.id=e,this.type=J.CommentReference}}class kP extends ta{constructor(e){super(),this.id=e,this.type=J.CommentRangeStart}}class EP extends ta{constructor(e){super(),this.id=e,this.type=J.CommentRangeEnd}}var pd={shd:"inherit",color:"black",borderColor:"black",highlight:"transparent"};const SP=[],ab={oMath:J.MmlMath,oMathPara:J.MmlMathParagraph,f:J.MmlFraction,func:J.MmlFunction,fName:J.MmlFunctionName,num:J.MmlNumerator,den:J.MmlDenominator,rad:J.MmlRadical,deg:J.MmlDegree,e:J.MmlBase,sSup:J.MmlSuperscript,sSub:J.MmlSubscript,sPre:J.MmlPreSubSuper,sup:J.MmlSuperArgument,sub:J.MmlSubArgument,d:J.MmlDelimiter,nary:J.MmlNary,eqArr:J.MmlEquationArray,lim:J.MmlLimit,limLow:J.MmlLimitLower,m:J.MmlMatrix,mr:J.MmlMatrixRow,box:J.MmlBox,bar:J.MmlBar,groupChr:J.MmlGroupChar};class xP{constructor(e){this.options={ignoreWidth:!1,debug:!1,...e}}parseNotes(e,t,s){var n=[];for(let r of q.elements(e,t)){const a=new s;a.id=q.attr(r,"id"),a.noteType=q.attr(r,"type"),a.children=this.parseBodyElements(r),n.push(a)}return n}parseComments(e){var t=[];for(let s of q.elements(e,"comment")){const n=new wP;n.id=q.attr(s,"id"),n.author=q.attr(s,"author"),n.initials=q.attr(s,"initials"),n.date=q.attr(s,"date"),n.children=this.parseBodyElements(s),t.push(n)}return t}parseDocumentFile(e){var t=q.element(e,"body"),s=q.element(e,"background"),n=q.element(t,"sectPr");return{type:J.Document,children:this.parseBodyElements(t),props:n?Fv(n,q):{},cssStyle:s?this.parseBackground(s):{}}}parseBackground(e){var t={},s=ca.colorAttr(e,"color");return s&&(t["background-color"]=s),t}parseBodyElements(e){var t=[];for(const s of q.elements(e))switch(s.localName){case"p":t.push(this.parseParagraph(s));break;case"altChunk":t.push(this.parseAltChunk(s));break;case"tbl":t.push(this.parseTable(s));break;case"sdt":t.push(...this.parseSdt(s,n=>this.parseBodyElements(n)));break}return t}parseStylesFile(e){var t=[];for(const s of q.elements(e))switch(s.localName){case"style":t.push(this.parseStyle(s));break;case"docDefaults":t.push(this.parseDefaultStyles(s));break}return t}parseDefaultStyles(e){var t={id:null,name:null,target:null,basedOn:null,styles:[]};for(const r of q.elements(e))switch(r.localName){case"rPrDefault":var s=q.element(r,"rPr");s&&t.styles.push({target:"span",values:this.parseDefaultProperties(s,{})});break;case"pPrDefault":var n=q.element(r,"pPr");n&&t.styles.push({target:"p",values:this.parseDefaultProperties(n,{})});break}return t}parseStyle(e){var t={id:q.attr(e,"styleId"),isDefault:q.boolAttr(e,"default"),name:null,target:null,basedOn:null,styles:[],linked:null};switch(q.attr(e,"type")){case"paragraph":t.target="p";break;case"table":t.target="table";break;case"character":t.target="span";break}for(const s of q.elements(e))switch(s.localName){case"basedOn":t.basedOn=q.attr(s,"val");break;case"name":t.name=q.attr(s,"val");break;case"link":t.linked=q.attr(s,"val");break;case"next":t.next=q.attr(s,"val");break;case"aliases":t.aliases=q.attr(s,"val").split(",");break;case"pPr":t.styles.push({target:"p",values:this.parseDefaultProperties(s,{})}),t.paragraphProps=Ov(s,q);break;case"rPr":t.styles.push({target:"span",values:this.parseDefaultProperties(s,{})}),t.runProps=ug(s,q);break;case"tblPr":case"tcPr":t.styles.push({target:"td",values:this.parseDefaultProperties(s,{})});break;case"tblStylePr":for(let n of this.parseTableStyle(s))t.styles.push(n);break;case"rsid":case"qFormat":case"hidden":case"semiHidden":case"unhideWhenUsed":case"autoRedefine":case"uiPriority":break;default:this.options.debug&&console.warn(`DOCX: Unknown style element: ${s.localName}`)}return t}parseTableStyle(e){var t=[],s=q.attr(e,"type"),n="",r="";switch(s){case"firstRow":r=".first-row",n="tr.first-row td";break;case"lastRow":r=".last-row",n="tr.last-row td";break;case"firstCol":r=".first-col",n="td.first-col";break;case"lastCol":r=".last-col",n="td.last-col";break;case"band1Vert":r=":not(.no-vband)",n="td.odd-col";break;case"band2Vert":r=":not(.no-vband)",n="td.even-col";break;case"band1Horz":r=":not(.no-hband)",n="tr.odd-row";break;case"band2Horz":r=":not(.no-hband)",n="tr.even-row";break;default:return[]}for(const a of q.elements(e))switch(a.localName){case"pPr":t.push({target:`${n} p`,mod:r,values:this.parseDefaultProperties(a,{})});break;case"rPr":t.push({target:`${n} span`,mod:r,values:this.parseDefaultProperties(a,{})});break;case"tblPr":case"tcPr":t.push({target:n,mod:r,values:this.parseDefaultProperties(a,{})});break}return t}parseNumberingFile(e){var t=[],s={},n=[];for(const o of q.elements(e))switch(o.localName){case"abstractNum":this.parseAbstractNumbering(o,n).forEach(l=>t.push(l));break;case"numPicBullet":n.push(this.parseNumberingPicBullet(o));break;case"num":var r=q.attr(o,"numId"),a=q.elementAttr(o,"abstractNumId","val");s[a]=r;break}return t.forEach(o=>o.id=s[o.id]),t}parseNumberingPicBullet(e){var t=q.element(e,"pict"),s=t&&q.element(t,"shape"),n=s&&q.element(s,"imagedata");return n?{id:q.intAttr(e,"numPicBulletId"),src:q.attr(n,"id"),style:q.attr(s,"style")}:null}parseAbstractNumbering(e,t){var s=[],n=q.attr(e,"abstractNumId");for(const r of q.elements(e))switch(r.localName){case"lvl":s.push(this.parseNumberingLevel(n,r,t));break}return s}parseNumberingLevel(e,t,s){var n={id:e,level:q.intAttr(t,"ilvl"),start:1,pStyleName:void 0,pStyle:{},rStyle:{},suff:"tab"};for(const a of q.elements(t))switch(a.localName){case"start":n.start=q.intAttr(a,"val");break;case"pPr":this.parseDefaultProperties(a,n.pStyle);break;case"rPr":this.parseDefaultProperties(a,n.rStyle);break;case"lvlPicBulletId":var r=q.intAttr(a,"val");n.bullet=s.find(o=>(o==null?void 0:o.id)==r);break;case"lvlText":n.levelText=q.attr(a,"val");break;case"pStyle":n.pStyleName=q.attr(a,"val");break;case"numFmt":n.format=q.attr(a,"val");break;case"suff":n.suff=q.attr(a,"val");break}return n}parseSdt(e,t){const s=q.element(e,"sdtContent");return s?t(s):[]}parseInserted(e,t){var s;return{type:J.Inserted,children:((s=t(e))==null?void 0:s.children)??[]}}parseDeleted(e,t){var s;return{type:J.Deleted,children:((s=t(e))==null?void 0:s.children)??[]}}parseAltChunk(e){return{type:J.AltChunk,children:[],id:q.attr(e,"id")}}parseParagraph(e){var t={type:J.Paragraph,children:[]};for(let s of q.elements(e))switch(s.localName){case"pPr":this.parseParagraphProperties(s,t);break;case"r":t.children.push(this.parseRun(s,t));break;case"hyperlink":t.children.push(this.parseHyperlink(s,t));break;case"smartTag":t.children.push(this.parseSmartTag(s,t));break;case"bookmarkStart":t.children.push(gP(s,q));break;case"bookmarkEnd":t.children.push(bP(s,q));break;case"commentRangeStart":t.children.push(new kP(q.attr(s,"id")));break;case"commentRangeEnd":t.children.push(new EP(q.attr(s,"id")));break;case"oMath":case"oMathPara":t.children.push(this.parseMathElement(s));break;case"sdt":t.children.push(...this.parseSdt(s,n=>this.parseParagraph(n).children));break;case"ins":t.children.push(this.parseInserted(s,n=>this.parseParagraph(n)));break;case"del":t.children.push(this.parseDeleted(s,n=>this.parseParagraph(n)));break}return t}parseParagraphProperties(e,t){this.parseDefaultProperties(e,t.cssStyle={},null,s=>{if(Bv(s,t,q))return!0;switch(s.localName){case"pStyle":t.styleName=q.attr(s,"val");break;case"cnfStyle":t.className=He.classNameOfCnfStyle(s);break;case"framePr":this.parseFrame(s,t);break;case"rPr":break;default:return!1}return!0})}parseFrame(e,t){var s=q.attr(e,"dropCap");s=="drop"&&(t.cssStyle.float="left")}parseHyperlink(e,t){var s={type:J.Hyperlink,parent:t,children:[]};s.anchor=q.attr(e,"anchor"),s.id=q.attr(e,"id");for(const n of q.elements(e))switch(n.localName){case"r":s.children.push(this.parseRun(n,s));break}return s}parseSmartTag(e,t){var s={type:J.SmartTag,parent:t,children:[]},n=q.attr(e,"uri"),r=q.attr(e,"element");n&&(s.uri=n),r&&(s.element=r);for(const a of q.elements(e))switch(a.localName){case"r":s.children.push(this.parseRun(a,s));break}return s}parseRun(e,t){var s={type:J.Run,parent:t,children:[]};for(let n of q.elements(e))switch(n=this.checkAlternateContent(n),n.localName){case"t":s.children.push({type:J.Text,text:n.textContent});break;case"delText":s.children.push({type:J.DeletedText,text:n.textContent});break;case"commentReference":s.children.push(new AP(q.attr(n,"id")));break;case"fldSimple":s.children.push({type:J.SimpleField,instruction:q.attr(n,"instr"),lock:q.boolAttr(n,"lock",!1),dirty:q.boolAttr(n,"dirty",!1)});break;case"instrText":s.fieldRun=!0,s.children.push({type:J.Instruction,text:n.textContent});break;case"fldChar":s.fieldRun=!0,s.children.push({type:J.ComplexField,charType:q.attr(n,"fldCharType"),lock:q.boolAttr(n,"lock",!1),dirty:q.boolAttr(n,"dirty",!1)});break;case"noBreakHyphen":s.children.push({type:J.NoBreakHyphen});break;case"br":s.children.push({type:J.Break,break:q.attr(n,"type")||"textWrapping"});break;case"lastRenderedPageBreak":s.children.push({type:J.Break,break:"lastRenderedPageBreak"});break;case"sym":s.children.push({type:J.Symbol,font:Dp(q.attr(n,"font")),char:q.attr(n,"char")});break;case"tab":s.children.push({type:J.Tab});break;case"footnoteReference":s.children.push({type:J.FootnoteReference,id:q.attr(n,"id")});break;case"endnoteReference":s.children.push({type:J.EndnoteReference,id:q.attr(n,"id")});break;case"drawing":let r=this.parseDrawing(n);r&&(s.children=[r]);break;case"pict":s.children.push(this.parseVmlPicture(n));break;case"rPr":this.parseRunProperties(n,s);break}return s}parseMathElement(e){const t=`${e.localName}Pr`,s={type:ab[e.localName],children:[]};for(const r of q.elements(e))if(ab[r.localName])s.children.push(this.parseMathElement(r));else if(r.localName=="r"){var n=this.parseRun(r);n.type=J.MmlRun,s.children.push(n)}else r.localName==t&&(s.props=this.parseMathProperies(r));return s}parseMathProperies(e){const t={};for(const s of q.elements(e))switch(s.localName){case"chr":t.char=q.attr(s,"val");break;case"vertJc":t.verticalJustification=q.attr(s,"val");break;case"pos":t.position=q.attr(s,"val");break;case"degHide":t.hideDegree=q.boolAttr(s,"val");break;case"begChr":t.beginChar=q.attr(s,"val");break;case"endChr":t.endChar=q.attr(s,"val");break}return t}parseRunProperties(e,t){this.parseDefaultProperties(e,t.cssStyle={},null,s=>{switch(s.localName){case"rStyle":t.styleName=q.attr(s,"val");break;case"vertAlign":t.verticalAlign=He.valueOfVertAlign(s,!0);break;default:return!1}return!0})}parseVmlPicture(e){const t={type:J.VmlPicture,children:[]};for(const s of q.elements(e)){const n=Uv(s,this);n&&t.children.push(n)}return t}checkAlternateContent(e){var r;if(e.localName!="AlternateContent")return e;var t=q.element(e,"Choice");if(t){var s=q.attr(t,"Requires"),n=e.lookupNamespaceURI(s);if(SP.includes(n))return t.firstElementChild}return(r=q.element(e,"Fallback"))==null?void 0:r.firstElementChild}parseDrawing(e){for(var t of q.elements(e))switch(t.localName){case"inline":case"anchor":return this.parseDrawingWrapper(t)}}parseDrawingWrapper(e){var t={type:J.Drawing,children:[],cssStyle:{}},s=e.localName=="anchor";let n=null,r=q.boolAttr(e,"simplePos");q.boolAttr(e,"behindDoc");let a={relative:"page",align:"left",offset:"0"},o={relative:"page",align:"top",offset:"0"};for(var l of q.elements(e))switch(l.localName){case"simplePos":r&&(a.offset=q.lengthAttr(l,"x",it.Emu),o.offset=q.lengthAttr(l,"y",it.Emu));break;case"extent":t.cssStyle.width=q.lengthAttr(l,"cx",it.Emu),t.cssStyle.height=q.lengthAttr(l,"cy",it.Emu);break;case"positionH":case"positionV":if(!r){let f=l.localName=="positionH"?a:o;var h=q.element(l,"align"),d=q.element(l,"posOffset");f.relative=q.attr(l,"relativeFrom")??f.relative,h&&(f.align=h.textContent),d&&(f.offset=Iv(d.textContent,it.Emu))}break;case"wrapTopAndBottom":n="wrapTopAndBottom";break;case"wrapNone":n="wrapNone";break;case"graphic":var u=this.parseGraphic(l);u&&t.children.push(u);break}return n=="wrapTopAndBottom"?(t.cssStyle.display="block",a.align&&(t.cssStyle["text-align"]=a.align,t.cssStyle.width="100%")):n=="wrapNone"?(t.cssStyle.display="block",t.cssStyle.position="relative",t.cssStyle.width="0px",t.cssStyle.height="0px",a.offset&&(t.cssStyle.left=a.offset),o.offset&&(t.cssStyle.top=o.offset)):s&&(a.align=="left"||a.align=="right")&&(t.cssStyle.float=a.align),t}parseGraphic(e){var t=q.element(e,"graphicData");for(let s of q.elements(t))switch(s.localName){case"pic":return this.parsePicture(s)}return null}parsePicture(e){var t={type:J.Image,src:"",cssStyle:{}},s=q.element(e,"blipFill"),n=q.element(s,"blip"),r=q.element(s,"srcRect");t.src=q.attr(n,"embed"),r&&(t.srcRect=[q.intAttr(r,"l",0)/1e5,q.intAttr(r,"t",0)/1e5,q.intAttr(r,"r",0)/1e5,q.intAttr(r,"b",0)/1e5]);var a=q.element(e,"spPr"),o=q.element(a,"xfrm");if(t.cssStyle.position="relative",o){t.rotation=q.intAttr(o,"rot",0)/6e4;for(var l of q.elements(o))switch(l.localName){case"ext":t.cssStyle.width=q.lengthAttr(l,"cx",it.Emu),t.cssStyle.height=q.lengthAttr(l,"cy",it.Emu);break;case"off":t.cssStyle.left=q.lengthAttr(l,"x",it.Emu),t.cssStyle.top=q.lengthAttr(l,"y",it.Emu);break}}return t}parseTable(e){var t={type:J.Table,children:[]};for(const s of q.elements(e))switch(s.localName){case"tr":t.children.push(this.parseTableRow(s));break;case"tblGrid":t.columns=this.parseTableColumns(s);break;case"tblPr":this.parseTableProperties(s,t);break}return t}parseTableColumns(e){var t=[];for(const s of q.elements(e))switch(s.localName){case"gridCol":t.push({width:q.lengthAttr(s,"w")});break}return t}parseTableProperties(e,t){switch(t.cssStyle={},t.cellStyle={},this.parseDefaultProperties(e,t.cssStyle,t.cellStyle,s=>{switch(s.localName){case"tblStyle":t.styleName=q.attr(s,"val");break;case"tblLook":t.className=He.classNameOftblLook(s);break;case"tblpPr":this.parseTablePosition(s,t);break;case"tblStyleColBandSize":t.colBandSize=q.intAttr(s,"val");break;case"tblStyleRowBandSize":t.rowBandSize=q.intAttr(s,"val");break;case"hidden":t.cssStyle.display="none";break;default:return!1}return!0}),t.cssStyle["text-align"]){case"center":delete t.cssStyle["text-align"],t.cssStyle["margin-left"]="auto",t.cssStyle["margin-right"]="auto";break;case"right":delete t.cssStyle["text-align"],t.cssStyle["margin-left"]="auto";break}}parseTablePosition(e,t){var s=q.lengthAttr(e,"topFromText"),n=q.lengthAttr(e,"bottomFromText"),r=q.lengthAttr(e,"rightFromText"),a=q.lengthAttr(e,"leftFromText");t.cssStyle.float="left",t.cssStyle["margin-bottom"]=He.addSize(t.cssStyle["margin-bottom"],n),t.cssStyle["margin-left"]=He.addSize(t.cssStyle["margin-left"],a),t.cssStyle["margin-right"]=He.addSize(t.cssStyle["margin-right"],r),t.cssStyle["margin-top"]=He.addSize(t.cssStyle["margin-top"],s)}parseTableRow(e){var t={type:J.Row,children:[]};for(const s of q.elements(e))switch(s.localName){case"tc":t.children.push(this.parseTableCell(s));break;case"trPr":case"tblPrEx":this.parseTableRowProperties(s,t);break}return t}parseTableRowProperties(e,t){t.cssStyle=this.parseDefaultProperties(e,{},null,s=>{switch(s.localName){case"cnfStyle":t.className=He.classNameOfCnfStyle(s);break;case"tblHeader":t.isHeader=q.boolAttr(s,"val");break;case"gridBefore":t.gridBefore=q.intAttr(s,"val");break;case"gridAfter":t.gridAfter=q.intAttr(s,"val");break;default:return!1}return!0})}parseTableCell(e){var t={type:J.Cell,children:[]};for(const s of q.elements(e))switch(s.localName){case"tbl":t.children.push(this.parseTable(s));break;case"p":t.children.push(this.parseParagraph(s));break;case"tcPr":this.parseTableCellProperties(s,t);break}return t}parseTableCellProperties(e,t){t.cssStyle=this.parseDefaultProperties(e,{},null,s=>{switch(s.localName){case"gridSpan":t.span=q.intAttr(s,"val",null);break;case"vMerge":t.verticalMerge=q.attr(s,"val")??"continue";break;case"cnfStyle":t.className=He.classNameOfCnfStyle(s);break;default:return!1}return!0}),this.parseTableCellVerticalText(e,t)}parseTableCellVerticalText(e,t){const s={btLr:{writingMode:"vertical-rl",transform:"rotate(180deg)"},lrTb:{writingMode:"vertical-lr",transform:"none"},tbRl:{writingMode:"vertical-rl",transform:"none"}};for(const n of q.elements(e))if(n.localName==="textDirection"){const r=q.attr(n,"val"),a=s[r]||{writingMode:"horizontal-tb"};t.cssStyle["writing-mode"]=a.writingMode,t.cssStyle.transform=a.transform}}parseDefaultProperties(e,t=null,s=null,n=null){t=t||{};for(const r of q.elements(e))if(!(n!=null&&n(r)))switch(r.localName){case"jc":t["text-align"]=He.valueOfJc(r);break;case"textAlignment":t["vertical-align"]=He.valueOfTextAlignment(r);break;case"color":t.color=ca.colorAttr(r,"val",null,pd.color);break;case"sz":t["font-size"]=t["min-height"]=q.lengthAttr(r,"val",it.FontSize);break;case"shd":t["background-color"]=ca.colorAttr(r,"fill",null,pd.shd);break;case"highlight":t["background-color"]=ca.colorAttr(r,"val",null,pd.highlight);break;case"vertAlign":break;case"position":t.verticalAlign=q.lengthAttr(r,"val",it.FontSize);break;case"tcW":if(this.options.ignoreWidth)break;case"tblW":t.width=He.valueOfSize(r,"w");break;case"trHeight":this.parseTrHeight(r,t);break;case"strike":t["text-decoration"]=q.boolAttr(r,"val",!0)?"line-through":"none";break;case"b":t["font-weight"]=q.boolAttr(r,"val",!0)?"bold":"normal";break;case"i":t["font-style"]=q.boolAttr(r,"val",!0)?"italic":"normal";break;case"caps":t["text-transform"]=q.boolAttr(r,"val",!0)?"uppercase":"none";break;case"smallCaps":t["font-variant"]=q.boolAttr(r,"val",!0)?"small-caps":"none";break;case"u":this.parseUnderline(r,t);break;case"ind":case"tblInd":this.parseIndentation(r,t);break;case"rFonts":this.parseFont(r,t);break;case"tblBorders":this.parseBorderProperties(r,s||t);break;case"tblCellSpacing":t["border-spacing"]=He.valueOfMargin(r),t["border-collapse"]="separate";break;case"pBdr":this.parseBorderProperties(r,t);break;case"bdr":t.border=He.valueOfBorder(r);break;case"tcBorders":this.parseBorderProperties(r,t);break;case"vanish":q.boolAttr(r,"val",!0)&&(t.display="none");break;case"kern":break;case"noWrap":break;case"tblCellMar":case"tcMar":this.parseMarginProperties(r,s||t);break;case"tblLayout":t["table-layout"]=He.valueOfTblLayout(r);break;case"vAlign":t["vertical-align"]=He.valueOfTextAlignment(r);break;case"spacing":e.localName=="pPr"&&this.parseSpacing(r,t);break;case"wordWrap":q.boolAttr(r,"val")&&(t["overflow-wrap"]="break-word");break;case"suppressAutoHyphens":t.hyphens=q.boolAttr(r,"val",!0)?"none":"auto";break;case"lang":t.$lang=q.attr(r,"val");break;case"rtl":case"bidi":q.boolAttr(r,"val",!0)&&(t.direction="rtl");break;case"bCs":case"iCs":case"szCs":case"tabs":case"outlineLvl":case"contextualSpacing":case"tblStyleColBandSize":case"tblStyleRowBandSize":case"webHidden":case"pageBreakBefore":case"suppressLineNumbers":case"keepLines":case"keepNext":case"widowControl":case"bidi":case"rtl":case"noProof":break;default:this.options.debug&&console.warn(`DOCX: Unknown document element: ${e.localName}.${r.localName}`);break}return t}parseUnderline(e,t){var s=q.attr(e,"val");if(s!=null){switch(s){case"dash":case"dashDotDotHeavy":case"dashDotHeavy":case"dashedHeavy":case"dashLong":case"dashLongHeavy":case"dotDash":case"dotDotDash":t["text-decoration"]="underline dashed";break;case"dotted":case"dottedHeavy":t["text-decoration"]="underline dotted";break;case"double":t["text-decoration"]="underline double";break;case"single":case"thick":t["text-decoration"]="underline";break;case"wave":case"wavyDouble":case"wavyHeavy":t["text-decoration"]="underline wavy";break;case"words":t["text-decoration"]="underline";break;case"none":t["text-decoration"]="none";break}var n=ca.colorAttr(e,"color");n&&(t["text-decoration-color"]=n)}}parseFont(e,t){var s=q.attr(e,"ascii"),n=He.themeValue(e,"asciiTheme"),r=q.attr(e,"eastAsia"),a=[s,n,r].filter(o=>o).map(o=>Dp(o));a.length>0&&(t["font-family"]=[...new Set(a)].join(", "))}parseIndentation(e,t){var s=q.lengthAttr(e,"firstLine"),n=q.lengthAttr(e,"hanging"),r=q.lengthAttr(e,"left"),a=q.lengthAttr(e,"start"),o=q.lengthAttr(e,"right"),l=q.lengthAttr(e,"end");s&&(t["text-indent"]=s),n&&(t["text-indent"]=`-${n}`),(r||a)&&(t["margin-inline-start"]=r||a),(o||l)&&(t["margin-inline-end"]=o||l)}parseSpacing(e,t){var s=q.lengthAttr(e,"before"),n=q.lengthAttr(e,"after"),r=q.intAttr(e,"line",null),a=q.attr(e,"lineRule");if(s&&(t["margin-top"]=s),n&&(t["margin-bottom"]=n),r!==null)switch(a){case"auto":t["line-height"]=`${(r/240).toFixed(2)}`;break;case"atLeast":t["line-height"]=`calc(100% + ${r/20}pt)`;break;default:t["line-height"]=t["min-height"]=`${r/20}pt`;break}}parseMarginProperties(e,t){for(const s of q.elements(e))switch(s.localName){case"left":t["padding-left"]=He.valueOfMargin(s);break;case"right":t["padding-right"]=He.valueOfMargin(s);break;case"top":t["padding-top"]=He.valueOfMargin(s);break;case"bottom":t["padding-bottom"]=He.valueOfMargin(s);break}}parseTrHeight(e,t){switch(q.attr(e,"hRule")){case"exact":t.height=q.lengthAttr(e,"val");break;case"atLeast":default:t.height=q.lengthAttr(e,"val");break}}parseBorderProperties(e,t){for(const s of q.elements(e))switch(s.localName){case"start":case"left":t["border-left"]=He.valueOfBorder(s);break;case"end":case"right":t["border-right"]=He.valueOfBorder(s);break;case"top":t["border-top"]=He.valueOfBorder(s);break;case"bottom":t["border-bottom"]=He.valueOfBorder(s);break}}}const CP=["black","blue","cyan","darkBlue","darkCyan","darkGray","darkGreen","darkMagenta","darkRed","darkYellow","green","lightGray","magenta","none","red","white","yellow"];class ca{static colorAttr(e,t,s=null,n="black"){var r=q.attr(e,t);if(r)return r=="auto"?n:CP.includes(r)?r:`#${r}`;var a=q.attr(e,"themeColor");return a?`var(--docx-${a}-color)`:s}}class He{static themeValue(e,t){var s=q.attr(e,t);return s?`var(--docx-${s}-font)`:null}static valueOfSize(e,t){var s=it.Dxa;switch(q.attr(e,"type")){case"dxa":break;case"pct":s=it.Percent;break;case"auto":return"auto"}return q.lengthAttr(e,t,s)}static valueOfMargin(e){return q.lengthAttr(e,"w")}static valueOfBorder(e){var t=He.parseBorderType(q.attr(e,"val"));if(t=="none")return"none";var s=ca.colorAttr(e,"color"),n=q.lengthAttr(e,"sz",it.Border);return`${n} ${t} ${s=="auto"?pd.borderColor:s}`}static parseBorderType(e){switch(e){case"single":return"solid";case"dashDotStroked":return"solid";case"dashed":return"dashed";case"dashSmallGap":return"dashed";case"dotDash":return"dotted";case"dotDotDash":return"dotted";case"dotted":return"dotted";case"double":return"double";case"doubleWave":return"double";case"inset":return"inset";case"nil":return"none";case"none":return"none";case"outset":return"outset";case"thick":return"solid";case"thickThinLargeGap":return"solid";case"thickThinMediumGap":return"solid";case"thickThinSmallGap":return"solid";case"thinThickLargeGap":return"solid";case"thinThickMediumGap":return"solid";case"thinThickSmallGap":return"solid";case"thinThickThinLargeGap":return"solid";case"thinThickThinMediumGap":return"solid";case"thinThickThinSmallGap":return"solid";case"threeDEmboss":return"solid";case"threeDEngrave":return"solid";case"triple":return"double";case"wave":return"solid"}return"solid"}static valueOfTblLayout(e){var t=q.attr(e,"val");return t=="fixed"?"fixed":"auto"}static classNameOfCnfStyle(e){const t=q.attr(e,"val");return["first-row","last-row","first-col","last-col","odd-col","even-col","odd-row","even-row","ne-cell","nw-cell","se-cell","sw-cell"].filter((n,r)=>t[r]=="1").join(" ")}static valueOfJc(e){var t=q.attr(e,"val");switch(t){case"start":case"left":return"left";case"center":return"center";case"end":case"right":return"right";case"both":return"justify"}return t}static valueOfVertAlign(e,t=!1){var s=q.attr(e,"val");switch(s){case"subscript":return"sub";case"superscript":return t?"sup":"super"}return t?null:s}static valueOfTextAlignment(e){var t=q.attr(e,"val");switch(t){case"auto":case"baseline":return"baseline";case"top":return"top";case"center":return"middle";case"bottom":return"bottom"}return t}static addSize(e,t){return e==null?t:t==null?e:`calc(${e} + ${t})`}static classNameOftblLook(e){const t=q.hexAttr(e,"val",0);let s="";return(q.boolAttr(e,"firstRow")||t&32)&&(s+=" first-row"),(q.boolAttr(e,"lastRow")||t&64)&&(s+=" last-row"),(q.boolAttr(e,"firstColumn")||t&128)&&(s+=" first-col"),(q.boolAttr(e,"lastColumn")||t&256)&&(s+=" last-col"),(q.boolAttr(e,"noHBand")||t&512)&&(s+=" no-hband"),(q.boolAttr(e,"noVBand")||t&1024)&&(s+=" no-vband"),s.trim()}}const ob={pos:0,leader:"none",style:"left"},TP=50;function PP(i=document.body){const e=document.createElement("div");e.style.width="100pt",i.appendChild(e);const t=100/e.offsetWidth;return i.removeChild(e),t}function RP(i,e,t,s=72/96){const n=i.closest("p"),r=i.getBoundingClientRect(),a=n.getBoundingClientRect(),o=getComputedStyle(n),l=(e==null?void 0:e.length)>0?e.map(y=>({pos:lb(y.position),leader:y.leader,style:y.style})).sort((y,E)=>y.pos-E.pos):[ob],h=l[l.length-1],d=a.width*s,u=lb(t);let f=h.pos+u;if(f<d)for(;f<d&&l.length<TP;f+=u)l.push({...ob,pos:f});const p=parseFloat(o.marginLeft),m=a.left+p,g=(r.left-m)*s,v=l.find(y=>y.style!="clear"&&y.pos>g);if(v==null)return;let b=1;if(v.style=="right"||v.style=="center"){const y=Array.from(n.querySelectorAll(`.${i.className}`)),E=y.indexOf(i)+1,C=document.createRange();C.setStart(i,1),E<y.length?C.setEndBefore(y[E]):C.setEndAfter(n);const R=v.style=="center"?.5:1,M=C.getBoundingClientRect(),D=M.left+R*M.width-(a.left-p);b=v.pos-D*s}else b=v.pos-g;switch(i.innerHTML="&nbsp;",i.style.textDecoration="inherit",i.style.wordSpacing=`${b.toFixed(0)}pt`,v.leader){case"dot":case"middleDot":i.style.textDecoration="underline",i.style.textDecorationStyle="dotted";break;case"hyphen":case"heavy":case"underscore":i.style.textDecoration="underline";break}}function lb(i){return parseFloat(i)}const Re={svg:"http://www.w3.org/2000/svg",mathML:"http://www.w3.org/1998/Math/MathML"};class LP{constructor(e){this.htmlDocument=e,this.className="docx",this.styleMap={},this.currentPart=null,this.tableVerticalMerges=[],this.currentVerticalMerge=null,this.tableCellPositions=[],this.currentCellPosition=null,this.footnoteMap={},this.endnoteMap={},this.currentEndnoteIds=[],this.usedHederFooterParts=[],this.currentTabs=[],this.commentMap={},this.tasks=[],this.postRenderTasks=[]}async render(e,t,s=null,n){var a;this.document=e,this.options=n,this.className=n.className,this.rootSelector=n.inWrapper?`.${this.className}-wrapper`:":root",this.styleMap=null,this.tasks=[],this.options.renderComments&&globalThis.Highlight&&(this.commentHighlight=new Highlight),s=s||t,cb(s),cb(t),s.appendChild(this.createComment("docxjs library predefined styles")),s.appendChild(this.renderDefaultStyle()),e.themePart&&(s.appendChild(this.createComment("docxjs document theme values")),this.renderTheme(e.themePart,s)),e.stylesPart!=null&&(this.styleMap=this.processStyles(e.stylesPart.styles),s.appendChild(this.createComment("docxjs document styles")),s.appendChild(this.renderStyles(e.stylesPart.styles))),e.numberingPart&&(this.prodessNumberings(e.numberingPart.domNumberings),s.appendChild(this.createComment("docxjs document numbering styles")),s.appendChild(this.renderNumbering(e.numberingPart.domNumberings,s))),e.footnotesPart&&(this.footnoteMap=Zn(e.footnotesPart.notes,o=>o.id)),e.endnotesPart&&(this.endnoteMap=Zn(e.endnotesPart.notes,o=>o.id)),e.settingsPart&&(this.defaultTabSize=(a=e.settingsPart.settings)==null?void 0:a.defaultTabStop),!n.ignoreFonts&&e.fontTablePart&&this.renderFontTable(e.fontTablePart,s);var r=this.renderSections(e.documentPart.body);this.options.inWrapper?t.appendChild(this.renderWrapper(r)):pp(t,r),this.commentHighlight&&n.renderComments&&CSS.highlights.set(`${this.className}-comments`,this.commentHighlight),this.postRenderTasks.forEach(o=>o()),await Promise.allSettled(this.tasks),this.refreshTabStops()}renderTheme(e,t){var o,l;const s={},n=(o=e.theme)==null?void 0:o.fontScheme;n&&(n.majorFont&&(s["--docx-majorHAnsi-font"]=n.majorFont.latinTypeface),n.minorFont&&(s["--docx-minorHAnsi-font"]=n.minorFont.latinTypeface));const r=(l=e.theme)==null?void 0:l.colorScheme;if(r)for(let[h,d]of Object.entries(r.colors))s[`--docx-${h}-color`]=`#${d}`;const a=this.styleToString(`.${this.className}`,s);t.appendChild(this.createStyleElement(a))}renderFontTable(e,t){for(let s of e.fonts)for(let n of s.embedFontRefs)this.tasks.push(this.document.loadFont(n.id,n.key).then(r=>{const a={"font-family":Dp(s.name),src:`url(${r})`};(n.type=="bold"||n.type=="boldItalic")&&(a["font-weight"]="bold"),(n.type=="italic"||n.type=="boldItalic")&&(a["font-style"]="italic");const o=this.styleToString("@font-face",a);t.appendChild(this.createComment(`docxjs ${s.name} font`)),t.appendChild(this.createStyleElement(o))}))}processStyleName(e){return e?`${this.className}_${mT(e)}`:this.className}processStyles(e){const t=Zn(e.filter(n=>n.id!=null),n=>n.id);for(const n of e.filter(r=>r.basedOn)){var s=t[n.basedOn];if(s){n.paragraphProps=Ud(n.paragraphProps,s.paragraphProps),n.runProps=Ud(n.runProps,s.runProps);for(const r of s.styles){const a=n.styles.find(o=>o.target==r.target);a?this.copyStyleProperties(r.values,a.values):n.styles.push({...r,values:{...r.values}})}}else this.options.debug&&console.warn(`Can't find base style ${n.basedOn}`)}for(let n of e)n.cssName=this.processStyleName(n.id);return t}prodessNumberings(e){var t;for(let s of e.filter(n=>n.pStyleName)){const n=this.findStyle(s.pStyleName);(t=n==null?void 0:n.paragraphProps)!=null&&t.numbering&&(n.paragraphProps.numbering.level=s.level)}}processElement(e){if(e.children)for(var t of e.children)t.parent=e,t.type==J.Table?this.processTable(t):this.processElement(t)}processTable(e){for(var t of e.children)for(var s of t.children)s.cssStyle=this.copyStyleProperties(e.cellStyle,s.cssStyle,["border-left","border-right","border-top","border-bottom","padding-left","padding-right","padding-top","padding-bottom"]),this.processElement(s)}copyStyleProperties(e,t,s=null){if(!e)return t;t==null&&(t={}),s==null&&(s=Object.getOwnPropertyNames(e));for(var n of s)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n]);return t}createPageElement(e,t){var s=this.createElement("section",{className:e});return t&&(t.pageMargins&&(s.style.paddingLeft=t.pageMargins.left,s.style.paddingRight=t.pageMargins.right,s.style.paddingTop=t.pageMargins.top,s.style.paddingBottom=t.pageMargins.bottom),t.pageSize&&(this.options.ignoreWidth||(s.style.width=t.pageSize.width),this.options.ignoreHeight||(s.style.minHeight=t.pageSize.height))),s}createSectionContent(e){var t=this.createElement("article");return e.columns&&e.columns.numberOfColumns&&(t.style.columnCount=`${e.columns.numberOfColumns}`,t.style.columnGap=e.columns.space,e.columns.separator&&(t.style.columnRule="1px solid black")),t}renderSections(e){const t=[];this.processElement(e);const s=this.splitBySection(e.children,e.props),n=this.groupByPageBreaks(s);let r=null;for(let o=0,l=n.length;o<l;o++){this.currentFootnoteIds=[];let d=n[o][0].sectProps;const u=this.createPageElement(this.className,d);this.renderStyleValues(e.cssStyle,u),this.options.renderHeaders&&this.renderHeaderFooter(d.headerRefs,d,t.length,r!=d,u);for(const f of n[o]){var a=this.createSectionContent(f.sectProps);this.renderElements(f.elements,a),u.appendChild(a),d=f.sectProps}this.options.renderFootnotes&&this.renderNotes(this.currentFootnoteIds,this.footnoteMap,u),this.options.renderEndnotes&&o==l-1&&this.renderNotes(this.currentEndnoteIds,this.endnoteMap,u),this.options.renderFooters&&this.renderHeaderFooter(d.footerRefs,d,t.length,r!=d,u),t.push(u),r=d}return t}renderHeaderFooter(e,t,s,n,r){if(e){var a=(t.titlePage&&n?e.find(l=>l.type=="first"):null)??(s%2==1?e.find(l=>l.type=="even"):null)??e.find(l=>l.type=="default"),o=a&&this.document.findPartByRelId(a.id,this.document.documentPart);if(o){this.currentPart=o,this.usedHederFooterParts.includes(o.path)||(this.processElement(o.rootElement),this.usedHederFooterParts.push(o.path));const[l]=this.renderElements([o.rootElement],r);t!=null&&t.pageMargins&&(o.rootElement.type===J.Header?(l.style.marginTop=`calc(${t.pageMargins.header} - ${t.pageMargins.top})`,l.style.minHeight=`calc(${t.pageMargins.top} - ${t.pageMargins.header})`):o.rootElement.type===J.Footer&&(l.style.marginBottom=`calc(${t.pageMargins.footer} - ${t.pageMargins.bottom})`,l.style.minHeight=`calc(${t.pageMargins.bottom} - ${t.pageMargins.footer})`)),this.currentPart=null}}}isPageBreakElement(e){return e.type!=J.Break?!1:e.break=="lastRenderedPageBreak"?!this.options.ignoreLastRenderedPageBreak:e.break=="page"}isPageBreakSection(e,t){var s,n,r,a,o,l;return!e||!t?!1:((s=e.pageSize)==null?void 0:s.orientation)!=((n=t.pageSize)==null?void 0:n.orientation)||((r=e.pageSize)==null?void 0:r.width)!=((a=t.pageSize)==null?void 0:a.width)||((o=e.pageSize)==null?void 0:o.height)!=((l=t.pageSize)==null?void 0:l.height)}splitBySection(e,t){var u;var s={sectProps:null,elements:[],pageBreak:!1},n=[s];for(let f of e){if(f.type==J.Paragraph){const p=this.findStyle(f.styleName);(u=p==null?void 0:p.paragraphProps)!=null&&u.pageBreakBefore&&(s.sectProps=r,s.pageBreak=!0,s={sectProps:null,elements:[],pageBreak:!1},n.push(s))}if(s.elements.push(f),f.type==J.Paragraph){const p=f;var r=p.sectionProps,a=-1,o=-1;if(this.options.breakPages&&p.children&&(a=p.children.findIndex(m=>{var g;return o=((g=m.children)==null?void 0:g.findIndex(this.isPageBreakElement.bind(this)))??-1,o!=-1})),(r||a!=-1)&&(s.sectProps=r,s.pageBreak=a!=-1,s={sectProps:null,elements:[],pageBreak:!1},n.push(s)),a!=-1){let m=p.children[a],g=o<m.children.length-1;if(a<p.children.length-1||g){var l=f.children,h={...f,children:l.slice(a)};if(f.children=l.slice(0,a),s.elements.push(h),g){let v=m.children,b={...m,children:v.slice(0,o)};f.children.push(b),m.children=v.slice(o)}}}}}let d=null;for(let f=n.length-1;f>=0;f--)n[f].sectProps==null?n[f].sectProps=d??t:d=n[f].sectProps;return n}groupByPageBreaks(e){let t=[],s;const n=[t];for(let r of e)t.push(r),(this.options.ignoreLastRenderedPageBreak||r.pageBreak||this.isPageBreakSection(s,r.sectProps))&&n.push(t=[]),s=r.sectProps;return n.filter(r=>r.length>0)}renderWrapper(e){return this.createElement("div",{className:`${this.className}-wrapper`},e)}renderDefaultStyle(){var e=this.className,t=`
.${e}-wrapper { background: gray; padding: 30px; padding-bottom: 0px; display: flex; flex-flow: column; align-items: center; } 
.${e}-wrapper>section.${e} { background: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); margin-bottom: 30px; }`;this.options.hideWrapperOnPrint&&(t=`@media not print { ${t} }`);var s=`${t}
.${e} { color: black; hyphens: auto; text-underline-position: from-font; }
section.${e} { box-sizing: border-box; display: flex; flex-flow: column nowrap; position: relative; overflow: hidden; }
section.${e}>article { margin-bottom: auto; z-index: 1; }
section.${e}>footer { z-index: 1; }
.${e} table { border-collapse: collapse; }
.${e} table td, .${e} table th { vertical-align: top; }
.${e} p { margin: 0pt; min-height: 1em; }
.${e} span { white-space: pre-wrap; overflow-wrap: break-word; }
.${e} a { color: inherit; text-decoration: inherit; }
.${e} svg { fill: transparent; }
`;return this.options.renderComments&&(s+=`
.${e}-comment-ref { cursor: default; }
.${e}-comment-popover { display: none; z-index: 1000; padding: 0.5rem; background: white; position: absolute; box-shadow: 0 0 0.25rem rgba(0, 0, 0, 0.25); width: 30ch; }
.${e}-comment-ref:hover~.${e}-comment-popover { display: block; }
.${e}-comment-author,.${e}-comment-date { font-size: 0.875rem; color: #888; }
`),this.createStyleElement(s)}renderNumbering(e,t){var s="",n=[];for(var r of e){var a=`p.${this.numberingClass(r.id,r.level)}`,o="none";if(r.bullet){let l=`--${this.className}-${r.bullet.src}`.toLowerCase();s+=this.styleToString(`${a}:before`,{content:"' '",display:"inline-block",background:`var(${l})`},r.bullet.style),this.tasks.push(this.document.loadNumberingImage(r.bullet.src).then(h=>{var d=`${this.rootSelector} { ${l}: url(${h}) }`;t.appendChild(this.createStyleElement(d))}))}else if(r.levelText){let l=this.numberingCounter(r.id,r.level);const h=l+" "+(r.start-1);r.level>0&&(s+=this.styleToString(`p.${this.numberingClass(r.id,r.level-1)}`,{"counter-set":h})),n.push(h),s+=this.styleToString(`${a}:before`,{content:this.levelTextToContent(r.levelText,r.suff,r.id,this.numFormatToCssValue(r.format)),"counter-increment":l,...r.rStyle})}else o=this.numFormatToCssValue(r.format);s+=this.styleToString(a,{display:"list-item","list-style-position":"inside","list-style-type":o,...r.pStyle})}return n.length>0&&(s+=this.styleToString(this.rootSelector,{"counter-reset":n.join(" ")})),this.createStyleElement(s)}renderStyles(e){var t="";const s=this.styleMap,n=Zn(e.filter(l=>l.isDefault),l=>l.target);for(const l of e){var r=l.styles;if(l.linked){var a=l.linked&&s[l.linked];a?r=r.concat(a.styles):this.options.debug&&console.warn(`Can't find linked style ${l.linked}`)}for(const h of r){var o=`${l.target??""}.${l.cssName}`;l.target!=h.target&&(o+=` ${h.target}`),n[l.target]==l&&(o=`.${this.className} ${l.target}, `+o),t+=this.styleToString(o,h.values)}}return this.createStyleElement(t)}renderNotes(e,t,s){var n=e.map(a=>t[a]).filter(a=>a);if(n.length>0){var r=this.createElement("ol",null,this.renderElements(n));s.appendChild(r)}}renderElement(e){switch(e.type){case J.Paragraph:return this.renderParagraph(e);case J.BookmarkStart:return this.renderBookmarkStart(e);case J.BookmarkEnd:return null;case J.Run:return this.renderRun(e);case J.Table:return this.renderTable(e);case J.Row:return this.renderTableRow(e);case J.Cell:return this.renderTableCell(e);case J.Hyperlink:return this.renderHyperlink(e);case J.SmartTag:return this.renderSmartTag(e);case J.Drawing:return this.renderDrawing(e);case J.Image:return this.renderImage(e);case J.Text:return this.renderText(e);case J.Text:return this.renderText(e);case J.DeletedText:return this.renderDeletedText(e);case J.Tab:return this.renderTab(e);case J.Symbol:return this.renderSymbol(e);case J.Break:return this.renderBreak(e);case J.Footer:return this.renderContainer(e,"footer");case J.Header:return this.renderContainer(e,"header");case J.Footnote:case J.Endnote:return this.renderContainer(e,"li");case J.FootnoteReference:return this.renderFootnoteReference(e);case J.EndnoteReference:return this.renderEndnoteReference(e);case J.NoBreakHyphen:return this.createElement("wbr");case J.VmlPicture:return this.renderVmlPicture(e);case J.VmlElement:return this.renderVmlElement(e);case J.MmlMath:return this.renderContainerNS(e,Re.mathML,"math",{xmlns:Re.mathML});case J.MmlMathParagraph:return this.renderContainer(e,"span");case J.MmlFraction:return this.renderContainerNS(e,Re.mathML,"mfrac");case J.MmlBase:return this.renderContainerNS(e,Re.mathML,e.parent.type==J.MmlMatrixRow?"mtd":"mrow");case J.MmlNumerator:case J.MmlDenominator:case J.MmlFunction:case J.MmlLimit:case J.MmlBox:return this.renderContainerNS(e,Re.mathML,"mrow");case J.MmlGroupChar:return this.renderMmlGroupChar(e);case J.MmlLimitLower:return this.renderContainerNS(e,Re.mathML,"munder");case J.MmlMatrix:return this.renderContainerNS(e,Re.mathML,"mtable");case J.MmlMatrixRow:return this.renderContainerNS(e,Re.mathML,"mtr");case J.MmlRadical:return this.renderMmlRadical(e);case J.MmlSuperscript:return this.renderContainerNS(e,Re.mathML,"msup");case J.MmlSubscript:return this.renderContainerNS(e,Re.mathML,"msub");case J.MmlDegree:case J.MmlSuperArgument:case J.MmlSubArgument:return this.renderContainerNS(e,Re.mathML,"mn");case J.MmlFunctionName:return this.renderContainerNS(e,Re.mathML,"ms");case J.MmlDelimiter:return this.renderMmlDelimiter(e);case J.MmlRun:return this.renderMmlRun(e);case J.MmlNary:return this.renderMmlNary(e);case J.MmlPreSubSuper:return this.renderMmlPreSubSuper(e);case J.MmlBar:return this.renderMmlBar(e);case J.MmlEquationArray:return this.renderMllList(e);case J.Inserted:return this.renderInserted(e);case J.Deleted:return this.renderDeleted(e);case J.CommentRangeStart:return this.renderCommentRangeStart(e);case J.CommentRangeEnd:return this.renderCommentRangeEnd(e);case J.CommentReference:return this.renderCommentReference(e);case J.AltChunk:return this.renderAltChunk(e)}return null}renderElements(e,t){if(e==null)return null;var s=e.flatMap(n=>this.renderElement(n)).filter(n=>n!=null);return t&&pp(t,s),s}renderContainer(e,t,s){return this.createElement(t,s,this.renderElements(e.children))}renderContainerNS(e,t,s,n){return this.createElementNS(t,s,n,this.renderElements(e.children))}renderParagraph(e){var r,a;var t=this.renderContainer(e,"p");const s=this.findStyle(e.styleName);e.tabs??(e.tabs=(r=s==null?void 0:s.paragraphProps)==null?void 0:r.tabs),this.renderClass(e,t),this.renderStyleValues(e.cssStyle,t),this.renderCommonProperties(t.style,e);const n=e.numbering??((a=s==null?void 0:s.paragraphProps)==null?void 0:a.numbering);return n&&t.classList.add(this.numberingClass(n.id,n.level)),t}renderRunProperties(e,t){this.renderCommonProperties(e,t)}renderCommonProperties(e,t){t!=null&&(t.color&&(e.color=t.color),t.fontSize&&(e["font-size"]=t.fontSize))}renderHyperlink(e){var t=this.renderContainer(e,"a");this.renderStyleValues(e.cssStyle,t);let s="";if(e.id){const n=this.document.documentPart.rels.find(r=>r.id==e.id&&r.targetMode==="External");s=(n==null?void 0:n.target)??s}return e.anchor&&(s+=`#${e.anchor}`),t.href=s,t}renderSmartTag(e){return this.renderContainer(e,"span")}renderCommentRangeStart(e){var n;if(!this.options.renderComments)return null;const t=new Range;(n=this.commentHighlight)==null||n.add(t);const s=this.createComment(`start of comment #${e.id}`);return this.later(()=>t.setStart(s,0)),this.commentMap[e.id]=t,s}renderCommentRangeEnd(e){if(!this.options.renderComments)return null;const t=this.commentMap[e.id],s=this.createComment(`end of comment #${e.id}`);return this.later(()=>t==null?void 0:t.setEnd(s,0)),s}renderCommentReference(e){var a;if(!this.options.renderComments)return null;var t=(a=this.document.commentsPart)==null?void 0:a.commentMap[e.id];if(!t)return null;const s=new DocumentFragment,n=this.createElement("span",{className:`${this.className}-comment-ref`},["💬"]),r=this.createElement("div",{className:`${this.className}-comment-popover`});return this.renderCommentContent(t,r),s.appendChild(this.createComment(`comment #${t.id} by ${t.author} on ${t.date}`)),s.appendChild(n),s.appendChild(r),s}renderAltChunk(e){if(!this.options.renderAltChunks)return null;var t=this.createElement("iframe");return this.tasks.push(this.document.loadAltChunk(e.id,this.currentPart).then(s=>{t.srcdoc=s})),t}renderCommentContent(e,t){t.appendChild(this.createElement("div",{className:`${this.className}-comment-author`},[e.author])),t.appendChild(this.createElement("div",{className:`${this.className}-comment-date`},[new Date(e.date).toLocaleString()])),this.renderElements(e.children,t)}renderDrawing(e){var t=this.renderContainer(e,"div");return t.style.display="inline-block",t.style.position="relative",t.style.textIndent="0px",this.renderStyleValues(e.cssStyle,t),t}renderImage(e){var l;let t=this.createElement("img"),s=(l=e.cssStyle)==null?void 0:l.transform;if(this.renderStyleValues(e.cssStyle,t),e.srcRect&&e.srcRect.some(h=>h!=0)){var[n,r,a,o]=e.srcRect;s=`scale(${1/(1-n-a)}, ${1/(1-r-o)})`,t.style["clip-path"]=`rect(${(100*r).toFixed(2)}% ${(100*(1-a)).toFixed(2)}% ${(100*(1-o)).toFixed(2)}% ${(100*n).toFixed(2)}%)`}return e.rotation&&(s=`rotate(${e.rotation}deg) ${s??""}`),t.style.transform=s==null?void 0:s.trim(),this.document&&this.tasks.push(this.document.loadDocumentImage(e.src,this.currentPart).then(h=>{t.src=h})),t}renderText(e){return this.htmlDocument.createTextNode(e.text)}renderDeletedText(e){return this.options.renderChanges?this.renderText(e):null}renderBreak(e){return e.break=="textWrapping"?this.createElement("br"):null}renderInserted(e){return this.options.renderChanges?this.renderContainer(e,"ins"):this.renderElements(e.children)}renderDeleted(e){return this.options.renderChanges?this.renderContainer(e,"del"):null}renderSymbol(e){var t=this.createElement("span");return t.style.fontFamily=e.font,t.innerHTML=`&#x${e.char};`,t}renderFootnoteReference(e){var t=this.createElement("sup");return this.currentFootnoteIds.push(e.id),t.textContent=`${this.currentFootnoteIds.length}`,t}renderEndnoteReference(e){var t=this.createElement("sup");return this.currentEndnoteIds.push(e.id),t.textContent=`${this.currentEndnoteIds.length}`,t}renderTab(e){var n;var t=this.createElement("span");if(t.innerHTML="&emsp;",this.options.experimental){t.className=this.tabStopClass();var s=(n=NP(e,J.Paragraph))==null?void 0:n.tabs;this.currentTabs.push({stops:s,span:t})}return t}renderBookmarkStart(e){return this.createElement("span",{id:e.name})}renderRun(e){if(e.fieldRun)return null;const t=this.createElement("span");if(e.id&&(t.id=e.id),this.renderClass(e,t),this.renderStyleValues(e.cssStyle,t),e.verticalAlign){const s=this.createElement(e.verticalAlign);this.renderElements(e.children,s),t.appendChild(s)}else this.renderElements(e.children,t);return t}renderTable(e){let t=this.createElement("table");return this.tableCellPositions.push(this.currentCellPosition),this.tableVerticalMerges.push(this.currentVerticalMerge),this.currentVerticalMerge={},this.currentCellPosition={col:0,row:0},e.columns&&t.appendChild(this.renderTableColumns(e.columns)),this.renderClass(e,t),this.renderElements(e.children,t),this.renderStyleValues(e.cssStyle,t),this.currentVerticalMerge=this.tableVerticalMerges.pop(),this.currentCellPosition=this.tableCellPositions.pop(),t}renderTableColumns(e){let t=this.createElement("colgroup");for(let s of e){let n=this.createElement("col");s.width&&(n.style.width=s.width),t.appendChild(n)}return t}renderTableRow(e){let t=this.createElement("tr");return this.currentCellPosition.col=0,e.gridBefore&&t.appendChild(this.renderTableCellPlaceholder(e.gridBefore)),this.renderClass(e,t),this.renderElements(e.children,t),this.renderStyleValues(e.cssStyle,t),e.gridAfter&&t.appendChild(this.renderTableCellPlaceholder(e.gridAfter)),this.currentCellPosition.row++,t}renderTableCellPlaceholder(e){const t=this.createElement("td",{colSpan:e});return t.style.border="none",t}renderTableCell(e){let t=this.renderContainer(e,"td");const s=this.currentCellPosition.col;return e.verticalMerge?e.verticalMerge=="restart"?(this.currentVerticalMerge[s]=t,t.rowSpan=1):this.currentVerticalMerge[s]&&(this.currentVerticalMerge[s].rowSpan+=1,t.style.display="none"):this.currentVerticalMerge[s]=null,this.renderClass(e,t),this.renderStyleValues(e.cssStyle,t),e.span&&(t.colSpan=e.span),this.currentCellPosition.col+=t.colSpan,t}renderVmlPicture(e){return this.renderContainer(e,"div")}renderVmlElement(e){var n,r;var t=this.createSvgElement("svg");t.setAttribute("style",e.cssStyleText);const s=this.renderVmlChildElement(e);return(n=e.imageHref)!=null&&n.id&&this.tasks.push((r=this.document)==null?void 0:r.loadDocumentImage(e.imageHref.id,this.currentPart).then(a=>s.setAttribute("href",a))),t.appendChild(s),requestAnimationFrame(()=>{const a=t.firstElementChild.getBBox();t.setAttribute("width",`${Math.ceil(a.x+a.width)}`),t.setAttribute("height",`${Math.ceil(a.y+a.height)}`)}),t}renderVmlChildElement(e){const t=this.createSvgElement(e.tagName);Object.entries(e.attrs).forEach(([s,n])=>t.setAttribute(s,n));for(let s of e.children)s.type==J.VmlElement?t.appendChild(this.renderVmlChildElement(s)):t.appendChild(...Ho(this.renderElement(s)));return t}renderMmlRadical(e){var n;const t=e.children.find(r=>r.type==J.MmlBase);if((n=e.props)!=null&&n.hideDegree)return this.createElementNS(Re.mathML,"msqrt",null,this.renderElements([t]));const s=e.children.find(r=>r.type==J.MmlDegree);return this.createElementNS(Re.mathML,"mroot",null,this.renderElements([t,s]))}renderMmlDelimiter(e){const t=[];return t.push(this.createElementNS(Re.mathML,"mo",null,[e.props.beginChar??"("])),t.push(...this.renderElements(e.children)),t.push(this.createElementNS(Re.mathML,"mo",null,[e.props.endChar??")"])),this.createElementNS(Re.mathML,"mrow",null,t)}renderMmlNary(e){var h;const t=[],s=Zn(e.children,d=>d.type),n=s[J.MmlSuperArgument],r=s[J.MmlSubArgument],a=n?this.createElementNS(Re.mathML,"mo",null,Ho(this.renderElement(n))):null,o=r?this.createElementNS(Re.mathML,"mo",null,Ho(this.renderElement(r))):null,l=this.createElementNS(Re.mathML,"mo",null,[((h=e.props)==null?void 0:h.char)??"∫"]);return a||o?t.push(this.createElementNS(Re.mathML,"munderover",null,[l,o,a])):a?t.push(this.createElementNS(Re.mathML,"mover",null,[l,a])):o?t.push(this.createElementNS(Re.mathML,"munder",null,[l,o])):t.push(l),t.push(...this.renderElements(s[J.MmlBase].children)),this.createElementNS(Re.mathML,"mrow",null,t)}renderMmlPreSubSuper(e){const t=[],s=Zn(e.children,h=>h.type),n=s[J.MmlSuperArgument],r=s[J.MmlSubArgument],a=n?this.createElementNS(Re.mathML,"mo",null,Ho(this.renderElement(n))):null,o=r?this.createElementNS(Re.mathML,"mo",null,Ho(this.renderElement(r))):null,l=this.createElementNS(Re.mathML,"mo",null);return t.push(this.createElementNS(Re.mathML,"msubsup",null,[l,o,a])),t.push(...this.renderElements(s[J.MmlBase].children)),this.createElementNS(Re.mathML,"mrow",null,t)}renderMmlGroupChar(e){const t=e.props.verticalJustification==="bot"?"mover":"munder",s=this.renderContainerNS(e,Re.mathML,t);return e.props.char&&s.appendChild(this.createElementNS(Re.mathML,"mo",null,[e.props.char])),s}renderMmlBar(e){const t=this.renderContainerNS(e,Re.mathML,"mrow");switch(e.props.position){case"top":t.style.textDecoration="overline";break;case"bottom":t.style.textDecoration="underline";break}return t}renderMmlRun(e){const t=this.createElementNS(Re.mathML,"ms",null,this.renderElements(e.children));return this.renderClass(e,t),this.renderStyleValues(e.cssStyle,t),t}renderMllList(e){const t=this.createElementNS(Re.mathML,"mtable");this.renderClass(e,t),this.renderStyleValues(e.cssStyle,t);for(let s of this.renderElements(e.children))t.appendChild(this.createElementNS(Re.mathML,"mtr",null,[this.createElementNS(Re.mathML,"mtd",null,[s])]));return t}renderStyleValues(e,t){for(let s in e)s.startsWith("$")?t.setAttribute(s.slice(1),e[s]):t.style[s]=e[s]}renderClass(e,t){e.className&&(t.className=e.className),e.styleName&&t.classList.add(this.processStyleName(e.styleName))}findStyle(e){var t;return e&&((t=this.styleMap)==null?void 0:t[e])}numberingClass(e,t){return`${this.className}-num-${e}-${t}`}tabStopClass(){return`${this.className}-tab-stop`}styleToString(e,t,s=null){let n=`${e} {\r
`;for(const r in t)r.startsWith("$")||(n+=`  ${r}: ${t[r]};\r
`);return s&&(n+=s),n+`}\r
`}numberingCounter(e,t){return`${this.className}-num-${e}-${t}`}levelTextToContent(e,t,s,n){const r={tab:"\\9",space:"\\a0"};var a=e.replace(/%\d*/g,o=>{let l=parseInt(o.substring(1),10)-1;return`"counter(${this.numberingCounter(s,l)}, ${n})"`});return`"${a}${r[t]??""}"`}numFormatToCssValue(e){var t={none:"none",bullet:"disc",decimal:"decimal",lowerLetter:"lower-alpha",upperLetter:"upper-alpha",lowerRoman:"lower-roman",upperRoman:"upper-roman",decimalZero:"decimal-leading-zero",aiueo:"katakana",aiueoFullWidth:"katakana",chineseCounting:"simp-chinese-informal",chineseCountingThousand:"simp-chinese-informal",chineseLegalSimplified:"simp-chinese-formal",chosung:"hangul-consonant",ideographDigital:"cjk-ideographic",ideographTraditional:"cjk-heavenly-stem",ideographLegalTraditional:"trad-chinese-formal",ideographZodiac:"cjk-earthly-branch",iroha:"katakana-iroha",irohaFullWidth:"katakana-iroha",japaneseCounting:"japanese-informal",japaneseDigitalTenThousand:"cjk-decimal",japaneseLegal:"japanese-formal",thaiNumbers:"thai",koreanCounting:"korean-hangul-formal",koreanDigital:"korean-hangul-formal",koreanDigital2:"korean-hanja-informal",hebrew1:"hebrew",hebrew2:"hebrew",hindiNumbers:"devanagari",ganada:"hangul",taiwaneseCounting:"cjk-ideographic",taiwaneseCountingThousand:"cjk-ideographic",taiwaneseDigital:"cjk-decimal"};return t[e]??e}refreshTabStops(){this.options.experimental&&setTimeout(()=>{const e=PP();for(let t of this.currentTabs)RP(t.span,t.stops,this.defaultTabSize,e)},500)}createElementNS(e,t,s,n){var r=e?this.htmlDocument.createElementNS(e,t):this.htmlDocument.createElement(t);return Object.assign(r,s),n&&pp(r,n),r}createElement(e,t,s){return this.createElementNS(void 0,e,t,s)}createSvgElement(e,t,s){return this.createElementNS(Re.svg,e,t,s)}createStyleElement(e){return this.createElement("style",{innerHTML:e})}createComment(e){return this.htmlDocument.createComment(e)}later(e){this.postRenderTasks.push(e)}}function cb(i){i.innerHTML=""}function pp(i,e){e.forEach(t=>i.appendChild(bT(t)?document.createTextNode(t):t))}function NP(i,e){for(var t=i.parent;t!=null&&t.type!=e;)t=t.parent;return t}const Wv={ignoreHeight:!1,ignoreWidth:!1,ignoreFonts:!1,breakPages:!0,debug:!1,experimental:!1,className:"docx",inWrapper:!0,hideWrapperOnPrint:!1,trimXmlDeclaration:!0,ignoreLastRenderedPageBreak:!0,renderHeaders:!0,renderFooters:!0,renderFootnotes:!0,renderEndnotes:!0,useBase64URL:!1,renderChanges:!1,renderComments:!1,renderAltChunks:!0};function IP(i,e){const t={...Wv,...e};return fg.load(i,new xP(t),t)}async function MP(i,e,t,s){const n={...Wv,...s};return await new LP(window.document).render(i,e,t,n)}async function DP(i,e,t,s){const n=await IP(i,s);return await MP(n,e,t,s),n}const Hh=({mainState:{currentDocument:i}})=>{const e=j.useRef(null),[t,s]=j.useState(!1);if(j.useEffect(()=>{if(!(i!=null&&i.fileData)||!e.current)return;const r=e.current;r.innerHTML="",s(!1),DP(i.fileData,r,void 0,{className:"rdv-docx",inWrapper:!0,ignoreWidth:!1,ignoreHeight:!1,ignoreLastRenderedPageBreak:!1,renderHeaders:!0,renderFooters:!0,renderFootnotes:!0,renderEndnotes:!0}).catch(()=>{s(!0)})},[i==null?void 0:i.fileData]),!i)return null;const n=i.fileName||i.uri.split("/").pop()||"document";return t?k.jsx("div",{id:"docx-renderer",className:"rdv-msdoc-container",children:k.jsxs("div",{className:"rdv-msdoc-content",children:[k.jsx("div",{className:"rdv-msdoc-file-icon",children:k.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),k.jsx("polyline",{points:"14 2 14 8 20 8"}),k.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),k.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),k.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),k.jsx("div",{className:"rdv-msdoc-file-name",children:n}),k.jsx("div",{className:"rdv-msdoc-file-type",children:"Unable to preview this document"}),k.jsx("a",{className:"rdv-msdoc-download-link",href:i.uri,download:n,onClick:r=>{r.preventDefault(),fetch(i.uri).then(a=>a.blob()).then(a=>{const o=URL.createObjectURL(a),l=document.createElement("a");l.href=o,l.download=n,l.click(),URL.revokeObjectURL(o)}).catch(()=>{const a=document.createElement("a");a.href=i.uri,a.download=n,a.click()})},children:"Download File"})]})}):k.jsx("div",{id:"docx-renderer",className:"rdv-docx-viewer",children:k.jsx("div",{ref:e})})};Hh.fileTypes=["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/octet-stream"];Hh.weight=1;Hh.fileLoader=Cv;Hh.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"DocxRenderer"};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:Vv,setPrototypeOf:hb,isFrozen:FP,getPrototypeOf:OP,getOwnPropertyDescriptor:BP}=Object;let{freeze:jt,seal:vs,create:Fp}=Object,{apply:Op,construct:Bp}=typeof Reflect<"u"&&Reflect;jt||(jt=function(e){return e});vs||(vs=function(e){return e});Op||(Op=function(e,t){for(var s=arguments.length,n=new Array(s>2?s-2:0),r=2;r<s;r++)n[r-2]=arguments[r];return e.apply(t,n)});Bp||(Bp=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return new e(...s)});const ad=$t(Array.prototype.forEach),jP=$t(Array.prototype.lastIndexOf),db=$t(Array.prototype.pop),Wo=$t(Array.prototype.push),$P=$t(Array.prototype.splice),md=$t(String.prototype.toLowerCase),mp=$t(String.prototype.toString),gp=$t(String.prototype.match),Vo=$t(String.prototype.replace),zP=$t(String.prototype.indexOf),HP=$t(String.prototype.trim),ys=$t(Object.prototype.hasOwnProperty),It=$t(RegExp.prototype.test),qo=UP(TypeError);function $t(i){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return Op(i,e,s)}}function UP(i){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Bp(i,t)}}function Te(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:md;hb&&hb(i,null);let s=e.length;for(;s--;){let n=e[s];if(typeof n=="string"){const r=t(n);r!==n&&(FP(e)||(e[s]=r),n=r)}i[n]=!0}return i}function WP(i){for(let e=0;e<i.length;e++)ys(i,e)||(i[e]=null);return i}function Os(i){const e=Fp(null);for(const[t,s]of Vv(i))ys(i,t)&&(Array.isArray(s)?e[t]=WP(s):s&&typeof s=="object"&&s.constructor===Object?e[t]=Os(s):e[t]=s);return e}function Go(i,e){for(;i!==null;){const s=BP(i,e);if(s){if(s.get)return $t(s.get);if(typeof s.value=="function")return $t(s.value)}i=OP(i)}function t(){return null}return t}const ub=jt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),bp=jt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vp=jt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),VP=jt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),yp=jt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),qP=jt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fb=jt(["#text"]),pb=jt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),_p=jt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mb=jt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),od=jt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),GP=vs(/\{\{[\w\W]*|[\w\W]*\}\}/gm),XP=vs(/<%[\w\W]*|[\w\W]*%>/gm),YP=vs(/\$\{[\w\W]*/gm),KP=vs(/^data-[\-\w.\u00B7-\uFFFF]+$/),ZP=vs(/^aria-[\-\w]+$/),qv=vs(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),JP=vs(/^(?:\w+script|data):/i),QP=vs(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Gv=vs(/^html$/i),eR=vs(/^[a-z][.\w]*(-[.\w]+)+$/i);var gb=Object.freeze({__proto__:null,ARIA_ATTR:ZP,ATTR_WHITESPACE:QP,CUSTOM_ELEMENT:eR,DATA_ATTR:KP,DOCTYPE_NAME:Gv,ERB_EXPR:XP,IS_ALLOWED_URI:qv,IS_SCRIPT_OR_DATA:JP,MUSTACHE_EXPR:GP,TMPLIT_EXPR:YP});const Xo={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},tR=function(){return typeof window>"u"?null:window},sR=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const n="data-tt-policy-suffix";t&&t.hasAttribute(n)&&(s=t.getAttribute(n));const r="dompurify"+(s?"#"+s:"");try{return e.createPolicy(r,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},bb=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Xv(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:tR();const e=_e=>Xv(_e);if(e.version="3.3.1",e.removed=[],!i||!i.document||i.document.nodeType!==Xo.document||!i.Element)return e.isSupported=!1,e;let{document:t}=i;const s=t,n=s.currentScript,{DocumentFragment:r,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:h,NamedNodeMap:d=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:u,DOMParser:f,trustedTypes:p}=i,m=l.prototype,g=Go(m,"cloneNode"),v=Go(m,"remove"),b=Go(m,"nextSibling"),y=Go(m,"childNodes"),E=Go(m,"parentNode");if(typeof a=="function"){const _e=t.createElement("template");_e.content&&_e.content.ownerDocument&&(t=_e.content.ownerDocument)}let C,R="";const{implementation:M,createNodeIterator:D,createDocumentFragment:x,getElementsByTagName:S}=t,{importNode:F}=s;let z=bb();e.isSupported=typeof Vv=="function"&&typeof E=="function"&&M&&M.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:L,ERB_EXPR:B,TMPLIT_EXPR:w,DATA_ATTR:G,ARIA_ATTR:re,IS_SCRIPT_OR_DATA:$,ATTR_WHITESPACE:Q,CUSTOM_ELEMENT:Y}=gb;let{IS_ALLOWED_URI:le}=gb,H=null;const O=Te({},[...ub,...bp,...vp,...yp,...fb]);let ee=null;const ae=Te({},[...pb,..._p,...mb,...od]);let Z=Object.seal(Fp(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),me=null,ue=null;const fe=Object.seal(Fp(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let oe=!0,de=!0,ye=!1,Ce=!0,ge=!1,_=!0,K=!1,V=!1,I=!1,N=!1,U=!1,te=!1,ne=!0,X=!1;const ie="user-content-";let he=!0,se=!1,pe={},we=null;const ke=Te({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qe=null;const Xe=Te({},["audio","video","img","source","image","track"]);let ze=null;const Be=Te({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),De="http://www.w3.org/1998/Math/MathML",Ze="http://www.w3.org/2000/svg",xt="http://www.w3.org/1999/xhtml";let st=xt,ia=!1,zo=null;const ip=Te({},[De,Ze,xt],mp);let aa=Te({},["mi","mo","mn","ms","mtext"]),Pr=Te({},["annotation-xml"]);const Rr=Te({},["title","style","font","a","script"]);let Ms=null;const Aw=["application/xhtml+xml","text/html"],kw="text/html";let at=null,oa=null;const Ew=t.createElement("form"),Bg=function(W){return W instanceof RegExp||W instanceof Function},ap=function(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(oa&&oa===W)){if((!W||typeof W!="object")&&(W={}),W=Os(W),Ms=Aw.indexOf(W.PARSER_MEDIA_TYPE)===-1?kw:W.PARSER_MEDIA_TYPE,at=Ms==="application/xhtml+xml"?mp:md,H=ys(W,"ALLOWED_TAGS")?Te({},W.ALLOWED_TAGS,at):O,ee=ys(W,"ALLOWED_ATTR")?Te({},W.ALLOWED_ATTR,at):ae,zo=ys(W,"ALLOWED_NAMESPACES")?Te({},W.ALLOWED_NAMESPACES,mp):ip,ze=ys(W,"ADD_URI_SAFE_ATTR")?Te(Os(Be),W.ADD_URI_SAFE_ATTR,at):Be,qe=ys(W,"ADD_DATA_URI_TAGS")?Te(Os(Xe),W.ADD_DATA_URI_TAGS,at):Xe,we=ys(W,"FORBID_CONTENTS")?Te({},W.FORBID_CONTENTS,at):ke,me=ys(W,"FORBID_TAGS")?Te({},W.FORBID_TAGS,at):Os({}),ue=ys(W,"FORBID_ATTR")?Te({},W.FORBID_ATTR,at):Os({}),pe=ys(W,"USE_PROFILES")?W.USE_PROFILES:!1,oe=W.ALLOW_ARIA_ATTR!==!1,de=W.ALLOW_DATA_ATTR!==!1,ye=W.ALLOW_UNKNOWN_PROTOCOLS||!1,Ce=W.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ge=W.SAFE_FOR_TEMPLATES||!1,_=W.SAFE_FOR_XML!==!1,K=W.WHOLE_DOCUMENT||!1,N=W.RETURN_DOM||!1,U=W.RETURN_DOM_FRAGMENT||!1,te=W.RETURN_TRUSTED_TYPE||!1,I=W.FORCE_BODY||!1,ne=W.SANITIZE_DOM!==!1,X=W.SANITIZE_NAMED_PROPS||!1,he=W.KEEP_CONTENT!==!1,se=W.IN_PLACE||!1,le=W.ALLOWED_URI_REGEXP||qv,st=W.NAMESPACE||xt,aa=W.MATHML_TEXT_INTEGRATION_POINTS||aa,Pr=W.HTML_INTEGRATION_POINTS||Pr,Z=W.CUSTOM_ELEMENT_HANDLING||{},W.CUSTOM_ELEMENT_HANDLING&&Bg(W.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=W.CUSTOM_ELEMENT_HANDLING.tagNameCheck),W.CUSTOM_ELEMENT_HANDLING&&Bg(W.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=W.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),W.CUSTOM_ELEMENT_HANDLING&&typeof W.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=W.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ge&&(de=!1),U&&(N=!0),pe&&(H=Te({},fb),ee=[],pe.html===!0&&(Te(H,ub),Te(ee,pb)),pe.svg===!0&&(Te(H,bp),Te(ee,_p),Te(ee,od)),pe.svgFilters===!0&&(Te(H,vp),Te(ee,_p),Te(ee,od)),pe.mathMl===!0&&(Te(H,yp),Te(ee,mb),Te(ee,od))),W.ADD_TAGS&&(typeof W.ADD_TAGS=="function"?fe.tagCheck=W.ADD_TAGS:(H===O&&(H=Os(H)),Te(H,W.ADD_TAGS,at))),W.ADD_ATTR&&(typeof W.ADD_ATTR=="function"?fe.attributeCheck=W.ADD_ATTR:(ee===ae&&(ee=Os(ee)),Te(ee,W.ADD_ATTR,at))),W.ADD_URI_SAFE_ATTR&&Te(ze,W.ADD_URI_SAFE_ATTR,at),W.FORBID_CONTENTS&&(we===ke&&(we=Os(we)),Te(we,W.FORBID_CONTENTS,at)),W.ADD_FORBID_CONTENTS&&(we===ke&&(we=Os(we)),Te(we,W.ADD_FORBID_CONTENTS,at)),he&&(H["#text"]=!0),K&&Te(H,["html","head","body"]),H.table&&(Te(H,["tbody"]),delete me.tbody),W.TRUSTED_TYPES_POLICY){if(typeof W.TRUSTED_TYPES_POLICY.createHTML!="function")throw qo('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof W.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw qo('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=W.TRUSTED_TYPES_POLICY,R=C.createHTML("")}else C===void 0&&(C=sR(p,n)),C!==null&&typeof R=="string"&&(R=C.createHTML(""));jt&&jt(W),oa=W}},jg=Te({},[...bp,...vp,...VP]),$g=Te({},[...yp,...qP]),Sw=function(W){let ce=E(W);(!ce||!ce.tagName)&&(ce={namespaceURI:st,tagName:"template"});const be=md(W.tagName),Ye=md(ce.tagName);return zo[W.namespaceURI]?W.namespaceURI===Ze?ce.namespaceURI===xt?be==="svg":ce.namespaceURI===De?be==="svg"&&(Ye==="annotation-xml"||aa[Ye]):!!jg[be]:W.namespaceURI===De?ce.namespaceURI===xt?be==="math":ce.namespaceURI===Ze?be==="math"&&Pr[Ye]:!!$g[be]:W.namespaceURI===xt?ce.namespaceURI===Ze&&!Pr[Ye]||ce.namespaceURI===De&&!aa[Ye]?!1:!$g[be]&&(Rr[be]||!jg[be]):!!(Ms==="application/xhtml+xml"&&zo[W.namespaceURI]):!1},Ds=function(W){Wo(e.removed,{element:W});try{E(W).removeChild(W)}catch{v(W)}},Lr=function(W,ce){try{Wo(e.removed,{attribute:ce.getAttributeNode(W),from:ce})}catch{Wo(e.removed,{attribute:null,from:ce})}if(ce.removeAttribute(W),W==="is")if(N||U)try{Ds(ce)}catch{}else try{ce.setAttribute(W,"")}catch{}},zg=function(W){let ce=null,be=null;if(I)W="<remove></remove>"+W;else{const nt=gp(W,/^[\r\n\t ]+/);be=nt&&nt[0]}Ms==="application/xhtml+xml"&&st===xt&&(W='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+W+"</body></html>");const Ye=C?C.createHTML(W):W;if(st===xt)try{ce=new f().parseFromString(Ye,Ms)}catch{}if(!ce||!ce.documentElement){ce=M.createDocument(st,"template",null);try{ce.documentElement.innerHTML=ia?R:Ye}catch{}}const Ct=ce.body||ce.documentElement;return W&&be&&Ct.insertBefore(t.createTextNode(be),Ct.childNodes[0]||null),st===xt?S.call(ce,K?"html":"body")[0]:K?ce.documentElement:Ct},Hg=function(W){return D.call(W.ownerDocument||W,W,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},op=function(W){return W instanceof u&&(typeof W.nodeName!="string"||typeof W.textContent!="string"||typeof W.removeChild!="function"||!(W.attributes instanceof d)||typeof W.removeAttribute!="function"||typeof W.setAttribute!="function"||typeof W.namespaceURI!="string"||typeof W.insertBefore!="function"||typeof W.hasChildNodes!="function")},Ug=function(W){return typeof o=="function"&&W instanceof o};function cn(_e,W,ce){ad(_e,be=>{be.call(e,W,ce,oa)})}const Wg=function(W){let ce=null;if(cn(z.beforeSanitizeElements,W,null),op(W))return Ds(W),!0;const be=at(W.nodeName);if(cn(z.uponSanitizeElement,W,{tagName:be,allowedTags:H}),_&&W.hasChildNodes()&&!Ug(W.firstElementChild)&&It(/<[/\w!]/g,W.innerHTML)&&It(/<[/\w!]/g,W.textContent)||W.nodeType===Xo.progressingInstruction||_&&W.nodeType===Xo.comment&&It(/<[/\w]/g,W.data))return Ds(W),!0;if(!(fe.tagCheck instanceof Function&&fe.tagCheck(be))&&(!H[be]||me[be])){if(!me[be]&&qg(be)&&(Z.tagNameCheck instanceof RegExp&&It(Z.tagNameCheck,be)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(be)))return!1;if(he&&!we[be]){const Ye=E(W)||W.parentNode,Ct=y(W)||W.childNodes;if(Ct&&Ye){const nt=Ct.length;for(let Ht=nt-1;Ht>=0;--Ht){const hn=g(Ct[Ht],!0);hn.__removalCount=(W.__removalCount||0)+1,Ye.insertBefore(hn,b(W))}}}return Ds(W),!0}return W instanceof l&&!Sw(W)||(be==="noscript"||be==="noembed"||be==="noframes")&&It(/<\/no(script|embed|frames)/i,W.innerHTML)?(Ds(W),!0):(ge&&W.nodeType===Xo.text&&(ce=W.textContent,ad([L,B,w],Ye=>{ce=Vo(ce,Ye," ")}),W.textContent!==ce&&(Wo(e.removed,{element:W.cloneNode()}),W.textContent=ce)),cn(z.afterSanitizeElements,W,null),!1)},Vg=function(W,ce,be){if(ne&&(ce==="id"||ce==="name")&&(be in t||be in Ew))return!1;if(!(de&&!ue[ce]&&It(G,ce))){if(!(oe&&It(re,ce))){if(!(fe.attributeCheck instanceof Function&&fe.attributeCheck(ce,W))){if(!ee[ce]||ue[ce]){if(!(qg(W)&&(Z.tagNameCheck instanceof RegExp&&It(Z.tagNameCheck,W)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(W))&&(Z.attributeNameCheck instanceof RegExp&&It(Z.attributeNameCheck,ce)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(ce,W))||ce==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&It(Z.tagNameCheck,be)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(be))))return!1}else if(!ze[ce]){if(!It(le,Vo(be,Q,""))){if(!((ce==="src"||ce==="xlink:href"||ce==="href")&&W!=="script"&&zP(be,"data:")===0&&qe[W])){if(!(ye&&!It($,Vo(be,Q,"")))){if(be)return!1}}}}}}}return!0},qg=function(W){return W!=="annotation-xml"&&gp(W,Y)},Gg=function(W){cn(z.beforeSanitizeAttributes,W,null);const{attributes:ce}=W;if(!ce||op(W))return;const be={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ee,forceKeepAttr:void 0};let Ye=ce.length;for(;Ye--;){const Ct=ce[Ye],{name:nt,namespaceURI:Ht,value:hn}=Ct,la=at(nt),lp=hn;let bt=nt==="value"?lp:HP(lp);if(be.attrName=la,be.attrValue=bt,be.keepAttr=!0,be.forceKeepAttr=void 0,cn(z.uponSanitizeAttribute,W,be),bt=be.attrValue,X&&(la==="id"||la==="name")&&(Lr(nt,W),bt=ie+bt),_&&It(/((--!?|])>)|<\/(style|title|textarea)/i,bt)){Lr(nt,W);continue}if(la==="attributename"&&gp(bt,"href")){Lr(nt,W);continue}if(be.forceKeepAttr)continue;if(!be.keepAttr){Lr(nt,W);continue}if(!Ce&&It(/\/>/i,bt)){Lr(nt,W);continue}ge&&ad([L,B,w],Yg=>{bt=Vo(bt,Yg," ")});const Xg=at(W.nodeName);if(!Vg(Xg,la,bt)){Lr(nt,W);continue}if(C&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Ht)switch(p.getAttributeType(Xg,la)){case"TrustedHTML":{bt=C.createHTML(bt);break}case"TrustedScriptURL":{bt=C.createScriptURL(bt);break}}if(bt!==lp)try{Ht?W.setAttributeNS(Ht,nt,bt):W.setAttribute(nt,bt),op(W)?Ds(W):db(e.removed)}catch{Lr(nt,W)}}cn(z.afterSanitizeAttributes,W,null)},xw=function _e(W){let ce=null;const be=Hg(W);for(cn(z.beforeSanitizeShadowDOM,W,null);ce=be.nextNode();)cn(z.uponSanitizeShadowNode,ce,null),Wg(ce),Gg(ce),ce.content instanceof r&&_e(ce.content);cn(z.afterSanitizeShadowDOM,W,null)};return e.sanitize=function(_e){let W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ce=null,be=null,Ye=null,Ct=null;if(ia=!_e,ia&&(_e="<!-->"),typeof _e!="string"&&!Ug(_e))if(typeof _e.toString=="function"){if(_e=_e.toString(),typeof _e!="string")throw qo("dirty is not a string, aborting")}else throw qo("toString is not a function");if(!e.isSupported)return _e;if(V||ap(W),e.removed=[],typeof _e=="string"&&(se=!1),se){if(_e.nodeName){const hn=at(_e.nodeName);if(!H[hn]||me[hn])throw qo("root node is forbidden and cannot be sanitized in-place")}}else if(_e instanceof o)ce=zg("<!---->"),be=ce.ownerDocument.importNode(_e,!0),be.nodeType===Xo.element&&be.nodeName==="BODY"||be.nodeName==="HTML"?ce=be:ce.appendChild(be);else{if(!N&&!ge&&!K&&_e.indexOf("<")===-1)return C&&te?C.createHTML(_e):_e;if(ce=zg(_e),!ce)return N?null:te?R:""}ce&&I&&Ds(ce.firstChild);const nt=Hg(se?_e:ce);for(;Ye=nt.nextNode();)Wg(Ye),Gg(Ye),Ye.content instanceof r&&xw(Ye.content);if(se)return _e;if(N){if(U)for(Ct=x.call(ce.ownerDocument);ce.firstChild;)Ct.appendChild(ce.firstChild);else Ct=ce;return(ee.shadowroot||ee.shadowrootmode)&&(Ct=F.call(s,Ct,!0)),Ct}let Ht=K?ce.outerHTML:ce.innerHTML;return K&&H["!doctype"]&&ce.ownerDocument&&ce.ownerDocument.doctype&&ce.ownerDocument.doctype.name&&It(Gv,ce.ownerDocument.doctype.name)&&(Ht="<!DOCTYPE "+ce.ownerDocument.doctype.name+`>
`+Ht),ge&&ad([L,B,w],hn=>{Ht=Vo(Ht,hn," ")}),C&&te?C.createHTML(Ht):Ht},e.setConfig=function(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ap(_e),V=!0},e.clearConfig=function(){oa=null,V=!1},e.isValidAttribute=function(_e,W,ce){oa||ap({});const be=at(_e),Ye=at(W);return Vg(be,Ye,ce)},e.addHook=function(_e,W){typeof W=="function"&&Wo(z[_e],W)},e.removeHook=function(_e,W){if(W!==void 0){const ce=jP(z[_e],W);return ce===-1?void 0:$P(z[_e],ce,1)[0]}return db(z[_e])},e.removeHooks=function(_e){z[_e]=[]},e.removeAllHooks=function(){z=bb()},e}var Yv=Xv();const Uh=({mainState:{currentDocument:i}})=>(j.useEffect(()=>{const e=i==null?void 0:i.fileData;let t="";const s=e==null?void 0:e.replace(/^data:text\/html;(?:charset=([^;]*);)?base64,/,(d,u)=>(t=u||"utf-8",""));let n=window.atob(s);const r=Uint8Array.from(n,d=>d.charCodeAt(0));n=new TextDecoder(t).decode(r);const a=document.getElementById("html-body"),o=(a==null?void 0:a.contentWindow)&&a.contentWindow;if(!o)return;const l=Yv.sanitize(n,{WHOLE_DOCUMENT:!0,ADD_TAGS:["style","link"],FORBID_TAGS:["script","object","embed","form"]}),h=o.document;h.open(),h.write(l),h.close()},[i]),k.jsx("div",{id:"html-renderer",className:"rdv-html-container",children:k.jsx("iframe",{id:"html-body",className:"rdv-html-iframe",sandbox:"allow-same-origin"})}));Uh.fileTypes=["htm","html","text/htm","text/html"];Uh.weight=0;Uh.fileLoader=Tv;Uh.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"HTMLRenderer"};const Of=i=>k.jsx(rn,{...i});Of.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"];Of.weight=0;Of.__docgenInfo={description:"",methods:[],displayName:"JPGRenderer"};function nR(i){let e=i;return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/```(\w*)\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>"),e=e.replace(/^######\s+(.+)$/gm,"<h6>$1</h6>").replace(/^#####\s+(.+)$/gm,"<h5>$1</h5>").replace(/^####\s+(.+)$/gm,"<h4>$1</h4>").replace(/^###\s+(.+)$/gm,"<h3>$1</h3>").replace(/^##\s+(.+)$/gm,"<h2>$1</h2>").replace(/^#\s+(.+)$/gm,"<h1>$1</h1>"),e=e.replace(/^[-*_]{3,}$/gm,"<hr />"),e=e.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/__(.+?)__/g,"<strong>$1</strong>"),e=e.replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/_(.+?)_/g,"<em>$1</em>"),e=e.replace(/`([^`]+)`/g,"<code>$1</code>"),e=e.replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" style="max-width:100%" />'),e=e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),e=e.replace(/^[\t ]*[-*+]\s+(.+)$/gm,"<li>$1</li>"),e=e.replace(/^[\t ]*\d+\.\s+(.+)$/gm,"<li>$1</li>"),e=e.replace(/((?:<li>.*?<\/li>\s*)+)/g,"<ul>$1</ul>"),e=e.split(`

`).map(t=>{const s=t.trim();return s?/^<(h[1-6]|pre|hr|ul|ol|li)/.test(s)?s:`<p>${s.replace(/\n/g,"<br />")}</p>`:""}).join(`
`),e}const Wh=({mainState:{currentDocument:i}})=>{const e=j.useMemo(()=>{if(!(i!=null&&i.fileData))return"";const t=nR(i.fileData);return Yv.sanitize(t,{ADD_TAGS:["img"],ADD_ATTR:["target","rel"]})},[i==null?void 0:i.fileData]);return k.jsx("div",{id:"markdown-renderer",className:"rdv-markdown-container",children:k.jsx("div",{className:"rdv-markdown-content",dangerouslySetInnerHTML:{__html:e}})})};Wh.fileTypes=["md","text/markdown","text/x-markdown"];Wh.weight=0;Wh.fileLoader=Df;Wh.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"MarkdownRenderer"};const rR={doc:"Word Document (.doc)",odt:"OpenDocument Text (.odt)",xls:"Excel Spreadsheet (.xls)",xlsx:"Excel Spreadsheet (.xlsx)",ppt:"PowerPoint Presentation (.ppt)",pptx:"PowerPoint Presentation (.pptx)",pages:"Apple Pages (.pages)"},iR=new Set(["doc","application/msword","odt","application/vnd.oasis.opendocument.text","xls","application/vnd.ms-excel","xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","ppt","application/vnd.ms-powerpoint","pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"]),aR=i=>i.startsWith("http://")||i.startsWith("https://"),Vh=({mainState:{currentDocument:i}})=>{const[e,t]=j.useState(!1);if(!i)return null;const s=i.fileName||i.uri.split("/").pop()||"document",n=i.fileType||"",r=rR[n]||`Office Document (.${n||"unknown"})`;if(aR(i.uri)&&iR.has(n)&&!e){const l=`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(i.uri)}`;return k.jsx("div",{id:"msdoc-renderer",className:"rdv-msdoc-iframe-container",children:k.jsx("iframe",{src:l,className:"rdv-msdoc-iframe",title:"Office Document Viewer",onError:()=>t(!0)})})}return k.jsx("div",{id:"msdoc-renderer",className:"rdv-msdoc-container",children:k.jsxs("div",{className:"rdv-msdoc-content",children:[k.jsx("div",{className:"rdv-msdoc-file-icon",children:k.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),k.jsx("polyline",{points:"14 2 14 8 20 8"}),k.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),k.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),k.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),k.jsx("div",{className:"rdv-msdoc-file-name",children:s}),k.jsx("div",{className:"rdv-msdoc-file-type",children:r}),k.jsx("a",{className:"rdv-msdoc-download-link",href:i.uri,download:s,onClick:o=>{o.preventDefault();const l=i.uri;fetch(l).then(h=>h.blob()).then(h=>{const d=URL.createObjectURL(h),u=document.createElement("a");u.href=d,u.download=s,u.click(),URL.revokeObjectURL(d)}).catch(()=>{const h=document.createElement("a");h.href=l,h.download=s,h.click()})},children:"Download File"})]})})},Nr={odt:["odt","application/vnd.oasis.opendocument.text"],doc:["doc","application/msword"],xls:["xls","application/vnd.ms-excel"],xlsx:["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["ppt","application/vnd.ms-powerpoint"],pptx:["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],pages:["pages","application/x-iwork-pages-sffpages"]};Vh.fileTypes=[...Nr.odt,...Nr.doc,...Nr.xls,...Nr.xlsx,...Nr.ppt,...Nr.pptx,...Nr.pages];Vh.weight=0;Vh.fileLoader=({fileLoaderComplete:i})=>i();Vh.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"{ fileLoaderComplete }",optional:!1,type:null}],returns:null}],displayName:"MSDocRenderer"};var pl={};pl.d=(i,e)=>{for(var t in e)pl.o(e,t)&&!pl.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};pl.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var Ee=globalThis.pdfjsLib={};pl.d(Ee,{AbortException:()=>na,AnnotationEditorLayer:()=>Km,AnnotationEditorParamsType:()=>Se,AnnotationEditorType:()=>Ne,AnnotationEditorUIManager:()=>Ki,AnnotationLayer:()=>r2,AnnotationMode:()=>Jn,CMapCompressionType:()=>$p,ColorPicker:()=>m0,DOMSVGFactory:()=>gg,DrawLayer:()=>eg,FeatureTest:()=>Yt,GlobalWorkerOptions:()=>Vn,ImageKind:()=>gd,InvalidPDFException:()=>Zv,MissingPDFException:()=>sa,OPS:()=>ws,Outliner:()=>Lm,PDFDataRangeTransport:()=>Uy,PDFDateString:()=>ry,PDFWorker:()=>va,PasswordResponses:()=>hR,PermissionFlag:()=>cR,PixelsPerInch:()=>xr,RenderingCancelledException:()=>bg,TextLayer:()=>Gd,UnexpectedResponseException:()=>zf,Util:()=>ve,VerbosityLevel:()=>Bf,XfaLayer:()=>Vy,build:()=>BL,createValidAbsoluteUrl:()=>pR,fetchData:()=>Gf,getDocument:()=>PL,getFilenameFromUrl:()=>ER,getPdfFilenameFromUrl:()=>SR,getXfaPageViewport:()=>xR,isDataScheme:()=>vg,isPdfFile:()=>yg,noContextMenu:()=>Kt,normalizeUnicode:()=>_R,renderTextLayer:()=>_L,setLayerDimensions:()=>Yi,shadow:()=>Me,updateTextLayer:()=>wL,version:()=>OL});const Nt=typeof Dr=="object"&&Dr+""=="[object process]"&&!Dr.versions.nw&&!(Dr.versions.electron&&Dr.type&&Dr.type!=="browser"),Kv=[1,0,0,1,0,0],jp=[.001,0,0,.001,0,0],oR=1e7,wp=1.35,bs={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},Jn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},lR="pdfjs_internal_editor_",Ne={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Se={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},cR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Tt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},gd={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ot={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Yo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Bf={ERRORS:0,WARNINGS:1,INFOS:5},$p={NONE:0,BINARY:1},ws={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},hR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let jf=Bf.WARNINGS;function dR(i){Number.isInteger(i)&&(jf=i)}function uR(){return jf}function $f(i){jf>=Bf.INFOS&&console.log(`Info: ${i}`)}function Pe(i){jf>=Bf.WARNINGS&&console.log(`Warning: ${i}`)}function $e(i){throw new Error(i)}function ut(i,e){i||$e(e)}function fR(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function pR(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const n=i.match(/\./g);(n==null?void 0:n.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=yR(i)}catch{}}const s=e?new URL(i,e):new URL(i);if(fR(s))return s}catch{}return null}function Me(i,e,t,s=!1){return Object.defineProperty(i,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Cr=function(){function e(t,s){this.constructor===e&&$e("Cannot initialize BaseException."),this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class zp extends Cr{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Hp extends Cr{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Zv extends Cr{constructor(e){super(e,"InvalidPDFException")}}class sa extends Cr{constructor(e){super(e,"MissingPDFException")}}class zf extends Cr{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class mR extends Cr{constructor(e){super(e,"FormatError")}}class na extends Cr{constructor(e){super(e,"AbortException")}}function Jv(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&$e("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const s=[];for(let n=0;n<e;n+=t){const r=Math.min(n+t,e),a=i.subarray(n,r);s.push(String.fromCharCode.apply(null,a))}return s.join("")}function Hf(i){typeof i!="string"&&$e("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=i.charCodeAt(s)&255;return t}function gR(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function pg(i){const e=Object.create(null);for(const[t,s]of i)e[t]=s;return e}function bR(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function vR(){try{return new Function(""),!0}catch{return!1}}class Yt{static get isLittleEndian(){return Me(this,"isLittleEndian",bR())}static get isEvalSupported(){return Me(this,"isEvalSupported",vR())}static get isOffscreenCanvasSupported(){return Me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Me(this,"platform",{isMac:navigator.platform.includes("Mac")}):Me(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return Me(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Ap=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var wa,bd,_l,Up;class ve{static makeHexColor(e,t,s){return`#${Ap[e]}${Ap[t]}${Ap[s]}`}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const s=e[0]*t[0]+e[1]*t[2]+t[4],n=e[0]*t[1]+e[1]*t[3]+t[5];return[s,n]}static applyInverseTransform(e,t){const s=t[0]*t[3]-t[1]*t[2],n=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/s,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/s;return[n,r]}static getAxialAlignedBoundingBox(e,t){const s=this.applyTransform(e,t),n=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(s[0],n[0],r[0],a[0]),Math.min(s[1],n[1],r[1],a[1]),Math.max(s[0],n[0],r[0],a[0]),Math.max(s[1],n[1],r[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],s=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(s+a)/2,l=Math.sqrt((s+a)**2-4*(s*a-r*n))/2,h=o+l||1,d=o-l||1;return[Math.sqrt(h),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>n)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>a?null:[s,r,n,a]}static bezierBoundingBox(e,t,s,n,r,a,o,l,h){return h?(h[0]=Math.min(h[0],e,o),h[1]=Math.min(h[1],t,l),h[2]=Math.max(h[2],e,o),h[3]=Math.max(h[3],t,l)):h=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],P(this,_l,Up).call(this,e,s,r,o,t,n,a,l,3*(-e+3*(s-r)+o),6*(e-2*s+r),3*(s-e),h),P(this,_l,Up).call(this,e,s,r,o,t,n,a,l,3*(-t+3*(n-a)+l),6*(t-2*n+a),3*(n-t),h),h}}wa=new WeakSet,bd=function(e,t,s,n,r,a,o,l,h,d){if(h<=0||h>=1)return;const u=1-h,f=h*h,p=f*h,m=u*(u*(u*e+3*h*t)+3*f*s)+p*n,g=u*(u*(u*r+3*h*a)+3*f*o)+p*l;d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],m),d[3]=Math.max(d[3],g)},_l=new WeakSet,Up=function(e,t,s,n,r,a,o,l,h,d,u,f){if(Math.abs(h)<1e-12){Math.abs(d)>=1e-12&&P(this,wa,bd).call(this,e,t,s,n,r,a,o,l,-u/d,f);return}const p=d**2-4*u*h;if(p<0)return;const m=Math.sqrt(p),g=2*h;P(this,wa,bd).call(this,e,t,s,n,r,a,o,l,(-d+m)/g,f),P(this,wa,bd).call(this,e,t,s,n,r,a,o,l,(-d-m)/g,f)},A(ve,wa),A(ve,_l);function yR(i){return decodeURIComponent(escape(i))}let kp=null,vb=null;function _R(i){return kp||(kp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,vb=new Map([["ﬅ","ſt"]])),i.replaceAll(kp,(e,t,s)=>t?t.normalize("NFKC"):vb.get(s))}function wR(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let e=0;e<32;e++)i[e]=Math.floor(Math.random()*255);return Jv(i)}const Qv="pdfjs_internal_id_",dn={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class Uf{constructor(){this.constructor===Uf&&$e("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,n,r){return"none"}destroy(e=!1){}}class Wf{constructor(){this.constructor===Wf&&$e("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d")}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){$e("Abstract method `_createCanvas` called.")}}class Vf{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===Vf&&$e("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),s=this.isCompressed?$p.BINARY:$p.NONE;return this._fetchData(t,s).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){$e("Abstract method `_fetchData` called.")}}class qf{constructor({baseUrl:e=null}){this.constructor===qf&&$e("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){$e("Abstract method `_fetchData` called.")}}class mg{constructor(){this.constructor===mg&&$e("Cannot initialize BaseSVGFactory.")}create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${e}px`),n.setAttribute("height",`${t}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${e} ${t}`),n}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){$e("Abstract method `_createSVG` called.")}}const fn="http://www.w3.org/2000/svg",jr=class jr{};xe(jr,"CSS",96),xe(jr,"PDF",72),xe(jr,"PDF_TO_CSS_UNITS",jr.CSS/jr.PDF);let xr=jr;var Hr,Bs,bn,Wt,Jd,Ur,pt,Pt,er,ha,tr,da,Aa,vd,Qd,ey,wl,Wp,sr,ua,Wr,Qo,Vr,el,Al,Vp,qr,tl;class AR extends Uf{constructor({docId:t,ownerDocument:s=globalThis.document}={}){super();A(this,pt);A(this,er);A(this,tr);A(this,Aa);A(this,Qd);A(this,wl);A(this,sr);A(this,Wr);A(this,Vr);A(this,Al);A(this,qr);A(this,Hr,void 0);A(this,Bs,void 0);A(this,bn,void 0);A(this,Wt,void 0);A(this,Jd,void 0);A(this,Ur,0);T(this,bn,t),T(this,Wt,s)}addFilter(t){if(!t)return"none";let s=c(this,pt,Pt).get(t);if(s)return s;const[n,r,a]=P(this,Aa,vd).call(this,t),o=t.length===1?n:`${n}${r}${a}`;if(s=c(this,pt,Pt).get(o),s)return c(this,pt,Pt).set(t,s),s;const l=`g_${c(this,bn)}_transfer_map_${Zt(this,Ur)._++}`,h=`url(#${l})`;c(this,pt,Pt).set(t,h),c(this,pt,Pt).set(o,h);const d=P(this,sr,ua).call(this,l);return P(this,Vr,el).call(this,n,r,a,d),h}addHCMFilter(t,s){var m;const n=`${t}-${s}`,r="base";let a=c(this,er,ha).get(r);if((a==null?void 0:a.key)===n||(a?((m=a.filter)==null||m.remove(),a.key=n,a.url="none",a.filter=null):(a={key:n,url:"none",filter:null},c(this,er,ha).set(r,a)),!t||!s))return a.url;const o=P(this,qr,tl).call(this,t);t=ve.makeHexColor(...o);const l=P(this,qr,tl).call(this,s);if(s=ve.makeHexColor(...l),c(this,tr,da).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return a.url;const h=new Array(256);for(let g=0;g<=255;g++){const v=g/255;h[g]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const d=h.join(","),u=`g_${c(this,bn)}_hcm_filter`,f=a.filter=P(this,sr,ua).call(this,u);P(this,Vr,el).call(this,d,d,d,f),P(this,wl,Wp).call(this,f);const p=(g,v)=>{const b=o[g]/255,y=l[g]/255,E=new Array(v+1);for(let C=0;C<=v;C++)E[C]=b+C/v*(y-b);return E.join(",")};return P(this,Vr,el).call(this,p(0,5),p(1,5),p(2,5),f),a.url=`url(#${u})`,a.url}addAlphaFilter(t){let s=c(this,pt,Pt).get(t);if(s)return s;const[n]=P(this,Aa,vd).call(this,[t]),r=`alpha_${n}`;if(s=c(this,pt,Pt).get(r),s)return c(this,pt,Pt).set(t,s),s;const a=`g_${c(this,bn)}_alpha_map_${Zt(this,Ur)._++}`,o=`url(#${a})`;c(this,pt,Pt).set(t,o),c(this,pt,Pt).set(r,o);const l=P(this,sr,ua).call(this,a);return P(this,Al,Vp).call(this,n,l),o}addLuminosityFilter(t){let s=c(this,pt,Pt).get(t||"luminosity");if(s)return s;let n,r;if(t?([n]=P(this,Aa,vd).call(this,[t]),r=`luminosity_${n}`):r="luminosity",s=c(this,pt,Pt).get(r),s)return c(this,pt,Pt).set(t,s),s;const a=`g_${c(this,bn)}_luminosity_map_${Zt(this,Ur)._++}`,o=`url(#${a})`;c(this,pt,Pt).set(t,o),c(this,pt,Pt).set(r,o);const l=P(this,sr,ua).call(this,a);return P(this,Qd,ey).call(this,l),t&&P(this,Al,Vp).call(this,n,l),o}addHighlightHCMFilter(t,s,n,r,a){var y;const o=`${s}-${n}-${r}-${a}`;let l=c(this,er,ha).get(t);if((l==null?void 0:l.key)===o||(l?((y=l.filter)==null||y.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},c(this,er,ha).set(t,l)),!s||!n))return l.url;const[h,d]=[s,n].map(P(this,qr,tl).bind(this));let u=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,m]=[r,a].map(P(this,qr,tl).bind(this));f<u&&([u,f,p,m]=[f,u,m,p]),c(this,tr,da).style.color="";const g=(E,C,R)=>{const M=new Array(256),D=(f-u)/R,x=E/255,S=(C-E)/(255*R);let F=0;for(let z=0;z<=R;z++){const L=Math.round(u+z*D),B=x+z*S;for(let w=F;w<=L;w++)M[w]=B;F=L+1}for(let z=F;z<256;z++)M[z]=M[F-1];return M.join(",")},v=`g_${c(this,bn)}_hcm_${t}_filter`,b=l.filter=P(this,sr,ua).call(this,v);return P(this,wl,Wp).call(this,b),P(this,Vr,el).call(this,g(p[0],m[0],5),g(p[1],m[1],5),g(p[2],m[2],5),b),l.url=`url(#${v})`,l.url}destroy(t=!1){t&&c(this,er,ha).size!==0||(c(this,Bs)&&(c(this,Bs).parentNode.parentNode.remove(),T(this,Bs,null)),c(this,Hr)&&(c(this,Hr).clear(),T(this,Hr,null)),T(this,Ur,0))}}Hr=new WeakMap,Bs=new WeakMap,bn=new WeakMap,Wt=new WeakMap,Jd=new WeakMap,Ur=new WeakMap,pt=new WeakSet,Pt=function(){return c(this,Hr)||T(this,Hr,new Map)},er=new WeakSet,ha=function(){return c(this,Jd)||T(this,Jd,new Map)},tr=new WeakSet,da=function(){if(!c(this,Bs)){const t=c(this,Wt).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=c(this,Wt).createElementNS(fn,"svg");n.setAttribute("width",0),n.setAttribute("height",0),T(this,Bs,c(this,Wt).createElementNS(fn,"defs")),t.append(n),n.append(c(this,Bs)),c(this,Wt).body.append(t)}return c(this,Bs)},Aa=new WeakSet,vd=function(t){if(t.length===1){const h=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=h[f]/255;const u=d.join(",");return[u,u,u]}const[s,n,r]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let h=0;h<256;h++)a[h]=s[h]/255,o[h]=n[h]/255,l[h]=r[h]/255;return[a.join(","),o.join(","),l.join(",")]},Qd=new WeakSet,ey=function(t){const s=c(this,Wt).createElementNS(fn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},wl=new WeakSet,Wp=function(t){const s=c(this,Wt).createElementNS(fn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},sr=new WeakSet,ua=function(t){const s=c(this,Wt).createElementNS(fn,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),c(this,tr,da).append(s),s},Wr=new WeakSet,Qo=function(t,s,n){const r=c(this,Wt).createElementNS(fn,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),t.append(r)},Vr=new WeakSet,el=function(t,s,n,r){const a=c(this,Wt).createElementNS(fn,"feComponentTransfer");r.append(a),P(this,Wr,Qo).call(this,a,"feFuncR",t),P(this,Wr,Qo).call(this,a,"feFuncG",s),P(this,Wr,Qo).call(this,a,"feFuncB",n)},Al=new WeakSet,Vp=function(t,s){const n=c(this,Wt).createElementNS(fn,"feComponentTransfer");s.append(n),P(this,Wr,Qo).call(this,n,"feFuncA",t)},qr=new WeakSet,tl=function(t){return c(this,tr,da).style.color=t,_g(getComputedStyle(c(this,tr,da)).getPropertyValue("color"))};class kR extends Wf{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}async function Gf(i,e="text"){if(sl(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType=e,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(n.response);return}t(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class ty extends Vf{_fetchData(e,t){return Gf(e,this.isCompressed?"arraybuffer":"text").then(s=>({cMapData:s instanceof ArrayBuffer?new Uint8Array(s):Hf(s),compressionType:t}))}}class sy extends qf{_fetchData(e){return Gf(e,"arraybuffer").then(t=>new Uint8Array(t))}}class gg extends mg{_createSVG(e){return document.createElementNS(fn,e)}}class qh{constructor({viewBox:e,scale:t,rotation:s,offsetX:n=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=s,this.offsetX=n,this.offsetY=r;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let h,d,u,f;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,d=0,u=0,f=1;break;case 90:h=0,d=1,u=1,f=0;break;case 270:h=0,d=-1,u=-1,f=0;break;case 0:h=1,d=0,u=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(u=-u,f=-f);let p,m,g,v;h===0?(p=Math.abs(l-e[1])*t+n,m=Math.abs(o-e[0])*t+r,g=(e[3]-e[1])*t,v=(e[2]-e[0])*t):(p=Math.abs(o-e[0])*t+n,m=Math.abs(l-e[1])*t+r,g=(e[2]-e[0])*t,v=(e[3]-e[1])*t),this.transform=[h*t,d*t,u*t,f*t,p-h*t*o-u*t*l,m-d*t*o-f*t*l],this.width=g,this.height=v}get rawDims(){const{viewBox:e}=this;return Me(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new qh({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:s,offsetY:n,dontFlip:r})}convertToViewportPoint(e,t){return ve.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ve.applyTransform([e[0],e[1]],this.transform),s=ve.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){return ve.applyInverseTransform([e,t],this.transform)}}class bg extends Cr{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function vg(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function yg(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function ER(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function SR(i,e="document.pdf"){if(typeof i!="string")return e;if(vg(i))return Pe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=t.exec(i);let r=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||e}class yb{constructor(){xe(this,"started",Object.create(null));xe(this,"times",[])}time(e){e in this.started&&Pe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Pe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:n,end:r}of this.times)e.push(`${s.padEnd(t)} ${r-n}ms
`);return e.join("")}}function sl(i,e){try{const{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function Kt(i){i.preventDefault()}function ny(i){console.log("Deprecated API usage: "+i)}let _b;class ry{static toDateObject(e){if(!e||typeof e!="string")return null;_b||(_b=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=_b.exec(e);if(!t)return null;const s=parseInt(t[1],10);let n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const h=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,h==="-"?(a+=d,o+=u):h==="+"&&(a-=d,o-=u),new Date(Date.UTC(s,n,r,a,o,l))}}function xR(i,{scale:e=1,rotation:t=0}){const{width:s,height:n}=i.attributes.style,r=[0,0,parseInt(s),parseInt(n)];return new qh({viewBox:r,scale:e,rotation:t})}function _g(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Pe(`Not a valid color format: "${i}"`),[0,0,0])}function CR(i){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of i.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;i.set(t,_g(s))}e.remove()}function Ke(i){const{a:e,b:t,c:s,d:n,e:r,f:a}=i.getTransform();return[e,t,s,n,r,a]}function un(i){const{a:e,b:t,c:s,d:n,e:r,f:a}=i.getTransform().invertSelf();return[e,t,s,n,r,a]}function Yi(i,e,t=!1,s=!0){if(e instanceof qh){const{pageWidth:n,pageHeight:r}=e.rawDims,{style:a}=i,o=Yt.isCSSRoundSupported,l=`var(--scale-factor) * ${n}px`,h=`var(--scale-factor) * ${r}px`,d=o?`round(${l}, 1px)`:`calc(${l})`,u=o?`round(${h}, 1px)`:`calc(${h})`;!t||e.rotation%180===0?(a.width=d,a.height=u):(a.width=u,a.height=d)}s&&i.setAttribute("data-main-rotation",e.rotation)}var Gr,Xr,js,Yr,eu,iy,tu,ay,su,oy,ka,yd,nu,ly,kl,Gp;const ru=class ru{constructor(e){A(this,tu);A(this,su);A(this,ka);A(this,nu);A(this,kl);A(this,Gr,null);A(this,Xr,null);A(this,js,void 0);A(this,Yr,null);T(this,js,e)}render(){const e=T(this,Gr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Kt),e.addEventListener("pointerdown",P(ru,eu,iy));const t=T(this,Yr,document.createElement("div"));t.className="buttons",e.append(t);const s=c(this,js).toolbarPosition;if(s){const{style:n}=e,r=c(this,js)._uiManager.direction==="ltr"?1-s[0]:s[0];n.insetInlineEnd=`${100*r}%`,n.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return P(this,nu,ly).call(this),e}hide(){var e;c(this,Gr).classList.add("hidden"),(e=c(this,Xr))==null||e.hideDropdown()}show(){c(this,Gr).classList.remove("hidden")}addAltTextButton(e){P(this,ka,yd).call(this,e),c(this,Yr).prepend(e,c(this,kl,Gp))}addColorPicker(e){T(this,Xr,e);const t=e.renderButton();P(this,ka,yd).call(this,t),c(this,Yr).prepend(t,c(this,kl,Gp))}remove(){var e;c(this,Gr).remove(),(e=c(this,Xr))==null||e.destroy(),T(this,Xr,null)}};Gr=new WeakMap,Xr=new WeakMap,js=new WeakMap,Yr=new WeakMap,eu=new WeakSet,iy=function(e){e.stopPropagation()},tu=new WeakSet,ay=function(e){c(this,js)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},su=new WeakSet,oy=function(e){c(this,js)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},ka=new WeakSet,yd=function(e){e.addEventListener("focusin",P(this,tu,ay).bind(this),{capture:!0}),e.addEventListener("focusout",P(this,su,oy).bind(this),{capture:!0}),e.addEventListener("contextmenu",Kt)},nu=new WeakSet,ly=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${c(this,js).editorType}-button`),P(this,ka,yd).call(this,e),e.addEventListener("click",t=>{c(this,js)._uiManager.delete()}),c(this,Yr).append(e)},kl=new WeakSet,Gp=function(){const e=document.createElement("div");return e.className="divider",e},A(ru,eu);let qp=ru;var El,Kr,Sl,iu,cy,au,hy,ou,dy;class TR{constructor(e){A(this,iu);A(this,au);A(this,ou);A(this,El,null);A(this,Kr,null);A(this,Sl,void 0);T(this,Sl,e)}show(e,t,s){const[n,r]=P(this,au,hy).call(this,t,s),{style:a}=c(this,Kr)||T(this,Kr,P(this,iu,cy).call(this));e.append(c(this,Kr)),a.insetInlineEnd=`${100*n}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,Kr).remove()}}El=new WeakMap,Kr=new WeakMap,Sl=new WeakMap,iu=new WeakSet,cy=function(){const e=T(this,Kr,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Kt);const t=T(this,El,document.createElement("div"));return t.className="buttons",e.append(t),P(this,ou,dy).call(this),e},au=new WeakSet,hy=function(e,t){let s=0,n=0;for(const r of e){const a=r.y+r.height;if(a<s)continue;const o=r.x+(t?r.width:0);if(a>s){n=o,s=a;continue}t?o>n&&(n=o):o<n&&(n=o)}return[t?1-n:n,s]},ou=new WeakSet,dy=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),e.addEventListener("contextmenu",Kt),e.addEventListener("click",()=>{c(this,Sl).highlightSelection("floating_button")}),c(this,El).append(e)};function Wd(i,e,t){for(const s of t)e.addEventListener(s,i[s].bind(i))}function PR(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var lu;class RR{constructor(){A(this,lu,0)}get id(){return`${lR}${Zt(this,lu)._++}`}}lu=new WeakMap;var xl,cu,fs,Cl,Yp;const Dg=class Dg{constructor(){A(this,Cl);A(this,xl,wR());A(this,cu,0);A(this,fs,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d"),n=new Image;n.src=e;const r=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Me(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:s,size:n,type:r}=e;return P(this,Cl,Yp).call(this,`${t}_${s}_${n}_${r}`,e)}async getFromUrl(e){return P(this,Cl,Yp).call(this,e,e)}async getFromId(e){c(this,fs)||T(this,fs,new Map);const t=c(this,fs).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=c(this,fs).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){c(this,fs)||T(this,fs,new Map);const t=c(this,fs).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${c(this,xl)}_`)}};xl=new WeakMap,cu=new WeakMap,fs=new WeakMap,Cl=new WeakSet,Yp=async function(e,t){c(this,fs)||T(this,fs,new Map);let s=c(this,fs).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,xl)}_${Zt(this,cu)._++}`,refCounter:0,isSvg:!1});let n;if(typeof t=="string"?(s.url=t,n=await Gf(t,"blob")):n=s.file=t,n.type==="image/svg+xml"){const r=Dg._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((h,d)=>{o.onload=()=>{s.bitmap=o,s.isSvg=!0,h()},a.onload=async()=>{const u=s.svgUrl=a.result;o.src=await r?`${u}#svgView(preserveAspectRatio(none))`:u},o.onerror=a.onerror=d});a.readAsDataURL(n),await l}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){console.error(n),s=null}return c(this,fs).set(e,s),s&&c(this,fs).set(s.id,s),s};let Xp=Dg;var mt,nr,Tl,gt;class LR{constructor(e=128){A(this,mt,[]);A(this,nr,!1);A(this,Tl,void 0);A(this,gt,-1);T(this,Tl,e)}add({cmd:e,undo:t,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(n&&e(),c(this,nr))return;const l={cmd:e,undo:t,post:s,type:r};if(c(this,gt)===-1){c(this,mt).length>0&&(c(this,mt).length=0),T(this,gt,0),c(this,mt).push(l);return}if(a&&c(this,mt)[c(this,gt)].type===r){o&&(l.undo=c(this,mt)[c(this,gt)].undo),c(this,mt)[c(this,gt)]=l;return}const h=c(this,gt)+1;h===c(this,Tl)?c(this,mt).splice(0,1):(T(this,gt,h),h<c(this,mt).length&&c(this,mt).splice(h)),c(this,mt).push(l)}undo(){if(c(this,gt)===-1)return;T(this,nr,!0);const{undo:e,post:t}=c(this,mt)[c(this,gt)];e(),t==null||t(),T(this,nr,!1),T(this,gt,c(this,gt)-1)}redo(){if(c(this,gt)<c(this,mt).length-1){T(this,gt,c(this,gt)+1),T(this,nr,!0);const{cmd:e,post:t}=c(this,mt)[c(this,gt)];e(),t==null||t(),T(this,nr,!1)}}hasSomethingToUndo(){return c(this,gt)!==-1}hasSomethingToRedo(){return c(this,gt)<c(this,mt).length-1}destroy(){T(this,mt,null)}}mt=new WeakMap,nr=new WeakMap,Tl=new WeakMap,gt=new WeakMap;var hu,uy;class Gh{constructor(e){A(this,hu);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Yt.platform;for(const[s,n,r={}]of e)for(const a of s){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:n,options:r}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:n,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(P(this,hu,uy).call(this,t));if(!s)return;const{callback:n,options:{bubbles:r=!1,args:a=[],checker:o=null}}=s;o&&!o(e,t)||(n.bind(e,...a,t)(),r||(t.stopPropagation(),t.preventDefault()))}}hu=new WeakSet,uy=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const du=class du{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return CR(e),Me(this,"_colors",e)}convert(e){const t=_g(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,n]of this._colors)if(n.every((r,a)=>r===t[a]))return du._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?ve.makeHexColor(...t):e}};xe(du,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Kp=du;var ts,lt,yt,Ea,vn,Sa,As,xa,Zr,$s,yn,Jr,Pl,Rl,zs,Ca,rr,Hs,uu,ir,Ll,Qr,Nl,Ta,_t,Fe,_n,ei,Il,Ml,Dl,Fl,Ol,Bl,jl,$l,zl,Hl,Ul,Wl,Vl,ql,ar,Us,wn,Gl,Pa,_d,fu,fy,pu,py,Ra,wd,mu,my,gu,gy,bu,by,Xl,Zp,Yl,Jp,Kl,Qp,Zl,em,Jl,tm,wt,Mt,Ws,Xn,vu,vy,yu,yy,Ql,sm,_u,_y,ti,nl,ec,nm;const ga=class ga{constructor(e,t,s,n,r,a,o,l,h){A(this,Pa);A(this,fu);A(this,pu);A(this,Ra);A(this,mu);A(this,gu);A(this,bu);A(this,Xl);A(this,Yl);A(this,Kl);A(this,Zl);A(this,Jl);A(this,wt);A(this,Ws);A(this,vu);A(this,yu);A(this,Ql);A(this,_u);A(this,ti);A(this,ec);A(this,ts,null);A(this,lt,new Map);A(this,yt,new Map);A(this,Ea,null);A(this,vn,null);A(this,Sa,null);A(this,As,new LR);A(this,xa,0);A(this,Zr,new Set);A(this,$s,null);A(this,yn,null);A(this,Jr,new Set);A(this,Pl,!1);A(this,Rl,null);A(this,zs,null);A(this,Ca,null);A(this,rr,!1);A(this,Hs,null);A(this,uu,new RR);A(this,ir,!1);A(this,Ll,!1);A(this,Qr,null);A(this,Nl,null);A(this,Ta,null);A(this,_t,Ne.NONE);A(this,Fe,new Set);A(this,_n,null);A(this,ei,null);A(this,Il,null);A(this,Ml,this.blur.bind(this));A(this,Dl,this.focus.bind(this));A(this,Fl,this.copy.bind(this));A(this,Ol,this.cut.bind(this));A(this,Bl,this.paste.bind(this));A(this,jl,this.keydown.bind(this));A(this,$l,this.keyup.bind(this));A(this,zl,this.onEditingAction.bind(this));A(this,Hl,this.onPageChanging.bind(this));A(this,Ul,this.onScaleChanging.bind(this));A(this,Wl,P(this,pu,py).bind(this));A(this,Vl,this.onRotationChanging.bind(this));A(this,ql,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,ar,[0,0]);A(this,Us,null);A(this,wn,null);A(this,Gl,null);T(this,wn,e),T(this,Gl,t),T(this,Ea,s),this._eventBus=n,this._eventBus._on("editingaction",c(this,zl)),this._eventBus._on("pagechanging",c(this,Hl)),this._eventBus._on("scalechanging",c(this,Ul)),this._eventBus._on("rotationchanging",c(this,Vl)),P(this,mu,my).call(this),P(this,Yl,Jp).call(this),T(this,vn,r.annotationStorage),T(this,Rl,r.filterFactory),T(this,ei,a),T(this,Ca,o||null),T(this,Pl,l),T(this,Ta,h||null),this.viewParameters={realScale:xr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=ga.prototype,t=a=>c(a,wn).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),s=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Me(this,"_keyboardManager",new Gh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,wn).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,wn).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t;P(this,Kl,Qp).call(this),P(this,Xl,Zp).call(this),this._eventBus._off("editingaction",c(this,zl)),this._eventBus._off("pagechanging",c(this,Hl)),this._eventBus._off("scalechanging",c(this,Ul)),this._eventBus._off("rotationchanging",c(this,Vl));for(const s of c(this,yt).values())s.destroy();c(this,yt).clear(),c(this,lt).clear(),c(this,Jr).clear(),T(this,ts,null),c(this,Fe).clear(),c(this,As).destroy(),(e=c(this,Ea))==null||e.destroy(),(t=c(this,Hs))==null||t.hide(),T(this,Hs,null),c(this,zs)&&(clearTimeout(c(this,zs)),T(this,zs,null)),c(this,Us)&&(clearTimeout(c(this,Us)),T(this,Us,null)),P(this,gu,gy).call(this)}async mlGuess(e){var t;return((t=c(this,Ta))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!c(this,Ta)}get hcmFilter(){return Me(this,"hcmFilter",c(this,ei)?c(this,Rl).addHCMFilter(c(this,ei).foreground,c(this,ei).background):"none")}get direction(){return Me(this,"direction",getComputedStyle(c(this,wn)).direction)}get highlightColors(){return Me(this,"highlightColors",c(this,Ca)?new Map(c(this,Ca).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){T(this,Nl,e)}editAltText(e){var t;(t=c(this,Ea))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){T(this,xa,e-1)}focusMainContainer(){c(this,wn).focus()}findParent(e,t){for(const s of c(this,yt).values()){const{x:n,y:r,width:a,height:o}=s.div.getBoundingClientRect();if(e>=n&&e<=n+a&&t>=r&&t<=r+o)return s}return null}disableUserSelect(e=!1){c(this,Gl).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,Jr).add(e)}removeShouldRescale(e){c(this,Jr).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*xr.PDF_TO_CSS_UNITS;for(const t of c(this,Jr))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:a}=t,o=t.toString(),h=P(this,Pa,_d).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(h);if(d){t.empty(),c(this,_t)===Ne.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:Ne.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const u of c(this,yt).values())if(u.hasTextLayer(h)){u.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:a,text:o});break}}}addToAnnotationStorage(e){!e.isEmpty()&&c(this,vn)&&!c(this,vn).has(e.id)&&c(this,vn).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(this,rr)&&(T(this,rr,!1),P(this,Ra,wd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Fe))if(t.div.contains(e)){T(this,Qr,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,Qr))return;const[e,t]=c(this,Qr);T(this,Qr,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus()}addEditListeners(){P(this,Yl,Jp).call(this),P(this,Zl,em).call(this)}removeEditListeners(){P(this,Kl,Qp).call(this),P(this,Jl,tm).call(this)}copy(e){var s;if(e.preventDefault(),(s=c(this,ts))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const n of c(this,Fe)){const r=n.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const a of c(this,yn))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){Pe(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const l of s){const h=n.deserialize(l);if(!h)return;r.push(h)}const a=()=>{for(const l of r)P(this,Ql,sm).call(this,l);P(this,ec,nm).call(this,r)},o=()=>{for(const l of r)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){Pe(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,_t)!==Ne.NONE&&!this.isEditorHandlingKeyboard&&ga._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,rr)&&(T(this,rr,!1),P(this,Ra,wd).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(P(this,bu,by).call(this),P(this,Zl,em).call(this),P(this,wt,Mt).call(this,{isEditing:c(this,_t)!==Ne.NONE,isEmpty:P(this,ti,nl).call(this),hasSomethingToUndo:c(this,As).hasSomethingToUndo(),hasSomethingToRedo:c(this,As).hasSomethingToRedo(),hasSelectedEditor:!1})):(P(this,Xl,Zp).call(this),P(this,Jl,tm).call(this),P(this,wt,Mt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,yn)){T(this,yn,e);for(const t of c(this,yn))P(this,Ws,Xn).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,uu).id}get currentLayer(){return c(this,yt).get(c(this,xa))}getLayer(e){return c(this,yt).get(e)}get currentPageIndex(){return c(this,xa)}addLayer(e){c(this,yt).set(e.pageIndex,e),c(this,ir)?e.enable():e.disable()}removeLayer(e){c(this,yt).delete(e.pageIndex)}updateMode(e,t=null,s=!1){if(c(this,_t)!==e){if(T(this,_t,e),e===Ne.NONE){this.setEditingState(!1),P(this,yu,yy).call(this);return}this.setEditingState(!0),P(this,vu,vy).call(this),this.unselectAll();for(const n of c(this,yt).values())n.updateMode(e);if(!t&&s){this.addNewEditorFromKeyboard();return}if(t){for(const n of c(this,lt).values())if(n.annotationElementId===t){this.setSelected(n),n.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==c(this,_t)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var s;if(c(this,yn)){switch(e){case Se.CREATE:this.currentLayer.addNewEditor();return;case Se.HIGHLIGHT_DEFAULT_COLOR:(s=c(this,Nl))==null||s.updateColor(t);break;case Se.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Il)||T(this,Il,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const n of c(this,Fe))n.updateParams(e,t);for(const n of c(this,yn))n.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var r;for(const a of c(this,lt).values())a.editorType===e&&a.show(t);(((r=c(this,Il))==null?void 0:r.get(Se.HIGHLIGHT_SHOW_ALL))??!0)!==t&&P(this,Ws,Xn).call(this,[[Se.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,Ll)!==e){T(this,Ll,e);for(const t of c(this,yt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const s of c(this,lt).values())s.pageIndex===e&&t.push(s);return t}getEditor(e){return c(this,lt).get(e)}addEditor(e){c(this,lt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(c(this,zs)&&clearTimeout(c(this,zs)),T(this,zs,setTimeout(()=>{this.focusMainContainer(),T(this,zs,null)},0))),c(this,lt).delete(e.id),this.unselect(e),(!e.annotationElementId||!c(this,Zr).has(e.annotationElementId))&&((t=c(this,vn))==null||t.remove(e.id))}addDeletedAnnotationElement(e){c(this,Zr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Zr).has(e)}removeDeletedAnnotationElement(e){c(this,Zr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,ts)!==e&&(T(this,ts,e),e&&P(this,Ws,Xn).call(this,e.propertiesToUpdate))}updateUI(e){c(this,_u,_y)===e&&P(this,Ws,Xn).call(this,e.propertiesToUpdate)}toggleSelected(e){if(c(this,Fe).has(e)){c(this,Fe).delete(e),e.unselect(),P(this,wt,Mt).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Fe).add(e),e.select(),P(this,Ws,Xn).call(this,e.propertiesToUpdate),P(this,wt,Mt).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of c(this,Fe))t!==e&&t.unselect();c(this,Fe).clear(),c(this,Fe).add(e),e.select(),P(this,Ws,Xn).call(this,e.propertiesToUpdate),P(this,wt,Mt).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Fe).has(e)}get firstSelectedEditor(){return c(this,Fe).values().next().value}unselect(e){e.unselect(),c(this,Fe).delete(e),P(this,wt,Mt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Fe).size!==0}get isEnterHandled(){return c(this,Fe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){c(this,As).undo(),P(this,wt,Mt).call(this,{hasSomethingToUndo:c(this,As).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:P(this,ti,nl).call(this)})}redo(){c(this,As).redo(),P(this,wt,Mt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,As).hasSomethingToRedo(),isEmpty:P(this,ti,nl).call(this)})}addCommands(e){c(this,As).add(e),P(this,wt,Mt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:P(this,ti,nl).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...c(this,Fe)],t=()=>{for(const n of e)n.remove()},s=()=>{for(const n of e)P(this,Ql,sm).call(this,n)};this.addCommands({cmd:t,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=c(this,ts))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,ts)||this.hasSelection}selectAll(){for(const e of c(this,Fe))e.commit();P(this,ec,nm).call(this,c(this,lt).values())}unselectAll(){if(!(c(this,ts)&&(c(this,ts).commitOrRemove(),c(this,_t)!==Ne.NONE))&&this.hasSelection){for(const e of c(this,Fe))e.unselect();c(this,Fe).clear(),P(this,wt,Mt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,ar)[0]+=e,c(this,ar)[1]+=t;const[n,r]=c(this,ar),a=[...c(this,Fe)],o=1e3;c(this,Us)&&clearTimeout(c(this,Us)),T(this,Us,setTimeout(()=>{T(this,Us,null),c(this,ar)[0]=c(this,ar)[1]=0,this.addCommands({cmd:()=>{for(const l of a)c(this,lt).has(l.id)&&l.translateInPage(n,r)},undo:()=>{for(const l of a)c(this,lt).has(l.id)&&l.translateInPage(-n,-r)},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),T(this,$s,new Map);for(const e of c(this,Fe))c(this,$s).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,$s))return!1;this.disableUserSelect(!1);const e=c(this,$s);T(this,$s,null);let t=!1;for(const[{x:n,y:r,pageIndex:a},o]of e)o.newX=n,o.newY=r,o.newPageIndex=a,t||(t=n!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const s=(n,r,a,o)=>{if(c(this,lt).has(n.id)){const l=c(this,yt).get(o);l?n._setParentAndPosition(l,r,a):(n.pageIndex=o,n.x=r,n.y=a)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:a,newPageIndex:o}]of e)s(n,r,a,o)},undo:()=>{for(const[n,{savedX:r,savedY:a,savedPageIndex:o}]of e)s(n,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,$s))for(const s of c(this,$s).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Fe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,ts)===e}getActive(){return c(this,ts)}getMode(){return c(this,_t)}get imageManager(){return Me(this,"imageManager",new Xp)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,d=t.rangeCount;h<d;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:n,width:r,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(h,d,u,f)=>({x:(d-n)/a,y:1-(h+u-s)/r,width:f/a,height:u/r});break;case"180":o=(h,d,u,f)=>({x:1-(h+u-s)/r,y:1-(d+f-n)/a,width:u/r,height:f/a});break;case"270":o=(h,d,u,f)=>({x:1-(d+f-n)/a,y:(h-s)/r,width:f/a,height:u/r});break;default:o=(h,d,u,f)=>({x:(h-s)/r,y:(d-n)/a,width:u/r,height:f/a});break}const l=[];for(let h=0,d=t.rangeCount;h<d;h++){const u=t.getRangeAt(h);if(!u.collapsed)for(const{x:f,y:p,width:m,height:g}of u.getClientRects())m===0||g===0||l.push(o(f,p,m,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Sa)||T(this,Sa,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Sa))==null||t.delete(e)}renderAnnotationElement(e){var n;const t=(n=c(this,Sa))==null?void 0:n.get(e.data.id);if(!t)return;const s=c(this,vn).getRawValue(t);s&&(c(this,_t)===Ne.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}};ts=new WeakMap,lt=new WeakMap,yt=new WeakMap,Ea=new WeakMap,vn=new WeakMap,Sa=new WeakMap,As=new WeakMap,xa=new WeakMap,Zr=new WeakMap,$s=new WeakMap,yn=new WeakMap,Jr=new WeakMap,Pl=new WeakMap,Rl=new WeakMap,zs=new WeakMap,Ca=new WeakMap,rr=new WeakMap,Hs=new WeakMap,uu=new WeakMap,ir=new WeakMap,Ll=new WeakMap,Qr=new WeakMap,Nl=new WeakMap,Ta=new WeakMap,_t=new WeakMap,Fe=new WeakMap,_n=new WeakMap,ei=new WeakMap,Il=new WeakMap,Ml=new WeakMap,Dl=new WeakMap,Fl=new WeakMap,Ol=new WeakMap,Bl=new WeakMap,jl=new WeakMap,$l=new WeakMap,zl=new WeakMap,Hl=new WeakMap,Ul=new WeakMap,Wl=new WeakMap,Vl=new WeakMap,ql=new WeakMap,ar=new WeakMap,Us=new WeakMap,wn=new WeakMap,Gl=new WeakMap,Pa=new WeakSet,_d=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},fu=new WeakSet,fy=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=P(this,Pa,_d).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(c(this,Hs)||T(this,Hs,new TR(this)),c(this,Hs).show(s,n,this.direction==="ltr"))},pu=new WeakSet,py=function(){var r,a,o;const e=document.getSelection();if(!e||e.isCollapsed){c(this,_n)&&((r=c(this,Hs))==null||r.hide(),T(this,_n,null),P(this,wt,Mt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,_n))return;if(!P(this,Pa,_d).call(this,e).closest(".textLayer")){c(this,_n)&&((a=c(this,Hs))==null||a.hide(),T(this,_n,null),P(this,wt,Mt).call(this,{hasSelectedText:!1}));return}if((o=c(this,Hs))==null||o.hide(),T(this,_n,t),P(this,wt,Mt).call(this,{hasSelectedText:!0}),!(c(this,_t)!==Ne.HIGHLIGHT&&c(this,_t)!==Ne.NONE)&&(c(this,_t)===Ne.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),T(this,rr,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=h=>{h.type==="pointerup"&&h.button!==0||(window.removeEventListener("pointerup",l),window.removeEventListener("blur",l),h.type==="pointerup"&&P(this,Ra,wd).call(this,"main_toolbar"))};window.addEventListener("pointerup",l),window.addEventListener("blur",l)}},Ra=new WeakSet,wd=function(e=""){c(this,_t)===Ne.HIGHLIGHT?this.highlightSelection(e):c(this,Pl)&&P(this,fu,fy).call(this)},mu=new WeakSet,my=function(){document.addEventListener("selectionchange",c(this,Wl))},gu=new WeakSet,gy=function(){document.removeEventListener("selectionchange",c(this,Wl))},bu=new WeakSet,by=function(){window.addEventListener("focus",c(this,Dl)),window.addEventListener("blur",c(this,Ml))},Xl=new WeakSet,Zp=function(){window.removeEventListener("focus",c(this,Dl)),window.removeEventListener("blur",c(this,Ml))},Yl=new WeakSet,Jp=function(){window.addEventListener("keydown",c(this,jl)),window.addEventListener("keyup",c(this,$l))},Kl=new WeakSet,Qp=function(){window.removeEventListener("keydown",c(this,jl)),window.removeEventListener("keyup",c(this,$l))},Zl=new WeakSet,em=function(){document.addEventListener("copy",c(this,Fl)),document.addEventListener("cut",c(this,Ol)),document.addEventListener("paste",c(this,Bl))},Jl=new WeakSet,tm=function(){document.removeEventListener("copy",c(this,Fl)),document.removeEventListener("cut",c(this,Ol)),document.removeEventListener("paste",c(this,Bl))},wt=new WeakSet,Mt=function(e){Object.entries(e).some(([s,n])=>c(this,ql)[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,ql),e)}),c(this,_t)===Ne.HIGHLIGHT&&e.hasSelectedEditor===!1&&P(this,Ws,Xn).call(this,[[Se.HIGHLIGHT_FREE,!0]]))},Ws=new WeakSet,Xn=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},vu=new WeakSet,vy=function(){if(!c(this,ir)){T(this,ir,!0);for(const e of c(this,yt).values())e.enable();for(const e of c(this,lt).values())e.enable()}},yu=new WeakSet,yy=function(){if(this.unselectAll(),c(this,ir)){T(this,ir,!1);for(const e of c(this,yt).values())e.disable();for(const e of c(this,lt).values())e.disable()}},Ql=new WeakSet,sm=function(e){const t=c(this,yt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},_u=new WeakSet,_y=function(){let e=null;for(e of c(this,Fe));return e},ti=new WeakSet,nl=function(){if(c(this,lt).size===0)return!0;if(c(this,lt).size===1)for(const e of c(this,lt).values())return e.isEmpty();return!1},ec=new WeakSet,nm=function(e){for(const t of c(this,Fe))t.unselect();c(this,Fe).clear();for(const t of e)t.isEmpty()||(c(this,Fe).add(t),t.select());P(this,wt,Mt).call(this,{hasSelectedEditor:this.hasSelection})},xe(ga,"TRANSLATE_SMALL",1),xe(ga,"TRANSLATE_BIG",10);let Ki=ga;var An,kn,ks,En,Es,La,Sn,tc,rm;const pn=class pn{constructor(e){A(this,tc);A(this,An,"");A(this,kn,!1);A(this,ks,null);A(this,En,null);A(this,Es,null);A(this,La,!1);A(this,Sn,null);T(this,Sn,e)}static initialize(e){pn._l10nPromise||(pn._l10nPromise=e)}async render(){const e=T(this,ks,document.createElement("button"));e.className="altText";const t=await pn._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0",e.addEventListener("contextmenu",Kt),e.addEventListener("pointerdown",n=>n.stopPropagation());const s=n=>{n.preventDefault(),c(this,Sn)._uiManager.editAltText(c(this,Sn))};return e.addEventListener("click",s,{capture:!0}),e.addEventListener("keydown",n=>{n.target===e&&n.key==="Enter"&&(T(this,La,!0),s(n))}),await P(this,tc,rm).call(this),e}finish(){c(this,ks)&&(c(this,ks).focus({focusVisible:c(this,La)}),T(this,La,!1))}isEmpty(){return!c(this,An)&&!c(this,kn)}get data(){return{altText:c(this,An),decorative:c(this,kn)}}set data({altText:e,decorative:t}){c(this,An)===e&&c(this,kn)===t||(T(this,An,e),T(this,kn,t),P(this,tc,rm).call(this))}toggle(e=!1){c(this,ks)&&(!e&&c(this,Es)&&(clearTimeout(c(this,Es)),T(this,Es,null)),c(this,ks).disabled=!e)}destroy(){var e;(e=c(this,ks))==null||e.remove(),T(this,ks,null),T(this,En,null)}};An=new WeakMap,kn=new WeakMap,ks=new WeakMap,En=new WeakMap,Es=new WeakMap,La=new WeakMap,Sn=new WeakMap,tc=new WeakSet,rm=async function(){var n;const e=c(this,ks);if(!e)return;if(!c(this,An)&&!c(this,kn)){e.classList.remove("done"),(n=c(this,En))==null||n.remove();return}e.classList.add("done"),pn._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(r=>{e.setAttribute("aria-label",r)});let t=c(this,En);if(!t){T(this,En,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const r=t.id=`alt-text-tooltip-${c(this,Sn).id}`;e.setAttribute("aria-describedby",r);const a=100;e.addEventListener("mouseenter",()=>{T(this,Es,setTimeout(()=>{T(this,Es,null),c(this,En).classList.add("show"),c(this,Sn)._reportTelemetry({action:"alt_text_tooltip"})},a))}),e.addEventListener("mouseleave",()=>{var o;c(this,Es)&&(clearTimeout(c(this,Es)),T(this,Es,null)),(o=c(this,En))==null||o.classList.remove("show")})}t.innerText=c(this,kn)?await pn._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):c(this,An),t.parentNode||e.append(t);const s=c(this,Sn).getImageForAltText();s==null||s.setAttribute("aria-describedby",t.id)},xe(pn,"_l10nPromise",null);let Vd=pn;var Ss,Dt,Na,si,At,ni,Ia,Ma,Rt,sc,ri,or,nc,ii,xn,Vs,Da,Fa,ps,rc,wu,ic,im,ac,am,oc,om,Au,wy,ku,Ay,lc,lm,cc,cm,hc,hm,Eu,ky,Su,Ey,xu,Sy,Cu,xy,dc,dm,ai,rl;const Ue=class Ue{constructor(e){A(this,ic);A(this,oc);A(this,Au);A(this,ku);A(this,lc);A(this,cc);A(this,hc);A(this,Eu);A(this,Su);A(this,xu);A(this,Cu);A(this,dc);A(this,ai);A(this,Ss,null);A(this,Dt,null);A(this,Na,!1);A(this,si,!1);A(this,At,null);A(this,ni,null);A(this,Ia,this.focusin.bind(this));A(this,Ma,this.focusout.bind(this));A(this,Rt,null);A(this,sc,"");A(this,ri,!1);A(this,or,null);A(this,nc,!1);A(this,ii,!1);A(this,xn,!1);A(this,Vs,null);A(this,Da,0);A(this,Fa,0);A(this,ps,null);xe(this,"_initialOptions",Object.create(null));xe(this,"_isVisible",!0);xe(this,"_uiManager",null);xe(this,"_focusEventsAllowed",!0);xe(this,"_l10nPromise",null);A(this,rc,!1);A(this,wu,Ue._zIndex++);this.constructor===Ue&&$e("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[r,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Ue.prototype._resizeWithKeyboard,t=Ki.TRANSLATE_SMALL,s=Ki.TRANSLATE_BIG;return Me(this,"_resizerKeyboardManager",new Gh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],Ue.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new NR({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,s){if(Ue._l10nPromise||(Ue._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(r=>[r,e.get(r.replaceAll(/([A-Z])/g,a=>`-${a.toLowerCase()}`))]))),s!=null&&s.strings)for(const r of s.strings)Ue._l10nPromise.set(r,e.get(r));if(Ue._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Ue._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){$e("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,rc)}set _isDraggable(e){var t;T(this,rc,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,wu)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):P(this,ai,rl).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,ri)?T(this,ri,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,n){const[r,a]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(e+s)/r,this.y=(t+n)/a,this.fixAndSetPosition()}translate(e,t){P(this,ic,im).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,or)||T(this,or,[this.x,this.y]),P(this,ic,im).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){c(this,or)||T(this,or,[this.x,this.y]);const[s,n]=this.parentDimensions;if(this.x+=e/s,this.y+=t/n,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,l]=this.getBaseTranslation();r+=o,a+=l,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!c(this,or)&&(c(this,or)[0]!==this.x||c(this,or)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=Ue,n=s/e,r=s/t;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,s]=this.pageDimensions;let{x:n,y:r,width:a,height:o}=this;if(a*=t,o*=s,n*=t,r*=s,this._mustFixPosition)switch(e){case 0:n=Math.max(0,Math.min(t-a,n)),r=Math.max(0,Math.min(s-o,r));break;case 90:n=Math.max(0,Math.min(t-o,n)),r=Math.min(s,Math.max(a,r));break;case 180:n=Math.min(t,Math.max(a,n)),r=Math.min(s,Math.max(o,r));break;case 270:n=Math.min(t,Math.max(o,n)),r=Math.max(0,Math.min(s-a,r));break}this.x=n/=t,this.y=r/=s;const[l,h]=this.getBaseTranslation();n+=l,r+=h;const{style:d}=this.div;d.left=`${(100*n).toFixed(2)}%`,d.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return P(s=Ue,ac,am).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return P(s=Ue,ac,am).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this,n=t*e,r=s*e;return Yt.isCSSRoundSupported?[Math.round(n),Math.round(r)]:[n,r]}setDims(e,t){const[s,n]=this.parentDimensions;this.div.style.width=`${(100*e/s).toFixed(2)}%`,c(this,si)||(this.div.style.height=`${(100*t/n).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:s}=e,n=s.endsWith("%"),r=!c(this,si)&&t.endsWith("%");if(n&&r)return;const[a,o]=this.parentDimensions;n||(e.width=`${(100*parseFloat(s)/a).toFixed(2)}%`),!c(this,si)&&!r&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=c(this,Dt))==null||e.finish()}async addEditToolbar(){return c(this,Rt)||c(this,ii)?c(this,Rt):(T(this,Rt,new qp(this)),this.div.append(c(this,Rt).render()),c(this,Dt)&&c(this,Rt).addAltTextButton(await c(this,Dt).render()),c(this,Rt))}removeEditToolbar(){var e;c(this,Rt)&&(c(this,Rt).remove(),T(this,Rt,null),(e=c(this,Dt))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,Dt)||(Vd.initialize(Ue._l10nPromise),T(this,Dt,new Vd(this)),await this.addEditToolbar())}get altTextData(){var e;return(e=c(this,Dt))==null?void 0:e.data}set altTextData(e){c(this,Dt)&&(c(this,Dt).data=e)}hasAltText(){var e;return!((e=c(this,Dt))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,Na)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",c(this,Ia)),this.div.addEventListener("focusout",c(this,Ma));const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[s,n]=this.getInitialTranslation();return this.translate(s,n),Wd(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(T(this,ri,!0),this._isDraggable){P(this,Eu,ky).call(this,e);return}P(this,hc,hm).call(this,e)}moveInDOM(){c(this,Vs)&&clearTimeout(c(this,Vs)),T(this,Vs,setTimeout(()=>{var e;T(this,Vs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition()}getRect(e,t,s=this.rotation){const n=this.parentScale,[r,a]=this.pageDimensions,[o,l]=this.pageTranslation,h=e/n,d=t/n,u=this.x*r,f=this.y*a,p=this.width*r,m=this.height*a;switch(s){case 0:return[u+h+o,a-f-d-m+l,u+h+p+o,a-f-d+l];case 90:return[u+d+o,a-f+h+l,u+d+m+o,a-f+h+p+l];case 180:return[u-h-p+o,a-f+d+l,u-h+o,a-f+d+m+l];case 270:return[u-d-m+o,a-f-h-p+l,u-d+o,a-f-h+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,n,r,a]=e,o=r-s,l=a-n;switch(this.rotation){case 0:return[s,t-a,o,l];case 90:return[s,t-n,l,o];case 180:return[r,t-n,o,l];case 270:return[r,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){T(this,ii,!0)}disableEditMode(){T(this,ii,!1)}isInEditMode(){return c(this,ii)}shouldGetKeyboardEvents(){return c(this,xn)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;(e=this.div)==null||e.addEventListener("focusin",c(this,Ia)),(t=this.div)==null||t.addEventListener("focusout",c(this,Ma))}rotate(e){}serialize(e=!1,t=null){$e("An editor must be serializable")}static deserialize(e,t,s){const n=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s});n.rotation=e.rotation;const[r,a]=n.pageDimensions,[o,l,h,d]=n.getRectInCurrentCoords(e.rect,a);return n.x=o/r,n.y=l/a,n.width=h/r,n.height=d/a,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",c(this,Ia)),this.div.removeEventListener("focusout",c(this,Ma)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Vs)&&(clearTimeout(c(this,Vs)),T(this,Vs,null)),P(this,ai,rl).call(this),this.removeEditToolbar(),c(this,ps)){for(const e of c(this,ps).values())clearTimeout(e);T(this,ps,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(P(this,Au,wy).call(this),c(this,At).classList.remove("hidden"),Wd(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),T(this,ni,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,At).children;if(!c(this,Ss)){T(this,Ss,Array.from(t));const a=P(this,Su,Ey).bind(this),o=P(this,xu,Sy).bind(this);for(const l of c(this,Ss)){const h=l.getAttribute("data-resizer-name");l.setAttribute("role","spinbutton"),l.addEventListener("keydown",a),l.addEventListener("blur",o),l.addEventListener("focus",P(this,Cu,xy).bind(this,h)),Ue._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(d=>l.setAttribute("aria-label",d))}}const s=c(this,Ss)[0];let n=0;for(const a of t){if(a===s)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(c(this,Ss).length/4);if(r!==n){if(r<n)for(let o=0;o<n-r;o++)c(this,At).append(c(this,At).firstChild);else if(r>n)for(let o=0;o<r-n;o++)c(this,At).firstChild.before(c(this,At).lastChild);let a=0;for(const o of t){const h=c(this,Ss)[a++].getAttribute("data-resizer-name");Ue._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(d=>o.setAttribute("aria-label",d))}}P(this,dc,dm).call(this,0),T(this,xn,!0),c(this,At).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,xn)&&P(this,cc,cm).call(this,c(this,sc),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){P(this,ai,rl).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!c(this,Rt)){this.addEditToolbar().then(()=>{var s,n;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((n=c(this,Rt))==null||n.show())});return}(t=c(this,Rt))==null||t.show()}unselect(){var e,t,s,n;(e=c(this,At))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=c(this,Rt))==null||n.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,nc)}set isEditing(e){T(this,nc,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){T(this,si,!0);const s=e/t,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,ps)||T(this,ps,new Map);const{action:s}=e;let n=c(this,ps).get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),c(this,ps).delete(s),c(this,ps).size===0&&T(this,ps,null)},Ue._telemetryTimeout),c(this,ps).set(s,n);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),T(this,Na,!1)}disable(){this.div&&(this.div.tabIndex=-1),T(this,Na,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ss=new WeakMap,Dt=new WeakMap,Na=new WeakMap,si=new WeakMap,At=new WeakMap,ni=new WeakMap,Ia=new WeakMap,Ma=new WeakMap,Rt=new WeakMap,sc=new WeakMap,ri=new WeakMap,or=new WeakMap,nc=new WeakMap,ii=new WeakMap,xn=new WeakMap,Vs=new WeakMap,Da=new WeakMap,Fa=new WeakMap,ps=new WeakMap,rc=new WeakMap,wu=new WeakMap,ic=new WeakSet,im=function([e,t],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/e,this.y+=n/t,this.fixAndSetPosition()},ac=new WeakSet,am=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},oc=new WeakSet,om=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},Au=new WeakSet,wy=function(){if(c(this,At))return;T(this,At,document.createElement("div")),c(this,At).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const t of e){const s=document.createElement("div");c(this,At).append(s),s.classList.add("resizer",t),s.setAttribute("data-resizer-name",t),s.addEventListener("pointerdown",P(this,ku,Ay).bind(this,t)),s.addEventListener("contextmenu",Kt),s.tabIndex=-1}this.div.prepend(c(this,At))},ku=new WeakSet,Ay=function(e,t){var m;t.preventDefault();const{isMac:s}=Yt.platform;if(t.button!==0||t.ctrlKey&&s)return;(m=c(this,Dt))==null||m.toggle(!1);const n=P(this,cc,cm).bind(this,e),r=this._isDraggable;this._isDraggable=!1;const a={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",n,a),window.addEventListener("contextmenu",Kt);const o=this.x,l=this.y,h=this.width,d=this.height,u=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{var g;this.parent.togglePointerEvents(!0),(g=c(this,Dt))==null||g.toggle(!0),this._isDraggable=r,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",n,a),window.removeEventListener("contextmenu",Kt),this.parent.div.style.cursor=u,this.div.style.cursor=f,P(this,lc,lm).call(this,o,l,h,d)};window.addEventListener("pointerup",p),window.addEventListener("blur",p)},lc=new WeakSet,lm=function(e,t,s,n){const r=this.x,a=this.y,o=this.width,l=this.height;r===e&&a===t&&o===s&&l===n||this.addCommands({cmd:()=>{this.width=o,this.height=l,this.x=r,this.y=a;const[h,d]=this.parentDimensions;this.setDims(h*o,d*l),this.fixAndSetPosition()},undo:()=>{this.width=s,this.height=n,this.x=e,this.y=t;const[h,d]=this.parentDimensions;this.setDims(h*s,d*n),this.fixAndSetPosition()},mustExec:!0})},cc=new WeakSet,cm=function(e,t){const[s,n]=this.parentDimensions,r=this.x,a=this.y,o=this.width,l=this.height,h=Ue.MIN_SIZE/s,d=Ue.MIN_SIZE/n,u=$=>Math.round($*1e4)/1e4,f=P(this,oc,om).call(this,this.rotation),p=($,Q)=>[f[0]*$+f[2]*Q,f[1]*$+f[3]*Q],m=P(this,oc,om).call(this,360-this.rotation),g=($,Q)=>[m[0]*$+m[2]*Q,m[1]*$+m[3]*Q];let v,b,y=!1,E=!1;switch(e){case"topLeft":y=!0,v=($,Q)=>[0,0],b=($,Q)=>[$,Q];break;case"topMiddle":v=($,Q)=>[$/2,0],b=($,Q)=>[$/2,Q];break;case"topRight":y=!0,v=($,Q)=>[$,0],b=($,Q)=>[0,Q];break;case"middleRight":E=!0,v=($,Q)=>[$,Q/2],b=($,Q)=>[0,Q/2];break;case"bottomRight":y=!0,v=($,Q)=>[$,Q],b=($,Q)=>[0,0];break;case"bottomMiddle":v=($,Q)=>[$/2,Q],b=($,Q)=>[$/2,0];break;case"bottomLeft":y=!0,v=($,Q)=>[0,Q],b=($,Q)=>[$,0];break;case"middleLeft":E=!0,v=($,Q)=>[0,Q/2],b=($,Q)=>[$,Q/2];break}const C=v(o,l),R=b(o,l);let M=p(...R);const D=u(r+M[0]),x=u(a+M[1]);let S=1,F=1,[z,L]=this.screenToPageTranslation(t.movementX,t.movementY);if([z,L]=g(z/s,L/n),y){const $=Math.hypot(o,l);S=F=Math.max(Math.min(Math.hypot(R[0]-C[0]-z,R[1]-C[1]-L)/$,1/o,1/l),h/o,d/l)}else E?S=Math.max(h,Math.min(1,Math.abs(R[0]-C[0]-z)))/o:F=Math.max(d,Math.min(1,Math.abs(R[1]-C[1]-L)))/l;const B=u(o*S),w=u(l*F);M=p(...b(B,w));const G=D-M[0],re=x-M[1];this.width=B,this.height=w,this.x=G,this.y=re,this.setDims(s*B,n*w),this.fixAndSetPosition()},hc=new WeakSet,hm=function(e){const{isMac:t}=Yt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Eu=new WeakSet,ky=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let s,n;t&&(this.div.classList.add("moving"),s={passive:!0,capture:!0},T(this,Da,e.clientX),T(this,Fa,e.clientY),n=a=>{const{clientX:o,clientY:l}=a,[h,d]=this.screenToPageTranslation(o-c(this,Da),l-c(this,Fa));T(this,Da,o),T(this,Fa,l),this._uiManager.dragSelectedEditors(h,d)},window.addEventListener("pointermove",n,s));const r=()=>{window.removeEventListener("pointerup",r),window.removeEventListener("blur",r),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",n,s)),T(this,ri,!1),this._uiManager.endDragSession()||P(this,hc,hm).call(this,e)};window.addEventListener("pointerup",r),window.addEventListener("blur",r)},Su=new WeakSet,Ey=function(e){Ue._resizerKeyboardManager.exec(this,e)},xu=new WeakSet,Sy=function(e){var t;c(this,xn)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,At)&&P(this,ai,rl).call(this)},Cu=new WeakSet,xy=function(e){T(this,sc,c(this,xn)?e:"")},dc=new WeakSet,dm=function(e){if(c(this,Ss))for(const t of c(this,Ss))t.tabIndex=e},ai=new WeakSet,rl=function(){if(T(this,xn,!1),P(this,dc,dm).call(this,-1),c(this,ni)){const{savedX:e,savedY:t,savedWidth:s,savedHeight:n}=c(this,ni);P(this,lc,lm).call(this,e,t,s,n),T(this,ni,null)}},A(Ue,ac),xe(Ue,"_borderLineWidth",-1),xe(Ue,"_colorManager",new Kp),xe(Ue,"_zIndex",1),xe(Ue,"_telemetryTimeout",1e3);let Oe=Ue;class NR extends Oe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const wb=3285377520,us=4294901760,Fs=65535;class Cy{constructor(e){this.h1=e?e&4294967295:wb,this.h2=e?e&4294967295:wb}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let g=0,v=e.length;g<v;g++){const b=e.charCodeAt(g);b<=255?t[s++]=b:(t[s++]=b>>>8,t[s++]=b&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,r=s-n*4,a=new Uint32Array(t.buffer,0,n);let o=0,l=0,h=this.h1,d=this.h2;const u=3432918353,f=461845907,p=u&Fs,m=f&Fs;for(let g=0;g<n;g++)g&1?(o=a[g],o=o*u&us|o*p&Fs,o=o<<15|o>>>17,o=o*f&us|o*m&Fs,h^=o,h=h<<13|h>>>19,h=h*5+3864292196):(l=a[g],l=l*u&us|l*p&Fs,l=l<<15|l>>>17,l=l*f&us|l*m&Fs,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,r){case 3:o^=t[n*4+2]<<16;case 2:o^=t[n*4+1]<<8;case 1:o^=t[n*4],o=o*u&us|o*p&Fs,o=o<<15|o>>>17,o=o*f&us|o*m&Fs,n&1?h^=o:d^=o}this.h1=h,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&us|e*36045&Fs,t=t*4283543511&us|((t<<16|e>>>16)*2950163797&us)>>>16,e^=t>>>1,e=e*444984403&us|e*60499&Fs,t=t*3301882366&us|((t<<16|e>>>16)*3120437893&us)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const um=Object.freeze({map:null,hash:"",transfer:void 0});var oi,kt,Tu,Ty;class wg{constructor(){A(this,Tu);A(this,oi,!1);A(this,kt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=c(this,kt).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return c(this,kt).get(e)}remove(e){if(c(this,kt).delete(e),c(this,kt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,kt).values())if(t instanceof Oe)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=c(this,kt).get(e);let n=!1;if(s!==void 0)for(const[r,a]of Object.entries(t))s[r]!==a&&(n=!0,s[r]=a);else n=!0,c(this,kt).set(e,t);n&&P(this,Tu,Ty).call(this),t instanceof Oe&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,kt).has(e)}getAll(){return c(this,kt).size>0?pg(c(this,kt)):null}setAll(e){for(const[t,s]of Object.entries(e))this.setValue(t,s)}get size(){return c(this,kt).size}resetModified(){c(this,oi)&&(T(this,oi,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Py(this)}get serializable(){if(c(this,kt).size===0)return um;const e=new Map,t=new Cy,s=[],n=Object.create(null);let r=!1;for(const[a,o]of c(this,kt)){const l=o instanceof Oe?o.serialize(!1,n):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const a of e.values())a.bitmap&&s.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:um}get editorStats(){let e=null;const t=new Map;for(const s of c(this,kt).values()){if(!(s instanceof Oe))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:r}=n;t.has(r)||t.set(r,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const a=e[r]||(e[r]=new Map);for(const[o,l]of Object.entries(n)){if(o==="type")continue;let h=a.get(o);h||(h=new Map,a.set(o,h));const d=h.get(l)??0;h.set(l,d+1)}}for(const[s,n]of t)e[s]=n.computeTelemetryFinalData(e[s]);return e}}oi=new WeakMap,kt=new WeakMap,Tu=new WeakSet,Ty=function(){c(this,oi)||(T(this,oi,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var uc;class Py extends wg{constructor(t){super();A(this,uc,void 0);const{map:s,hash:n,transfer:r}=t.serializable,a=structuredClone(s,r?{transfer:r}:null);T(this,uc,{map:a,hash:n,transfer:r})}get print(){$e("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,uc)}}uc=new WeakMap;var Oa;class IR{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){A(this,Oa,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Oa).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||c(this,Oa).has(e.loadedName))){if(ut(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:n,style:r}=e,a=new FontFace(s,n,r);this.addNativeFontFace(a);try{await a.load(),c(this,Oa).add(s),t==null||t(e)}catch{Pe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}$e("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw Pe(`Failed to load font '${s.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Me(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Nt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Me(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(ut(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:t,callback:e};return s.push(n),n}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Me(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(C,R){return C.charCodeAt(R)<<24|C.charCodeAt(R+1)<<16|C.charCodeAt(R+2)<<8|C.charCodeAt(R+3)&255}function n(C,R,M,D){const x=C.substring(0,R),S=C.substring(R+M);return x+D+S}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let h=0;function d(C,R){if(++h>30){Pe("Load test font never loaded."),R();return}if(l.font="30px "+C,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){R();return}setTimeout(d.bind(null,C,R))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=n(f,976,u.length,u);const m=16,g=1482184792;let v=s(f,m);for(r=0,a=u.length-3;r<a;r+=4)v=v-g+s(u,r)|0;r<u.length&&(v=v-g+s(u+"XXX",r)|0),f=n(f,m,4,gR(v));const b=`url(data:font/opentype;base64,${btoa(f)});`,y=`@font-face {font-family:"${u}";src:${b}}`;this.insertRule(y);const E=this._document.createElement("div");E.style.visibility="hidden",E.style.width=E.style.height="10px",E.style.position="absolute",E.style.top=E.style.left="0px";for(const C of[e.loadedName,u]){const R=this._document.createElement("span");R.textContent="Hi",R.style.fontFamily=C,E.append(R)}this._document.body.append(E),d(u,()=>{E.remove(),t.complete()})}}Oa=new WeakMap;class MR{constructor(e,{disableFontFace:t=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const n in e)this[n]=e[n];this.disableFontFace=t===!0,this._inspectFont=s}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=Jv(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let s;if(!this.cssFontInfo)s=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),s=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),s}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let s;try{s=e.get(this.loadedName+"_path_"+t)}catch(r){Pe(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(s)||s.length===0)return this.compiledGlyphs[t]=function(r,a){};const n=[];for(let r=0,a=s.length;r<a;)switch(s[r++]){case dn.BEZIER_CURVE_TO:{const[o,l,h,d,u,f]=s.slice(r,r+6);n.push(p=>p.bezierCurveTo(o,l,h,d,u,f)),r+=6}break;case dn.MOVE_TO:{const[o,l]=s.slice(r,r+2);n.push(h=>h.moveTo(o,l)),r+=2}break;case dn.LINE_TO:{const[o,l]=s.slice(r,r+2);n.push(h=>h.lineTo(o,l)),r+=2}break;case dn.QUADRATIC_CURVE_TO:{const[o,l,h,d]=s.slice(r,r+4);n.push(u=>u.quadraticCurveTo(o,l,h,d)),r+=4}break;case dn.RESTORE:n.push(o=>o.restore());break;case dn.SAVE:n.push(o=>o.save());break;case dn.SCALE:ut(n.length===2,"Scale command is only valid at the third position.");break;case dn.TRANSFORM:{const[o,l,h,d,u,f]=s.slice(r,r+6);n.push(p=>p.transform(o,l,h,d,u,f)),r+=6}break;case dn.TRANSLATE:{const[o,l]=s.slice(r,r+2);n.push(h=>h.translate(o,l)),r+=2}break}return this.compiledGlyphs[t]=function(a,o){n[0](a),n[1](a),a.scale(o,-o);for(let l=2,h=n.length;l<h;l++)n[l](a)}}}if(Nt){var fm=Promise.withResolvers(),ml=null;(async()=>{const e=await rd(()=>import("./empty-CRMO4_-l.js"),[],import.meta.url),t=await rd(()=>import("./index-CiodtZIu.js").then(o=>o.i),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),s=await rd(()=>import("./index-DHa0OMiM.js").then(o=>o.i),__vite__mapDeps([6,1,0,2,3,4,5]),import.meta.url),n=await rd(()=>import("./url-amwFPBqB.js").then(o=>o.u),__vite__mapDeps([5,1]),import.meta.url);let r,a;return new Map(Object.entries({fs:e,http:t,https:s,url:n,canvas:r,path2d:a}))})().then(e=>{ml=e,fm.resolve()},e=>{Pe(`loadPackages: ${e}`),ml=new Map,fm.resolve()})}class an{static get promise(){return fm.promise}static get(e){return ml==null?void 0:ml.get(e)}}const Ry=function(i){return an.get("fs").promises.readFile(i).then(t=>new Uint8Array(t))};class DR extends Uf{}class FR extends Wf{_createCanvas(e,t){return an.get("canvas").createCanvas(e,t)}}class OR extends Vf{_fetchData(e,t){return Ry(e).then(s=>({cMapData:s,compressionType:t}))}}class BR extends qf{_fetchData(e){return Ry(e)}}const Bt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function pm(i,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],t,s),i.clip(n)}class Xh{constructor(){this.constructor===Xh&&$e("Cannot initialize BaseShadingPattern.")}getPattern(){$e("Abstract method `getPattern` called.")}}class jR extends Xh{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,n){let r;if(n===Bt.STROKE||n===Bt.FILL){const a=t.current.getClippedPathBoundingBox(n,Ke(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",o,l,!0),d=h.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),s=ve.transform(s,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),pm(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=e.createPattern(h.canvas,"no-repeat");const u=new DOMMatrix(s);r.setTransform(u)}else pm(e,this._bbox),r=this._createGradient(e);return r}}function Ep(i,e,t,s,n,r,a,o){const l=e.coords,h=e.colors,d=i.data,u=i.width*4;let f;l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=r,r=a,a=f),l[s+1]>l[n+1]&&(f=s,s=n,n=f,f=a,a=o,o=f),l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=r,r=a,a=f);const p=(l[t]+e.offsetX)*e.scaleX,m=(l[t+1]+e.offsetY)*e.scaleY,g=(l[s]+e.offsetX)*e.scaleX,v=(l[s+1]+e.offsetY)*e.scaleY,b=(l[n]+e.offsetX)*e.scaleX,y=(l[n+1]+e.offsetY)*e.scaleY;if(m>=y)return;const E=h[r],C=h[r+1],R=h[r+2],M=h[a],D=h[a+1],x=h[a+2],S=h[o],F=h[o+1],z=h[o+2],L=Math.round(m),B=Math.round(y);let w,G,re,$,Q,Y,le,H;for(let O=L;O<=B;O++){if(O<v){const ue=O<m?0:(m-O)/(m-v);w=p-(p-g)*ue,G=E-(E-M)*ue,re=C-(C-D)*ue,$=R-(R-x)*ue}else{let ue;O>y?ue=1:v===y?ue=0:ue=(v-O)/(v-y),w=g-(g-b)*ue,G=M-(M-S)*ue,re=D-(D-F)*ue,$=x-(x-z)*ue}let ee;O<m?ee=0:O>y?ee=1:ee=(m-O)/(m-y),Q=p-(p-b)*ee,Y=E-(E-S)*ee,le=C-(C-F)*ee,H=R-(R-z)*ee;const ae=Math.round(Math.min(w,Q)),Z=Math.round(Math.max(w,Q));let me=u*O+ae*4;for(let ue=ae;ue<=Z;ue++)ee=(w-ue)/(w-Q),ee<0?ee=0:ee>1&&(ee=1),d[me++]=G-(G-Y)*ee|0,d[me++]=re-(re-le)*ee|0,d[me++]=$-($-H)*ee|0,d[me++]=255}}function $R(i,e,t){const s=e.coords,n=e.colors;let r,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(s.length/o)-1,h=o-1;for(r=0;r<l;r++){let d=r*o;for(let u=0;u<h;u++,d++)Ep(i,t,s[d],s[d+1],s[d+o],n[d],n[d+1],n[d+o]),Ep(i,t,s[d+o+1],s[d+1],s[d+o],n[d+o+1],n[d+1],n[d+o])}break;case"triangles":for(r=0,a=s.length;r<a;r+=3)Ep(i,t,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class zR extends Xh{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,s){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-l,u=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=h/u,m=d/f,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/m},v=u+2*2,b=f+2*2,y=s.getCanvas("mesh",v,b,!1),E=y.context,C=E.createImageData(u,f);if(t){const M=C.data;for(let D=0,x=M.length;D<x;D+=4)M[D]=t[0],M[D+1]=t[1],M[D+2]=t[2],M[D+3]=255}for(const M of this._figures)$R(C,M,g);return E.putImageData(C,2,2),{canvas:y.canvas,offsetX:o-2*p,offsetY:l-2*m,scaleX:p,scaleY:m}}getPattern(e,t,s,n){pm(e,this._bbox);let r;if(n===Bt.SHADING)r=ve.singularValueDecompose2dScale(Ke(e));else if(r=ve.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=ve.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,n===Bt.SHADING?null:this._background,t.cachedCanvases);return n!==Bt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class HR extends Xh{getPattern(){return"hotpink"}}function UR(i){switch(i[0]){case"RadialAxial":return new jR(i);case"Mesh":return new zR(i);case"Dummy":return new HR}throw new Error(`Unknown IR type: ${i[0]}`)}const Ab={COLORED:1,UNCOLORED:2},Pu=class Pu{constructor(e,t,s,n,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=s,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e){const t=this.operatorList,s=this.bbox,n=this.xstep,r=this.ystep,a=this.paintType,o=this.tilingType,l=this.color,h=this.canvasGraphicsFactory;$f("TilingType: "+o);const d=s[0],u=s[1],f=s[2],p=s[3],m=ve.singularValueDecompose2dScale(this.matrix),g=ve.singularValueDecompose2dScale(this.baseTransform),v=[m[0]*g[0],m[1]*g[1]],b=this.getSizeAndScale(n,this.ctx.canvas.width,v[0]),y=this.getSizeAndScale(r,this.ctx.canvas.height,v[1]),E=e.cachedCanvases.getCanvas("pattern",b.size,y.size,!0),C=E.context,R=h.createCanvasGraphics(C);R.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(R,a,l);let M=d,D=u,x=f,S=p;return d<0&&(M=0,x+=Math.abs(d)),u<0&&(D=0,S+=Math.abs(u)),C.translate(-(b.scale*M),-(y.scale*D)),R.transform(b.scale,0,0,y.scale,0,0),C.save(),this.clipBbox(R,M,D,x,S),R.baseTransform=Ke(R.ctx),R.executeOperatorList(t),R.endDrawing(),{canvas:E.canvas,scaleX:b.scale,scaleY:y.scale,offsetX:M,offsetY:D}}getSizeAndScale(e,t,s){e=Math.abs(e);const n=Math.max(Pu.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*s);return r>=n?r=n:s=r/e,{scale:s,size:r}}clipBbox(e,t,s,n,r){const a=n-t,o=r-s;e.ctx.rect(t,s,a,o),e.current.updateRectMinMax(Ke(e.ctx),[t,s,n,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const n=e.ctx,r=e.current;switch(t){case Ab.COLORED:const a=this.ctx;n.fillStyle=a.fillStyle,n.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case Ab.UNCOLORED:const o=ve.makeHexColor(s[0],s[1],s[2]);n.fillStyle=o,n.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new mR(`Unsupported paint type: ${t}`)}}getPattern(e,t,s,n){let r=s;n!==Bt.SHADING&&(r=ve.transform(r,t.baseTransform),this.matrix&&(r=ve.transform(r,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};xe(Pu,"MAX_PATTERN_SIZE",3e3);let mm=Pu;function WR({src:i,srcPos:e=0,dest:t,width:s,height:n,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=Yt.isLittleEndian?4278190080:255,[l,h]=a?[r,o]:[o,r],d=s>>3,u=s&7,f=i.length;t=new Uint32Array(t.buffer);let p=0;for(let m=0;m<n;m++){for(const v=e+d;e<v;e++){const b=e<f?i[e]:255;t[p++]=b&128?h:l,t[p++]=b&64?h:l,t[p++]=b&32?h:l,t[p++]=b&16?h:l,t[p++]=b&8?h:l,t[p++]=b&4?h:l,t[p++]=b&2?h:l,t[p++]=b&1?h:l}if(u===0)continue;const g=e<f?i[e++]:255;for(let v=0;v<u;v++)t[p++]=g&1<<7-v?h:l}return{srcPos:e,destPos:p}}const kb=16,Eb=100,VR=15,Sb=10,xb=1e3,qt=16;function qR(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(s,n){e.translate(s,n),this.__originalTranslate(s,n)},i.scale=function(s,n){e.scale(s,n),this.__originalScale(s,n)},i.transform=function(s,n,r,a,o,l){e.transform(s,n,r,a,o,l),this.__originalTransform(s,n,r,a,o,l)},i.setTransform=function(s,n,r,a,o,l){e.setTransform(s,n,r,a,o,l),this.__originalSetTransform(s,n,r,a,o,l)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(s){e.rotate(s),this.__originalRotate(s)},i.clip=function(s){e.clip(s),this.__originalClip(s)},i.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},i.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},i.bezierCurveTo=function(t,s,n,r,a,o){e.bezierCurveTo(t,s,n,r,a,o),this.__originalBezierCurveTo(t,s,n,r,a,o)},i.rect=function(t,s,n,r){e.rect(t,s,n,r),this.__originalRect(t,s,n,r)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class GR{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let n;return this.cache[e]!==void 0?(n=this.cache[e],this.canvasFactory.reset(n,t,s)):(n=this.canvasFactory.create(t,s),this.cache[e]=n),n}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function ld(i,e,t,s,n,r,a,o,l,h){const[d,u,f,p,m,g]=Ke(i);if(u===0&&f===0){const y=a*d+m,E=Math.round(y),C=o*p+g,R=Math.round(C),M=(a+l)*d+m,D=Math.abs(Math.round(M)-E)||1,x=(o+h)*p+g,S=Math.abs(Math.round(x)-R)||1;return i.setTransform(Math.sign(d),0,0,Math.sign(p),E,R),i.drawImage(e,t,s,n,r,0,0,D,S),i.setTransform(d,u,f,p,m,g),[D,S]}if(d===0&&p===0){const y=o*f+m,E=Math.round(y),C=a*u+g,R=Math.round(C),M=(o+h)*f+m,D=Math.abs(Math.round(M)-E)||1,x=(a+l)*u+g,S=Math.abs(Math.round(x)-R)||1;return i.setTransform(0,Math.sign(u),Math.sign(f),0,E,R),i.drawImage(e,t,s,n,r,0,0,S,D),i.setTransform(d,u,f,p,m,g),[S,D]}i.drawImage(e,t,s,n,r,a,o,l,h);const v=Math.hypot(d,u),b=Math.hypot(f,p);return[v*l,b*h]}function XR(i){const{width:e,height:t}=i;if(e>xb||t>xb)return null;const s=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let a=new Uint8Array(r*(t+1)),o,l,h;const d=e+7&-8;let u=new Uint8Array(d*t),f=0;for(const b of i.data){let y=128;for(;y>0;)u[f++]=b&y?0:255,y>>=1}let p=0;for(f=0,u[f]!==0&&(a[0]=1,++p),l=1;l<e;l++)u[f]!==u[f+1]&&(a[l]=u[f]?2:1,++p),f++;for(u[f]!==0&&(a[l]=2,++p),o=1;o<t;o++){f=o*d,h=o*r,u[f-d]!==u[f]&&(a[h]=u[f]?1:8,++p);let b=(u[f]?4:0)+(u[f-d]?8:0);for(l=1;l<e;l++)b=(b>>2)+(u[f+1]?4:0)+(u[f-d+1]?8:0),n[b]&&(a[h+l]=n[b],++p),f++;if(u[f-d]!==u[f]&&(a[h+l]=u[f]?2:4,++p),p>s)return null}for(f=d*(t-1),h=o*r,u[f]!==0&&(a[h]=8,++p),l=1;l<e;l++)u[f]!==u[f+1]&&(a[h+l]=u[f]?4:8,++p),f++;if(u[f]!==0&&(a[h+l]=4,++p),p>s)return null;const m=new Int32Array([0,r,-1,0,-r,0,0,0,1]),g=new Path2D;for(o=0;p&&o<=t;o++){let b=o*r;const y=b+e;for(;b<y&&!a[b];)b++;if(b===y)continue;g.moveTo(b%r,o);const E=b;let C=a[b];do{const R=m[C];do b+=R;while(!a[b]);const M=a[b];M!==5&&M!==10?(C=M,a[b]=0):(C=M&51*C>>4,a[b]&=C>>2|C<<2),g.lineTo(b%r,b/r|0),a[b]||--p}while(E!==b);--o}return u=null,a=null,function(b){b.save(),b.scale(1/e,-1/t),b.translate(0,-t),b.fill(g),b.beginPath(),b.restore()}}class Cb{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Kv,this.textMatrixScale=1,this.fontMatrix=jp,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Tt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,s){[t,s]=ve.applyTransform([t,s],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,s),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,s)}updateRectMinMax(e,t){const s=ve.applyTransform(t,e),n=ve.applyTransform(t.slice(2),e),r=ve.applyTransform([t[0],t[3]],e),a=ve.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,s[0],n[0],r[0],a[0]),this.minY=Math.min(this.minY,s[1],n[1],r[1],a[1]),this.maxX=Math.max(this.maxX,s[0],n[0],r[0],a[0]),this.maxY=Math.max(this.maxY,s[1],n[1],r[1],a[1])}updateScalingPathMinMax(e,t){ve.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,s,n,r,a,o,l,h,d){const u=ve.bezierBoundingBox(t,s,n,r,a,o,l,h,d);d||this.updateRectMinMax(e,u)}getPathBoundingBox(e=Bt.FILL,t=null){const s=[this.minX,this.minY,this.maxX,this.maxY];if(e===Bt.STROKE){t||$e("Stroke bounding box must include transform.");const n=ve.singularValueDecompose2dScale(t),r=n[0]*this.lineWidth/2,a=n[1]*this.lineWidth/2;s[0]-=r,s[1]-=a,s[2]+=r,s[3]+=a}return s}updateClipFromPath(){const e=ve.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Bt.FILL,t=null){return ve.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Tb(i,e){if(typeof ImageData<"u"&&e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,s=e.width,n=t%qt,r=(t-n)/qt,a=n===0?r:r+1,o=i.createImageData(s,qt);let l=0,h;const d=e.data,u=o.data;let f,p,m,g;if(e.kind===gd.GRAYSCALE_1BPP){const v=d.byteLength,b=new Uint32Array(u.buffer,0,u.byteLength>>2),y=b.length,E=s+7>>3,C=4294967295,R=Yt.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(m=f<r?qt:n,h=0,p=0;p<m;p++){const M=v-l;let D=0;const x=M>E?s:M*8-7,S=x&-8;let F=0,z=0;for(;D<S;D+=8)z=d[l++],b[h++]=z&128?C:R,b[h++]=z&64?C:R,b[h++]=z&32?C:R,b[h++]=z&16?C:R,b[h++]=z&8?C:R,b[h++]=z&4?C:R,b[h++]=z&2?C:R,b[h++]=z&1?C:R;for(;D<x;D++)F===0&&(z=d[l++],F=128),b[h++]=z&F?C:R,F>>=1}for(;h<y;)b[h++]=0;i.putImageData(o,0,f*qt)}}else if(e.kind===gd.RGBA_32BPP){for(p=0,g=s*qt*4,f=0;f<r;f++)u.set(d.subarray(l,l+g)),l+=g,i.putImageData(o,0,p),p+=qt;f<a&&(g=s*n*4,u.set(d.subarray(l,l+g)),i.putImageData(o,0,p))}else if(e.kind===gd.RGB_24BPP)for(m=qt,g=s*m,f=0;f<a;f++){for(f>=r&&(m=n,g=s*m),h=0,p=g;p--;)u[h++]=d[l++],u[h++]=d[l++],u[h++]=d[l++],u[h++]=255;i.putImageData(o,0,f*qt)}else throw new Error(`bad image kind: ${e.kind}`)}function Pb(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,n=t%qt,r=(t-n)/qt,a=n===0?r:r+1,o=i.createImageData(s,qt);let l=0;const h=e.data,d=o.data;for(let u=0;u<a;u++){const f=u<r?qt:n;({srcPos:l}=WR({src:h,srcPos:l,dest:d,width:s,height:f,nonBlackColor:0})),i.putImageData(o,0,u*qt)}}function Ko(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)i[s]!==void 0&&(e[s]=i[s]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function cd(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Nt){const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function Rb(i,e){if(e)return!0;const t=ve.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*xr.PDF_TO_CSS_UNITS);return t[0]<=s&&t[1]<=s}const YR=["butt","round","square"],KR=["miter","round","bevel"],ZR={},Lb={};var fc,gm,pc,bm;const Fg=class Fg{constructor(e,t,s,n,r,{optionalContentConfig:a,markedContentStack:o=null},l,h){A(this,fc);A(this,pc);this.ctx=e,this.current=new Cb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new GR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:n=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,s){const l=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Ke(this.compositeCtx))}this.ctx.save(),cd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ke(this.ctx)}executeOperatorList(e,t,s,n){const r=e.argsArray,a=e.fnArray;let o=t||0;const l=r.length;if(l===o)return o;const h=l-o>Sb&&typeof s=="function",d=h?Date.now()+VR:0;let u=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(n!==void 0&&o===n.nextBreakPoint)return n.breakIt(o,s),o;if(m=a[o],m!==ws.dependency)this[m].apply(this,r[o]);else for(const g of r[o]){const v=g.startsWith("g_")?f:p;if(!v.has(g))return v.get(g,s),o}if(o++,o===l)return o;if(h&&++u>Sb){if(Date.now()>d)return s(),o;u=0}}}endDrawing(){P(this,fc,gm).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),P(this,pc,bm).call(this)}_scaleImage(e,t){const s=e.width,n=e.height;let r=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=s,l=n,h="prescale1",d,u;for(;r>2&&o>1||a>2&&l>1;){let f=o,p=l;r>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/f),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),d=this.cachedCanvases.getCanvas(h,f,p),u=d.context,u.clearRect(0,0,f,p),u.drawImage(e,0,0,o,l,0,0,f,p),e=d.canvas,o=f,l=p,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:s,height:n}=e,r=this.current.fillColor,a=this.current.patternFill,o=Ke(t);let l,h,d,u;if((e.bitmap||e.data)&&e.count>1){const x=e.bitmap||e.data.buffer;h=JSON.stringify(a?o:[o.slice(0,4),r]),l=this._cachedBitmapsMap.get(x),l||(l=new Map,this._cachedBitmapsMap.set(x,l));const S=l.get(h);if(S&&!a){const F=Math.round(Math.min(o[0],o[2])+o[4]),z=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:S,offsetX:F,offsetY:z}}d=S}d||(u=this.cachedCanvases.getCanvas("maskCanvas",s,n),Pb(u.context,e));let f=ve.transform(o,[1/s,0,0,-1/n,0,0]);f=ve.transform(f,[1,0,0,1,0,-n]);const[p,m,g,v]=ve.getAxialAlignedBoundingBox([0,0,s,n],f),b=Math.round(g-p)||1,y=Math.round(v-m)||1,E=this.cachedCanvases.getCanvas("fillCanvas",b,y),C=E.context,R=p,M=m;C.translate(-R,-M),C.transform(...f),d||(d=this._scaleImage(u.canvas,un(C)),d=d.img,l&&a&&l.set(h,d)),C.imageSmoothingEnabled=Rb(Ke(C),e.interpolate),ld(C,d,0,0,d.width,d.height,0,0,s,n),C.globalCompositeOperation="source-in";const D=ve.transform(un(C),[1,0,0,1,-R,-M]);return C.fillStyle=a?r.getPattern(t,this,D,Bt.FILL):r,C.fillRect(0,0,s,n),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(h,E.canvas)),{canvas:E.canvas,offsetX:Math.round(R),offsetY:Math.round(M)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=YR[e]}setLineJoin(e){this.ctx.lineJoin=KR[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,s]of e)switch(t){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.current.fillAlpha=s,this.ctx.globalAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,e,t);this.suspendedCtx=this.ctx,this.ctx=n.context;const r=this.ctx;r.setTransform(...Ke(this.suspendedCtx)),Ko(this.suspendedCtx,r),qR(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ko(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,n){const r=n[0],a=n[1],o=n[2]-r,l=n[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,s,o,l,t.subtype,t.backdrop,t.transferMap,r,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,n,r,a,o,l,h,d,u){let f=e.canvas,p=l-d,m=h-u;if(a){if(p<0||m<0||p+s>f.width||m+n>f.height){const v=this.cachedCanvases.getCanvas("maskExtension",s,n),b=v.context;b.drawImage(f,-p,-m),a.some(y=>y!==0)&&(b.globalCompositeOperation="destination-atop",b.fillStyle=ve.makeHexColor(...a),b.fillRect(0,0,s,n),b.globalCompositeOperation="source-over"),f=v.canvas,p=m=0}else if(a.some(v=>v!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const v=new Path2D;v.rect(p,m,s,n),e.clip(v),e.globalCompositeOperation="destination-atop",e.fillStyle=ve.makeHexColor(...a),e.fillRect(p,m,s,n),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(l,h,s,n),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(f,p,m,s,n,l,h,s,n),t.restore()}save(){this.inSMaskMode?(Ko(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Ko(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,s,n,r,a){this.ctx.transform(e,t,s,n,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s){const n=this.ctx,r=this.current;let a=r.x,o=r.y,l,h;const d=Ke(n),u=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,f=u?s.slice(0):null;for(let p=0,m=0,g=e.length;p<g;p++)switch(e[p]|0){case ws.rectangle:a=t[m++],o=t[m++];const v=t[m++],b=t[m++],y=a+v,E=o+b;n.moveTo(a,o),v===0||b===0?n.lineTo(y,E):(n.lineTo(y,o),n.lineTo(y,E),n.lineTo(a,E)),u||r.updateRectMinMax(d,[a,o,y,E]),n.closePath();break;case ws.moveTo:a=t[m++],o=t[m++],n.moveTo(a,o),u||r.updatePathMinMax(d,a,o);break;case ws.lineTo:a=t[m++],o=t[m++],n.lineTo(a,o),u||r.updatePathMinMax(d,a,o);break;case ws.curveTo:l=a,h=o,a=t[m+4],o=t[m+5],n.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],a,o),r.updateCurvePathMinMax(d,l,h,t[m],t[m+1],t[m+2],t[m+3],a,o,f),m+=6;break;case ws.curveTo2:l=a,h=o,n.bezierCurveTo(a,o,t[m],t[m+1],t[m+2],t[m+3]),r.updateCurvePathMinMax(d,l,h,a,o,t[m],t[m+1],t[m+2],t[m+3],f),a=t[m+2],o=t[m+3],m+=4;break;case ws.curveTo3:l=a,h=o,a=t[m+2],o=t[m+3],n.bezierCurveTo(t[m],t[m+1],a,o,a,o),r.updateCurvePathMinMax(d,l,h,t[m],t[m+1],a,o,a,o,f),m+=4;break;case ws.closePath:n.closePath();break}u&&r.updateScalingPathMinMax(d,f),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,s=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof s=="object"&&(s!=null&&s.getPattern)?(t.save(),t.strokeStyle=s.getPattern(t,this,un(t),Bt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,s=this.current.fillColor,n=this.current.patternFill;let r=!1;n&&(t.save(),t.fillStyle=s.getPattern(t,this,un(t),Bt.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=ZR}eoClip(){this.pendingClip=Lb}beginText(){this.current.textMatrix=Kv,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const s of e)t.setTransform(...s.transform),t.translate(s.x,s.y),s.addToPath(t,s.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const s=this.commonObjs.get(e),n=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(n.fontMatrix=s.fontMatrix||jp,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&Pe("Invalid font matrix for font "+e),t<0?(t=-t,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=t,s.isType3Font)return;const r=s.loadedName||"sans-serif",a=((d=s.systemFontInfo)==null?void 0:d.css)||`"${r}", ${s.fallbackName}`;let o="normal";s.black?o="900":s.bold&&(o="bold");const l=s.italic?"italic":"normal";let h=t;t<kb?h=kb:t>Eb&&(h=Eb),this.current.fontSizeScale=t/h,this.ctx.font=`${l} ${o} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,s,n,r,a){this.current.textMatrix=[e,t,s,n,r,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,s,n){const r=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,d=l&Tt.FILL_STROKE_MASK,u=!!(l&Tt.ADD_TO_PATH_FLAG),f=a.patternFill&&!o.missingFile;let p;(o.disableFontFace||u||f)&&(p=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||f?(r.save(),r.translate(t,s),r.beginPath(),p(r,h),n&&r.setTransform(...n),(d===Tt.FILL||d===Tt.FILL_STROKE)&&r.fill(),(d===Tt.STROKE||d===Tt.FILL_STROKE)&&r.stroke(),r.restore()):((d===Tt.FILL||d===Tt.FILL_STROKE)&&r.fillText(e,t,s),(d===Tt.STROKE||d===Tt.FILL_STROKE)&&r.strokeText(e,t,s)),u&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ke(r),x:t,y:s,fontSize:h,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<t.length;n+=4)if(t[n]>0&&t[n]<255){s=!0;break}return Me(this,"isFontSubpixelAAEnabled",s)}showText(e){const t=this.current,s=t.font;if(s.isType3Font)return this.showType3Text(e);const n=t.fontSize;if(n===0)return;const r=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,h=t.fontDirection,d=t.textHScale*h,u=e.length,f=s.vertical,p=f?1:-1,m=s.defaultVMetrics,g=n*t.fontMatrix[0],v=t.textRenderingMode===Tt.FILL&&!s.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),h>0?r.scale(d,-1):r.scale(d,1);let b;if(t.patternFill){r.save();const M=t.fillColor.getPattern(r,this,un(r),Bt.FILL);b=Ke(r),r.restore(),r.fillStyle=M}let y=t.lineWidth;const E=t.textMatrixScale;if(E===0||y===0){const M=t.textRenderingMode&Tt.FILL_STROKE_MASK;(M===Tt.STROKE||M===Tt.FILL_STROKE)&&(y=this.getSinglePixelWidth())}else y/=E;if(a!==1&&(r.scale(a,a),y/=a),r.lineWidth=y,s.isInvalidPDFjsFont){const M=[];let D=0;for(const x of e)M.push(x.unicode),D+=x.width;r.fillText(M.join(""),0,0),t.x+=D*g*d,r.restore(),this.compose();return}let C=0,R;for(R=0;R<u;++R){const M=e[R];if(typeof M=="number"){C+=p*M*n/1e3;continue}let D=!1;const x=(M.isSpace?l:0)+o,S=M.fontChar,F=M.accent;let z,L,B=M.width;if(f){const G=M.vmetric||m,re=-(M.vmetric?G[1]:B*.5)*g,$=G[2]*g;B=G?-G[0]:B,z=re/a,L=(C+$)/a}else z=C/a,L=0;if(s.remeasure&&B>0){const G=r.measureText(S).width*1e3/n*a;if(B<G&&this.isFontSubpixelAAEnabled){const re=B/G;D=!0,r.save(),r.scale(re,1),z/=re}else B!==G&&(z+=(B-G)/2e3*n/a)}if(this.contentVisible&&(M.isInFont||s.missingFile)){if(v&&!F)r.fillText(S,z,L);else if(this.paintChar(S,z,L,b),F){const G=z+n*F.offset.x/a,re=L-n*F.offset.y/a;this.paintChar(F.fontChar,G,re,b)}}const w=f?B*g-x*h:B*g+x*h;C+=w,D&&r.restore()}f?t.y-=C:t.x+=C*d,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,s=this.current,n=s.font,r=s.fontSize,a=s.fontDirection,o=n.vertical?1:-1,l=s.charSpacing,h=s.wordSpacing,d=s.textHScale*a,u=s.fontMatrix||jp,f=e.length,p=s.textRenderingMode===Tt.INVISIBLE;let m,g,v,b;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...s.textMatrix),t.translate(s.x,s.y),t.scale(d,a),m=0;m<f;++m){if(g=e[m],typeof g=="number"){b=o*g*r/1e3,this.ctx.translate(b,0),s.x+=b*d;continue}const y=(g.isSpace?h:0)+l,E=n.charProcOperatorList[g.operatorListId];if(!E){Pe(`Type3 character "${g.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=g,this.save(),t.scale(r,r),t.transform(...u),this.executeOperatorList(E),this.restore()),v=ve.applyTransform([g.width,0],u)[0]*r+y,t.translate(v,0),s.x+=v*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,s,n,r,a){this.ctx.rect(s,n,r-s,a-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const s=e[1],n=this.baseTransform||Ke(this.ctx),r={createCanvasGraphics:a=>new Fg(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new mm(e,s,this.ctx,r,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,s){const n=ve.makeHexColor(e,t,s);this.ctx.strokeStyle=n,this.current.strokeColor=n}setFillRGBColor(e,t,s){const n=ve.makeHexColor(e,t,s);this.ctx.fillStyle=n,this.current.fillColor=n,this.current.patternFill=!1}_getPattern(e,t=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=UR(this.getObject(e)),this.cachedPatterns.set(e,s)),t&&(s.matrix=t),s}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const s=this._getPattern(e);t.fillStyle=s.getPattern(t,this,un(t),Bt.SHADING);const n=un(t);if(n){const{width:r,height:a}=t.canvas,[o,l,h,d]=ve.getAxialAlignedBoundingBox([0,0,r,a],n);this.ctx.fillRect(o,l,h-o,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){$e("Should not call beginInlineImage")}beginImageData(){$e("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ke(this.ctx),t)){const s=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],s,n),this.current.updateRectMinMax(Ke(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||$f("TODO: Support non-isolated groups."),e.knockout&&Pe("Knockout groups not supported.");const s=Ke(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let n=ve.getAxialAlignedBoundingBox(e.bbox,Ke(t));const r=[0,0,t.canvas.width,t.canvas.height];n=ve.intersect(n,r)||[0,0,0,0];const a=Math.floor(n[0]),o=Math.floor(n[1]),l=Math.max(Math.ceil(n[2])-a,1),h=Math.max(Math.ceil(n[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,h]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(d,l,h),f=u.context;f.translate(-a,-o),f.transform(...s),e.smask?this.smaskStack.push({canvas:u.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),Ko(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=Ke(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=ve.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],n);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,s,n,r){if(P(this,fc,gm).call(this),cd(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=t[0],s[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[l,h]=ve.singularValueDecompose2dScale(Ke(this.ctx)),{viewportScale:d}=this,u=Math.ceil(a*this.outputScaleX*d),f=Math.ceil(o*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(u,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(l,0,0,-h,0,o*h),cd(this.ctx)}else cd(this.ctx),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.endPath()}this.current=new Cb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),P(this,pc,bm).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const s=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=XR(e)),n.compiled)){n.compiled(s);return}const r=this._createMaskCanvas(e),a=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,r.offsetX,r.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s=0,n=0,r,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=Ke(o);o.transform(t,s,n,r,0,0);const h=this._createMaskCanvas(e);o.setTransform(1,0,0,1,h.offsetX-l[4],h.offsetY-l[5]);for(let d=0,u=a.length;d<u;d+=2){const f=ve.transform(l,[t,s,n,r,a[d],a[d+1]]),[p,m]=ve.applyTransform([0,0],f);o.drawImage(h.canvas,p,m)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const r of e){const{data:a,width:o,height:l,transform:h}=r,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),u=d.context;u.save();const f=this.getObject(a,r);Pb(u,f),u.globalCompositeOperation="source-in",u.fillStyle=n?s.getPattern(u,this,un(t),Bt.FILL):s,u.fillRect(0,0,o,l),u.restore(),t.save(),t.transform(...h),t.scale(1,-1),ld(t,d.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){Pe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,s,n){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){Pe("Dependent image isn't ready yet");return}const a=r.width,o=r.height,l=[];for(let h=0,d=n.length;h<d;h+=2)l.push({transform:[t,0,0,s,n[h],n[h+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:n}=e,r=this.cachedCanvases.getCanvas("inlineImage",s,n),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,s=e.height,n=this.ctx;if(this.save(),!Nt){const{filter:o}=n;o!=="none"&&o!==""&&(n.filter="none")}n.scale(1/t,-1/s);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,s).context;Tb(l,e),r=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(r,un(n));n.imageSmoothingEnabled=Rb(Ke(n),e.interpolate),ld(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,t,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx;let n;if(e.bitmap)n=e.bitmap;else{const r=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",r,a).context;Tb(l,e),n=this.applyTransferMapsToCanvas(l)}for(const r of t)s.save(),s.transform(...r.transform),s.scale(1,-1),ld(s,n,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(t||(this.pendingClip===Lb?s.clip("evenodd"):s.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),s.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ke(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:n,d:r}=this.ctx.getTransform();let a,o;if(s===0&&n===0){const l=Math.abs(t),h=Math.abs(r);if(l===h)if(e===0)a=o=1/l;else{const d=l*e;a=o=d<1?1/d:1}else if(e===0)a=1/l,o=1/h;else{const d=l*e,u=h*e;a=d<1?1/d:1,o=u<1?1/u:1}}else{const l=Math.abs(t*r-s*n),h=Math.hypot(t,s),d=Math.hypot(n,r);if(e===0)a=d/l,o=h/l;else{const u=e*l;a=d>u?d/u:1,o=h>u?h/u:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:s}=this.current,[n,r]=this.getScaleForStroking();if(t.lineWidth=s||1,n===1&&r===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(n,r),a.length>0){const o=Math.max(n,r);t.setLineDash(a.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};fc=new WeakSet,gm=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},pc=new WeakSet,bm=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let ba=Fg;for(const i in ws)ba.prototype[i]!==void 0&&(ba.prototype[ws[i]]=ba.prototype[i]);var mc,gc;class Vn{static get workerPort(){return c(this,mc)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");T(this,mc,e)}static get workerSrc(){return c(this,gc)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");T(this,gc,e)}}mc=new WeakMap,gc=new WeakMap,A(Vn,mc,null),A(Vn,gc,"");const hd={UNKNOWN:0,DATA:1,ERROR:2},rt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Jt(i){switch(i instanceof Error||typeof i=="object"&&i!==null||$e('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new na(i.message);case"MissingPDFException":return new sa(i.message);case"PasswordException":return new zp(i.message,i.code);case"UnexpectedResponseException":return new zf(i.message,i.status);case"UnknownErrorException":return new Hp(i.message,i.details);default:return new Hp(i.message,i.toString())}}var Ru,Ly,Lu,Ny,Ba,Ad;class il{constructor(e,t,s){A(this,Ru);A(this,Lu);A(this,Ba);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=n=>{const r=n.data;if(r.targetName!==this.sourceName)return;if(r.stream){P(this,Lu,Ny).call(this,r);return}if(r.callback){const o=r.callbackId,l=this.callbackCapabilities[o];if(!l)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],r.callback===hd.DATA)l.resolve(r.data);else if(r.callback===hd.ERROR)l.reject(Jt(r.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[r.action];if(!a)throw new Error(`Unknown action from worker: ${r.action}`);if(r.callbackId){const o=this.sourceName,l=r.sourceName;new Promise(function(h){h(a(r.data))}).then(function(h){s.postMessage({sourceName:o,targetName:l,callback:hd.DATA,callbackId:r.callbackId,data:h})},function(h){s.postMessage({sourceName:o,targetName:l,callback:hd.ERROR,callbackId:r.callbackId,reason:Jt(h)})});return}if(r.streamId){P(this,Ru,Ly).call(this,r);return}a(r.data)},s.addEventListener("message",this._onComObjOnMessage)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:n,data:t},s)}catch(a){r.reject(a)}return r.promise}sendWithStream(e,t,s,n){const r=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:h=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:r,data:t,desiredSize:h.desiredSize},n),d.promise},pull:h=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,l.postMessage({sourceName:a,targetName:o,stream:rt.PULL,streamId:r,desiredSize:h.desiredSize}),d.promise},cancel:h=>{ut(h instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:rt.CANCEL,streamId:r,reason:Jt(h)}),d.promise}},s)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Ru=new WeakSet,Ly=function(e){const t=e.streamId,s=this.sourceName,n=e.sourceName,r=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(h,d=1,u){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:n,stream:rt.ENQUEUE,streamId:t,chunk:h},u)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:rt.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){ut(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:rt.ERROR,streamId:t,reason:Jt(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(h){h(o(e.data,l))}).then(function(){r.postMessage({sourceName:s,targetName:n,stream:rt.START_COMPLETE,streamId:t,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:rt.START_COMPLETE,streamId:t,reason:Jt(h)})})},Lu=new WeakSet,Ny=function(e){const t=e.streamId,s=this.sourceName,n=e.sourceName,r=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case rt.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Jt(e.reason));break;case rt.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Jt(e.reason));break;case rt.PULL:if(!o){r.postMessage({sourceName:s,targetName:n,stream:rt.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(l){var h;l((h=o.onPull)==null?void 0:h.call(o))}).then(function(){r.postMessage({sourceName:s,targetName:n,stream:rt.PULL_COMPLETE,streamId:t,success:!0})},function(l){r.postMessage({sourceName:s,targetName:n,stream:rt.PULL_COMPLETE,streamId:t,reason:Jt(l)})});break;case rt.ENQUEUE:if(ut(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case rt.CLOSE:if(ut(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),P(this,Ba,Ad).call(this,a,t);break;case rt.ERROR:ut(a,"error should have stream controller"),a.controller.error(Jt(e.reason)),P(this,Ba,Ad).call(this,a,t);break;case rt.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Jt(e.reason)),P(this,Ba,Ad).call(this,a,t);break;case rt.CANCEL:if(!o)break;new Promise(function(l){var h;l((h=o.onCancel)==null?void 0:h.call(o,Jt(e.reason)))}).then(function(){r.postMessage({sourceName:s,targetName:n,stream:rt.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){r.postMessage({sourceName:s,targetName:n,stream:rt.CANCEL_COMPLETE,streamId:t,reason:Jt(l)})}),o.sinkCapability.reject(Jt(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Ba=new WeakSet,Ad=async function(e,t){var s,n,r;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(n=e.pullCall)==null?void 0:n.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var li,bc;class JR{constructor({parsedData:e,rawData:t}){A(this,li,void 0);A(this,bc,void 0);T(this,li,e),T(this,bc,t)}getRaw(){return c(this,bc)}get(e){return c(this,li).get(e)??null}getAll(){return pg(c(this,li))}has(e){return c(this,li).has(e)}}li=new WeakMap,bc=new WeakMap;const Yn=Symbol("INTERNAL");var vc,yc,_c,ja;class QR{constructor(e,{name:t,intent:s,usage:n}){A(this,vc,!1);A(this,yc,!1);A(this,_c,!1);A(this,ja,!0);T(this,vc,!!(e&bs.DISPLAY)),T(this,yc,!!(e&bs.PRINT)),this.name=t,this.intent=s,this.usage=n}get visible(){if(c(this,_c))return c(this,ja);if(!c(this,ja))return!1;const{print:e,view:t}=this.usage;return c(this,vc)?(t==null?void 0:t.viewState)!=="OFF":c(this,yc)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Yn&&$e("Internal method `_setVisible` called."),T(this,_c,s),T(this,ja,t)}}vc=new WeakMap,yc=new WeakMap,_c=new WeakMap,ja=new WeakMap;var lr,je,$a,za,wc,vm;class eL{constructor(e,t=bs.DISPLAY){A(this,wc);A(this,lr,null);A(this,je,new Map);A(this,$a,null);A(this,za,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,T(this,za,e.order);for(const s of e.groups)c(this,je).set(s.id,new QR(t,s));if(e.baseState==="OFF")for(const s of c(this,je).values())s._setVisible(Yn,!1);for(const s of e.on)c(this,je).get(s)._setVisible(Yn,!0);for(const s of e.off)c(this,je).get(s)._setVisible(Yn,!1);T(this,$a,this.getHash())}}isVisible(e){if(c(this,je).size===0)return!0;if(!e)return $f("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,je).has(e.id)?c(this,je).get(e.id).visible:(Pe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return P(this,wc,vm).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,je).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(c(this,je).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,je).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(!c(this,je).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,je).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(!c(this,je).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,je).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(c(this,je).get(t).visible)return!1}return!0}return Pe(`Unknown optional content policy ${e.policy}.`),!0}return Pe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const s=c(this,je).get(e);if(!s){Pe(`Optional content group not found: ${e}`);return}s._setVisible(Yn,!!t,!0),T(this,lr,null)}setOCGState({state:e,preserveRB:t}){let s;for(const n of e){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const r=c(this,je).get(n);if(r)switch(s){case"ON":r._setVisible(Yn,!0);break;case"OFF":r._setVisible(Yn,!1);break;case"Toggle":r._setVisible(Yn,!r.visible);break}}T(this,lr,null)}get hasInitialVisibility(){return c(this,$a)===null||this.getHash()===c(this,$a)}getOrder(){return c(this,je).size?c(this,za)?c(this,za).slice():[...c(this,je).keys()]:null}getGroups(){return c(this,je).size>0?pg(c(this,je)):null}getGroup(e){return c(this,je).get(e)||null}getHash(){if(c(this,lr)!==null)return c(this,lr);const e=new Cy;for(const[t,s]of c(this,je))e.update(`${t}:${s.visible}`);return T(this,lr,e.hexdigest())}}lr=new WeakMap,je=new WeakMap,$a=new WeakMap,za=new WeakMap,wc=new WeakSet,vm=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let n=1;n<t;n++){const r=e[n];let a;if(Array.isArray(r))a=P(this,wc,vm).call(this,r);else if(c(this,je).has(r))a=c(this,je).get(r).visible;else return Pe(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return s==="And"};class tL{constructor(e,{disableRange:t=!1,disableStream:s=!1}){ut(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,h)=>{this._onReceiveData({begin:l,chunk:h})}),e.addProgressListener((l,h)=>{this._onProgress({loaded:l,total:h})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(s),!0)});ut(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,n,r;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(r=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||r.call(n,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ut(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new sL(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new nL(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class sL{constructor(e,t,s=!1,n=null){this._stream=e,this._done=s||!1,this._filename=yg(n)?n:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class nL{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function rL(i){let e=!0,t=s("filename\\*","i").exec(i);if(t){t=t[1];let d=o(t);return d=unescape(d),d=l(d),d=h(d),r(d)}if(t=a(i),t){const d=h(t);return r(d)}if(t=s("filename","i").exec(i),t){t=t[1];let d=o(t);return d=h(d),r(d)}function s(d,u){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function n(d,u){if(d){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const f=new TextDecoder(d,{fatal:!0}),p=Hf(u);u=f.decode(p),e=!1}catch{}}return u}function r(d){return e&&/[\x80-\xff]/.test(d)&&(d=n("utf-8",d),e&&(d=n("iso-8859-1",d))),d}function a(d){const u=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,g,v,b]=f;if(g=parseInt(g,10),g in u){if(g===0)break;continue}u[g]=[v,b]}const m=[];for(let g=0;g<u.length&&g in u;++g){let[v,b]=u[g];b=o(b),v&&(b=unescape(b),g===0&&(b=l(b))),m.push(b)}return m.join("")}function o(d){if(d.startsWith('"')){const u=d.slice(1).split('\\"');for(let f=0;f<u.length;++f){const p=u[f].indexOf('"');p!==-1&&(u[f]=u[f].slice(0,p),u.length=f+1),u[f]=u[f].replaceAll(/\\(.)/g,"$1")}d=u.join('"')}return d}function l(d){const u=d.indexOf("'");if(u===-1)return d;const f=d.slice(0,u),m=d.slice(u+1).replace(/^[^']*'/,"");return n(f,m)}function h(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,f,p,m){if(p==="q"||p==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,v){return String.fromCharCode(parseInt(v,16))}),n(f,m);try{m=atob(m)}catch{}return n(f,m)})}return""}function Ag({getResponseHeader:i,isHttp:e,rangeChunkSize:t,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*t)||s||!e||i("Accept-Ranges")!=="bytes"||(i("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function kg(i){const e=i("Content-Disposition");if(e){let t=rL(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(yg(t))return t}return null}function Xf(i,e){return i===404||i===0&&e.startsWith("file:")?new sa('Missing PDF "'+e+'".'):new zf(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function Iy(i){return i===200||i===206}function My(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Dy(i){const e=new Headers;for(const t in i){const s=i[t];s!==void 0&&e.append(t,s)}return e}function Fy(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Pe(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Nb{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ut(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new iL(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new aL(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class iL{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=Dy(this._stream.httpHeaders);const s=t.url;fetch(s,My(this._headers,this._withCredentials,this._abortController)).then(n=>{if(!Iy(n.status))throw Xf(n.status,s);this._reader=n.body.getReader(),this._headersCapability.resolve();const r=l=>n.headers.get(l),{allowRangeRequests:a,suggestedLength:o}=Ag({getResponseHeader:r,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=kg(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new na("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Fy(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class aL{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const n=e.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController,this._headers=Dy(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${s-1}`);const r=n.url;fetch(r,My(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!Iy(a.status))throw Xf(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:Fy(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Sp=200,xp=206;function oL(i){const e=i.response;return typeof e!="string"?e:Hf(e).buffer}class lL{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,s){const n={begin:e,end:t};for(const r in s)n[r]=s[r];return this.request(n)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const r in this.httpHeaders){const a=this.httpHeaders[r];a!==void 0&&t.setRequestHeader(r,a)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),n.expectedStatus=xp):n.expectedStatus=Sp,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var n;const s=this.pendingRequests[e];s&&((n=s.onProgress)==null||n.call(s,t))}onStateChange(e,t){var l,h,d;const s=this.pendingRequests[e];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],n.status===0&&this.isHttp){(l=s.onError)==null||l.call(s,n.status);return}const r=n.status||Sp;if(!(r===Sp&&s.expectedStatus===xp)&&r!==s.expectedStatus){(h=s.onError)==null||h.call(s,n.status);return}const o=oL(n);if(r===xp){const u=n.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);s.onDone({begin:parseInt(f[1],10),chunk:o})}else o?s.onDone({begin:0,chunk:o}):(d=s.onError)==null||d.call(s,n.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class cL{constructor(e){this._source=e,this._manager=new lL(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ut(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new hL(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new dL(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class hL{constructor(e,t){this._manager=e;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(s),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),s=a=>t.getResponseHeader(a),{allowRangeRequests:n,suggestedLength:r}=Ag({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=kg(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Xf(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class dL{constructor(e,t,s){this._manager=e;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,s,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Xf(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Oy=/^file:\/\/\/[a-zA-Z]:\//;function uL(i){const e=an.get("url"),t=e.parse(i);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(i)?e.parse(`file:///${i}`):(t.host||(t.protocol="file:"),t)}class fL{constructor(e){this.source=e,this.url=uL(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ut(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new gL(this):new pL(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=this.isFsUrl?new bL(this,e,t):new mL(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class By{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new na("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class jy{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function qd(i,e){return{protocol:i.protocol,auth:i.auth,host:i.hostname,port:i.port,path:i.path,method:"GET",headers:e}}class pL extends By{constructor(e){super(e);const t=s=>{if(s.statusCode===404){const o=new sa(`Missing PDF "${this._url}".`);this._storedError=o,this._headersCapability.reject(o);return}this._headersCapability.resolve(),this._setReadableStream(s);const n=o=>this._readableStream.headers[o.toLowerCase()],{allowRangeRequests:r,suggestedLength:a}=Ag({getResponseHeader:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=a||this._contentLength,this._filename=kg(n)};if(this._request=null,this._url.protocol==="http:"){const s=an.get("http");this._request=s.request(qd(this._url,e.httpHeaders),t)}else{const s=an.get("https");this._request=s.request(qd(this._url,e.httpHeaders),t)}this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class mL extends jy{constructor(e,t,s){super(e),this._httpHeaders={};for(const r in e.httpHeaders){const a=e.httpHeaders[r];a!==void 0&&(this._httpHeaders[r]=a)}this._httpHeaders.Range=`bytes=${t}-${s-1}`;const n=r=>{if(r.statusCode===404){const a=new sa(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(r)};if(this._request=null,this._url.protocol==="http:"){const r=an.get("http");this._request=r.request(qd(this._url,this._httpHeaders),n)}else{const r=an.get("https");this._request=r.request(qd(this._url,this._httpHeaders),n)}this._request.on("error",r=>{this._storedError=r}),this._request.end()}}class gL extends By{constructor(e){super(e);let t=decodeURIComponent(this._url.path);Oy.test(this._url.href)&&(t=t.replace(/^\//,""));const s=an.get("fs");s.promises.lstat(t).then(n=>{this._contentLength=n.size,this._setReadableStream(s.createReadStream(t)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new sa(`Missing PDF "${t}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class bL extends jy{constructor(e,t,s){super(e);let n=decodeURIComponent(this._url.path);Oy.test(this._url.href)&&(n=n.replace(/^\//,""));const r=an.get("fs");this._setReadableStream(r.createReadStream(n,{start:t,end:s-1}))}}const vL=1e5,Ut=30,yL=.8;var sv,cr,Vt,Ac,kc,ci,Cn,Ec,Sc,hi,Ha,Ua,hr,Wa,xc,Va,di,Cc,Tc,Gt,ui,fi,qa,Nu,$y,Iu,zy,Pc,ym,Ga,kd,Mu,Hy;let Gd=(Gt=class{constructor({textContentSource:e,container:t,viewport:s}){A(this,Nu);A(this,Iu);A(this,Pc);A(this,cr,Promise.withResolvers());A(this,Vt,null);A(this,Ac,!1);A(this,kc,!!((sv=globalThis.FontInspector)!=null&&sv.enabled));A(this,ci,null);A(this,Cn,null);A(this,Ec,0);A(this,Sc,0);A(this,hi,null);A(this,Ha,null);A(this,Ua,0);A(this,hr,0);A(this,Wa,Object.create(null));A(this,xc,[]);A(this,Va,null);A(this,di,[]);A(this,Cc,new WeakMap);A(this,Tc,null);if(e instanceof ReadableStream)T(this,Va,e);else if(typeof e=="object")T(this,Va,new ReadableStream({start(l){l.enqueue(e),l.close()}}));else throw new Error('No "textContentSource" parameter specified.');T(this,Vt,T(this,Ha,t)),T(this,hr,s.scale*(globalThis.devicePixelRatio||1)),T(this,Ua,s.rotation),T(this,Cn,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:r,pageX:a,pageY:o}=s.rawDims;T(this,Tc,[1,0,0,-1,-a,o+r]),T(this,Sc,n),T(this,Ec,r),Yi(t,s),c(this,cr).promise.catch(()=>{}).then(()=>{c(Gt,qa).delete(this),T(this,Cn,null),T(this,Wa,null)})}render(){const e=()=>{c(this,hi).read().then(({value:t,done:s})=>{if(s){c(this,cr).resolve();return}c(this,ci)??T(this,ci,t.lang),Object.assign(c(this,Wa),t.styles),P(this,Nu,$y).call(this,t.items),e()},c(this,cr).reject)};return T(this,hi,c(this,Va).getReader()),c(Gt,qa).add(this),e(),c(this,cr).promise}update({viewport:e,onBefore:t=null}){var r;const s=e.scale*(globalThis.devicePixelRatio||1),n=e.rotation;if(n!==c(this,Ua)&&(t==null||t(),T(this,Ua,n),Yi(c(this,Ha),{rotation:n})),s!==c(this,hr)){t==null||t(),T(this,hr,s);const a={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:P(r=Gt,Ga,kd).call(r,c(this,ci))};for(const o of c(this,di))a.properties=c(this,Cc).get(o),a.div=o,P(this,Pc,ym).call(this,a)}}cancel(){var t;const e=new na("TextLayer task cancelled.");(t=c(this,hi))==null||t.cancel(e).catch(()=>{}),T(this,hi,null),c(this,cr).reject(e)}get textDivs(){return c(this,di)}get textContentItemsStr(){return c(this,xc)}static cleanup(){if(!(c(this,qa).size>0)){c(this,ui).clear();for(const{canvas:e}of c(this,fi).values())e.remove();c(this,fi).clear()}}},cr=new WeakMap,Vt=new WeakMap,Ac=new WeakMap,kc=new WeakMap,ci=new WeakMap,Cn=new WeakMap,Ec=new WeakMap,Sc=new WeakMap,hi=new WeakMap,Ha=new WeakMap,Ua=new WeakMap,hr=new WeakMap,Wa=new WeakMap,xc=new WeakMap,Va=new WeakMap,di=new WeakMap,Cc=new WeakMap,Tc=new WeakMap,ui=new WeakMap,fi=new WeakMap,qa=new WeakMap,Nu=new WeakSet,$y=function(e){var n,r;if(c(this,Ac))return;(r=c(this,Cn)).ctx||(r.ctx=P(n=Gt,Ga,kd).call(n,c(this,ci)));const t=c(this,di),s=c(this,xc);for(const a of e){if(t.length>vL){Pe("Ignoring additional textDivs for performance reasons."),T(this,Ac,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=c(this,Vt);T(this,Vt,document.createElement("span")),c(this,Vt).classList.add("markedContent"),a.id!==null&&c(this,Vt).setAttribute("id",`${a.id}`),o.append(c(this,Vt))}else a.type==="endMarkedContent"&&T(this,Vt,c(this,Vt).parentNode);continue}s.push(a.str),P(this,Iu,zy).call(this,a)}},Iu=new WeakSet,zy=function(e){var g;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,di).push(t);const n=ve.transform(c(this,Tc),e.transform);let r=Math.atan2(n[1],n[0]);const a=c(this,Wa)[e.fontName];a.vertical&&(r+=Math.PI/2);const o=c(this,kc)&&a.fontSubstitution||a.fontFamily,l=Math.hypot(n[2],n[3]),h=l*P(g=Gt,Mu,Hy).call(g,o,c(this,ci));let d,u;r===0?(d=n[4],u=n[5]-h):(d=n[4]+h*Math.sin(r),u=n[5]-h*Math.cos(r));const f="calc(var(--scale-factor)*",p=t.style;c(this,Vt)===c(this,Ha)?(p.left=`${(100*d/c(this,Sc)).toFixed(2)}%`,p.top=`${(100*u/c(this,Ec)).toFixed(2)}%`):(p.left=`${f}${d.toFixed(2)}px)`,p.top=`${f}${u.toFixed(2)}px)`),p.fontSize=`${f}${l.toFixed(2)}px)`,p.fontFamily=o,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,kc)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),r!==0&&(s.angle=r*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const v=Math.abs(e.transform[0]),b=Math.abs(e.transform[3]);v!==b&&Math.max(v,b)/Math.min(v,b)>1.5&&(m=!0)}if(m&&(s.canvasWidth=a.vertical?e.height:e.width),c(this,Cc).set(t,s),c(this,Cn).div=t,c(this,Cn).properties=s,P(this,Pc,ym).call(this,c(this,Cn)),s.hasText&&c(this,Vt).append(t),s.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),c(this,Vt).append(v)}},Pc=new WeakSet,ym=function(e){const{div:t,properties:s,ctx:n,prevFontSize:r,prevFontFamily:a}=e,{style:o}=t;let l="";if(s.canvasWidth!==0&&s.hasText){const{fontFamily:h}=o,{canvasWidth:d,fontSize:u}=s;(r!==u||a!==h)&&(n.font=`${u*c(this,hr)}px ${h}`,e.prevFontSize=u,e.prevFontFamily=h);const{width:f}=n.measureText(t.textContent);f>0&&(l=`scaleX(${d*c(this,hr)/f})`)}s.angle!==0&&(l=`rotate(${s.angle}deg) ${l}`),l.length>0&&(o.transform=l)},Ga=new WeakSet,kd=function(e=null){let t=c(this,fi).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1}),c(this,fi).set(e,t)}return t},Mu=new WeakSet,Hy=function(e,t){const s=c(this,ui).get(e);if(s)return s;const n=P(this,Ga,kd).call(this,t),r=n.font;n.canvas.width=n.canvas.height=Ut,n.font=`${Ut}px ${e}`;const a=n.measureText("");let o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);if(o){const u=o/(o+l);return c(this,ui).set(e,u),n.canvas.width=n.canvas.height=0,n.font=r,u}n.strokeStyle="red",n.clearRect(0,0,Ut,Ut),n.strokeText("g",0,0);let h=n.getImageData(0,0,Ut,Ut).data;l=0;for(let u=h.length-1-3;u>=0;u-=4)if(h[u]>0){l=Math.ceil(u/4/Ut);break}n.clearRect(0,0,Ut,Ut),n.strokeText("A",0,Ut),h=n.getImageData(0,0,Ut,Ut).data,o=0;for(let u=0,f=h.length;u<f;u+=4)if(h[u]>0){o=Ut-Math.floor(u/4/Ut);break}n.canvas.width=n.canvas.height=0,n.font=r;const d=o?o/(o+l):yL;return c(this,ui).set(e,d),d},A(Gt,Ga),A(Gt,Mu),A(Gt,ui,new Map),A(Gt,fi,new Map),A(Gt,qa,new Set),Gt);function _L(){ny("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:i,container:e,viewport:t,...s}=arguments[0],n=Object.keys(s);n.length>0&&Pe("Ignoring `renderTextLayer` parameters: "+n.join(", "));const r=new Gd({textContentSource:i,container:e,viewport:t}),{textDivs:a,textContentItemsStr:o}=r;return{promise:r.render(),textDivs:a,textContentItemsStr:o}}function wL(){ny("`updateTextLayer`, please use `TextLayer` instead.")}class vl{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function n(r){var l;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(vl.shouldBuildText(o))(l=r==null?void 0:r.attributes)!=null&&l.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&t.push({str:a}),!!r.children)for(const h of r.children)n(h)}return n(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const AL=65536,kL=100,EL=5e3,SL=Nt?FR:kR,xL=Nt?OR:ty,CL=Nt?DR:AR,TL=Nt?BR:sy;function PL(i){if(typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i}),typeof i!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!i.url&&!i.data&&!i.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new _m,{docId:t}=e,s=i.url?RL(i.url):null,n=i.data?LL(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,o=i.password??null,l=i.range instanceof Uy?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:AL;let d=i.worker instanceof va?i.worker:null;const u=i.verbosity,f=typeof i.docBaseUrl=="string"&&!vg(i.docBaseUrl)?i.docBaseUrl:null,p=typeof i.cMapUrl=="string"?i.cMapUrl:null,m=i.cMapPacked!==!1,g=i.CMapReaderFactory||xL,v=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,b=i.StandardFontDataFactory||TL,y=i.stopAtErrors!==!0,E=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,C=i.isEvalSupported!==!1,R=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Nt,M=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,D=typeof i.disableFontFace=="boolean"?i.disableFontFace:Nt,x=i.fontExtraProperties===!0,S=i.enableXfa===!0,F=i.ownerDocument||globalThis.document,z=i.disableRange===!0,L=i.disableStream===!0,B=i.disableAutoFetch===!0,w=i.pdfBug===!0,G=l?l.length:i.length??NaN,re=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Nt&&!D,$=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:g===ty&&b===sy&&p&&v&&sl(p,document.baseURI)&&sl(v,document.baseURI),Q=i.canvasFactory||new SL({ownerDocument:F}),Y=i.filterFactory||new CL({docId:t,ownerDocument:F}),le=null;dR(u);const H={canvasFactory:Q,filterFactory:Y};if($||(H.cMapReaderFactory=new g({baseUrl:p,isCompressed:m}),H.standardFontDataFactory=new b({baseUrl:v})),!d){const ae={verbosity:u,port:Vn.workerPort};d=ae.port?va.fromPort(ae):new va(ae),e._worker=d}const O={docId:t,apiVersion:"4.3.136",data:n,password:o,disableAutoFetch:B,rangeChunkSize:h,length:G,docBaseUrl:f,enableXfa:S,evaluatorOptions:{maxImageSize:E,disableFontFace:D,ignoreErrors:y,isEvalSupported:C,isOffscreenCanvasSupported:R,canvasMaxAreaInBytes:M,fontExtraProperties:x,useSystemFonts:re,cMapUrl:$?p:null,standardFontDataUrl:$?v:null}},ee={disableFontFace:D,fontExtraProperties:x,ownerDocument:F,pdfBug:w,styleElement:le,loadingParams:{disableAutoFetch:B,enableXfa:S}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ae=d.messageHandler.sendWithPromise("GetDocRequest",O,n?[n.buffer]:null);let Z;return l?Z=new tL(l,{disableRange:z,disableStream:L}):n||(Z=(ue=>Nt?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&sl(ue.url)?new Nb(ue):new fL(ue):sl(ue.url)?new Nb(ue):new cL(ue))({url:s,length:G,httpHeaders:r,withCredentials:a,rangeChunkSize:h,disableRange:z,disableStream:L})),ae.then(me=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ue=new il(t,me,d.port),fe=new DL(ue,e,Z,ee,H);e._transport=fe,ue.send("Ready",null)})}).catch(e._capability.reject),e}function RL(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Nt&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function LL(i){if(Nt&&typeof Qt<"u"&&i instanceof Qt)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Hf(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ib(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var Du;const Fu=class Fu{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Zt(Fu,Du)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(n){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,n}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Du=new WeakMap,A(Fu,Du,0);let _m=Fu,Uy=class{constructor(e,t,s=!1,n=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const s of this._rangeListeners)s(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){$e("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class NL{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var dr,Tn,ur,fa,Xa,Ed;class IL{constructor(e,t,s,n=!1){A(this,ur);A(this,Xa);A(this,dr,null);A(this,Tn,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=n?new yb:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new Wy,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:r=!1}={}){return new qh({viewBox:this.view,scale:e,rotation:t,offsetX:s,offsetY:n,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Me(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:s="display",annotationMode:n=Jn.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:d=null}){var E,C;(E=this._stats)==null||E.time("Overall");const u=this._transport.getRenderingIntent(s,n,d),{renderingIntent:f,cacheKey:p}=u;T(this,Tn,!1),P(this,Xa,Ed).call(this),o||(o=this._transport.getOptionalContentConfig(f));let m=this._intentStates.get(p);m||(m=Object.create(null),this._intentStates.set(p,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const g=!!(f&bs.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(C=this._stats)==null||C.time("Page Request"),this._pumpOperatorList(u));const v=R=>{var M;m.renderTasks.delete(b),(this._maybeCleanupAfterRender||g)&&T(this,Tn,!0),P(this,ur,fa).call(this,!g),R?(b.capability.reject(R),this._abortOperatorList({intentState:m,reason:R instanceof Error?R:new Error(R)})):b.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(M=globalThis.Stats)!=null&&M.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},b=new Am({callback:v,params:{canvasContext:e,viewport:t,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!g,pdfBug:this._pdfBug,pageColors:h});(m.renderTasks||(m.renderTasks=new Set)).add(b);const y=b.task;return Promise.all([m.displayReadyCapability.promise,o]).then(([R,M])=>{var D;if(this.destroyed){v();return}if((D=this._stats)==null||D.time("Rendering"),!(M.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");b.initializeGraphics({transparency:R,optionalContentConfig:M}),b.operatorListChanged()}).catch(v),y}getOperatorList({intent:e="display",annotationMode:t=Jn.ENABLE,printAnnotationStorage:s=null}={}){var l;function n(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(o))}const r=this._transport.getRenderingIntent(e,t,s,!0);let a=this._intentStates.get(r.cacheKey);a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a));let o;return a.opListReadCapability||(o=Object.create(null),o.operatorListChanged=n,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(o),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(l=this._stats)==null||l.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>vl.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,n){function r(){a.read().then(function({value:l,done:h}){if(h){s(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),r()},n)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),T(this,Tn,!1),P(this,Xa,Ed).call(this),Promise.all(e)}cleanup(e=!1){T(this,Tn,!0);const t=P(this,ur,fa).call(this,!1);return e&&t&&this._stats&&(this._stats=new yb),t}_startRenderPage(e,t){var n,r;const s=this._intentStates.get(t);s&&((n=this._stats)==null||n.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let s=0,n=e.length;s<n;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&P(this,ur,fa).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s}){const{map:n,transfer:r}=s,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:n},r).getReader(),l=this._intentStates.get(t);l.streamReader=o;const h=()=>{o.read().then(({value:d,done:u})=>{if(u){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,l),h())},d=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const u of l.renderTasks)u.operatorListChanged();P(this,ur,fa).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(d);else if(l.opListReadCapability)l.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof bg){let n=kL;t.extraDelay>0&&t.extraDelay<1e3&&(n+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},n);return}}if(e.streamReader.cancel(new na(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===e){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}dr=new WeakMap,Tn=new WeakMap,ur=new WeakSet,fa=function(e=!1){if(P(this,Xa,Ed).call(this),!c(this,Tn)||this.destroyed)return!1;if(e)return T(this,dr,setTimeout(()=>{T(this,dr,null),P(this,ur,fa).call(this,!1)},EL)),!1;for(const{renderTasks:t,operatorList:s}of this._intentStates.values())if(t.size>0||!s.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),T(this,Tn,!1),!0},Xa=new WeakSet,Ed=function(){c(this,dr)&&(clearTimeout(c(this,dr)),T(this,dr,null))};var pi,Ou;class ML{constructor(){A(this,pi,new Set);A(this,Ou,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};c(this,Ou).then(()=>{for(const n of c(this,pi))n.call(this,s)})}addEventListener(e,t){c(this,pi).add(t)}removeEventListener(e,t){c(this,pi).delete(t)}terminate(){c(this,pi).clear()}}pi=new WeakMap,Ou=new WeakMap;const gn={isWorkerDisabled:!1,fakeWorkerId:0};Nt&&(gn.isWorkerDisabled=!0,Vn.workerSrc||(Vn.workerSrc="./pdf.worker.mjs")),gn.isSameOrigin=function(i,e){let t;try{if(t=new URL(i),!t.origin||t.origin==="null")return!1}catch{return!1}const s=new URL(e,t);return t.origin===s.origin},gn.createCDNWrapper=function(i){const e=`await import("${i}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var mi,Ya,Sd;const es=class es{constructor({name:e=null,port:t=null,verbosity:s=uR()}={}){var n;if(this.name=e,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((n=c(es,mi))!=null&&n.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(c(es,mi)||T(es,mi,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Nt?Promise.all([an.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new il("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!gn.isWorkerDisabled&&!c(es,Ya,Sd)){let{workerSrc:e}=es;try{gn.isSameOrigin(window.location.href,e)||(e=gn.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new il("main","worker",t),n=()=>{t.removeEventListener("error",r),s.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||n()};t.addEventListener("error",r),s.on("test",o=>{if(t.removeEventListener("error",r),this.destroyed){n();return}o?(this._messageHandler=s,this._port=t,this._webWorker=t,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),s.destroy(),t.terminate())}),s.on("ready",o=>{if(t.removeEventListener("error",r),this.destroyed){n();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;s.send("test",o,[o.buffer])};a();return}catch{$f("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){gn.isWorkerDisabled||(Pe("Setting up fake worker."),gn.isWorkerDisabled=!0),es._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new ML;this._port=t;const s=`fake${gn.fakeWorkerId++}`,n=new il(s+"_worker",s,t);e.setup(n,t);const r=new il(s,s+"_worker",t);this._messageHandler=r,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=c(es,mi))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var s;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(s=c(this,mi))==null?void 0:s.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new es(e)}static get workerSrc(){if(Vn.workerSrc)return Vn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Me(this,"_setupFakeWorkerGlobal",(async()=>c(this,Ya,Sd)?c(this,Ya,Sd):(await import(this.workerSrc)).WorkerMessageHandler)())}};mi=new WeakMap,Ya=new WeakSet,Sd=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(es,Ya),A(es,mi,void 0);let va=es;var Pn,qs,Ka,Za,Gs,gi,al;class DL{constructor(e,t,s,n,r){A(this,gi);A(this,Pn,new Map);A(this,qs,new Map);A(this,Ka,new Map);A(this,Za,new Map);A(this,Gs,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Wy,this.fontLoader=new IR({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Me(this,"annotationStorage",new wg)}getRenderingIntent(e,t=Jn.ENABLE,s=null,n=!1){let r=bs.DISPLAY,a=um;switch(e){case"any":r=bs.ANY;break;case"display":break;case"print":r=bs.PRINT;break;default:Pe(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case Jn.DISABLE:r+=bs.ANNOTATIONS_DISABLE;break;case Jn.ENABLE:break;case Jn.ENABLE_FORMS:r+=bs.ANNOTATIONS_FORMS;break;case Jn.ENABLE_STORAGE:r+=bs.ANNOTATIONS_STORAGE,a=(r&bs.PRINT&&s instanceof Py?s:this.annotationStorage).serializable;break;default:Pe(`getRenderingIntent - invalid annotationMode: ${t}`)}return n&&(r+=bs.OPLIST),{renderingIntent:r,cacheKey:`${r}_${a.hash}`,annotationStorageSerializable:a}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,Gs))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const n of c(this,qs).values())e.push(n._destroy());c(this,qs).clear(),c(this,Ka).clear(),c(this,Za).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var n;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Pn).clear(),this.filterFactory.destroy(),Gd.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new na("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,n)=>{ut(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){n.close();return}ut(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",s=>{const n=Promise.withResolvers(),r=this._fullReader;return r.headersReady.then(()=>{var a;(!r.isStreamingSupported||!r.isRangeSupported)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),r.onProgress=o=>{var l;(l=t.onProgress)==null||l.call(t,{loaded:o.loaded,total:o.total})}),n.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},n.reject),n.promise}),e.on("GetRangeReader",(s,n)=>{ut(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){n.close();return}ut(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{n.error(a)})},n.onCancel=a=>{r.cancel(a),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new NL(s,this))}),e.on("DocException",function(s){let n;switch(s.name){case"PasswordException":n=new zp(s.message,s.code);break;case"InvalidPDFException":n=new Zv(s.message);break;case"MissingPDFException":n=new sa(s.message);break;case"UnexpectedResponseException":n=new zf(s.message,s.status);break;case"UnknownErrorException":n=new Hp(s.message,s.details);break;default:$e("DocException - expected a valid Error.")}t._capability.reject(n)}),e.on("PasswordRequest",s=>{if(T(this,Gs,Promise.withResolvers()),t.onPassword){const n=r=>{r instanceof Error?c(this,Gs).reject(r):c(this,Gs).resolve({password:r})};try{t.onPassword(n,s.code)}catch(r){c(this,Gs).reject(r)}}else c(this,Gs).reject(new zp(s.message,s.code));return c(this,Gs).promise}),e.on("DataLoaded",s=>{var n;(n=t.onProgress)==null||n.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,qs).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,n,r])=>{var a;if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:h}=this._params;if("error"in r){const p=r.error;Pe(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const d=h&&((a=globalThis.FontInspector)!=null&&a.enabled)?(p,m)=>globalThis.FontInspector.fontAdded(p,m):null,u=new MR(r,{disableFontFace:o,inspectFont:d});this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!l&&u.data&&(u.data=null),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:f}=r;ut(f,"The imageRef must be defined.");for(const p of c(this,qs).values())for(const[,m]of p.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(s,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),e.on("obj",([s,n,r,a])=>{var l;if(this.destroyed)return;const o=c(this,qs).get(n);if(!o.objs.has(s)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(r){case"Image":o.objs.resolve(s,a),(a==null?void 0:a.dataLen)>oR&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(s,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",s=>{var n;this.destroyed||(n=t.onProgress)==null||n.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBuiltInCMap",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(s):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",s=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(s):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Pe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=c(this,Ka).get(t);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&c(this,Za).set(r.refStr,e);const a=new IL(t,r,this,this._params.pdfBug);return c(this,qs).set(t,a),a});return c(this,Ka).set(t,n),n}getPageIndex(e){return Ib(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return P(this,gi,al).call(this,"GetFieldObjects")}hasJSActions(){return P(this,gi,al).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return P(this,gi,al).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return P(this,gi,al).call(this,"GetOptionalContentConfig").then(t=>new eL(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Pn).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(n=>{var r,a;return{info:n[0],metadata:n[1]?new JR(n[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return c(this,Pn).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,qs).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Pn).clear(),this.filterFactory.destroy(!0),Gd.cleanup()}}cachedPageNumber(e){if(!Ib(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,Za).get(t)??null}}Pn=new WeakMap,qs=new WeakMap,Ka=new WeakMap,Za=new WeakMap,Gs=new WeakMap,gi=new WeakSet,al=function(e,t=null){const s=c(this,Pn).get(e);if(s)return s;const n=this.messageHandler.sendWithPromise(e,t);return c(this,Pn).set(e,n),n};const dd=Symbol("INITIAL_DATA");var xs,Rc,wm;class Wy{constructor(){A(this,Rc);A(this,xs,Object.create(null))}get(e,t=null){if(t){const n=P(this,Rc,wm).call(this,e);return n.promise.then(()=>t(n.data)),null}const s=c(this,xs)[e];if(!s||s.data===dd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=c(this,xs)[e];return!!t&&t.data!==dd}resolve(e,t=null){const s=P(this,Rc,wm).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in c(this,xs)){const{data:s}=c(this,xs)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}T(this,xs,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,xs)){const{data:t}=c(this,xs)[e];t!==dd&&(yield[e,t])}}}xs=new WeakMap,Rc=new WeakSet,wm=function(e){var t;return(t=c(this,xs))[e]||(t[e]={...Promise.withResolvers(),data:dd})};var fr;class FL{constructor(e){A(this,fr,null);T(this,fr,e),this.onContinue=null}get promise(){return c(this,fr).capability.promise}cancel(e=0){c(this,fr).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,fr).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,fr);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}fr=new WeakMap;var bi;const $r=class $r{constructor({callback:e,params:t,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:h,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:f=null}){this.callback=e,this.params=t,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=u,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new FL(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,l;if(this.cancelled)return;if(this._canvas){if(c($r,bi).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c($r,bi).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:r,background:a}=this.params;this.gfx=new ba(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var s;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c($r,bi).delete(this._canvas),this.callback(e||new bg(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c($r,bi).delete(this._canvas),this.callback())))}};bi=new WeakMap,A($r,bi,new WeakSet);let Am=$r;const OL="4.3.136",BL="0cec64437";function Mb(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Zo(i){return Math.max(0,Math.min(255,255*i))}class Db{static CMYK_G([e,t,s,n]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+n)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Zo(e),[e,e,e]}static G_HTML([e]){const t=Mb(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Zo)}static RGB_HTML(e){return`#${e.map(Mb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,n]){return["RGB",1-Math.min(1,e+n),1-Math.min(1,s+n),1-Math.min(1,t+n)]}static CMYK_rgb([e,t,s,n]){return[Zo(1-Math.min(1,e+n)),Zo(1-Math.min(1,s+n)),Zo(1-Math.min(1,t+n))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const n=1-e,r=1-t,a=1-s,o=Math.min(n,r,a);return["CMYK",n,r,a,o]}}class Vy{static setupStorage(e,t,s,n,r){const a=n.getValue(t,{value:null});switch(s.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),r==="print")break;e.addEventListener("input",o=>{n.setValue(t,{value:o.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(a.value===s.attributes.xfaOn?e.setAttribute("checked",!0):a.value===s.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",o=>{n.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),r==="print")break;e.addEventListener("input",o=>{n.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of s.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,h=l.selectedIndex===-1?"":l[l.selectedIndex].value;n.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:n,linkService:r}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${n}`);for(const[l,h]of Object.entries(a))if(h!=null)switch(l){case"class":h.length&&e.setAttribute(l,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,h)}o&&r.addLinkAttributes(e,a.href,a.newWindow),s&&a.dataId&&this.setupStorage(e,a.dataId,t,s)}static render(e){var u,f;const t=e.annotationStorage,s=e.linkService,n=e.xfaHtml,r=e.intent||"display",a=document.createElement(n.name);n.attributes&&this.setAttributes({html:a,element:n,intent:r,linkService:s});const o=r!=="richText",l=e.div;if(l.append(a),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=p}o&&l.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const p=document.createTextNode(n.value);a.append(p),o&&vl.shouldBuildText(n.name)&&h.push(p)}return{textDivs:h}}const d=[[n,-1,a]];for(;d.length>0;){const[p,m,g]=d.at(-1);if(m+1===p.children.length){d.pop();continue}const v=p.children[++d.at(-1)[1]];if(v===null)continue;const{name:b}=v;if(b==="#text"){const E=document.createTextNode(v.value);h.push(E),g.append(E);continue}const y=(u=v==null?void 0:v.attributes)!=null&&u.xmlns?document.createElementNS(v.attributes.xmlns,b):document.createElement(b);if(g.append(y),v.attributes&&this.setAttributes({html:y,element:v,storage:t,intent:r,linkService:s}),((f=v.children)==null?void 0:f.length)>0)d.push([v,-1,y]);else if(v.value){const E=document.createTextNode(v.value);o&&vl.shouldBuildText(b)&&h.push(E),y.append(E)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Yh=1e3,jL=9,Zi=new WeakSet;function qn(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class $L{static create(e){switch(e.data.annotationType){case ot.LINK:return new qy(e);case ot.TEXT:return new zL(e);case ot.WIDGET:switch(e.data.fieldType){case"Tx":return new HL(e);case"Btn":return e.data.radioButton?new Yy(e):e.data.checkBox?new WL(e):new VL(e);case"Ch":return new qL(e);case"Sig":return new UL(e)}return new ra(e);case ot.POPUP:return new Em(e);case ot.FREETEXT:return new e0(e);case ot.LINE:return new XL(e);case ot.SQUARE:return new YL(e);case ot.CIRCLE:return new KL(e);case ot.POLYLINE:return new t0(e);case ot.CARET:return new JL(e);case ot.INK:return new s0(e);case ot.POLYGON:return new ZL(e);case ot.HIGHLIGHT:return new QL(e);case ot.UNDERLINE:return new e2(e);case ot.SQUIGGLY:return new t2(e);case ot.STRIKEOUT:return new s2(e);case ot.STAMP:return new n0(e);case ot.FILEATTACHMENT:return new n2(e);default:return new tt(e)}}}var vi,Ja,Qa,Lc,km;const Og=class Og{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){A(this,Lc);A(this,vi,null);A(this,Ja,!1);A(this,Qa,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:s}){return!!(e!=null&&e.str||t!=null&&t.str||s!=null&&s.str)}get hasPopupData(){return Og._hasPopupData(this.data)}updateEdited(e){var s;if(!this.container)return;c(this,vi)||T(this,vi,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&P(this,Lc,km).call(this,t),(s=c(this,Qa))==null||s.popup.updateEdited(e)}resetEdited(){var e;c(this,vi)&&(P(this,Lc,km).call(this,c(this,vi).rect),(e=c(this,Qa))==null||e.popup.resetEdited(),T(this,vi,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof ra||(r.tabIndex=Yh);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,t.popupRef&&r.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Em){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,r),r}const{width:o,height:l}=qn(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,v=t.borderStyle.verticalCornerRadius;if(g>0||v>0){const y=`calc(${g}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`;a.borderRadius=y}else if(this instanceof Yy){const y=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=y}switch(t.borderStyle.style){case Yo.SOLID:a.borderStyle="solid";break;case Yo.DASHED:a.borderStyle="dashed";break;case Yo.BEVELED:Pe("Unimplemented border style: beveled");break;case Yo.INSET:Pe("Unimplemented border style: inset");break;case Yo.UNDERLINE:a.borderBottomStyle="solid";break}const b=t.borderColor||null;b?(T(this,Ja,!0),a.borderColor=ve.makeHexColor(b[0]|0,b[1]|0,b[2]|0)):a.borderWidth=0}const h=ve.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:u,pageX:f,pageY:p}=n.rawDims;a.left=`${100*(h[0]-f)/d}%`,a.top=`${100*(h[1]-p)/u}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(a.width=`${100*o/d}%`,a.height=`${100*l/u}%`):this.setRotation(m,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims,{width:r,height:a}=qn(this.data.rect);let o,l;e%180===0?(o=100*r/s,l=100*a/n):(o=100*a/s,l=100*r/n),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,n)=>{const r=n.detail[t],a=r[0],o=r.slice(1);n.target.style[s]=Db[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[s]:Db[`${a}_rgb`](o)})};return Me(this,"_commonActions",{display:t=>{const{display:s}=t.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const n of Object.keys(t.detail)){const r=e[n]||s[n];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[n,r]of Object.entries(t)){const a=s[n];if(a){const o={detail:{[n]:r},target:e};a(o),delete t[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,n,r]=this.data.rect;if(e.length===1){const[,{x:g,y:v},{x:b,y}]=e[0];if(n===g&&r===v&&t===b&&s===y)return}const{style:a}=this.container;let o;if(c(this,Ja)){const{borderColor:g,borderWidth:v}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=n-t,h=r-s,{svgFactory:d}=this,u=d.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);const f=d.createElement("defs");u.append(f);const p=d.createElement("clipPath"),m=`clippath_${this.data.id}`;p.setAttribute("id",m),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(const[,{x:g,y:v},{x:b,y}]of e){const E=d.createElement("rect"),C=(b-t)/l,R=(r-v)/h,M=(g-b)/l,D=(v-y)/h;E.setAttribute("x",C),E.setAttribute("y",R),E.setAttribute("width",M),E.setAttribute("height",D),p.append(E),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${R}" width="${M}" height="${D}"/>`)}c(this,Ja)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(u),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const s=T(this,Qa,new Em({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(s.render())}render(){$e("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[e];if(n)for(const{page:r,id:a,exportValues:o}of n){if(r===-1||a===t)continue;const l=typeof o=="string"?o:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Zi.has(h)){Pe(`_getElementsByName - element not allowed: ${a}`);continue}s.push({id:a,exportValue:l,domElement:h})}return s}for(const n of document.getElementsByName(e)){const{exportValue:r}=n,a=n.getAttribute("data-element-id");a!==t&&Zi.has(n)&&s.push({id:a,exportValue:r,domElement:n})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};vi=new WeakMap,Ja=new WeakMap,Qa=new WeakMap,Lc=new WeakSet,km=function(e){const{container:{style:t},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}}}=this;s==null||s.splice(0,4,...e);const{width:h,height:d}=qn(e);t.left=`${100*(e[0]-o)/r}%`,t.top=`${100*(a-e[3]+l)/a}%`,n===0?(t.width=`${100*h/r}%`,t.height=`${100*d/a}%`):this.setRotation(n)};let tt=Og;var Rn,Fr,Bu,Gy,ju,Xy;class qy extends tt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});A(this,Rn);A(this,Bu);A(this,ju);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let r=!1;return t.url?(s.addLinkAttributes(n,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(n,t.action),r=!0):t.attachment?(P(this,Bu,Gy).call(this,n,t.attachment,t.attachmentDest),r=!0):t.setOCGState?(P(this,ju,Xy).call(this,n,t.setOCGState),r=!0):t.dest?(this._bindLink(n,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),r=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(t,s){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&P(this,Rn,Fr).call(this)}_bindNamedAction(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),P(this,Rn,Fr).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const a=n.get(r);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),P(this,Rn,Fr).call(this)}_bindResetFormAction(t,s){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),P(this,Rn,Fr).call(this),!this._fieldObjects){Pe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{var u;n==null||n();const{fields:r,refs:a,include:o}=s,l=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const p of r){const m=this._fieldObjects[p]||[];for(const{id:g}of m)f.add(g)}for(const p of Object.values(this._fieldObjects))for(const m of p)f.has(m.id)===o&&l.push(m)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const h=this.annotationStorage,d=[];for(const f of l){const{id:p}=f;switch(d.push(p),f.type){case"text":{const g=f.defaultValue||"";h.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;h.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";h.setValue(p,{value:g});break}default:continue}const m=document.querySelector(`[data-element-id="${p}"]`);if(m){if(!Zi.has(m)){Pe(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Rn=new WeakSet,Fr=function(){this.container.setAttribute("data-internal-link","")},Bu=new WeakSet,Gy=function(t,s,n=null){t.href=this.linkService.getAnchorUrl(""),s.description&&(t.title=s.description),t.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,n),!1},P(this,Rn,Fr).call(this)},ju=new WeakSet,Xy=function(t,s){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),P(this,Rn,Fr).call(this)};class zL extends tt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class ra extends tt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Yt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,n,r){s.includes("mouse")?e.addEventListener(s,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(s,a=>{var o;if(s==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(a)}}))})}_setEventListeners(e,t,s,n){var r,a,o;for(const[l,h]of s)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,h,n),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ve.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||jL,r=e.style;let a;const o=2,l=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(h/(wp*n))||1,u=h/d;a=Math.min(n,l(u/wp))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(n,l(h/wp))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=ve.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class HL extends ra{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,n){const r=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=s),r.setValue(a.id,{[n]:s})}render(){var n,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let h=a.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type="text",s.setAttribute("value",h??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Zi.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Yh,this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(s,"value",f.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";s.value=d.userValue=p,d.formattedValue=null});let u=f=>{const{formattedValue:p}=d;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",p=>{var g;if(d.focused)return;const{target:m}=p;d.userValue&&(m.value=d.userValue),d.lastCommittedValue=m.value,d.commitKey=1,(g=this.data.actions)!=null&&g.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const m={value(g){d.userValue=g.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),g.target.value=d.userValue},formattedValue(g){const{formattedValue:v}=g.detail;d.formattedValue=v,v!=null&&g.target!==document.activeElement&&(g.target.value=v),e.setValue(t,{formattedValue:v})},selRange(g){g.target.setSelectionRange(...g.detail.selRange)},charLimit:g=>{var E;const{charLimit:v}=g.detail,{target:b}=g;if(v===0){b.removeAttribute("maxLength");return}b.setAttribute("maxLength",v);let y=d.userValue;!y||y.length<=v||(y=y.slice(0,v),b.value=d.userValue=y,e.setValue(t,{value:y}),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:1,selStart:b.selectionStart,selEnd:b.selectionEnd}}))}};this._dispatchEventFromSandbox(m,p)}),s.addEventListener("keydown",p=>{var v;d.commitKey=1;let m=-1;if(p.key==="Escape"?m=0:p.key==="Enter"&&!this.data.multiLine?m=2:p.key==="Tab"&&(d.commitKey=3),m===-1)return;const{value:g}=p.target;d.lastCommittedValue!==g&&(d.lastCommittedValue=g,d.userValue=g,(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:g,willCommit:!0,commitKey:m,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=u;u=null,s.addEventListener("blur",p=>{var g,v;if(!d.focused||!p.relatedTarget)return;(g=this.data.actions)!=null&&g.Blur||(d.focused=!1);const{value:m}=p.target;d.userValue=m,d.lastCommittedValue!==m&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:d.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",p=>{var R;d.lastCommittedValue=null;const{data:m,target:g}=p,{value:v,selectionStart:b,selectionEnd:y}=g;let E=b,C=y;switch(p.inputType){case"deleteWordBackward":{const M=v.substring(0,b).match(/\w*[^\w]*$/);M&&(E-=M[0].length);break}case"deleteWordForward":{const M=v.substring(b).match(/^[^\w]*\w*/);M&&(C+=M[0].length);break}case"deleteContentBackward":b===y&&(E-=1);break;case"deleteContentForward":b===y&&(C+=1);break}p.preventDefault(),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,change:m||"",willCommit:!1,selStart:E,selEnd:C}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(u&&s.addEventListener("blur",u),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class UL extends ra{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class WL extends ra{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let n=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",e.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Zi.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=Yh,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const h of this._getElementsByName(o,s)){const d=l&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}e.setValue(s,{value:l})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Yy extends ra{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let n=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof n=="string"&&(n=n!==t.buttonValue,e.setValue(s,{value:n})),n)for(const a of this._getElementsByName(t.fieldName,s))e.setValue(a.id,{value:!1});const r=document.createElement("input");if(Zi.add(r),r.setAttribute("data-element-id",s),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=Yh,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const h of this._getElementsByName(o,s))e.setValue(h.id,{value:!1});e.setValue(s,{value:l})}),r.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;r.addEventListener("updatefromsandbox",o=>{const l={value:h=>{const d=a===h.detail.value;for(const u of this._getElementsByName(h.target.name)){const f=d&&u.id===s;u.domElement&&(u.domElement.checked=f),e.setValue(u.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class VL extends qy{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class qL extends ra{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),n=document.createElement("select");Zi.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Yh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",d=>{const u=this.data.defaultFieldValue;for(const f of n.options)f.selected=f.value===u});for(const d of this.data.options){const u=document.createElement("option");u.textContent=d.displayValue,u.value=d.exportValue,s.value.includes(d.exportValue)&&(u.setAttribute("selected",!0),r=!1),n.append(u)}let a=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),n.prepend(d),a=()=>{d.remove(),n.removeEventListener("input",a),a=null},n.addEventListener("input",a)}const o=d=>{const u=d?"value":"textContent",{options:f,multiple:p}=n;return p?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[u]):f.selectedIndex===-1?null:f[f.selectedIndex][u]};let l=o(!1);const h=d=>{const u=d.target.options;return Array.prototype.map.call(u,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",d=>{const u={value(f){a==null||a();const p=f.detail.value,m=new Set(Array.isArray(p)?p:[p]);for(const g of n.options)g.selected=m.has(g.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(f){n.multiple=!0},remove(f){const p=n.options,m=f.detail.remove;p[m].selected=!1,n.remove(m),p.length>0&&Array.prototype.findIndex.call(p,v=>v.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:o(!0),items:h(f)}),l=o(!1)},clear(f){for(;n.length!==0;)n.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(f){const{index:p,displayValue:m,exportValue:g}=f.detail.insert,v=n.children[p],b=document.createElement("option");b.textContent=m,b.value=g,v?v.before(b):n.append(b),e.setValue(t,{value:o(!0),items:h(f)}),l=o(!1)},items(f){const{items:p}=f.detail;for(;n.length!==0;)n.remove(0);for(const m of p){const{displayValue:g,exportValue:v}=m,b=document.createElement("option");b.textContent=g,b.value=v,n.append(b)}n.options.length>0&&(n.options[0].selected=!0),e.setValue(t,{value:o(!0),items:h(f)}),l=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const m of f.target.options)m.selected=p.has(m.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(u,d)}),n.addEventListener("input",d=>{var p;const u=o(!0),f=o(!1);e.setValue(t,{value:u}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:u,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):n.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Em extends tt{constructor(e){const{data:t,elements:s}=e;super(e,{isRenderable:tt._hasPopupData(t)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new GL({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const s of this.elements)s.popup=e,t.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(s=>`${Qv}${s}`).join(",")),this.container}}var eo,$u,zu,to,yi,Je,Ln,_i,Nc,Ic,so,Nn,Cs,In,Mc,Mn,Dc,wi,Ai,no,xd,Fc,Sm,Hu,Ky,Uu,Zy,Wu,Jy,Vu,Qy,ro,Cd,io,Td,Oc,xm;class GL{constructor({container:e,color:t,elements:s,titleObj:n,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:h,parentRect:d,open:u}){A(this,no);A(this,Fc);A(this,Hu);A(this,Uu);A(this,Wu);A(this,Vu);A(this,ro);A(this,io);A(this,Oc);A(this,eo,P(this,Wu,Jy).bind(this));A(this,$u,P(this,Oc,xm).bind(this));A(this,zu,P(this,io,Td).bind(this));A(this,to,P(this,ro,Cd).bind(this));A(this,yi,null);A(this,Je,null);A(this,Ln,null);A(this,_i,null);A(this,Nc,null);A(this,Ic,null);A(this,so,null);A(this,Nn,!1);A(this,Cs,null);A(this,In,null);A(this,Mc,null);A(this,Mn,null);A(this,Dc,null);A(this,wi,null);A(this,Ai,!1);var f;T(this,Je,e),T(this,Dc,n),T(this,Ln,a),T(this,Mn,o),T(this,Ic,l),T(this,yi,t),T(this,Mc,h),T(this,so,d),T(this,Nc,s),T(this,_i,ry.toDateObject(r)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",c(this,to)),p.addEventListener("mouseenter",c(this,zu)),p.addEventListener("mouseleave",c(this,$u)),p.classList.add("popupTriggerArea");for(const p of s)(f=p.container)==null||f.addEventListener("keydown",c(this,eo));c(this,Je).hidden=!0,u&&P(this,ro,Cd).call(this)}render(){if(c(this,Cs))return;const e=T(this,Cs,document.createElement("div"));if(e.className="popup",c(this,yi)){const r=e.style.outlineColor=ve.makeHexColor(...c(this,yi));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=ve.makeHexColor(...c(this,yi).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const s=document.createElement("h1");if(t.append(s),{dir:s.dir,str:s.textContent}=c(this,Dc),e.append(t),c(this,_i)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),r.setAttribute("data-l10n-args",JSON.stringify({date:c(this,_i).toLocaleDateString(),time:c(this,_i).toLocaleTimeString()})),t.append(r)}const n=c(this,no,xd);if(n)Vy.render({xfaHtml:n,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(c(this,Ln));e.append(r)}c(this,Je).append(e)}_formatContents({str:e,dir:t}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=t;const n=e.split(/(?:\r\n?|\n)/);for(let r=0,a=n.length;r<a;++r){const o=n[r];s.append(document.createTextNode(o)),r<a-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:e,popupContent:t}){var s;c(this,wi)||T(this,wi,{contentsObj:c(this,Ln),richText:c(this,Mn)}),e&&T(this,In,null),t&&(T(this,Mn,P(this,Uu,Zy).call(this,t)),T(this,Ln,null)),(s=c(this,Cs))==null||s.remove(),T(this,Cs,null)}resetEdited(){var e;c(this,wi)&&({contentsObj:Zt(this,Ln)._,richText:Zt(this,Mn)._}=c(this,wi),T(this,wi,null),(e=c(this,Cs))==null||e.remove(),T(this,Cs,null),T(this,In,null))}forceHide(){T(this,Ai,this.isVisible),c(this,Ai)&&(c(this,Je).hidden=!0)}maybeShow(){c(this,Ai)&&(c(this,Cs)||P(this,io,Td).call(this),T(this,Ai,!1),c(this,Je).hidden=!1)}get isVisible(){return c(this,Je).hidden===!1}}eo=new WeakMap,$u=new WeakMap,zu=new WeakMap,to=new WeakMap,yi=new WeakMap,Je=new WeakMap,Ln=new WeakMap,_i=new WeakMap,Nc=new WeakMap,Ic=new WeakMap,so=new WeakMap,Nn=new WeakMap,Cs=new WeakMap,In=new WeakMap,Mc=new WeakMap,Mn=new WeakMap,Dc=new WeakMap,wi=new WeakMap,Ai=new WeakMap,no=new WeakSet,xd=function(){const e=c(this,Mn),t=c(this,Ln);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,Mn).html||null},Fc=new WeakSet,Sm=function(){var e,t,s;return((s=(t=(e=c(this,no,xd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},Hu=new WeakSet,Ky=function(){var e,t,s;return((s=(t=(e=c(this,no,xd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},Uu=new WeakSet,Zy=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},n={style:{color:c(this,Hu,Ky),fontSize:c(this,Fc,Sm)?`calc(${c(this,Fc,Sm)}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:n});return s},Wu=new WeakSet,Jy=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,Nn))&&P(this,ro,Cd).call(this)},Vu=new WeakSet,Qy=function(){if(c(this,In)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:n,pageY:r}}}=c(this,Ic);let a=!!c(this,so),o=a?c(this,so):c(this,Mc);for(const m of c(this,Nc))if(!o||ve.intersect(m.data.rect,o)!==null){o=m.data.rect,a=!0;break}const l=ve.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=a?o[2]-o[0]+5:0,u=l[0]+d,f=l[1];T(this,In,[100*(u-n)/t,100*(f-r)/s]);const{style:p}=c(this,Je);p.left=`${c(this,In)[0]}%`,p.top=`${c(this,In)[1]}%`},ro=new WeakSet,Cd=function(){T(this,Nn,!c(this,Nn)),c(this,Nn)?(P(this,io,Td).call(this),c(this,Je).addEventListener("click",c(this,to)),c(this,Je).addEventListener("keydown",c(this,eo))):(P(this,Oc,xm).call(this),c(this,Je).removeEventListener("click",c(this,to)),c(this,Je).removeEventListener("keydown",c(this,eo)))},io=new WeakSet,Td=function(){c(this,Cs)||this.render(),this.isVisible?c(this,Nn)&&c(this,Je).classList.add("focused"):(P(this,Vu,Qy).call(this),c(this,Je).hidden=!1,c(this,Je).style.zIndex=parseInt(c(this,Je).style.zIndex)+1e3)},Oc=new WeakSet,xm=function(){c(this,Je).classList.remove("focused"),!(c(this,Nn)||!this.isVisible)&&(c(this,Je).hidden=!0,c(this,Je).style.zIndex=parseInt(c(this,Je).style.zIndex)-1e3)};class e0 extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ne.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Bc;class XL extends tt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Bc,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:s,height:n}=qn(t.rect),r=this.svgFactory.create(s,n,!0),a=T(this,Bc,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Bc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bc=new WeakMap;var jc;class YL extends tt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,jc,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:s,height:n}=qn(t.rect),r=this.svgFactory.create(s,n,!0),a=t.borderStyle.width,o=T(this,jc,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",s-a),o.setAttribute("height",n-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,jc)}addHighlightArea(){this.container.classList.add("highlightArea")}}jc=new WeakMap;var $c;class KL extends tt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,$c,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:s,height:n}=qn(t.rect),r=this.svgFactory.create(s,n,!0),a=t.borderStyle.width,o=T(this,$c,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",s/2),o.setAttribute("cy",n/2),o.setAttribute("rx",s/2-a/2),o.setAttribute("ry",n/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,$c)}addHighlightArea(){this.container.classList.add("highlightArea")}}$c=new WeakMap;var zc;class t0 extends tt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,zc,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:s,height:n}=qn(t.rect),r=this.svgFactory.create(s,n,!0);let a=[];for(const l of t.vertices){const h=l.x-t.rect[0],d=t.rect[3]-l.y;a.push(h+","+d)}a=a.join(" ");const o=T(this,zc,this.svgFactory.createElement(this.svgElementName));return o.setAttribute("points",a),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,zc)}addHighlightArea(){this.container.classList.add("highlightArea")}}zc=new WeakMap;class ZL extends t0{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class JL extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Hc;class s0 extends tt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Hc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=Ne.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:s,height:n}=qn(t.rect),r=this.svgFactory.create(s,n,!0);for(const a of t.inkLists){let o=[];for(const h of a){const d=h.x-t.rect[0],u=t.rect[3]-h.y;o.push(`${d},${u}`)}o=o.join(" ");const l=this.svgFactory.createElement(this.svgElementName);c(this,Hc).push(l),l.setAttribute("points",o),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),r.append(l)}return this.container.append(r),this.container}getElementsToTriggerPopup(){return c(this,Hc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hc=new WeakMap;class QL extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class e2 extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class t2 extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class s2 extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class n0 extends tt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Uc,Wc,Cm;class n2 extends tt{constructor(t){var n;super(t,{isRenderable:!0});A(this,Wc);A(this,Uc,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",P(this,Wc,Cm).bind(this)),T(this,Uc,n);const{isMac:r}=Yt.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&P(this,Wc,Cm).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return c(this,Uc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Uc=new WeakMap,Wc=new WeakSet,Cm=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Vc,ki,ao,qu,r0,qc,Tm,nv;let r2=(nv=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:a}){A(this,qu);A(this,qc);A(this,Vc,null);A(this,ki,null);A(this,ao,new Map);this.div=e,T(this,Vc,t),T(this,ki,s),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=n}async render(e){var a;const{annotations:t}=e,s=this.div;Yi(s,this.viewport);const n=new Map,r={data:null,layer:s,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new gg,annotationStorage:e.annotationStorage||new wg,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===ot.POPUP;if(l){const u=n.get(o.id);if(!u)continue;r.elements=u}else{const{width:u,height:f}=qn(o.rect);if(u<=0||f<=0)continue}r.data=o;const h=$L.create(r);if(!h.isRenderable)continue;if(!l&&o.popupRef){const u=n.get(o.popupRef);u?u.push(h):n.set(o.popupRef,[h])}const d=h.render();o.hidden&&(d.style.visibility="hidden"),P(this,qu,r0).call(this,d,o.id),h.annotationEditorType>0&&(c(this,ao).set(h.data.id,h),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(h))}P(this,qc,Tm).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Yi(t,{rotation:e.rotation}),P(this,qc,Tm).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,ao).values())}getEditableAnnotation(e){return c(this,ao).get(e)}},Vc=new WeakMap,ki=new WeakMap,ao=new WeakMap,qu=new WeakSet,r0=function(e,t){var n;const s=e.firstChild||e;s.id=`${Qv}${t}`,this.div.append(e),(n=c(this,Vc))==null||n.moveElementInDOM(this.div,e,s,!1)},qc=new WeakSet,Tm=function(){if(!c(this,ki))return;const e=this.div;for(const[t,s]of c(this,ki)){const n=e.querySelector(`[data-annotation-id="${t}"]`);if(!n)continue;s.className="annotationContent";const{firstChild:r}=n;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):n.append(s)}c(this,ki).clear()},nv);const ud=/\r\n?|\n/g;var Gc,Xc,Yc,Kc,Zc,Ts,ss,Jc,ns,oo,Gu,i0,Xu,a0,Yu,o0,lo,Pd,co,Rd,ho,Ld,Ku,l0,Qc,Rm,Zu,c0;const We=class We extends Oe{constructor(t){super({...t,name:"freeTextEditor"});A(this,Gu);A(this,Xu);A(this,Yu);A(this,lo);A(this,ho);A(this,Ku);A(this,Zu);A(this,Gc,this.editorDivBlur.bind(this));A(this,Xc,this.editorDivFocus.bind(this));A(this,Yc,this.editorDivInput.bind(this));A(this,Kc,this.editorDivKeydown.bind(this));A(this,Zc,this.editorDivPaste.bind(this));A(this,Ts,void 0);A(this,ss,"");A(this,Jc,`${this.id}-editor`);A(this,ns,void 0);A(this,oo,null);T(this,Ts,t.color||We._defaultColor||Oe._defaultLineColor),T(this,ns,t.fontSize||We._defaultFontSize)}static get _keyboardManager(){const t=We.prototype,s=a=>a.isEmpty(),n=Ki.TRANSLATE_SMALL,r=Ki.TRANSLATE_BIG;return Me(this,"_keyboardManager",new Gh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(t,s){Oe.initialize(t,s,{strings:["pdfjs-free-text-default-content"]});const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case Se.FREETEXT_SIZE:We._defaultFontSize=s;break;case Se.FREETEXT_COLOR:We._defaultColor=s;break}}updateParams(t,s){switch(t){case Se.FREETEXT_SIZE:P(this,Gu,i0).call(this,s);break;case Se.FREETEXT_COLOR:P(this,Xu,a0).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Se.FREETEXT_SIZE,We._defaultFontSize],[Se.FREETEXT_COLOR,We._defaultColor||Oe._defaultLineColor]]}get propertiesToUpdate(){return[[Se.FREETEXT_SIZE,c(this,ns)],[Se.FREETEXT_COLOR,c(this,Ts)]]}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-We._internalPadding*t,-(We._internalPadding+c(this,ns))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(Ne.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",c(this,Kc)),this.editorDiv.addEventListener("focus",c(this,Xc)),this.editorDiv.addEventListener("blur",c(this,Gc)),this.editorDiv.addEventListener("input",c(this,Yc)),this.editorDiv.addEventListener("paste",c(this,Zc)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Jc)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",c(this,Kc)),this.editorDiv.removeEventListener("focus",c(this,Xc)),this.editorDiv.removeEventListener("blur",c(this,Gc)),this.editorDiv.removeEventListener("input",c(this,Yc)),this.editorDiv.removeEventListener("paste",c(this,Zc)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,ss),s=T(this,ss,P(this,Yu,o0).call(this).trimEnd());if(t===s)return;const n=r=>{if(T(this,ss,r),!r){this.remove();return}P(this,ho,Ld).call(this),this._uiManager.rebuild(this),P(this,lo,Pd).call(this)};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(t)},mustExec:!1}),P(this,lo,Pd).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){We._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Jc)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Oe._l10nPromise.get("pdfjs-free-text-default-content").then(r=>{var a;return(a=this.editorDiv)==null?void 0:a.setAttribute("default-content",r)}),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${c(this,ns)}px * var(--scale-factor))`,n.color=c(this,Ts),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Wd(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=c(this,oo);let[l,h]=this.getInitialTranslation();[l,h]=this.pageTranslationToScreen(l,h);const[d,u]=this.pageDimensions,[f,p]=this.pageTranslation;let m,g;switch(this.rotation){case 0:m=t+(o[0]-f)/d,g=s+this.height-(o[1]-p)/u;break;case 90:m=t+(o[0]-f)/d,g=s-(o[1]-p)/u,[l,h]=[h,-l];break;case 180:m=t-this.width+(o[0]-f)/d,g=s-(o[1]-p)/u,[l,h]=[-l,-h];break;case 270:m=t+(o[0]-f-this.height*u)/d,g=s+(o[1]-p-this.width*d)/u,[l,h]=[-h,l];break}this.setAt(m*r,g*a,l,h)}else this.setAt(t*r,s*a,this.width*r,this.height*a);P(this,ho,Ld).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,g,v;const s=t.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const r=P(m=We,Qc,Rm).call(m,s.getData("text")||"").replaceAll(ud,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:h}=o,d=[],u=[];if(l.nodeType===Node.TEXT_NODE){const b=l.parentElement;if(u.push(l.nodeValue.slice(h).replaceAll(ud,"")),b!==this.editorDiv){let y=d;for(const E of this.editorDiv.childNodes){if(E===b){y=u;continue}y.push(P(g=We,co,Rd).call(g,E))}}d.push(l.nodeValue.slice(0,h).replaceAll(ud,""))}else if(l===this.editorDiv){let b=d,y=0;for(const E of this.editorDiv.childNodes)y++===h&&(b=u),b.push(P(v=We,co,Rd).call(v,E))}T(this,ss,`${d.join(`
`)}${r}${u.join(`
`)}`),P(this,ho,Ld).call(this);const f=new Range;let p=d.reduce((b,y)=>b+y.length,0);for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const y=b.nodeValue.length;if(p<=y){f.setStart(b,p),f.setEnd(b,p);break}p-=y}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static deserialize(t,s,n){var o;let r=null;if(t instanceof e0){const{data:{defaultAppearanceData:{fontSize:l,fontColor:h},rect:d,rotation:u,id:f},textContent:p,textPosition:m,parent:{page:{pageNumber:g}}}=t;if(!p||p.length===0)return null;r=t={annotationType:Ne.FREETEXT,color:Array.from(h),fontSize:l,value:p.join(`
`),position:m,pageIndex:g-1,rect:d.slice(0),rotation:u,id:f,deleted:!1}}const a=super.deserialize(t,s,n);return T(a,ns,t.fontSize),T(a,Ts,ve.makeHexColor(...t.color)),T(a,ss,P(o=We,Qc,Rm).call(o,t.value)),a.annotationElementId=t.id||null,T(a,oo,r),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const s=We._internalPadding*this.parentScale,n=this.getRect(s,s),r=Oe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Ts)),a={annotationType:Ne.FREETEXT,color:r,fontSize:c(this,ns),value:P(this,Ku,l0).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!P(this,Zu,c0).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${c(this,ns)}px * var(--scale-factor))`,n.color=c(this,Ts),s.replaceChildren();for(const a of c(this,ss).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),s.append(o)}const r=We._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(r,r),popupContent:c(this,ss)}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Gc=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,Kc=new WeakMap,Zc=new WeakMap,Ts=new WeakMap,ss=new WeakMap,Jc=new WeakMap,ns=new WeakMap,oo=new WeakMap,Gu=new WeakSet,i0=function(t){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-c(this,ns))*this.parentScale),T(this,ns,r),P(this,lo,Pd).call(this)},n=c(this,ns);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Xu=new WeakSet,a0=function(t){const s=r=>{T(this,Ts,this.editorDiv.style.color=r)},n=c(this,Ts);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Yu=new WeakSet,o0=function(){var s;const t=[];this.editorDiv.normalize();for(const n of this.editorDiv.childNodes)t.push(P(s=We,co,Rd).call(s,n));return t.join(`
`)},lo=new WeakSet,Pd=function(){const[t,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),n=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/s):(this.width=n.height/t,this.height=n.width/s),this.fixAndSetPosition()},co=new WeakSet,Rd=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(ud,"")},ho=new WeakSet,Ld=function(){if(this.editorDiv.replaceChildren(),!!c(this,ss))for(const t of c(this,ss).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},Ku=new WeakSet,l0=function(){return c(this,ss).replaceAll(" "," ")},Qc=new WeakSet,Rm=function(t){return t.replaceAll(" "," ")},Zu=new WeakSet,c0=function(t){const{value:s,fontSize:n,color:r,pageIndex:a}=c(this,oo);return this._hasBeenMoved||t.value!==s||t.fontSize!==n||t.color.some((o,l)=>o!==r[l])||t.pageIndex!==a},A(We,co),A(We,Qc),xe(We,"_freeTextDefaultContent",""),xe(We,"_internalPadding",0),xe(We,"_defaultColor",null),xe(We,"_defaultFontSize",10),xe(We,"_type","freetext"),xe(We,"_editorType",Ne.FREETEXT);let Pm=We;var eh,pr,Ps,Ju,h0,uo,Nd,Qu,d0,ef,u0,th,Nm;class Lm{constructor(e,t=0,s=0,n=!0){A(this,Ju);A(this,uo);A(this,Qu);A(this,ef);A(this,th);A(this,eh,void 0);A(this,pr,[]);A(this,Ps,[]);let r=1/0,a=-1/0,o=1/0,l=-1/0;const d=10**-4;for(const{x:b,y,width:E,height:C}of e){const R=Math.floor((b-t)/d)*d,M=Math.ceil((b+E+t)/d)*d,D=Math.floor((y-t)/d)*d,x=Math.ceil((y+C+t)/d)*d,S=[R,D,x,!0],F=[M,D,x,!1];c(this,pr).push(S,F),r=Math.min(r,R),a=Math.max(a,M),o=Math.min(o,D),l=Math.max(l,x)}const u=a-r+2*s,f=l-o+2*s,p=r-s,m=o-s,g=c(this,pr).at(n?-1:-2),v=[g[0],g[2]];for(const b of c(this,pr)){const[y,E,C]=b;b[0]=(y-p)/u,b[1]=(E-m)/f,b[2]=(C-m)/f}T(this,eh,{x:p,y:m,width:u,height:f,lastPoint:v})}getOutlines(){c(this,pr).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of c(this,pr))t[3]?(e.push(...P(this,th,Nm).call(this,t)),P(this,Qu,d0).call(this,t)):(P(this,ef,u0).call(this,t),e.push(...P(this,th,Nm).call(this,t)));return P(this,Ju,h0).call(this,e)}}eh=new WeakMap,pr=new WeakMap,Ps=new WeakMap,Ju=new WeakSet,h0=function(e){const t=[],s=new Set;for(const a of e){const[o,l,h]=a;t.push([o,l,a],[o,h,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],h=t[a+1][2];l.push(h),h.push(l),s.add(l),s.add(h)}const n=[];let r;for(;s.size>0;){const a=s.values().next().value;let[o,l,h,d,u]=a;s.delete(a);let f=o,p=l;for(r=[o,h],n.push(r);;){let m;if(s.has(d))m=d;else if(s.has(u))m=u;else break;s.delete(m),[o,l,h,d,u]=m,f!==o&&(r.push(f,p,o,p===l?l:h),f=o),p=p===l?h:l}r.push(f,p)}return new i2(n,c(this,eh))},uo=new WeakSet,Nd=function(e){const t=c(this,Ps);let s=0,n=t.length-1;for(;s<=n;){const r=s+n>>1,a=t[r][0];if(a===e)return r;a<e?s=r+1:n=r-1}return n+1},Qu=new WeakSet,d0=function([,e,t]){const s=P(this,uo,Nd).call(this,e);c(this,Ps).splice(s,0,[e,t])},ef=new WeakSet,u0=function([,e,t]){const s=P(this,uo,Nd).call(this,e);for(let n=s;n<c(this,Ps).length;n++){const[r,a]=c(this,Ps)[n];if(r!==e)break;if(r===e&&a===t){c(this,Ps).splice(n,1);return}}for(let n=s-1;n>=0;n--){const[r,a]=c(this,Ps)[n];if(r!==e)break;if(r===e&&a===t){c(this,Ps).splice(n,1);return}}},th=new WeakSet,Nm=function(e){const[t,s,n]=e,r=[[t,s,n]],a=P(this,uo,Nd).call(this,n);for(let o=0;o<a;o++){const[l,h]=c(this,Ps)[o];for(let d=0,u=r.length;d<u;d++){const[,f,p]=r[d];if(!(h<=f||p<=l)){if(f>=l){if(p>h)r[d][1]=h;else{if(u===1)return[];r.splice(d,1),d--,u--}continue}r[d][2]=l,p>h&&r.push([t,h,p])}}}return r};class f0{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof Mm}}var sh,fo;class i2 extends f0{constructor(t,s){super();A(this,sh,void 0);A(this,fo,void 0);T(this,fo,t),T(this,sh,s)}toSVGPath(){const t=[];for(const s of c(this,fo)){let[n,r]=s;t.push(`M${n} ${r}`);for(let a=2;a<s.length;a+=2){const o=s[a],l=s[a+1];o===n?(t.push(`V${l}`),r=l):l===r&&(t.push(`H${o}`),n=o)}t.push("Z")}return t.join(" ")}serialize([t,s,n,r],a){const o=[],l=n-t,h=r-s;for(const d of c(this,fo)){const u=new Array(d.length);for(let f=0;f<d.length;f+=2)u[f]=t+d[f]*l,u[f+1]=r-d[f+1]*h;o.push(u)}return o}get box(){return c(this,sh)}}sh=new WeakMap,fo=new WeakMap;var Xs,Dn,po,mo,Ys,Le,Ei,Si,nh,rh,go,bo,mr,ih,tf,sf,ah,Im;const mn=class mn{constructor({x:e,y:t},s,n,r,a,o=0){A(this,ah);A(this,Xs,void 0);A(this,Dn,[]);A(this,po,void 0);A(this,mo,void 0);A(this,Ys,[]);A(this,Le,new Float64Array(18));A(this,Ei,void 0);A(this,Si,void 0);A(this,nh,void 0);A(this,rh,void 0);A(this,go,void 0);A(this,bo,void 0);A(this,mr,[]);T(this,Xs,s),T(this,bo,r*n),T(this,mo,a),c(this,Le).set([NaN,NaN,NaN,NaN,e,t],6),T(this,po,o),T(this,rh,c(mn,ih)*n),T(this,nh,c(mn,sf)*n),T(this,go,n),c(this,mr).push(e,t)}get free(){return!0}isEmpty(){return isNaN(c(this,Le)[8])}add({x:e,y:t}){var S;T(this,Ei,e),T(this,Si,t);const[s,n,r,a]=c(this,Xs);let[o,l,h,d]=c(this,Le).subarray(8,12);const u=e-h,f=t-d,p=Math.hypot(u,f);if(p<c(this,nh))return!1;const m=p-c(this,rh),g=m/p,v=g*u,b=g*f;let y=o,E=l;o=h,l=d,h+=v,d+=b,(S=c(this,mr))==null||S.push(e,t);const C=-b/m,R=v/m,M=C*c(this,bo),D=R*c(this,bo);return c(this,Le).set(c(this,Le).subarray(2,8),0),c(this,Le).set([h+M,d+D],4),c(this,Le).set(c(this,Le).subarray(14,18),12),c(this,Le).set([h-M,d-D],16),isNaN(c(this,Le)[6])?(c(this,Ys).length===0&&(c(this,Le).set([o+M,l+D],2),c(this,Ys).push(NaN,NaN,NaN,NaN,(o+M-s)/r,(l+D-n)/a),c(this,Le).set([o-M,l-D],14),c(this,Dn).push(NaN,NaN,NaN,NaN,(o-M-s)/r,(l-D-n)/a)),c(this,Le).set([y,E,o,l,h,d],6),!this.isEmpty()):(c(this,Le).set([y,E,o,l,h,d],6),Math.abs(Math.atan2(E-l,y-o)-Math.atan2(b,v))<Math.PI/2?([o,l,h,d]=c(this,Le).subarray(2,6),c(this,Ys).push(NaN,NaN,NaN,NaN,((o+h)/2-s)/r,((l+d)/2-n)/a),[o,l,y,E]=c(this,Le).subarray(14,18),c(this,Dn).push(NaN,NaN,NaN,NaN,((y+o)/2-s)/r,((E+l)/2-n)/a),!0):([y,E,o,l,h,d]=c(this,Le).subarray(0,6),c(this,Ys).push(((y+5*o)/6-s)/r,((E+5*l)/6-n)/a,((5*o+h)/6-s)/r,((5*l+d)/6-n)/a,((o+h)/2-s)/r,((l+d)/2-n)/a),[h,d,o,l,y,E]=c(this,Le).subarray(12,18),c(this,Dn).push(((y+5*o)/6-s)/r,((E+5*l)/6-n)/a,((5*o+h)/6-s)/r,((5*l+d)/6-n)/a,((o+h)/2-s)/r,((l+d)/2-n)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,Ys),t=c(this,Dn),s=c(this,Le).subarray(4,6),n=c(this,Le).subarray(16,18),[r,a,o,l]=c(this,Xs),[h,d,u,f]=P(this,ah,Im).call(this);if(isNaN(c(this,Le)[6])&&!this.isEmpty())return`M${(c(this,Le)[2]-r)/o} ${(c(this,Le)[3]-a)/l} L${(c(this,Le)[4]-r)/o} ${(c(this,Le)[5]-a)/l} L${h} ${d} L${u} ${f} L${(c(this,Le)[16]-r)/o} ${(c(this,Le)[17]-a)/l} L${(c(this,Le)[14]-r)/o} ${(c(this,Le)[15]-a)/l} Z`;const p=[];p.push(`M${e[4]} ${e[5]}`);for(let m=6;m<e.length;m+=6)isNaN(e[m])?p.push(`L${e[m+4]} ${e[m+5]}`):p.push(`C${e[m]} ${e[m+1]} ${e[m+2]} ${e[m+3]} ${e[m+4]} ${e[m+5]}`);p.push(`L${(s[0]-r)/o} ${(s[1]-a)/l} L${h} ${d} L${u} ${f} L${(n[0]-r)/o} ${(n[1]-a)/l}`);for(let m=t.length-6;m>=6;m-=6)isNaN(t[m])?p.push(`L${t[m+4]} ${t[m+5]}`):p.push(`C${t[m]} ${t[m+1]} ${t[m+2]} ${t[m+3]} ${t[m+4]} ${t[m+5]}`);return p.push(`L${t[4]} ${t[5]} Z`),p.join(" ")}getOutlines(){var b;const e=c(this,Ys),t=c(this,Dn),s=c(this,Le),n=s.subarray(4,6),r=s.subarray(16,18),[a,o,l,h]=c(this,Xs),d=new Float64Array((((b=c(this,mr))==null?void 0:b.length)??0)+2);for(let y=0,E=d.length-2;y<E;y+=2)d[y]=(c(this,mr)[y]-a)/l,d[y+1]=(c(this,mr)[y+1]-o)/h;d[d.length-2]=(c(this,Ei)-a)/l,d[d.length-1]=(c(this,Si)-o)/h;const[u,f,p,m]=P(this,ah,Im).call(this);if(isNaN(s[6])&&!this.isEmpty()){const y=new Float64Array(36);return y.set([NaN,NaN,NaN,NaN,(s[2]-a)/l,(s[3]-o)/h,NaN,NaN,NaN,NaN,(s[4]-a)/l,(s[5]-o)/h,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(s[16]-a)/l,(s[17]-o)/h,NaN,NaN,NaN,NaN,(s[14]-a)/l,(s[15]-o)/h],0),new Mm(y,d,c(this,Xs),c(this,go),c(this,po),c(this,mo))}const g=new Float64Array(c(this,Ys).length+24+c(this,Dn).length);let v=e.length;for(let y=0;y<v;y+=2){if(isNaN(e[y])){g[y]=g[y+1]=NaN;continue}g[y]=e[y],g[y+1]=e[y+1]}g.set([NaN,NaN,NaN,NaN,(n[0]-a)/l,(n[1]-o)/h,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(r[0]-a)/l,(r[1]-o)/h],v),v+=24;for(let y=t.length-6;y>=6;y-=6)for(let E=0;E<6;E+=2){if(isNaN(t[y+E])){g[v]=g[v+1]=NaN,v+=2;continue}g[v]=t[y+E],g[v+1]=t[y+E+1],v+=2}return g.set([NaN,NaN,NaN,NaN,t[4],t[5]],v),new Mm(g,d,c(this,Xs),c(this,go),c(this,po),c(this,mo))}};Xs=new WeakMap,Dn=new WeakMap,po=new WeakMap,mo=new WeakMap,Ys=new WeakMap,Le=new WeakMap,Ei=new WeakMap,Si=new WeakMap,nh=new WeakMap,rh=new WeakMap,go=new WeakMap,bo=new WeakMap,mr=new WeakMap,ih=new WeakMap,tf=new WeakMap,sf=new WeakMap,ah=new WeakSet,Im=function(){const e=c(this,Le).subarray(4,6),t=c(this,Le).subarray(16,18),[s,n,r,a]=c(this,Xs);return[(c(this,Ei)+(e[0]-t[0])/2-s)/r,(c(this,Si)+(e[1]-t[1])/2-n)/a,(c(this,Ei)+(t[0]-e[0])/2-s)/r,(c(this,Si)+(t[1]-e[1])/2-n)/a]},A(mn,ih,8),A(mn,tf,2),A(mn,sf,c(mn,ih)+c(mn,tf));let Xd=mn;var vo,xi,Fn,oh,rs,lh,Qe,Ci,ol,Ti,ll,nf,p0;class Mm extends f0{constructor(t,s,n,r,a,o){super();A(this,Ci);A(this,Ti);A(this,nf);A(this,vo,void 0);A(this,xi,null);A(this,Fn,void 0);A(this,oh,void 0);A(this,rs,void 0);A(this,lh,void 0);A(this,Qe,void 0);T(this,Qe,t),T(this,rs,s),T(this,vo,n),T(this,lh,r),T(this,Fn,a),T(this,oh,o),P(this,nf,p0).call(this,o);const{x:l,y:h,width:d,height:u}=c(this,xi);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-l)/d,t[f+1]=(t[f+1]-h)/u;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-l)/d,s[f+1]=(s[f+1]-h)/u}toSVGPath(){const t=[`M${c(this,Qe)[4]} ${c(this,Qe)[5]}`];for(let s=6,n=c(this,Qe).length;s<n;s+=6){if(isNaN(c(this,Qe)[s])){t.push(`L${c(this,Qe)[s+4]} ${c(this,Qe)[s+5]}`);continue}t.push(`C${c(this,Qe)[s]} ${c(this,Qe)[s+1]} ${c(this,Qe)[s+2]} ${c(this,Qe)[s+3]} ${c(this,Qe)[s+4]} ${c(this,Qe)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,n,r],a){const o=n-t,l=r-s;let h,d;switch(a){case 0:h=P(this,Ci,ol).call(this,c(this,Qe),t,r,o,-l),d=P(this,Ci,ol).call(this,c(this,rs),t,r,o,-l);break;case 90:h=P(this,Ti,ll).call(this,c(this,Qe),t,s,o,l),d=P(this,Ti,ll).call(this,c(this,rs),t,s,o,l);break;case 180:h=P(this,Ci,ol).call(this,c(this,Qe),n,s,-o,l),d=P(this,Ci,ol).call(this,c(this,rs),n,s,-o,l);break;case 270:h=P(this,Ti,ll).call(this,c(this,Qe),n,r,-o,-l),d=P(this,Ti,ll).call(this,c(this,rs),n,r,-o,-l);break}return{outline:Array.from(h),points:[Array.from(d)]}}get box(){return c(this,xi)}getNewOutline(t,s){const{x:n,y:r,width:a,height:o}=c(this,xi),[l,h,d,u]=c(this,vo),f=a*d,p=o*u,m=n*d+l,g=r*u+h,v=new Xd({x:c(this,rs)[0]*f+m,y:c(this,rs)[1]*p+g},c(this,vo),c(this,lh),t,c(this,oh),s??c(this,Fn));for(let b=2;b<c(this,rs).length;b+=2)v.add({x:c(this,rs)[b]*f+m,y:c(this,rs)[b+1]*p+g});return v.getOutlines()}}vo=new WeakMap,xi=new WeakMap,Fn=new WeakMap,oh=new WeakMap,rs=new WeakMap,lh=new WeakMap,Qe=new WeakMap,Ci=new WeakSet,ol=function(t,s,n,r,a){const o=new Float64Array(t.length);for(let l=0,h=t.length;l<h;l+=2)o[l]=s+t[l]*r,o[l+1]=n+t[l+1]*a;return o},Ti=new WeakSet,ll=function(t,s,n,r,a){const o=new Float64Array(t.length);for(let l=0,h=t.length;l<h;l+=2)o[l]=s+t[l+1]*r,o[l+1]=n+t[l]*a;return o},nf=new WeakSet,p0=function(t){const s=c(this,Qe);let n=s[4],r=s[5],a=n,o=r,l=n,h=r,d=n,u=r;const f=t?Math.max:Math.min;for(let b=6,y=s.length;b<y;b+=6){if(isNaN(s[b]))a=Math.min(a,s[b+4]),o=Math.min(o,s[b+5]),l=Math.max(l,s[b+4]),h=Math.max(h,s[b+5]),u<s[b+5]?(d=s[b+4],u=s[b+5]):u===s[b+5]&&(d=f(d,s[b+4]));else{const E=ve.bezierBoundingBox(n,r,...s.slice(b,b+6));a=Math.min(a,E[0]),o=Math.min(o,E[1]),l=Math.max(l,E[2]),h=Math.max(h,E[3]),u<E[3]?(d=E[2],u=E[3]):u===E[3]&&(d=f(d,E[2]))}n=s[b+4],r=s[b+5]}const p=a-c(this,Fn),m=o-c(this,Fn),g=l-a+2*c(this,Fn),v=h-o+2*c(this,Fn);T(this,xi,{x:p,y:m,width:g,height:v,lastPoint:[d,u]})};var ch,hh,Rs,Pi,yo,ct,dh,_o,uh,fh,gr,wo,ph,Dm,mh,Fm,rf,g0,On,Or,af,b0,Ks,Kn,Is;let m0=(Is=class{constructor({editor:e=null,uiManager:t=null}){A(this,ph);A(this,mh);A(this,rf);A(this,On);A(this,af);A(this,Ks);A(this,ch,P(this,rf,g0).bind(this));A(this,hh,P(this,af,b0).bind(this));A(this,Rs,null);A(this,Pi,null);A(this,yo,void 0);A(this,ct,null);A(this,dh,!1);A(this,_o,!1);A(this,uh,null);A(this,fh,void 0);A(this,gr,null);A(this,wo,void 0);var s;e?(T(this,_o,!1),T(this,wo,Se.HIGHLIGHT_COLOR),T(this,uh,e)):(T(this,_o,!0),T(this,wo,Se.HIGHLIGHT_DEFAULT_COLOR)),T(this,gr,(e==null?void 0:e._uiManager)||t),T(this,fh,c(this,gr)._eventBus),T(this,yo,(e==null?void 0:e.color)||((s=c(this,gr))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Me(this,"_keyboardManager",new Gh([[["Escape","mac+Escape"],Is.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Is.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Is.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Is.prototype._moveToPrevious],[["Home","mac+Home"],Is.prototype._moveToBeginning],[["End","mac+End"],Is.prototype._moveToEnd]]))}renderButton(){const e=T(this,Rs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0),e.addEventListener("click",P(this,On,Or).bind(this)),e.addEventListener("keydown",c(this,ch));const t=T(this,Pi,document.createElement("span"));return t.className="swatch",t.setAttribute("aria-hidden",!0),t.style.backgroundColor=c(this,yo),e.append(t),e}renderMainDropdown(){const e=T(this,ct,P(this,ph,Dm).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(this,Rs)){P(this,On,Or).call(this,e);return}const t=e.target.getAttribute("data-color");t&&P(this,mh,Fm).call(this,t,e)}_moveToNext(e){var t,s;if(!c(this,Ks,Kn)){P(this,On,Or).call(this,e);return}if(e.target===c(this,Rs)){(t=c(this,ct).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=c(this,ct))==null?void 0:t.firstChild)||e.target===c(this,Rs)){c(this,Ks,Kn)&&this._hideDropdownFromKeyboard();return}c(this,Ks,Kn)||P(this,On,Or).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!c(this,Ks,Kn)){P(this,On,Or).call(this,e);return}(t=c(this,ct).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Ks,Kn)){P(this,On,Or).call(this,e);return}(t=c(this,ct).lastChild)==null||t.focus()}hideDropdown(){var e;(e=c(this,ct))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",c(this,hh))}_hideDropdownFromKeyboard(){var e;if(!c(this,_o)){if(!c(this,Ks,Kn)){(e=c(this,uh))==null||e.unselect();return}this.hideDropdown(),c(this,Rs).focus({preventScroll:!0,focusVisible:c(this,dh)})}}updateColor(e){if(c(this,Pi)&&(c(this,Pi).style.backgroundColor=e),!c(this,ct))return;const t=c(this,gr).highlightColors.values();for(const s of c(this,ct).children)s.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=c(this,Rs))==null||e.remove(),T(this,Rs,null),T(this,Pi,null),(t=c(this,ct))==null||t.remove(),T(this,ct,null)}},ch=new WeakMap,hh=new WeakMap,Rs=new WeakMap,Pi=new WeakMap,yo=new WeakMap,ct=new WeakMap,dh=new WeakMap,_o=new WeakMap,uh=new WeakMap,fh=new WeakMap,gr=new WeakMap,wo=new WeakMap,ph=new WeakSet,Dm=function(){const e=document.createElement("div");e.addEventListener("contextmenu",Kt),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[t,s]of c(this,gr).highlightColors){const n=document.createElement("button");n.tabIndex="0",n.role="option",n.setAttribute("data-color",s),n.title=t,n.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${t}`);const r=document.createElement("span");n.append(r),r.className="swatch",r.style.backgroundColor=s,n.setAttribute("aria-selected",s===c(this,yo)),n.addEventListener("click",P(this,mh,Fm).bind(this,s)),e.append(n)}return e.addEventListener("keydown",c(this,ch)),e},mh=new WeakSet,Fm=function(e,t){t.stopPropagation(),c(this,fh).dispatch("switchannotationeditorparams",{source:this,type:c(this,wo),value:e})},rf=new WeakSet,g0=function(e){Is._keyboardManager.exec(this,e)},On=new WeakSet,Or=function(e){if(c(this,Ks,Kn)){this.hideDropdown();return}if(T(this,dh,e.detail===0),window.addEventListener("pointerdown",c(this,hh)),c(this,ct)){c(this,ct).classList.remove("hidden");return}const t=T(this,ct,P(this,ph,Dm).call(this));c(this,Rs).append(t)},af=new WeakSet,b0=function(e){var t;(t=c(this,ct))!=null&&t.contains(e.target)||this.hideDropdown()},Ks=new WeakSet,Kn=function(){return c(this,ct)&&!c(this,ct).classList.contains("hidden")},Is);var Ao,gh,br,Ri,ko,ms,bh,vh,Li,Ls,Ft,is,of,Eo,Ni,ht,So,Zs,yh,_h,Om,wh,Bm,lf,v0,cf,y0,hf,_0,Ah,jm,Ii,cl,vr,pa,df,w0,xo,Id,Mi,hl,uf,A0,ff,k0,pf,E0,mf,S0;const Ie=class Ie extends Oe{constructor(t){super({...t,name:"highlightEditor"});A(this,_h);A(this,wh);A(this,lf);A(this,cf);A(this,hf);A(this,Ah);A(this,Ii);A(this,df);A(this,xo);A(this,Mi);A(this,uf);A(this,ff);A(this,Ao,null);A(this,gh,0);A(this,br,void 0);A(this,Ri,null);A(this,ko,null);A(this,ms,null);A(this,bh,null);A(this,vh,0);A(this,Li,null);A(this,Ls,null);A(this,Ft,null);A(this,is,!1);A(this,of,P(this,df,w0).bind(this));A(this,Eo,null);A(this,Ni,void 0);A(this,ht,null);A(this,So,"");A(this,Zs,void 0);A(this,yh,"");this.color=t.color||Ie._defaultColor,T(this,Zs,t.thickness||Ie._defaultThickness),T(this,Ni,t.opacity||Ie._defaultOpacity),T(this,br,t.boxes||null),T(this,yh,t.methodOfCreation||""),T(this,So,t.text||""),this._isDraggable=!1,t.highlightId>-1?(T(this,is,!0),P(this,wh,Bm).call(this,t),P(this,Ii,cl).call(this)):(T(this,Ao,t.anchorNode),T(this,gh,t.anchorOffset),T(this,bh,t.focusNode),T(this,vh,t.focusOffset),P(this,_h,Om).call(this),P(this,Ii,cl).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=Ie.prototype;return Me(this,"_keyboardManager",new Gh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,is)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,Zs),methodOfCreation:c(this,yh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var n;Oe.initialize(t,s),Ie._defaultColor||(Ie._defaultColor=((n=s.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case Se.HIGHLIGHT_DEFAULT_COLOR:Ie._defaultColor=s;break;case Se.HIGHLIGHT_THICKNESS:Ie._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return c(this,Eo)}updateParams(t,s){switch(t){case Se.HIGHLIGHT_COLOR:P(this,lf,v0).call(this,s);break;case Se.HIGHLIGHT_THICKNESS:P(this,cf,y0).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Se.HIGHLIGHT_DEFAULT_COLOR,Ie._defaultColor],[Se.HIGHLIGHT_THICKNESS,Ie._defaultThickness]]}get propertiesToUpdate(){return[[Se.HIGHLIGHT_COLOR,this.color||Ie._defaultColor],[Se.HIGHLIGHT_THICKNESS,c(this,Zs)||Ie._defaultThickness],[Se.HIGHLIGHT_FREE,c(this,is)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(T(this,ko,new m0({editor:this})),t.addColorPicker(c(this,ko))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(P(this,Mi,hl).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,P(this,Mi,hl).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){P(this,Ah,jm).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(P(this,Ii,cl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var n;let s=!1;this.parent&&!t?P(this,Ah,jm).call(this):t&&(P(this,Ii,cl).call(this,t),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var r,a,o;const{drawLayer:s}=this.parent;let n;c(this,is)?(t=(t-this.rotation+360)%360,n=P(r=Ie,vr,pa).call(r,c(this,Ls).box,t)):n=P(a=Ie,vr,pa).call(a,this,t),s.rotate(c(this,Ft),t),s.rotate(c(this,ht),t),s.updateBox(c(this,Ft),n),s.updateBox(c(this,ht),P(o=Ie,vr,pa).call(o,c(this,ms).box,t))}render(){if(this.div)return this.div;const t=super.render();c(this,So)&&(t.setAttribute("aria-label",c(this,So)),t.setAttribute("role","mark")),c(this,is)?t.classList.add("free"):this.div.addEventListener("keydown",c(this,of));const s=T(this,Li,document.createElement("div"));t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,Ri);const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),Wd(this,c(this,Li),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(c(this,ht),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(c(this,ht),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:P(this,xo,Id).call(this,!0);break;case 1:case 3:P(this,xo,Id).call(this,!1);break}}select(){var t,s;super.select(),c(this,ht)&&((t=this.parent)==null||t.drawLayer.removeClass(c(this,ht),"hovered"),(s=this.parent)==null||s.drawLayer.addClass(c(this,ht),"selected"))}unselect(){var t;super.unselect(),c(this,ht)&&((t=this.parent)==null||t.drawLayer.removeClass(c(this,ht),"selected"),c(this,is)||P(this,xo,Id).call(this,!1))}get _mustFixPosition(){return!c(this,is)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(c(this,Ft),t),this.parent.drawLayer.show(c(this,ht),t))}static startHighlighting(t,s,{target:n,x:r,y:a}){const{x:o,y:l,width:h,height:d}=n.getBoundingClientRect(),u=g=>{P(this,pf,E0).call(this,t,g)},f={capture:!0,passive:!1},p=g=>{g.preventDefault(),g.stopPropagation()},m=g=>{n.removeEventListener("pointermove",u),window.removeEventListener("blur",m),window.removeEventListener("pointerup",m),window.removeEventListener("pointerdown",p,f),window.removeEventListener("contextmenu",Kt),P(this,mf,S0).call(this,t,g)};window.addEventListener("blur",m),window.addEventListener("pointerup",m),window.addEventListener("pointerdown",p,f),window.addEventListener("contextmenu",Kt),n.addEventListener("pointermove",u),this._freeHighlight=new Xd({x:r,y:a},[o,l,h,d],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,s,n){var g;const r=super.deserialize(t,s,n),{rect:[a,o,l,h],color:d,quadPoints:u}=t;r.color=ve.makeHexColor(...d),T(r,Ni,t.opacity);const[f,p]=r.pageDimensions;r.width=(l-a)/f,r.height=(h-o)/p;const m=T(r,br,[]);for(let v=0;v<u.length;v+=8)m.push({x:(u[4]-l)/f,y:(h-(1-u[v+5]))/p,width:(u[v+2]-u[v])/f,height:(u[v+5]-u[v+1])/p});return P(g=r,_h,Om).call(g),r}serialize(t=!1){if(this.isEmpty()||t)return null;const s=this.getRect(0,0),n=Oe._colorManager.convert(this.color);return{annotationType:Ne.HIGHLIGHT,color:n,opacity:c(this,Ni),thickness:c(this,Zs),quadPoints:P(this,uf,A0).call(this),outlines:P(this,ff,k0).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:P(this,Mi,hl).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};Ao=new WeakMap,gh=new WeakMap,br=new WeakMap,Ri=new WeakMap,ko=new WeakMap,ms=new WeakMap,bh=new WeakMap,vh=new WeakMap,Li=new WeakMap,Ls=new WeakMap,Ft=new WeakMap,is=new WeakMap,of=new WeakMap,Eo=new WeakMap,Ni=new WeakMap,ht=new WeakMap,So=new WeakMap,Zs=new WeakMap,yh=new WeakMap,_h=new WeakSet,Om=function(){const t=new Lm(c(this,br),.001);T(this,Ls,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=c(this,Ls).box;const s=new Lm(c(this,br),.0025,.001,this._uiManager.direction==="ltr");T(this,ms,s.getOutlines());const{lastPoint:n}=c(this,ms).box;T(this,Eo,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},wh=new WeakSet,Bm=function({highlightOutlines:t,highlightId:s,clipPathId:n}){var u,f;if(T(this,Ls,t),T(this,ms,t.getNewOutline(c(this,Zs)/2+1.5,.0025)),s>=0)T(this,Ft,s),T(this,Ri,n),this.parent.drawLayer.finalizeLine(s,t),T(this,ht,this.parent.drawLayer.highlightOutline(c(this,ms)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(c(this,Ft),t),this.parent.drawLayer.updateBox(c(this,Ft),P(u=Ie,vr,pa).call(u,c(this,Ls).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(c(this,ht),c(this,ms)),this.parent.drawLayer.updateBox(c(this,ht),P(f=Ie,vr,pa).call(f,c(this,ms).box,p))}const{x:a,y:o,width:l,height:h}=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=h;break;case 90:{const[p,m]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*m/p,this.height=h*p/m;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=h;break;case 270:{const[p,m]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*m/p,this.height=h*p/m;break}}const{lastPoint:d}=c(this,ms).box;T(this,Eo,[(d[0]-a)/l,(d[1]-o)/h])},lf=new WeakSet,v0=function(t){const s=r=>{var a,o;this.color=r,(a=this.parent)==null||a.drawLayer.changeColor(c(this,Ft),r),(o=c(this,ko))==null||o.updateColor(r)},n=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},cf=new WeakSet,y0=function(t){const s=c(this,Zs),n=r=>{T(this,Zs,r),P(this,hf,_0).call(this,r)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},hf=new WeakSet,_0=function(t){if(!c(this,is))return;P(this,wh,Bm).call(this,{highlightOutlines:c(this,Ls).getNewOutline(t/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)},Ah=new WeakSet,jm=function(){c(this,Ft)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Ft)),T(this,Ft,null),this.parent.drawLayer.remove(c(this,ht)),T(this,ht,null))},Ii=new WeakSet,cl=function(t=this.parent){c(this,Ft)===null&&({id:Zt(this,Ft)._,clipPathId:Zt(this,Ri)._}=t.drawLayer.highlight(c(this,Ls),this.color,c(this,Ni)),T(this,ht,t.drawLayer.highlightOutline(c(this,ms))),c(this,Li)&&(c(this,Li).style.clipPath=c(this,Ri)))},vr=new WeakSet,pa=function({x:t,y:s,width:n,height:r},a){switch(a){case 90:return{x:1-s-r,y:t,width:r,height:n};case 180:return{x:1-t-n,y:1-s-r,width:n,height:r};case 270:return{x:s,y:1-t-n,width:r,height:n}}return{x:t,y:s,width:n,height:r}},df=new WeakSet,w0=function(t){Ie._keyboardManager.exec(this,t)},xo=new WeakSet,Id=function(t){if(!c(this,Ao))return;const s=window.getSelection();t?s.setPosition(c(this,Ao),c(this,gh)):s.setPosition(c(this,bh),c(this,vh))},Mi=new WeakSet,hl=function(){return c(this,is)?this.rotation:0},uf=new WeakSet,A0=function(){if(c(this,is))return null;const[t,s]=this.pageDimensions,n=c(this,br),r=new Array(n.length*8);let a=0;for(const{x:o,y:l,width:h,height:d}of n){const u=o*t,f=(1-l-d)*s;r[a]=r[a+4]=u,r[a+1]=r[a+3]=f,r[a+2]=r[a+6]=u+h*t,r[a+5]=r[a+7]=f+d*s,a+=8}return r},ff=new WeakSet,k0=function(t){return c(this,Ls).serialize(t,P(this,Mi,hl).call(this))},pf=new WeakSet,E0=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},mf=new WeakSet,S0=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},A(Ie,vr),A(Ie,pf),A(Ie,mf),xe(Ie,"_defaultColor",null),xe(Ie,"_defaultOpacity",1),xe(Ie,"_defaultThickness",12),xe(Ie,"_l10nPromise"),xe(Ie,"_type","highlight"),xe(Ie,"_editorType",Ne.HIGHLIGHT),xe(Ie,"_freeHighlightId",-1),xe(Ie,"_freeHighlight",null),xe(Ie,"_freeHighlightClipId","");let Yd=Ie;var Di,Fi,kh,Eh,Sh,Oi,Js,Bn,gs,Bi,ji,$i,zi,Hi,yr,gf,x0,bf,C0,vf,T0,yf,P0,xh,zm,_f,R0,Ch,Hm,wf,L0,Af,N0,kf,I0,Ef,M0,Sf,D0,jn,Br,Th,Um,Co,Md,To,Dd,_r,ma,Ph,Wm,Po,Fd,xf,F0,Rh,Vm,Cf,O0,Tf,B0,Lh,qm,Ro,Od,Ui,dl;const Ge=class Ge extends Oe{constructor(t){super({...t,name:"inkEditor"});A(this,gf);A(this,bf);A(this,vf);A(this,yf);A(this,xh);A(this,_f);A(this,Ch);A(this,wf);A(this,Af);A(this,kf);A(this,Ef);A(this,Sf);A(this,jn);A(this,Th);A(this,Co);A(this,To);A(this,_r);A(this,Ph);A(this,Po);A(this,Tf);A(this,Lh);A(this,Ro);A(this,Ui);A(this,Di,0);A(this,Fi,0);A(this,kh,this.canvasPointermove.bind(this));A(this,Eh,this.canvasPointerleave.bind(this));A(this,Sh,this.canvasPointerup.bind(this));A(this,Oi,this.canvasPointerdown.bind(this));A(this,Js,null);A(this,Bn,new Path2D);A(this,gs,!1);A(this,Bi,!1);A(this,ji,!1);A(this,$i,null);A(this,zi,0);A(this,Hi,0);A(this,yr,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,s){Oe.initialize(t,s)}static updateDefaultParams(t,s){switch(t){case Se.INK_THICKNESS:Ge._defaultThickness=s;break;case Se.INK_COLOR:Ge._defaultColor=s;break;case Se.INK_OPACITY:Ge._defaultOpacity=s/100;break}}updateParams(t,s){switch(t){case Se.INK_THICKNESS:P(this,gf,x0).call(this,s);break;case Se.INK_COLOR:P(this,bf,C0).call(this,s);break;case Se.INK_OPACITY:P(this,vf,T0).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Se.INK_THICKNESS,Ge._defaultThickness],[Se.INK_COLOR,Ge._defaultColor||Oe._defaultLineColor],[Se.INK_OPACITY,Math.round(Ge._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Se.INK_THICKNESS,this.thickness||Ge._defaultThickness],[Se.INK_COLOR,this.color||Ge._defaultColor||Oe._defaultLineColor],[Se.INK_OPACITY,Math.round(100*(this.opacity??Ge._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(P(this,Co,Md).call(this),P(this,To,Dd).call(this)),this.isAttachedToDOM||(this.parent.add(this),P(this,_r,ma).call(this)),P(this,Ui,dl).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,c(this,Js)&&(clearTimeout(c(this,Js)),T(this,Js,null)),c(this,$i).disconnect(),T(this,$i,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,s]=this.parentDimensions,n=this.width*t,r=this.height*s;this.setDimensions(n,r)}enableEditMode(){c(this,gs)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",c(this,Oi)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",c(this,Oi)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){c(this,gs)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),T(this,gs,!0),this.div.classList.add("disabled"),P(this,Ui,dl).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||c(this,gs)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),P(this,_f,R0).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),P(this,Ch,Hm).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),P(this,Th,Um).call(this,t)}canvasPointerleave(t){P(this,Th,Um).call(this,t)}get isResizable(){return!this.isEmpty()&&c(this,gs)}render(){if(this.div)return this.div;let t,s;this.width&&(t=this.x,s=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[n,r,a,o]=P(this,yf,P0).call(this);if(this.setAt(n,r,0,0),this.setDims(a,o),P(this,Co,Md).call(this),this.width){const[l,h]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*h),this.setAt(t*l,s*h,this.width*l,this.height*h),T(this,ji,!0),P(this,_r,ma).call(this),this.setDims(this.width*l,this.height*h),P(this,jn,Br).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return P(this,To,Dd).call(this),this.div}setDimensions(t,s){const n=Math.round(t),r=Math.round(s);if(c(this,zi)===n&&c(this,Hi)===r)return;T(this,zi,n),T(this,Hi,r),this.canvas.style.visibility="hidden";const[a,o]=this.parentDimensions;this.width=t/a,this.height=s/o,this.fixAndSetPosition(),c(this,gs)&&P(this,Ph,Wm).call(this,t,s),P(this,_r,ma).call(this),P(this,jn,Br).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,s,n){var v,b,y;if(t instanceof s0)return null;const r=super.deserialize(t,s,n);r.thickness=t.thickness,r.color=ve.makeHexColor(...t.color),r.opacity=t.opacity;const[a,o]=r.pageDimensions,l=r.width*a,h=r.height*o,d=r.parentScale,u=t.thickness/2;T(r,gs,!0),T(r,zi,Math.round(l)),T(r,Hi,Math.round(h));const{paths:f,rect:p,rotation:m}=t;for(let{bezier:E}of f){E=P(v=Ge,Cf,O0).call(v,E,p,m);const C=[];r.paths.push(C);let R=d*(E[0]-u),M=d*(E[1]-u);for(let x=2,S=E.length;x<S;x+=6){const F=d*(E[x]-u),z=d*(E[x+1]-u),L=d*(E[x+2]-u),B=d*(E[x+3]-u),w=d*(E[x+4]-u),G=d*(E[x+5]-u);C.push([[R,M],[F,z],[L,B],[w,G]]),R=w,M=G}const D=P(this,xf,F0).call(this,C);r.bezierPath2D.push(D)}const g=P(b=r,Lh,qm).call(b);return T(r,Fi,Math.max(Oe.MIN_SIZE,g[2]-g[0])),T(r,Di,Math.max(Oe.MIN_SIZE,g[3]-g[1])),P(y=r,Ph,Wm).call(y,l,h),r}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),s=Oe._colorManager.convert(this.ctx.strokeStyle);return{annotationType:Ne.INK,color:s,thickness:this.thickness,opacity:this.opacity,paths:P(this,Tf,B0).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Di=new WeakMap,Fi=new WeakMap,kh=new WeakMap,Eh=new WeakMap,Sh=new WeakMap,Oi=new WeakMap,Js=new WeakMap,Bn=new WeakMap,gs=new WeakMap,Bi=new WeakMap,ji=new WeakMap,$i=new WeakMap,zi=new WeakMap,Hi=new WeakMap,yr=new WeakMap,gf=new WeakSet,x0=function(t){const s=r=>{this.thickness=r,P(this,Ui,dl).call(this)},n=this.thickness;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},bf=new WeakSet,C0=function(t){const s=r=>{this.color=r,P(this,jn,Br).call(this)},n=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},vf=new WeakSet,T0=function(t){const s=r=>{this.opacity=r,P(this,jn,Br).call(this)};t/=100;const n=this.opacity;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Se.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},yf=new WeakSet,P0=function(){const{parentRotation:t,parentDimensions:[s,n]}=this;switch(t){case 90:return[0,n,n,s];case 180:return[s,n,s,n];case 270:return[s,0,n,s];default:return[0,0,s,n]}},xh=new WeakSet,zm=function(){const{ctx:t,color:s,opacity:n,thickness:r,parentScale:a,scaleFactor:o}=this;t.lineWidth=r*a/o,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${s}${PR(n)}`},_f=new WeakSet,R0=function(t,s){this.canvas.addEventListener("contextmenu",Kt),this.canvas.addEventListener("pointerleave",c(this,Eh)),this.canvas.addEventListener("pointermove",c(this,kh)),this.canvas.addEventListener("pointerup",c(this,Sh)),this.canvas.removeEventListener("pointerdown",c(this,Oi)),this.isEditing=!0,c(this,ji)||(T(this,ji,!0),P(this,_r,ma).call(this),this.thickness||(this.thickness=Ge._defaultThickness),this.color||(this.color=Ge._defaultColor||Oe._defaultLineColor),this.opacity??(this.opacity=Ge._defaultOpacity)),this.currentPath.push([t,s]),T(this,Bi,!1),P(this,xh,zm).call(this),T(this,yr,()=>{P(this,kf,I0).call(this),c(this,yr)&&window.requestAnimationFrame(c(this,yr))}),window.requestAnimationFrame(c(this,yr))},Ch=new WeakSet,Hm=function(t,s){const[n,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===n&&s===r)return;const a=this.currentPath;let o=c(this,Bn);if(a.push([t,s]),T(this,Bi,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(t,s);return}a.length===3&&(T(this,Bn,o=new Path2D),o.moveTo(...a[0])),P(this,Ef,M0).call(this,o,...a.at(-3),...a.at(-2),t,s)},wf=new WeakSet,L0=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);c(this,Bn).lineTo(...t)},Af=new WeakSet,N0=function(t,s){T(this,yr,null),t=Math.min(Math.max(t,0),this.canvas.width),s=Math.min(Math.max(s,0),this.canvas.height),P(this,Ch,Hm).call(this,t,s),P(this,wf,L0).call(this);let n;if(this.currentPath.length!==1)n=P(this,Sf,D0).call(this);else{const h=[t,s];n=[[h,h.slice(),h.slice(),h]]}const r=c(this,Bn),a=this.currentPath;this.currentPath=[],T(this,Bn,new Path2D);const o=()=>{this.allRawPaths.push(a),this.paths.push(n),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(P(this,Co,Md).call(this),P(this,To,Dd).call(this)),P(this,Ui,dl).call(this))};this.addCommands({cmd:o,undo:l,mustExec:!0})},kf=new WeakSet,I0=function(){if(!c(this,Bi))return;T(this,Bi,!1);const t=Math.ceil(this.thickness*this.parentScale),s=this.currentPath.slice(-3),n=s.map(o=>o[0]),r=s.map(o=>o[1]);Math.min(...n)-t,Math.max(...n)+t,Math.min(...r)-t,Math.max(...r)+t;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)a.stroke(o);a.stroke(c(this,Bn)),a.restore()},Ef=new WeakSet,M0=function(t,s,n,r,a,o,l){const h=(s+r)/2,d=(n+a)/2,u=(r+o)/2,f=(a+l)/2;t.bezierCurveTo(h+2*(r-h)/3,d+2*(a-d)/3,u+2*(r-u)/3,f+2*(a-f)/3,u,f)},Sf=new WeakSet,D0=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const s=[];let n,[r,a]=t[0];for(n=1;n<t.length-2;n++){const[p,m]=t[n],[g,v]=t[n+1],b=(p+g)/2,y=(m+v)/2,E=[r+2*(p-r)/3,a+2*(m-a)/3],C=[b+2*(p-b)/3,y+2*(m-y)/3];s.push([[r,a],E,C,[b,y]]),[r,a]=[b,y]}const[o,l]=t[n],[h,d]=t[n+1],u=[r+2*(o-r)/3,a+2*(l-a)/3],f=[h+2*(o-h)/3,d+2*(l-d)/3];return s.push([[r,a],u,f,[h,d]]),s},jn=new WeakSet,Br=function(){if(this.isEmpty()){P(this,Po,Fd).call(this);return}P(this,xh,zm).call(this);const{canvas:t,ctx:s}=this;s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.width,t.height),P(this,Po,Fd).call(this);for(const n of this.bezierPath2D)s.stroke(n)},Th=new WeakSet,Um=function(t){this.canvas.removeEventListener("pointerleave",c(this,Eh)),this.canvas.removeEventListener("pointermove",c(this,kh)),this.canvas.removeEventListener("pointerup",c(this,Sh)),this.canvas.addEventListener("pointerdown",c(this,Oi)),c(this,Js)&&clearTimeout(c(this,Js)),T(this,Js,setTimeout(()=>{T(this,Js,null),this.canvas.removeEventListener("contextmenu",Kt)},10)),P(this,Af,N0).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Co=new WeakSet,Md=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},To=new WeakSet,Dd=function(){T(this,$i,new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&this.setDimensions(s.width,s.height)})),c(this,$i).observe(this.div)},_r=new WeakSet,ma=function(){if(!c(this,ji))return;const[t,s]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*s),P(this,Po,Fd).call(this)},Ph=new WeakSet,Wm=function(t,s){const n=P(this,Ro,Od).call(this),r=(t-n)/c(this,Fi),a=(s-n)/c(this,Di);this.scaleFactor=Math.min(r,a)},Po=new WeakSet,Fd=function(){const t=P(this,Ro,Od).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},xf=new WeakSet,F0=function(t){const s=new Path2D;for(let n=0,r=t.length;n<r;n++){const[a,o,l,h]=t[n];n===0&&s.moveTo(...a),s.bezierCurveTo(o[0],o[1],l[0],l[1],h[0],h[1])}return s},Rh=new WeakSet,Vm=function(t,s,n){const[r,a,o,l]=s;switch(n){case 0:for(let h=0,d=t.length;h<d;h+=2)t[h]+=r,t[h+1]=l-t[h+1];break;case 90:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=t[h+1]+r,t[h+1]=u+a}break;case 180:for(let h=0,d=t.length;h<d;h+=2)t[h]=o-t[h],t[h+1]+=a;break;case 270:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=o-t[h+1],t[h+1]=l-u}break;default:throw new Error("Invalid rotation")}return t},Cf=new WeakSet,O0=function(t,s,n){const[r,a,o,l]=s;switch(n){case 0:for(let h=0,d=t.length;h<d;h+=2)t[h]-=r,t[h+1]=l-t[h+1];break;case 90:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=t[h+1]-a,t[h+1]=u-r}break;case 180:for(let h=0,d=t.length;h<d;h+=2)t[h]=o-t[h],t[h+1]-=a;break;case 270:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=l-t[h+1],t[h+1]=o-u}break;default:throw new Error("Invalid rotation")}return t},Tf=new WeakSet,B0=function(t,s,n,r){var d,u;const a=[],o=this.thickness/2,l=t*s+o,h=t*n+o;for(const f of this.paths){const p=[],m=[];for(let g=0,v=f.length;g<v;g++){const[b,y,E,C]=f[g];if(b[0]===C[0]&&b[1]===C[1]&&v===1){const B=t*b[0]+l,w=t*b[1]+h;p.push(B,w),m.push(B,w);break}const R=t*b[0]+l,M=t*b[1]+h,D=t*y[0]+l,x=t*y[1]+h,S=t*E[0]+l,F=t*E[1]+h,z=t*C[0]+l,L=t*C[1]+h;g===0&&(p.push(R,M),m.push(R,M)),p.push(D,x,S,F,z,L),m.push(D,x),g===v-1&&m.push(z,L)}a.push({bezier:P(d=Ge,Rh,Vm).call(d,p,r,this.rotation),points:P(u=Ge,Rh,Vm).call(u,m,r,this.rotation)})}return a},Lh=new WeakSet,qm=function(){let t=1/0,s=-1/0,n=1/0,r=-1/0;for(const a of this.paths)for(const[o,l,h,d]of a){const u=ve.bezierBoundingBox(...o,...l,...h,...d);t=Math.min(t,u[0]),n=Math.min(n,u[1]),s=Math.max(s,u[2]),r=Math.max(r,u[3])}return[t,n,s,r]},Ro=new WeakSet,Od=function(){return c(this,gs)?Math.ceil(this.thickness*this.parentScale):0},Ui=new WeakSet,dl=function(t=!1){if(this.isEmpty())return;if(!c(this,gs)){P(this,jn,Br).call(this);return}const s=P(this,Lh,qm).call(this),n=P(this,Ro,Od).call(this);T(this,Fi,Math.max(Oe.MIN_SIZE,s[2]-s[0])),T(this,Di,Math.max(Oe.MIN_SIZE,s[3]-s[1]));const r=Math.ceil(n+c(this,Fi)*this.scaleFactor),a=Math.ceil(n+c(this,Di)*this.scaleFactor),[o,l]=this.parentDimensions;this.width=r/o,this.height=a/l,this.setAspectRatio(r,a);const h=this.translationX,d=this.translationY;this.translationX=-s[0],this.translationY=-s[1],P(this,_r,ma).call(this),P(this,jn,Br).call(this),T(this,zi,r),T(this,Hi,a),this.setDims(r,a);const u=t?n/this.scaleFactor/2:0;this.translate(h-this.translationX-u,d-this.translationY-u)},A(Ge,xf),A(Ge,Rh),A(Ge,Cf),xe(Ge,"_defaultColor",null),xe(Ge,"_defaultOpacity",1),xe(Ge,"_defaultThickness",1),xe(Ge,"_type","ink"),xe(Ge,"_editorType",Ne.INK);let $m=Ge;var Et,St,wr,$n,Ar,Lo,Qs,Wi,en,Ns,Nh,Vi,ul,qi,fl,No,Bd,Ih,Xm,Pf,j0,Rf,$0,Mh,Ym,Io,jd,Lf,z0;const gl=class gl extends Oe{constructor(t){super({...t,name:"stampEditor"});A(this,Vi);A(this,qi);A(this,No);A(this,Ih);A(this,Pf);A(this,Rf);A(this,Mh);A(this,Io);A(this,Lf);A(this,Et,null);A(this,St,null);A(this,wr,null);A(this,$n,null);A(this,Ar,null);A(this,Lo,"");A(this,Qs,null);A(this,Wi,null);A(this,en,null);A(this,Ns,!1);A(this,Nh,!1);T(this,$n,t.bitmapUrl),T(this,Ar,t.bitmapFile)}static initialize(t,s){Oe.initialize(t,s)}static get supportedTypes(){return Me(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(s=>`image/${s}`))}static get supportedTypesStr(){return Me(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,s){s.pasteEditor(Ne.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,s;c(this,St)&&(T(this,Et,null),this._uiManager.imageManager.deleteId(c(this,St)),(t=c(this,Qs))==null||t.remove(),T(this,Qs,null),(s=c(this,Wi))==null||s.disconnect(),T(this,Wi,null),c(this,en)&&(clearTimeout(c(this,en)),T(this,en,null))),super.remove()}rebuild(){if(!this.parent){c(this,St)&&P(this,No,Bd).call(this);return}super.rebuild(),this.div!==null&&(c(this,St)&&c(this,Qs)===null&&P(this,No,Bd).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(c(this,wr)||c(this,Et)||c(this,$n)||c(this,Ar)||c(this,St))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;if(this.width&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),c(this,Et)?P(this,Ih,Xm).call(this):P(this,No,Bd).call(this),this.width){const[n,r]=this.parentDimensions;this.setAt(t*n,s*r,this.width*n,this.height*r)}return this.div}getImageForAltText(){return c(this,Qs)}static deserialize(t,s,n){if(t instanceof n0)return null;const r=super.deserialize(t,s,n),{rect:a,bitmapUrl:o,bitmapId:l,isSvg:h,accessibilityData:d}=t;l&&n.imageManager.isValidId(l)?T(r,St,l):T(r,$n,o),T(r,Ns,h);const[u,f]=r.pageDimensions;return r.width=(a[2]-a[0])/u,r.height=(a[3]-a[1])/f,d&&(r.altTextData=d),r}serialize(t=!1,s=null){if(this.isEmpty())return null;const n={annotationType:Ne.STAMP,bitmapId:c(this,St),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Ns),structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=P(this,Io,jd).call(this,!0),n.accessibilityData=this.altTextData,n;const{decorative:r,altText:a}=this.altTextData;if(!r&&a&&(n.accessibilityData={type:"Figure",alt:a}),s===null)return n;s.stamps||(s.stamps=new Map);const o=c(this,Ns)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(c(this,St)))s.stamps.set(c(this,St),{area:o,serialized:n}),n.bitmap=P(this,Io,jd).call(this,!1);else if(c(this,Ns)){const l=s.stamps.get(c(this,St));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=P(this,Io,jd).call(this,!1))}return n}};Et=new WeakMap,St=new WeakMap,wr=new WeakMap,$n=new WeakMap,Ar=new WeakMap,Lo=new WeakMap,Qs=new WeakMap,Wi=new WeakMap,en=new WeakMap,Ns=new WeakMap,Nh=new WeakMap,Vi=new WeakSet,ul=function(t,s=!1){if(!t){this.remove();return}T(this,Et,t.bitmap),s||(T(this,St,t.id),T(this,Ns,t.isSvg)),t.file&&T(this,Lo,t.file.name),P(this,Ih,Xm).call(this)},qi=new WeakSet,fl=function(){T(this,wr,null),this._uiManager.enableWaiting(!1),c(this,Qs)&&this.div.focus()},No=new WeakSet,Bd=function(){if(c(this,St)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,St)).then(s=>P(this,Vi,ul).call(this,s,!0)).finally(()=>P(this,qi,fl).call(this));return}if(c(this,$n)){const s=c(this,$n);T(this,$n,null),this._uiManager.enableWaiting(!0),T(this,wr,this._uiManager.imageManager.getFromUrl(s).then(n=>P(this,Vi,ul).call(this,n)).finally(()=>P(this,qi,fl).call(this)));return}if(c(this,Ar)){const s=c(this,Ar);T(this,Ar,null),this._uiManager.enableWaiting(!0),T(this,wr,this._uiManager.imageManager.getFromFile(s).then(n=>P(this,Vi,ul).call(this,n)).finally(()=>P(this,qi,fl).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=gl.supportedTypesStr,T(this,wr,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const n=await this._uiManager.imageManager.getFromFile(t.files[0]);P(this,Vi,ul).call(this,n)}s()}),t.addEventListener("cancel",()=>{this.remove(),s()})}).finally(()=>P(this,qi,fl).call(this))),t.click()},Ih=new WeakSet,Xm=function(){const{div:t}=this;let{width:s,height:n}=c(this,Et);const[r,a]=this.pageDimensions,o=.75;if(this.width)s=this.width*r,n=this.height*a;else if(s>o*r||n>o*a){const u=Math.min(o*r/s,o*a/n);s*=u,n*=u}const[l,h]=this.parentDimensions;this.setDims(s*l/r,n*h/a),this._uiManager.enableWaiting(!1);const d=T(this,Qs,document.createElement("canvas"));t.append(d),t.hidden=!1,P(this,Mh,Ym).call(this,s,n),P(this,Lf,z0).call(this),c(this,Nh)||(this.parent.addUndoableEditor(this),T(this,Nh,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,Lo)&&d.setAttribute("aria-label",c(this,Lo))},Pf=new WeakSet,j0=function(t,s){var o;const[n,r]=this.parentDimensions;this.width=t/n,this.height=s/r,this.setDims(t,s),(o=this._initialOptions)!=null&&o.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,c(this,en)!==null&&clearTimeout(c(this,en)),T(this,en,setTimeout(()=>{T(this,en,null),P(this,Mh,Ym).call(this,t,s)},200))},Rf=new WeakSet,$0=function(t,s){const{width:n,height:r}=c(this,Et);let a=n,o=r,l=c(this,Et);for(;a>2*t||o>2*s;){const h=a,d=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*s&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const u=new OffscreenCanvas(a,o);u.getContext("2d").drawImage(l,0,0,h,d,0,0,a,o),l=u.transferToImageBitmap()}return l},Mh=new WeakSet,Ym=function(t,s){t=Math.ceil(t),s=Math.ceil(s);const n=c(this,Qs);if(!n||n.width===t&&n.height===s)return;n.width=t,n.height=s;const r=c(this,Ns)?c(this,Et):P(this,Rf,$0).call(this,t,s);if(this._uiManager.hasMLManager&&!this.hasAltText()){const l=new OffscreenCanvas(t,s).getContext("2d");l.drawImage(r,0,0,r.width,r.height,0,0,t,s),this._uiManager.mlGuess({service:"image-to-text",request:{data:l.getImageData(0,0,t,s).data,width:t,height:s,channels:4}}).then(h=>{const d=(h==null?void 0:h.output)||"";this.parent&&d&&!this.hasAltText()&&(this.altTextData={altText:d,decorative:!1})})}const a=n.getContext("2d");a.filter=this._uiManager.hcmFilter,a.drawImage(r,0,0,r.width,r.height,0,0,t,s)},Io=new WeakSet,jd=function(t){if(t){if(c(this,Ns)){const r=this._uiManager.imageManager.getSvgUrl(c(this,St));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,Et),s.getContext("2d").drawImage(c(this,Et),0,0),s.toDataURL()}if(c(this,Ns)){const[s,n]=this.pageDimensions,r=Math.round(this.width*s*xr.PDF_TO_CSS_UNITS),a=Math.round(this.height*n*xr.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(c(this,Et),0,0,c(this,Et).width,c(this,Et).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(c(this,Et))},Lf=new WeakSet,z0=function(){T(this,Wi,new ResizeObserver(t=>{const s=t[0].contentRect;s.width&&s.height&&P(this,Pf,j0).call(this,s.width,s.height)})),c(this,Wi).observe(this.div)},xe(gl,"_type","stamp"),xe(gl,"_editorType",Ne.STAMP);let Gm=gl;var Gi,Mo,tn,Xi,zn,Hn,Un,as,kr,Do,Fo,Ot,Ae,Er,Nf,H0,Dh,Zm,Fh,Jm,Oh,Qm,Oo,$d;const _s=class _s{constructor({uiManager:e,pageIndex:t,div:s,accessibilityManager:n,annotationLayer:r,drawLayer:a,textLayer:o,viewport:l,l10n:h}){A(this,Nf);A(this,Dh);A(this,Fh);A(this,Oh);A(this,Oo);A(this,Gi,void 0);A(this,Mo,!1);A(this,tn,null);A(this,Xi,null);A(this,zn,null);A(this,Hn,null);A(this,Un,null);A(this,as,new Map);A(this,kr,!1);A(this,Do,!1);A(this,Fo,!1);A(this,Ot,null);A(this,Ae,void 0);const d=[...c(_s,Er).values()];if(!_s._initialized){_s._initialized=!0;for(const u of d)u.initialize(h,e)}e.registerEditorTypes(d),T(this,Ae,e),this.pageIndex=t,this.div=s,T(this,Gi,n),T(this,tn,r),this.viewport=l,T(this,Ot,o),this.drawLayer=a,c(this,Ae).addLayer(this)}get isEmpty(){return c(this,as).size===0}get isInvisible(){return this.isEmpty&&c(this,Ae).getMode()===Ne.NONE}updateToolbar(e){c(this,Ae).updateToolbar(e)}updateMode(e=c(this,Ae).getMode()){switch(P(this,Oo,$d).call(this),e){case Ne.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ne.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case Ne.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const s of c(_s,Er).values())t.toggle(`${s._type}Editing`,e===s._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,Ot))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(c(this,Ae).getMode()!==Ne.INK)return;if(!e){for(const s of c(this,as).values())if(s.isEmpty()){s.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){c(this,Ae).setEditingState(e)}addCommands(e){c(this,Ae).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,tn))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const s of c(this,as).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(c(this,Ae).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));if(!c(this,tn))return;const t=c(this,tn).getEditableAnnotations();for(const s of t){if(s.hide(),c(this,Ae).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const n=this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){var n;T(this,Fo,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const r of c(this,as).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){e.set(r.annotationElementId,r);continue}else t.set(r.annotationElementId,r);(n=this.getEditableAnnotation(r.annotationElementId))==null||n.show(),r.remove()}if(c(this,tn)){const r=c(this,tn).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(c(this,Ae).isDeletedAnnotationElement(o))continue;let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(c(this,Ae).addChangedExistingAnnotation(l),l.renderAnnotationElement(a),l.show(!1)),a.show()}}P(this,Oo,$d).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of c(_s,Er).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),T(this,Fo,!1)}getEditableAnnotation(e){var t;return((t=c(this,tn))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,Ae).getActive()!==e&&c(this,Ae).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=c(this,Ot))!=null&&e.div&&!c(this,Hn)&&(T(this,Hn,P(this,Nf,H0).bind(this)),c(this,Ot).div.addEventListener("pointerdown",c(this,Hn)),c(this,Ot).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,Ot))!=null&&e.div&&c(this,Hn)&&(c(this,Ot).div.removeEventListener("pointerdown",c(this,Hn)),T(this,Hn,null),c(this,Ot).div.classList.remove("highlighting"))}enableClick(){c(this,zn)||(T(this,zn,this.pointerdown.bind(this)),T(this,Xi,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",c(this,zn)),this.div.addEventListener("pointerup",c(this,Xi)))}disableClick(){c(this,zn)&&(this.div.removeEventListener("pointerdown",c(this,zn)),this.div.removeEventListener("pointerup",c(this,Xi)),T(this,zn,null),T(this,Xi,null))}attach(e){c(this,as).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,Ae).isDeletedAnnotationElement(t)&&c(this,Ae).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,as).delete(e.id),(t=c(this,Gi))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,Fo)&&e.annotationElementId&&c(this,Ae).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,Ae).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,c(this,Do)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,Ae).addDeletedAnnotationElement(e.annotationElementId),Oe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,Ae).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),c(this,Ae).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,Un)&&(e._focusEventsAllowed=!1,T(this,Un,setTimeout(()=>{T(this,Un,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus())},0))),e._structTreeParentId=(s=c(this,Gi))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getNextId(){return c(this,Ae).getId()}canCreateNewEmptyEditor(){var e;return(e=c(this,Dh,Zm))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){c(this,Ae).updateToolbar(e),c(this,Ae).updateMode(e);const{offsetX:s,offsetY:n}=P(this,Oh,Qm).call(this),r=this.getNextId(),a=P(this,Fh,Jm).call(this,{parent:this,id:r,x:s,y:n,uiManager:c(this,Ae),isCentered:!0,...t});a&&this.add(a)}deserialize(e){var t;return((t=c(_s,Er).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,Ae)))||null}createAndAddNewEditor(e,t,s={}){const n=this.getNextId(),r=P(this,Fh,Jm).call(this,{parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:c(this,Ae),isCentered:t,...s});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(P(this,Oh,Qm).call(this),!0)}setSelected(e){c(this,Ae).setSelected(e)}toggleSelected(e){c(this,Ae).toggleSelected(e)}isSelected(e){return c(this,Ae).isSelected(e)}unselect(e){c(this,Ae).unselect(e)}pointerup(e){const{isMac:t}=Yt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&c(this,kr)){if(T(this,kr,!1),!c(this,Mo)){T(this,Mo,!0);return}if(c(this,Ae).getMode()===Ne.STAMP){c(this,Ae).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(c(this,Ae).getMode()===Ne.HIGHLIGHT&&this.enableTextSelection(),c(this,kr)){T(this,kr,!1);return}const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;T(this,kr,!0);const s=c(this,Ae).getActive();T(this,Mo,!s||s.isEmpty())}findNewParent(e,t,s){const n=c(this,Ae).findParent(t,s);return n===null||n===this?!1:(n.changeParent(e),!0)}destroy(){var e,t;((e=c(this,Ae).getActive())==null?void 0:e.parent)===this&&(c(this,Ae).commitOrRemove(),c(this,Ae).setActiveEditor(null)),c(this,Un)&&(clearTimeout(c(this,Un)),T(this,Un,null));for(const s of c(this,as).values())(t=c(this,Gi))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,as).clear(),c(this,Ae).removeLayer(this)}render({viewport:e}){this.viewport=e,Yi(this.div,e);for(const t of c(this,Ae).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,Ae).commitOrRemove(),P(this,Oo,$d).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Yi(this.div,{rotation:s}),t!==s)for(const n of c(this,as).values())n.rotate(s);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,Ae).viewParameters.realScale}};Gi=new WeakMap,Mo=new WeakMap,tn=new WeakMap,Xi=new WeakMap,zn=new WeakMap,Hn=new WeakMap,Un=new WeakMap,as=new WeakMap,kr=new WeakMap,Do=new WeakMap,Fo=new WeakMap,Ot=new WeakMap,Ae=new WeakMap,Er=new WeakMap,Nf=new WeakSet,H0=function(e){if(c(this,Ae).unselectAll(),e.target===c(this,Ot).div){const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t)return;c(this,Ae).showAllEditors("highlight",!0,!0),c(this,Ot).div.classList.add("free"),Yd.startHighlighting(this,c(this,Ae).direction==="ltr",e),c(this,Ot).div.addEventListener("pointerup",()=>{c(this,Ot).div.classList.remove("free")},{once:!0}),e.preventDefault()}},Dh=new WeakSet,Zm=function(){return c(_s,Er).get(c(this,Ae).getMode())},Fh=new WeakSet,Jm=function(e){const t=c(this,Dh,Zm);return t?new t.prototype.constructor(e):null},Oh=new WeakSet,Qm=function(){const{x:e,y:t,width:s,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,t+n),h=(r+o)/2-e,d=(a+l)/2-t,[u,f]=this.viewport.rotation%180===0?[h,d]:[d,h];return{offsetX:u,offsetY:f}},Oo=new WeakSet,$d=function(){T(this,Do,!0);for(const e of c(this,as).values())e.isEmpty()&&e.remove();T(this,Do,!1)},xe(_s,"_initialized",!1),A(_s,Er,new Map([Pm,$m,Gm,Yd].map(e=>[e._editorType,e])));let Km=_s;var sn,Bh,dt,Sr,jh,tg,$h,sg,If,U0;const vt=class vt{constructor({pageIndex:e}){A(this,$h);A(this,If);A(this,sn,null);A(this,Bh,0);A(this,dt,new Map);A(this,Sr,new Map);this.pageIndex=e}setParent(e){if(!c(this,sn)){T(this,sn,e);return}if(c(this,sn)!==e){if(c(this,dt).size>0)for(const t of c(this,dt).values())t.remove(),e.append(t);T(this,sn,e)}}static get _svgFactory(){return Me(this,"_svgFactory",new gg)}highlight(e,t,s,n=!1){const r=Zt(this,Bh)._++,a=P(this,$h,sg).call(this,e.box);a.classList.add("highlight"),e.free&&a.classList.add("free");const o=vt._svgFactory.createElement("defs");a.append(o);const l=vt._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",h),l.setAttribute("d",e.toSVGPath()),n&&c(this,Sr).set(r,l);const d=P(this,If,U0).call(this,o,h),u=vt._svgFactory.createElement("use");return a.append(u),a.setAttribute("fill",t),a.setAttribute("fill-opacity",s),u.setAttribute("href",`#${h}`),c(this,dt).set(r,a),{id:r,clipPathId:`url(#${d})`}}highlightOutline(e){const t=Zt(this,Bh)._++,s=P(this,$h,sg).call(this,e.box);s.classList.add("highlightOutline");const n=vt._svgFactory.createElement("defs");s.append(n);const r=vt._svgFactory.createElement("path");n.append(r);const a=`path_p${this.pageIndex}_${t}`;r.setAttribute("id",a),r.setAttribute("d",e.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.free){s.classList.add("free");const d=vt._svgFactory.createElement("mask");n.append(d),o=`mask_p${this.pageIndex}_${t}`,d.setAttribute("id",o),d.setAttribute("maskUnits","objectBoundingBox");const u=vt._svgFactory.createElement("rect");d.append(u),u.setAttribute("width","1"),u.setAttribute("height","1"),u.setAttribute("fill","white");const f=vt._svgFactory.createElement("use");d.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const l=vt._svgFactory.createElement("use");s.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const h=l.cloneNode();return s.append(h),l.classList.add("mainOutline"),h.classList.add("secondaryOutline"),c(this,dt).set(t,s),t}finalizeLine(e,t){const s=c(this,Sr).get(e);c(this,Sr).delete(e),this.updateBox(e,t.box),s.setAttribute("d",t.toSVGPath())}updateLine(e,t){c(this,dt).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),c(this,Sr).delete(e)}updatePath(e,t){c(this,Sr).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var s;P(s=vt,jh,tg).call(s,c(this,dt).get(e),t)}show(e,t){c(this,dt).get(e).classList.toggle("hidden",!t)}rotate(e,t){c(this,dt).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){c(this,dt).get(e).setAttribute("fill",t)}changeOpacity(e,t){c(this,dt).get(e).setAttribute("fill-opacity",t)}addClass(e,t){c(this,dt).get(e).classList.add(t)}removeClass(e,t){c(this,dt).get(e).classList.remove(t)}remove(e){c(this,sn)!==null&&(c(this,dt).get(e).remove(),c(this,dt).delete(e))}destroy(){T(this,sn,null);for(const e of c(this,dt).values())e.remove();c(this,dt).clear()}};sn=new WeakMap,Bh=new WeakMap,dt=new WeakMap,Sr=new WeakMap,jh=new WeakSet,tg=function(e,{x:t=0,y:s=0,width:n=1,height:r=1}={}){const{style:a}=e;a.top=`${100*s}%`,a.left=`${100*t}%`,a.width=`${100*n}%`,a.height=`${100*r}%`},$h=new WeakSet,sg=function(e){var s;const t=vt._svgFactory.create(1,1,!0);return c(this,sn).append(t),t.setAttribute("aria-hidden",!0),P(s=vt,jh,tg).call(s,t,e),t},If=new WeakSet,U0=function(e,t){const s=vt._svgFactory.createElement("clipPath");e.append(s);const n=`clip_${t}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const r=vt._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),n},A(vt,jh);let eg=vt;var a2=Ee.AbortException,o2=Ee.AnnotationEditorLayer,l2=Ee.AnnotationEditorParamsType,c2=Ee.AnnotationEditorType,h2=Ee.AnnotationEditorUIManager,W0=Ee.AnnotationLayer,V0=Ee.AnnotationMode,d2=Ee.CMapCompressionType,u2=Ee.ColorPicker,f2=Ee.DOMSVGFactory,p2=Ee.DrawLayer,m2=Ee.FeatureTest,Eg=Ee.GlobalWorkerOptions,g2=Ee.ImageKind,b2=Ee.InvalidPDFException,v2=Ee.MissingPDFException,y2=Ee.OPS,_2=Ee.Outliner,w2=Ee.PDFDataRangeTransport,A2=Ee.PDFDateString,k2=Ee.PDFWorker,E2=Ee.PasswordResponses,S2=Ee.PermissionFlag,x2=Ee.PixelsPerInch,C2=Ee.RenderingCancelledException,q0=Ee.TextLayer,T2=Ee.UnexpectedResponseException,P2=Ee.Util,R2=Ee.VerbosityLevel,L2=Ee.XfaLayer,N2=Ee.build,I2=Ee.createValidAbsoluteUrl,M2=Ee.fetchData,G0=Ee.getDocument,D2=Ee.getFilenameFromUrl,F2=Ee.getPdfFilenameFromUrl,O2=Ee.getXfaPageViewport,B2=Ee.isDataScheme,j2=Ee.isPdfFile,$2=Ee.noContextMenu,z2=Ee.normalizeUnicode,H2=Ee.renderTextLayer,U2=Ee.setLayerDimensions,W2=Ee.shadow,V2=Ee.updateTextLayer,q2=Ee.version;const G2=Object.freeze(Object.defineProperty({__proto__:null,AbortException:a2,AnnotationEditorLayer:o2,AnnotationEditorParamsType:l2,AnnotationEditorType:c2,AnnotationEditorUIManager:h2,AnnotationLayer:W0,AnnotationMode:V0,CMapCompressionType:d2,ColorPicker:u2,DOMSVGFactory:f2,DrawLayer:p2,FeatureTest:m2,GlobalWorkerOptions:Eg,ImageKind:g2,InvalidPDFException:b2,MissingPDFException:v2,OPS:y2,Outliner:_2,PDFDataRangeTransport:w2,PDFDateString:A2,PDFWorker:k2,PasswordResponses:E2,PermissionFlag:S2,PixelsPerInch:x2,RenderingCancelledException:C2,TextLayer:q0,UnexpectedResponseException:T2,Util:P2,VerbosityLevel:R2,XfaLayer:L2,build:N2,createValidAbsoluteUrl:I2,fetchData:M2,getDocument:G0,getFilenameFromUrl:D2,getPdfFilenameFromUrl:F2,getXfaPageViewport:O2,isDataScheme:B2,isPdfFile:j2,noContextMenu:$2,normalizeUnicode:z2,renderTextLayer:H2,setLayerDimensions:U2,shadow:W2,updateTextLayer:V2,version:q2},Symbol.toStringTag,{value:"Module"}));var ft=function(i,e,t){if(t||arguments.length===2)for(var s=0,n=e.length,r;s<n;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return i.concat(r||Array.prototype.slice.call(e))},X2=["onCopy","onCut","onPaste"],Y2=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],K2=["onFocus","onBlur"],Z2=["onInput","onInvalid","onReset","onSubmit"],J2=["onLoad","onError"],Q2=["onKeyDown","onKeyPress","onKeyUp"],eN=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],tN=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],sN=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],nN=["onSelect"],rN=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],iN=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],aN=["onScroll"],oN=["onWheel"],lN=["onAnimationStart","onAnimationEnd","onAnimationIteration"],cN=["onTransitionEnd"],hN=["onToggle"],dN=["onChange"],uN=ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft(ft([],X2,!0),Y2,!0),K2,!0),Z2,!0),J2,!0),Q2,!0),eN,!0),tN,!0),sN,!0),nN,!0),rN,!0),iN,!0),aN,!0),oN,!0),lN,!0),cN,!0),dN,!0),hN,!0);function X0(i,e){var t={};return uN.forEach(function(s){var n=i[s];n&&(e?t[s]=function(r){return n(r,e(s))}:t[s]=n)}),t}function Kh(i){var e=!1,t=new Promise(function(s,n){i.then(function(r){return!e&&s(r)}).catch(function(r){return!e&&n(r)})});return{promise:t,cancel:function(){e=!0}}}function Y0(i){var e,t,s="";if(typeof i=="string"||typeof i=="number")s+=i;else if(typeof i=="object")if(Array.isArray(i))for(e=0;e<i.length;e++)i[e]&&(t=Y0(i[e]))&&(s&&(s+=" "),s+=t);else for(e in i)i[e]&&(s&&(s+=" "),s+=e);return s}function Yf(){for(var i,e,t=0,s="";t<arguments.length;)(i=arguments[t++])&&(e=Y0(i))&&(s&&(s+=" "),s+=e);return s}var fN=function(){},pN=fN;const Lt=ig(pN);var Fb=Object.prototype.hasOwnProperty;function Ob(i,e,t){for(t of i.keys())if(ya(t,e))return t}function ya(i,e){var t,s,n;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((s=i.length)===e.length)for(;s--&&ya(i[s],e[s]););return s===-1}if(t===Set){if(i.size!==e.size)return!1;for(s of i)if(n=s,n&&typeof n=="object"&&(n=Ob(e,n),!n)||!e.has(n))return!1;return!0}if(t===Map){if(i.size!==e.size)return!1;for(s of i)if(n=s[0],n&&typeof n=="object"&&(n=Ob(e,n),!n)||!ya(s[1],e.get(n)))return!1;return!0}if(t===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(t===DataView){if((s=i.byteLength)===e.byteLength)for(;s--&&i.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(i)){if((s=i.byteLength)===e.byteLength)for(;s--&&i[s]===e[s];);return s===-1}if(!t||typeof i=="object"){s=0;for(t in i)if(Fb.call(i,t)&&++s&&!Fb.call(e,t)||!(t in e)||!ya(i[t],e[t]))return!1;return Object.keys(e).length===s}}return i!==i&&e!==e}const K0=j.createContext(null);function _a({children:i,type:e}){return k.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:i})}const mN="noopener noreferrer nofollow";class gN{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ve(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Ve(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{Ve(this.pdfDocument),Ve(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ve(Array.isArray(t));const s=t[0];new Promise(n=>{Ve(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(r=>{n(r)}).catch(()=>{Ve(!1)}):typeof s=="number"?n(s):Ve(!1)}).then(n=>{const r=n+1;Ve(this.pdfViewer),Ve(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:n,pageNumber:r})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;Ve(this.pdfViewer),Ve(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||mN,e.target=s?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Bb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Kf=typeof document<"u",Z0=Kf&&window.location.protocol==="file:";function bN(i){return typeof i<"u"}function Ir(i){return bN(i)&&i!==null}function vN(i){return typeof i=="string"}function yN(i){return i instanceof ArrayBuffer}function _N(i){return Ve(Kf),i instanceof Blob}function ng(i){return vN(i)&&/^data:/.test(i)}function jb(i){Ve(ng(i));const[e="",t=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function wN(){return Kf&&window.devicePixelRatio||1}const J0="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function $b(){Lt(!Z0,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${J0}`)}function AN(){Lt(!Z0,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${J0}`)}function Ji(i){i&&i.cancel&&i.cancel()}function rg(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function kN(i){return i.name==="RenderingCancelledException"}function EN(i){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=n=>{if(!n.target)return t(new Error("Error while reading a file."));const{error:r}=n.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(i)})}function SN(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function jo(){return j.useReducer(SN,{value:void 0,error:void 0})}var xN=function(i,e,t,s){function n(r){return r instanceof t?r:new t(function(a){a(r)})}return new(t||(t=Promise))(function(r,a){function o(d){try{h(s.next(d))}catch(u){a(u)}}function l(d){try{h(s.throw(d))}catch(u){a(u)}}function h(d){d.done?r(d.value):n(d.value).then(o,l)}h((s=s.apply(i,e||[])).next())})},zb=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(i);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(i,s[n])&&(t[s[n]]=i[s[n]]);return t};const{PDFDataRangeTransport:CN}=G2,TN=(i,e)=>{switch(e){case Bb.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");i(t);break}case Bb.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");i(t);break}}};function Hb(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const PN=j.forwardRef(function(e,t){var{children:s,className:n,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:h,imageResourcesPath:d,loading:u="Loading PDF…",noData:f="No PDF file specified.",onItemClick:p,onLoadError:m,onLoadProgress:g,onLoadSuccess:v,onPassword:b=TN,onSourceError:y,onSourceSuccess:E,options:C,renderMode:R,rotate:M}=e,D=zb(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[x,S]=jo(),{value:F,error:z}=x,[L,B]=jo(),{value:w,error:G}=L,re=j.useRef(new gN),$=j.useRef([]),Q=j.useRef(void 0),Y=j.useRef(void 0);l&&l!==Q.current&&Hb(l)&&(Lt(!ya(l,Q.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Q.current=l),C&&C!==Y.current&&(Lt(!ya(C,Y.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Y.current=C);const le=j.useRef({scrollPageIntoView:V=>{const{dest:I,pageNumber:N,pageIndex:U=N-1}=V;if(p){p({dest:I,pageIndex:U,pageNumber:N});return}const te=$.current[U];if(te){te.scrollIntoView();return}Lt(!1,`An internal link leading to page ${N} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});j.useImperativeHandle(t,()=>({linkService:re,pages:$,viewer:le}),[]);function H(){E&&E()}function O(){z&&(Lt(!1,z.toString()),y&&y(z))}function ee(){S({type:"RESET"})}j.useEffect(ee,[l,S]);const ae=j.useCallback(()=>xN(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return ng(l)?{data:jb(l)}:($b(),{url:l});if(l instanceof CN)return{range:l};if(yN(l))return{data:l};if(Kf&&_N(l))return{data:yield EN(l)};if(Ve(typeof l=="object"),Ve(Hb(l)),"url"in l&&typeof l.url=="string"){if(ng(l.url)){const{url:V}=l,I=zb(l,["url"]),N=jb(V);return Object.assign({data:N},I)}$b()}return l}),[l]);j.useEffect(()=>{const V=Kh(ae());return V.promise.then(I=>{S({type:"RESOLVE",value:I})}).catch(I=>{S({type:"REJECT",error:I})}),()=>{Ji(V)}},[ae,S]),j.useEffect(()=>{if(!(typeof F>"u")){if(F===!1){O();return}H()}},[F]);function Z(){w&&(v&&v(w),$.current=new Array(w.numPages),re.current.setDocument(w))}function me(){G&&(Lt(!1,G.toString()),m&&m(G))}function ue(){B({type:"RESET"})}j.useEffect(ue,[B,F]);function fe(){if(!F)return;const V=Object.assign(Object.assign({},F),C),I=G0(V);g&&(I.onProgress=g),b&&(I.onPassword=b);const N=I;return N.promise.then(U=>{B({type:"RESOLVE",value:U})}).catch(U=>{N.destroyed||B({type:"REJECT",error:U})}),()=>{N.destroy()}}j.useEffect(fe,[C,B,F]),j.useEffect(()=>{if(!(typeof w>"u")){if(w===!1){me();return}Z()}},[w]);function oe(){re.current.setViewer(le.current),re.current.setExternalLinkRel(a),re.current.setExternalLinkTarget(o)}j.useEffect(oe,[a,o]);function de(V,I){$.current[V]=I}function ye(V){delete $.current[V]}const Ce=j.useMemo(()=>({imageResourcesPath:d,linkService:re.current,onItemClick:p,pdf:w,registerPage:de,renderMode:R,rotate:M,unregisterPage:ye}),[d,p,w,R,M]),ge=j.useMemo(()=>X0(D,()=>w),[D,w]);function _(){return k.jsx(K0.Provider,{value:Ce,children:s})}function K(){return l?w==null?k.jsx(_a,{type:"loading",children:typeof u=="function"?u():u}):w===!1?k.jsx(_a,{type:"error",children:typeof r=="function"?r():r}):_():k.jsx(_a,{type:"no-data",children:typeof f=="function"?f():f})}return k.jsx("div",Object.assign({className:Yf("react-pdf__Document",n),ref:h,style:{"--scale-factor":"1"}},ge,{children:K()}))});function Q0(){return j.useContext(K0)}function e_(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=i.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(r){t.forEach(function(a){typeof a=="function"?a(r):a&&(a.current=r)})}}const t_=j.createContext(null),s_={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},RN=/^H(\d+)$/;function LN(i){return i in s_}function Zf(i){return"children"in i}function n_(i){return Zf(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function NN(i){const e={};if(Zf(i)){const{role:t}=i,s=t.match(RN);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(LN(t)){const n=s_[t];n&&(e.role=n)}}return e}function r_(i){const e={};if(Zf(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),n_(i)){const[t]=i.children;if(t){const s=r_(t);return Object.assign(Object.assign({},e),s)}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function IN(i){return i?Object.assign(Object.assign({},NN(i)),r_(i)):null}function i_({className:i,node:e}){const t=j.useMemo(()=>IN(e),[e]),s=j.useMemo(()=>!Zf(e)||n_(e)?null:e.children.map((n,r)=>k.jsx(i_,{node:n},r)),[e]);return k.jsx("span",Object.assign({className:i},t,{children:s}))}function Jf(){return j.useContext(t_)}function MN(){const i=Jf();Ve(i);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=i,[s,n]=jo(),{value:r,error:a}=s,{customTextRenderer:o,page:l}=i;function h(){r&&t&&t(r)}function d(){a&&(Lt(!1,a.toString()),e&&e(a))}function u(){n({type:"RESET"})}j.useEffect(u,[n,l]);function f(){if(o||!l)return;const p=Kh(l.getStructTree()),m=p;return p.promise.then(g=>{n({type:"RESOLVE",value:g})}).catch(g=>{n({type:"REJECT",error:g})}),()=>Ji(m)}return j.useEffect(f,[o,l,n]),j.useEffect(()=>{if(r!==void 0){if(r===!1){d();return}h()}},[r]),r?k.jsx(i_,{className:"react-pdf__Page__structTree structTree",node:r}):null}const Ub=V0;function DN(i){const e=Jf();Ve(e);const t=Object.assign(Object.assign({},e),i),{_className:s,canvasBackground:n,devicePixelRatio:r=wN(),onRenderError:a,onRenderSuccess:o,page:l,renderForms:h,renderTextLayer:d,rotate:u,scale:f}=t,{canvasRef:p}=i;Ve(l);const m=j.useRef(null);function g(){l&&o&&o(rg(l,f))}function v(R){kN(R)||(Lt(!1,R.toString()),a&&a(R))}const b=j.useMemo(()=>l.getViewport({scale:f*r,rotation:u}),[r,l,u,f]),y=j.useMemo(()=>l.getViewport({scale:f,rotation:u}),[l,u,f]);function E(){if(!l)return;l.cleanup();const{current:R}=m;if(!R)return;R.width=b.width,R.height=b.height,R.style.width=`${Math.floor(y.width)}px`,R.style.height=`${Math.floor(y.height)}px`,R.style.visibility="hidden";const M={annotationMode:h?Ub.ENABLE_FORMS:Ub.ENABLE,canvasContext:R.getContext("2d",{alpha:!1}),viewport:b};n&&(M.background=n);const D=l.render(M),x=D;return D.promise.then(()=>{R.style.visibility="",g()}).catch(v),()=>Ji(x)}j.useEffect(E,[n,m,r,l,h,b,y]);const C=j.useCallback(()=>{const{current:R}=m;R&&(R.width=0,R.height=0)},[m]);return j.useEffect(()=>C,[C]),k.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:e_(p,m),style:{display:"block",userSelect:"none"},children:d?k.jsx(MN,{}):null})}function FN(i){return"str"in i}function ON(){const i=Jf();Ve(i);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:n,onRenderTextLayerSuccess:r,page:a,pageIndex:o,pageNumber:l,rotate:h,scale:d}=i;Ve(a);const[u,f]=jo(),{value:p,error:m}=u,g=j.useRef(null),v=j.useRef(void 0);Lt(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function b(){p&&s&&s(p)}function y(){m&&(Lt(!1,m.toString()),t&&t(m))}function E(){f({type:"RESET"})}j.useEffect(E,[a,f]);function C(){if(!a)return;const z=Kh(a.getTextContent()),L=z;return z.promise.then(B=>{f({type:"RESOLVE",value:B})}).catch(B=>{f({type:"REJECT",error:B})}),()=>Ji(L)}j.useEffect(C,[a,f]),j.useEffect(()=>{if(p!==void 0){if(p===!1){y();return}b()}},[p]);const R=j.useCallback(()=>{r&&r()},[r]),M=j.useCallback(z=>{Lt(!1,z.toString()),n&&n(z)},[n]);function D(){const z=v.current;z&&z.classList.add("active")}function x(){const z=v.current;z&&z.classList.remove("active")}const S=j.useMemo(()=>a.getViewport({scale:d,rotation:h}),[a,h,d]);function F(){if(!a||!p)return;const{current:z}=g;if(!z)return;z.innerHTML="";const L=a.streamTextContent({includeMarkedContent:!0}),B={container:z,textContentSource:L,viewport:S},w=new q0(B),G=w;return w.render().then(()=>{const re=document.createElement("div");re.className="endOfContent",z.append(re),v.current=re;const $=z.querySelectorAll('[role="presentation"]');if(e){let Q=0;p.items.forEach((Y,le)=>{if(!FN(Y))return;const H=$[Q];if(!H)return;const O=e(Object.assign({pageIndex:o,pageNumber:l,itemIndex:le},Y));H.innerHTML=O,Q+=Y.str&&Y.hasEOL?2:1})}R()}).catch(M),()=>Ji(G)}return j.useLayoutEffect(F,[e,M,R,a,o,l,p,S]),k.jsx("div",{className:Yf("react-pdf__Page__textContent","textLayer"),onMouseUp:x,onMouseDown:D,ref:g})}function BN(){const i=Q0(),e=Jf();Ve(e);const t=Object.assign(Object.assign({},i),e),{imageResourcesPath:s,linkService:n,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:o,onRenderAnnotationLayerSuccess:l,page:h,pdf:d,renderForms:u,rotate:f,scale:p=1}=t;Ve(d),Ve(h),Ve(n);const[m,g]=jo(),{value:v,error:b}=m,y=j.useRef(null);Lt(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){v&&a&&a(v)}function C(){b&&(Lt(!1,b.toString()),r&&r(b))}function R(){g({type:"RESET"})}j.useEffect(R,[g,h]);function M(){if(!h)return;const z=Kh(h.getAnnotations()),L=z;return z.promise.then(B=>{g({type:"RESOLVE",value:B})}).catch(B=>{g({type:"REJECT",error:B})}),()=>{Ji(L)}}j.useEffect(M,[g,h,u]),j.useEffect(()=>{if(v!==void 0){if(v===!1){C();return}E()}},[v]);function D(){l&&l()}function x(z){Lt(!1,`${z}`),o&&o(z)}const S=j.useMemo(()=>h.getViewport({scale:p,rotation:f}),[h,f,p]);function F(){if(!d||!h||!n||!v)return;const{current:z}=y;if(!z)return;const L=S.clone({dontFlip:!0}),B={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:z,l10n:null,page:h,viewport:L},w={annotations:v,annotationStorage:d.annotationStorage,div:z,imageResourcesPath:s,linkService:n,page:h,renderForms:u,viewport:L};z.innerHTML="";try{new W0(B).render(w),D()}catch(G){x(G)}return()=>{}}return j.useEffect(F,[v,s,n,h,u,S]),k.jsx("div",{className:Yf("react-pdf__Page__annotations","annotationLayer"),ref:y})}var jN=function(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(i);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(i,s[n])&&(t[s[n]]=i[s[n]]);return t};const Wb=1;function a_(i){const e=Q0(),t=Object.assign(Object.assign({},e),i),{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:n=!0,canvasBackground:r,canvasRef:a,children:o,className:l,customRenderer:h,customTextRenderer:d,devicePixelRatio:u,error:f="Failed to load the page.",height:p,inputRef:m,loading:g="Loading page…",noData:v="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:y,onGetStructTreeError:E,onGetStructTreeSuccess:C,onGetTextError:R,onGetTextSuccess:M,onLoadError:D,onLoadSuccess:x,onRenderAnnotationLayerError:S,onRenderAnnotationLayerSuccess:F,onRenderError:z,onRenderSuccess:L,onRenderTextLayerError:B,onRenderTextLayerSuccess:w,pageIndex:G,pageNumber:re,pdf:$,registerPage:Q,renderAnnotationLayer:Y=!0,renderForms:le=!1,renderMode:H="canvas",renderTextLayer:O=!0,rotate:ee,scale:ae=Wb,unregisterPage:Z,width:me}=t,ue=jN(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[fe,oe]=jo(),{value:de,error:ye}=fe,Ce=j.useRef(null);Ve($);const ge=Ir(re)?re-1:G??null,_=re??(Ir(G)?G+1:null),K=ee??(de?de.rotate:null),V=j.useMemo(()=>{if(!de)return null;let Xe=1;const ze=ae??Wb;if(me||p){const Be=de.getViewport({scale:1,rotation:K});me?Xe=me/Be.width:p&&(Xe=p/Be.height)}return ze*Xe},[p,de,K,ae,me]);function I(){return()=>{Ir(ge)&&n&&Z&&Z(ge)}}j.useEffect(I,[n,$,ge,Z]);function N(){if(x){if(!de||!V)return;x(rg(de,V))}if(n&&Q){if(!Ir(ge)||!Ce.current)return;Q(ge,Ce.current)}}function U(){ye&&(Lt(!1,ye.toString()),D&&D(ye))}function te(){oe({type:"RESET"})}j.useEffect(te,[oe,$,ge]);function ne(){if(!$||!_)return;const Xe=Kh($.getPage(_)),ze=Xe;return Xe.promise.then(Be=>{oe({type:"RESOLVE",value:Be})}).catch(Be=>{oe({type:"REJECT",error:Be})}),()=>Ji(ze)}j.useEffect(ne,[oe,$,ge,_,Q]),j.useEffect(()=>{if(de!==void 0){if(de===!1){U();return}N()}},[de,V]);const X=j.useMemo(()=>de&&Ir(ge)&&_&&Ir(K)&&Ir(V)?{_className:s,canvasBackground:r,customTextRenderer:d,devicePixelRatio:u,onGetAnnotationsError:b,onGetAnnotationsSuccess:y,onGetStructTreeError:E,onGetStructTreeSuccess:C,onGetTextError:R,onGetTextSuccess:M,onRenderAnnotationLayerError:S,onRenderAnnotationLayerSuccess:F,onRenderError:z,onRenderSuccess:L,onRenderTextLayerError:B,onRenderTextLayerSuccess:w,page:de,pageIndex:ge,pageNumber:_,renderForms:le,renderTextLayer:O,rotate:K,scale:V}:null,[s,r,d,u,b,y,E,C,R,M,S,F,z,L,B,w,de,ge,_,le,O,K,V]),ie=j.useMemo(()=>X0(ue,()=>de&&(V?rg(de,V):void 0)),[ue,de,V]),he=`${ge}@${V}/${K}`;function se(){switch(H){case"custom":return Ve(h),k.jsx(h,{},`${he}_custom`);case"none":return null;case"canvas":default:return k.jsx(DN,{canvasRef:a},`${he}_canvas`)}}function pe(){return O?k.jsx(ON,{},`${he}_text`):null}function we(){return Y?k.jsx(BN,{},`${he}_annotations`):null}function ke(){return k.jsxs(t_.Provider,{value:X,children:[se(),pe(),we(),o]})}function qe(){return _?$===null||de===void 0||de===null?k.jsx(_a,{type:"loading",children:typeof g=="function"?g():g}):$===!1||de===!1?k.jsx(_a,{type:"error",children:typeof f=="function"?f():f}):ke():k.jsx(_a,{type:"no-data",children:typeof v=="function"?v():v})}return k.jsx("div",Object.assign({className:Yf(s,l),"data-page-number":_,ref:e_(m,Ce),style:{"--scale-factor":`${V}`,backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},ie,{children:qe()}))}AN();Eg.workerSrc="pdf.worker.mjs";const o_="SET_ZOOM_LEVEL",zr=i=>({type:o_,value:i}),l_="SET_PDF_PAGINATED",Sg=i=>({type:l_,value:i}),c_="SET_NUM_PAGES",Vb=i=>({type:c_,value:i}),h_="SET_CURRENT_PAGE",d_="SET_CURRENT_MAIN_STATE",nn=i=>({type:h_,value:i}),u_="SET_LOADING_PROGRESS",Cp=i=>({type:u_,value:i}),f_="SET_PASSWORD_REQUIRED",Tp=i=>({type:f_,value:i}),p_="SET_PASSWORD_CALLBACK",Pp=i=>({type:p_,value:i}),m_="SET_PDF_DOCUMENT",$N=i=>({type:m_,value:i}),Qn={defaultZoomLevel:1,zoomLevel:1,zoomJump:.1,paginated:!0,numPages:0,currentPage:1,loadingProgress:0,passwordRequired:!1,passwordCallback:null,pdfDocument:null},zN=(i=Qn,e)=>{switch(e.type){case o_:{const{value:t}=e;return{...i,zoomLevel:t}}case l_:{const{value:t}=e;return{...i,paginated:t}}case c_:{const{value:t}=e;return{...i,numPages:t}}case h_:{const{value:t}=e;return{...i,currentPage:t}}case d_:{const{value:t}=e;return{...i,mainState:t}}case u_:{const{value:t}=e;return{...i,loadingProgress:t}}case f_:{const{value:t}=e;return{...i,passwordRequired:t}}case p_:{const{value:t}=e;return{...i,passwordCallback:t}}case m_:{const{value:t}=e;return{...i,pdfDocument:t}}default:return i}},Tr=j.createContext({state:Qn,dispatch:()=>null}),g_=({children:i,mainState:e})=>{var r,a,o,l,h,d,u;const[t,s]=j.useReducer(zN,{...Qn,defaultZoomLevel:((a=(r=e.config)==null?void 0:r.pdfZoom)==null?void 0:a.defaultZoom)??Qn.defaultZoomLevel,zoomLevel:((l=(o=e.config)==null?void 0:o.pdfZoom)==null?void 0:l.defaultZoom)??Qn.zoomLevel,zoomJump:((d=(h=e.config)==null?void 0:h.pdfZoom)==null?void 0:d.zoomJump)??Qn.zoomJump,paginated:(u=e.config)!=null&&u.pdfVerticalScrollByDefault?!1:Qn.paginated,mainState:e}),n=j.useRef(void 0);return j.useEffect(()=>{s({type:d_,value:e})},[e]),j.useEffect(()=>{e.targetPage!==void 0&&e.targetPage!==n.current&&e.targetPage>=1&&e.targetPage<=t.numPages&&(s(nn(e.targetPage)),t.paginated||s(Sg(!0)),n.current=e.targetPage)},[e.targetPage,t.numPages,t.paginated]),k.jsx(Tr.Provider,{value:{state:t,dispatch:s},children:i})};g_.__docgenInfo={description:"",methods:[],displayName:"PDFProvider",props:{mainState:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  currentFileNo: number;
  documents: IDocument[];
  documentLoading?: boolean;
  currentDocument?: IDocument;
  rendererRect?: DOMRect;
  config?: IConfig;
  pluginRenderers?: DocRenderer[];
  prefetchMethod?: string;
  requestHeaders?: Record<string, string>;
  language: AvailableLanguages;
  activeDocument?: IDocument;
  onDocumentChange?: (document: IDocument) => void;
  isDragging?: boolean;
  targetPage?: number;
}`,signature:{properties:[{key:"currentFileNo",value:{name:"number",required:!0}},{key:"documents",value:{name:"Array",elements:[{name:"IDocument"}],raw:"IDocument[]",required:!0}},{key:"documentLoading",value:{name:"boolean",required:!1}},{key:"currentDocument",value:{name:"IDocument",required:!1}},{key:"rendererRect",value:{name:"DOMRect",required:!1}},{key:"config",value:{name:"IConfig",required:!1}},{key:"pluginRenderers",value:{name:"Array",elements:[{name:"DocRenderer"}],raw:"DocRenderer[]",required:!1}},{key:"prefetchMethod",value:{name:"string",required:!1}},{key:"requestHeaders",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"language",value:{name:"union",raw:"keyof typeof locales",elements:[{name:"literal",value:"en"},{name:"literal",value:"pl"},{name:"literal",value:"es"},{name:"literal",value:"de"},{name:"literal",value:"it"},{name:"literal",value:"pt"},{name:"literal",value:"fr"},{name:"literal",value:"ar"},{name:"literal",value:"sr"},{name:"literal",value:"sr_cyr"},{name:"literal",value:"ja"},{name:"literal",value:"ru"},{name:"literal",value:"se"},{name:"literal",value:"tr"}],required:!0}},{key:"activeDocument",value:{name:"IDocument",required:!1}},{key:"onDocumentChange",value:{name:"signature",type:"function",raw:"(document: IDocument) => void",signature:{arguments:[{type:{name:"IDocument"},name:"document"}],return:{name:"void"}},required:!1}},{key:"isDragging",value:{name:"boolean",required:!1}},{key:"targetPage",value:{name:"number",required:!1}}]}},description:""}}};const b_="SET_ACTIVE_TOOL",v_="SET_CURRENT_COLOR",y_="ADD_ANNOTATION",__="UPDATE_ANNOTATION",w_="DELETE_ANNOTATION",A_="SET_ANNOTATIONS",k_="SET_SELECTED_ANNOTATION",E_="SET_IS_DRAWING",HN=i=>({type:b_,tool:i}),UN=i=>({type:v_,color:i}),xg=i=>({type:y_,annotation:i}),WN=(i,e)=>({type:__,id:i,updates:e}),Cg=i=>({type:w_,id:i}),VN=i=>({type:A_,annotations:i}),Tg=i=>({type:k_,id:i}),qb=i=>({type:E_,isDrawing:i}),S_=["#FFFF00","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8"],x_=["select","highlight","pen","comment","eraser"],Kd={activeTool:"select",currentColor:"#FFFF00",annotations:[],selectedAnnotationId:null,isDrawing:!1,availableColors:S_,availableTools:x_},qN=(i=Kd,e)=>{switch(e.type){case b_:{const{tool:t}=e;return{...i,activeTool:t}}case v_:{const{color:t}=e;return{...i,currentColor:t}}case y_:{const{annotation:t}=e;return{...i,annotations:[...i.annotations,t]}}case __:{const{id:t,updates:s}=e;return{...i,annotations:i.annotations.map(n=>n.id===t?{...n,...s}:n)}}case w_:{const{id:t}=e;return{...i,annotations:i.annotations.filter(s=>s.id!==t),selectedAnnotationId:i.selectedAnnotationId===t?null:i.selectedAnnotationId}}case A_:{const{annotations:t}=e;return{...i,annotations:t}}case k_:{const{id:t}=e;return{...i,selectedAnnotationId:t}}case E_:{const{isDrawing:t}=e;return{...i,isDrawing:t}}default:return i}},ln=j.createContext({state:Kd,dispatch:()=>null}),C_=({children:i,config:e,documentUri:t})=>{var r;const[s,n]=j.useReducer(qN,{...Kd,currentColor:(e==null?void 0:e.defaultColor)||Kd.currentColor,availableColors:(e==null?void 0:e.colors)||S_,availableTools:(e==null?void 0:e.tools)||x_,activeTool:((r=e==null?void 0:e.tools)==null?void 0:r[0])||"select",annotations:(e==null?void 0:e.initialAnnotations)||[]});return j.useEffect(()=>{e!=null&&e.initialAnnotations&&n(VN(e.initialAnnotations))},[e==null?void 0:e.initialAnnotations]),j.useEffect(()=>{e!=null&&e.onAnnotationChange&&e.onAnnotationChange(s.annotations)},[s.annotations,e==null?void 0:e.onAnnotationChange]),k.jsx(ln.Provider,{value:{state:s,dispatch:n,config:e},children:i})};C_.__docgenInfo={description:"",methods:[],displayName:"AnnotationProvider",props:{config:{required:!1,tsType:{name:"IAnnotationConfig"},description:""},documentUri:{required:!1,tsType:{name:"string"},description:""}}};const GN=({canvasRef:i,pageNumber:e,documentUri:t})=>{const{state:s,dispatch:n}=j.useContext(ln),[r,a]=j.useState([]),o=j.useRef(!1),l=j.useCallback(p=>{const m=i.current;if(!m)return null;const g=m.getBoundingClientRect(),v=m.width/g.width,b=m.height/g.height;return{x:(p.clientX-g.left)*v,y:(p.clientY-g.top)*b}},[i]),h=j.useCallback(p=>{if(s.activeTool!=="pen")return;const m=l(p);if(!m)return;o.current=!0,n(qb(!0)),a([m]);const g=i.current,v=g==null?void 0:g.getContext("2d");v&&(v.beginPath(),v.moveTo(m.x,m.y),v.strokeStyle=s.currentColor,v.lineWidth=3,v.lineCap="round",v.lineJoin="round")},[s.activeTool,s.currentColor,l,n,i]),d=j.useCallback(p=>{if(!o.current||s.activeTool!=="pen")return;const m=l(p);if(!m)return;a(b=>[...b,m]);const g=i.current,v=g==null?void 0:g.getContext("2d");v&&(v.lineTo(m.x,m.y),v.stroke())},[s.activeTool,l,i]),u=j.useCallback(()=>{if(o.current){if(o.current=!1,n(qb(!1)),r.length>1){const p={paths:[r],strokeWidth:3},m={id:crypto.randomUUID(),type:"drawing",documentUri:t,pageNumber:e,color:s.currentColor,data:p};n(xg(m))}a([])}},[r,t,e,s.currentColor,n]),f=j.useCallback(p=>{const m=i.current,g=m==null?void 0:m.getContext("2d");!g||!m||(g.clearRect(0,0,m.width,m.height),p.filter(v=>v.type==="drawing"&&v.pageNumber===e&&v.documentUri===t).forEach(v=>{const b=v.data;b!=null&&b.paths&&(g.strokeStyle=v.color,g.lineWidth=b.strokeWidth||3,g.lineCap="round",g.lineJoin="round",b.paths.forEach(y=>{y.length<2||(g.beginPath(),g.moveTo(y[0].x,y[0].y),y.slice(1).forEach(E=>{g.lineTo(E.x,E.y)}),g.stroke())}))}))},[i,e,t]);return{startDrawing:h,draw:d,stopDrawing:u,redrawAnnotations:f,isDrawing:s.isDrawing}},XN=({pageNumber:i,documentUri:e,containerRef:t})=>{const{state:s,dispatch:n}=j.useContext(ln);return{handleTextSelection:j.useCallback(()=>{if(s.activeTool!=="highlight")return;const a=window.getSelection();if(!a||a.isCollapsed)return;const o=a.getRangeAt(0),l=t.current;if(!l)return;const h=l.getBoundingClientRect(),d=Array.from(o.getClientRects());if(d.length===0)return;const f={rects:d.map(m=>({x:m.left-h.left,y:m.top-h.top,width:m.width,height:m.height})),text:a.toString()},p={id:crypto.randomUUID(),type:"highlight",documentUri:e,pageNumber:i,color:s.currentColor,data:f};n(xg(p)),a.removeAllRanges()},[s.activeTool,s.currentColor,e,i,t,n])}},T_=({annotation:i})=>{const{state:e,dispatch:t}=j.useContext(ln),s=i.data,n=e.selectedAnnotationId===i.id;if(!(s!=null&&s.rects))return null;const r=a=>{a.stopPropagation(),e.activeTool==="select"?t(Tg(i.id)):e.activeTool==="eraser"&&t(Cg(i.id))};return k.jsx(k.Fragment,{children:s.rects.map((a,o)=>k.jsx("div",{className:"rdv-highlight-rect",style:{left:a.x,top:a.y,width:a.width,height:a.height,backgroundColor:i.color},...n?{"data-selected":""}:{},onClick:r,title:s.text},`${i.id}-${o}`))})};T_.__docgenInfo={description:"",methods:[],displayName:"TextHighlight",props:{annotation:{required:!0,tsType:{name:"IAnnotation"},description:""}}};const P_=({color:i="#000",size:e="100%"})=>k.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),k.jsx("path",{d:"M13 13l6 6"})]}),R_=({color:i="#000",size:e="100%"})=>k.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M12 20h9"}),k.jsx("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}),k.jsx("rect",{x:"3",y:"17",width:"18",height:"4",rx:"1",fill:i,opacity:"0.3"})]}),L_=({color:i="#000",size:e="100%"})=>k.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M12 19l7-7 3 3-7 7-3-3z"}),k.jsx("path",{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"}),k.jsx("path",{d:"M2 2l7.586 7.586"}),k.jsx("circle",{cx:"11",cy:"11",r:"2"})]}),N_=({color:i="#000",size:e="100%"})=>k.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:k.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),I_=({color:i="#000",size:e="100%"})=>k.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M20 20H7L3 16c-.6-.6-.6-1.5 0-2.1L13.1 3.9c.6-.6 1.5-.6 2.1 0l5.7 5.7c.6.6.6 1.5 0 2.1L11 21"}),k.jsx("path",{d:"M6 11l7 7"})]}),M_=({color:i="#000",size:e="100%"})=>k.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("polyline",{points:"3 6 5 6 21 6"}),k.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),k.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),k.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]});P_.__docgenInfo={description:"",methods:[],displayName:"SelectIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};R_.__docgenInfo={description:"",methods:[],displayName:"HighlightIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};L_.__docgenInfo={description:"",methods:[],displayName:"PenIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};N_.__docgenInfo={description:"",methods:[],displayName:"CommentIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};I_.__docgenInfo={description:"",methods:[],displayName:"EraserIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};M_.__docgenInfo={description:"",methods:[],displayName:"DeleteIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};const D_=({annotation:i,onClose:e})=>{const{dispatch:t}=j.useContext(ln),s=i.data,[n,r]=j.useState((s==null?void 0:s.text)||""),[a,o]=j.useState(!(s!=null&&s.text)),l=()=>{if(n.trim()){const u={...s,text:n.trim(),timestamp:Date.now()};t(WN(i.id,{data:u})),o(!1)}},h=()=>{t(Cg(i.id)),e()},d=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),l()),u.key==="Escape"&&e()};return k.jsxs("div",{className:"rdv-comment-popover",onClick:u=>u.stopPropagation(),children:[k.jsxs("div",{className:"rdv-comment-popover-header",children:[k.jsx("span",{className:"rdv-comment-popover-title",children:"Comment"}),k.jsx("button",{className:"rdv-comment-popover-delete",onClick:h,title:"Delete comment",children:k.jsx(M_,{size:"14",color:"#666"})})]}),a?k.jsx("textarea",{className:"rdv-comment-popover-textarea",value:n,onChange:u=>r(u.target.value),onKeyDown:d,placeholder:"Enter your comment...",autoFocus:!0}):k.jsx("div",{className:"rdv-comment-popover-text",onClick:()=>o(!0),children:n}),k.jsxs("div",{className:"rdv-comment-popover-footer",children:[(s==null?void 0:s.timestamp)&&k.jsx("span",{className:"rdv-comment-popover-timestamp",children:new Date(s.timestamp).toLocaleString()}),a&&k.jsx("button",{className:"rdv-comment-popover-save",onClick:l,disabled:!n.trim(),children:"Save"})]})]})};D_.__docgenInfo={description:"",methods:[],displayName:"CommentPopover",props:{annotation:{required:!0,tsType:{name:"IAnnotation"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const F_=({annotation:i})=>{const{state:e,dispatch:t}=j.useContext(ln),[s,n]=j.useState(!1),r=i.data,a=e.selectedAnnotationId===i.id;if(!r)return null;const o=l=>{l.stopPropagation(),e.activeTool==="eraser"?t(Cg(i.id)):(t(Tg(i.id)),n(!s))};return k.jsxs("div",{className:"rdv-comment-container",style:{left:r.x,top:r.y},children:[k.jsx("button",{className:"rdv-comment-marker",style:{backgroundColor:i.color},...a?{"data-selected":""}:{},onClick:o,"aria-label":"Comment",children:k.jsx(YN,{})}),s&&k.jsx(D_,{annotation:i,onClose:()=>n(!1)})]})},YN=()=>k.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"white",stroke:"white",strokeWidth:"2",children:k.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})});F_.__docgenInfo={description:"",methods:[],displayName:"CommentMarker",props:{annotation:{required:!0,tsType:{name:"IAnnotation"},description:""}}};const O_=({pageNumber:i,documentUri:e,width:t,height:s})=>{const{state:n,dispatch:r}=j.useContext(ln),a=j.useRef(null),o=j.useRef(null),{startDrawing:l,draw:h,stopDrawing:d,redrawAnnotations:u}=GN({canvasRef:o,pageNumber:i,documentUri:e}),{handleTextSelection:f}=XN({pageNumber:i,documentUri:e,containerRef:a}),p=n.annotations.filter(E=>E.pageNumber===i&&E.documentUri===e),m=p.filter(E=>E.type==="highlight"),g=p.filter(E=>E.type==="comment"),v=p.filter(E=>E.type==="drawing");j.useEffect(()=>{u(v)},[v,u]),j.useEffect(()=>{const E=o.current;E&&(E.width=t,E.height=s,u(v))},[t,s,u,v]);const b=E=>{var C;if(n.activeTool==="comment"){const R=(C=a.current)==null?void 0:C.getBoundingClientRect();if(!R)return;const M=E.clientX-R.left,D=E.clientY-R.top,x={x:M,y:D,text:"",timestamp:Date.now()},S={id:crypto.randomUUID(),type:"comment",documentUri:e,pageNumber:i,color:n.currentColor,data:x};r(xg(S))}else n.activeTool==="select"&&r(Tg(null))},y=()=>{switch(n.activeTool){case"highlight":return"text";case"pen":return"crosshair";case"comment":return"pointer";case"eraser":return"not-allowed";default:return"default"}};return k.jsxs("div",{ref:a,className:"rdv-annotation-layer",style:{width:t,height:s,cursor:y()},onClick:b,onMouseUp:f,children:[m.map(E=>k.jsx(T_,{annotation:E},E.id)),g.map(E=>k.jsx(F_,{annotation:E},E.id)),k.jsx("canvas",{ref:o,className:"rdv-annotation-drawing-canvas",width:t,height:s,onMouseDown:l,onMouseMove:h,onMouseUp:d,onMouseLeave:d,...n.activeTool==="pen"?{"data-pen-active":""}:{}})]})};O_.__docgenInfo={description:"",methods:[],displayName:"AnnotationLayer",props:{pageNumber:{required:!0,tsType:{name:"number"},description:""},documentUri:{required:!0,tsType:{name:"string"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""}}};const B_=()=>{const{state:i,dispatch:e}=j.useContext(ln);return k.jsx("div",{className:"rdv-color-picker",children:i.availableColors.map(t=>k.jsx("button",{className:"rdv-color-btn",style:{backgroundColor:t},...i.currentColor===t?{"data-selected":""}:{},onClick:()=>e(UN(t)),title:t,"aria-label":`Select color ${t}`,"aria-pressed":i.currentColor===t},t))})};B_.__docgenInfo={description:"",methods:[],displayName:"ColorPicker"};const KN={select:P_,highlight:R_,pen:L_,comment:N_,eraser:I_},Gb={select:"Select",highlight:"Highlight",pen:"Draw",comment:"Comment",eraser:"Eraser"},j_=()=>{const{state:i,dispatch:e}=j.useContext(ln);return k.jsxs("div",{className:"rdv-annotation-toolbar",children:[k.jsx("div",{className:"rdv-annotation-tool-group",children:i.availableTools.map(t=>{const s=KN[t],n=i.activeTool===t;return k.jsx("button",{className:"rdv-annotation-tool-btn",...n?{"data-active":""}:{},onClick:()=>e(HN(t)),title:Gb[t],"aria-label":Gb[t],"aria-pressed":n,children:k.jsx(s,{color:n?"#0064c8":"#333",size:"22"})},t)})}),(i.activeTool==="highlight"||i.activeTool==="pen"||i.activeTool==="comment")&&k.jsx("div",{className:"rdv-annotation-separator"}),(i.activeTool==="highlight"||i.activeTool==="pen"||i.activeTool==="comment")&&k.jsx(B_,{})]})};j_.__docgenInfo={description:"",methods:[],displayName:"AnnotationToolbar"};const $_=({config:i})=>{const{text:e,opacity:t=.1,fontSize:s=48,color:n="#000",rotation:r=-30}=i,a=j.useMemo(()=>Array.from({length:20},(l,h)=>h),[]);return k.jsx("div",{className:"rdv-watermark-overlay",style:{opacity:t},children:a.map(o=>k.jsx("span",{className:"rdv-watermark-text",style:{fontSize:`${s}px`,color:n,transform:`rotate(${r}deg)`},children:e},o))})};$_.__docgenInfo={description:"",methods:[],displayName:"WatermarkOverlay",props:{config:{required:!0,tsType:{name:"IWatermarkConfig"},description:""}}};const Pg={query:"",matches:[],currentMatchIndex:0,isOpen:!1,isSearching:!1};function ZN(i,e){switch(e.type){case"SET_QUERY":return{...i,query:e.value,currentMatchIndex:0};case"SET_MATCHES":return{...i,matches:e.value,currentMatchIndex:0};case"SET_CURRENT_MATCH_INDEX":return{...i,currentMatchIndex:e.value};case"SET_IS_OPEN":return{...i,isOpen:e.value};case"SET_IS_SEARCHING":return{...i,isSearching:e.value};case"NEXT_MATCH":return{...i,currentMatchIndex:i.matches.length>0?(i.currentMatchIndex+1)%i.matches.length:0};case"PREV_MATCH":return{...i,currentMatchIndex:i.matches.length>0?(i.currentMatchIndex-1+i.matches.length)%i.matches.length:0};case"RESET":return Pg;default:return i}}const Zh=j.createContext({state:Pg,dispatch:()=>{}}),z_=({children:i})=>{const[e,t]=j.useReducer(ZN,Pg);return k.jsx(Zh.Provider,{value:{state:e,dispatch:t},children:i})};z_.__docgenInfo={description:"",methods:[],displayName:"SearchProvider"};const JN=i=>({type:"SET_QUERY",value:i}),Xb=i=>({type:"SET_MATCHES",value:i}),yl=i=>({type:"SET_IS_OPEN",value:i}),Yb=i=>({type:"SET_IS_SEARCHING",value:i}),Kb=()=>({type:"NEXT_MATCH"}),Zb=()=>({type:"PREV_MATCH"});function QN(){const{state:i,dispatch:e}=j.useContext(Zh),t=j.useCallback(async(s,n)=>{if(e(JN(s)),!s.trim()||!n){e(Xb([]));return}e(Yb(!0));const r=[],a=s.toLowerCase();try{for(let o=1;o<=n.numPages;o++){const d=(await(await n.getPage(o)).getTextContent()).items.map(m=>"str"in m?m.str:"").join(" ");let u=0,f=0;const p=d.toLowerCase();for(;;){const m=p.indexOf(a,u);if(m===-1)break;r.push({pageIndex:o,matchIndex:f++,text:d.substring(m,m+s.length)}),u=m+1}}}catch{}e(Xb(r)),e(Yb(!1))},[e]);return{state:i,dispatch:e,search:t}}const hs=1.8,ds="#4b5563",Rg=({color:i,size:e})=>k.jsx("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:k.jsx("polyline",{points:"15 18 9 12 15 6"})}),Lg=({color:i,size:e})=>k.jsx("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:k.jsx("polyline",{points:"9 18 15 12 9 6"})}),H_=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),k.jsx("polyline",{points:"7 10 12 15 17 10"}),k.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),U_=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("circle",{cx:"11",cy:"11",r:"8"}),k.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),k.jsx("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),k.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),W_=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("circle",{cx:"11",cy:"11",r:"8"}),k.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),k.jsx("line",{x1:"8",y1:"11",x2:"14",y2:"11"})]}),V_=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M15 3h6v6"}),k.jsx("path",{d:"M9 21H3v-6"}),k.jsx("path",{d:"M21 3l-7 7"}),k.jsx("path",{d:"M3 21l7-7"})]}),q_=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),k.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),k.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),G_=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("polyline",{points:"15 3 21 3 21 9"}),k.jsx("polyline",{points:"9 21 3 21 3 15"}),k.jsx("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),k.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),X_=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("polyline",{points:"4 14 10 14 10 20"}),k.jsx("polyline",{points:"20 10 14 10 14 4"}),k.jsx("line",{x1:"14",y1:"10",x2:"21",y2:"3"}),k.jsx("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}),Y_=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("circle",{cx:"11",cy:"11",r:"8"}),k.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),K_=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),k.jsx("path",{d:"M6.5 2H20v20l-6.5-4L7 22V4.5A2.5 2.5 0 0 1 9.5 2z"})]}),Z_=({color:i,size:e})=>k.jsxs("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),k.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),J_=({color:i,size:e,reverse:t})=>k.jsx("svg",{width:e||"16",height:e||"16",viewBox:"0 0 24 24",fill:"none",stroke:i||ds,strokeWidth:hs,strokeLinecap:"round",strokeLinejoin:"round",children:t?k.jsxs(k.Fragment,{children:[k.jsx("rect",{x:"4",y:"1",width:"16",height:"10",rx:"1.5"}),k.jsx("rect",{x:"4",y:"13",width:"16",height:"10",rx:"1.5"}),k.jsx("path",{d:"M12 11v2"}),k.jsx("polyline",{points:"9 12.5 12 14 15 12.5"})]}):k.jsxs(k.Fragment,{children:[k.jsx("path",{d:"M6 2h9l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"}),k.jsx("polyline",{points:"14 2 14 8 20 8"})]})});Rg.__docgenInfo={description:"",methods:[],displayName:"PrevPDFNavIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};Lg.__docgenInfo={description:"",methods:[],displayName:"NextPDFNavIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};H_.__docgenInfo={description:"",methods:[],displayName:"DownloadPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};U_.__docgenInfo={description:"",methods:[],displayName:"ZoomInPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};W_.__docgenInfo={description:"",methods:[],displayName:"ZoomOutPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};V_.__docgenInfo={description:"",methods:[],displayName:"ResetZoomPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};q_.__docgenInfo={description:"",methods:[],displayName:"PrintPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};G_.__docgenInfo={description:"",methods:[],displayName:"FullscreenPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};X_.__docgenInfo={description:"",methods:[],displayName:"ExitFullscreenPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};Y_.__docgenInfo={description:"",methods:[],displayName:"SearchPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};K_.__docgenInfo={description:"",methods:[],displayName:"BookmarksPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};Z_.__docgenInfo={description:"",methods:[],displayName:"ClosePDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};J_.__docgenInfo={description:"",methods:[],displayName:"TogglePaginationPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};const Q_=({pdfDocument:i})=>{const{t:e}=on(),{state:t,dispatch:s,search:n}=QN(),r=j.useRef(null),a=j.useRef();j.useEffect(()=>{t.isOpen&&r.current&&r.current.focus()},[t.isOpen]);const o=j.useCallback(d=>{const u=d.target.value;a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{n(u,i)},300)},[i,n]),l=j.useCallback(d=>{d.key==="Enter"&&(d.preventDefault(),d.shiftKey?s(Zb()):s(Kb())),d.key==="Escape"&&s(yl(!1))},[s]),h=j.useCallback(()=>{s(yl(!1))},[s]);return t.isOpen?k.jsxs("div",{className:"rdv-search-bar",children:[k.jsx("input",{ref:r,type:"text",className:"rdv-search-input",placeholder:e("searchPlaceholder"),onChange:o,onKeyDown:l}),k.jsx("span",{className:"rdv-search-count",children:t.matches.length>0?e("searchMatchCount",{current:t.currentMatchIndex+1,total:t.matches.length}):t.query?e("searchNoResults"):""}),k.jsx("button",{className:"rdv-toolbar-btn",onMouseDown:()=>s(Zb()),disabled:t.matches.length===0,title:"Previous match",children:k.jsx(Rg,{size:"12"})}),k.jsx("button",{className:"rdv-toolbar-btn",onMouseDown:()=>s(Kb()),disabled:t.matches.length===0,title:"Next match",children:k.jsx(Lg,{size:"12"})}),k.jsx("button",{className:"rdv-toolbar-btn",onMouseDown:h,title:"Close search",children:k.jsx(Z_,{size:"12"})})]}):null};Q_.__docgenInfo={description:"",methods:[],displayName:"SearchBar",props:{pdfDocument:{required:!0,tsType:{name:"union",raw:"pdfjs.PDFDocumentProxy | null",elements:[{name:"pdfjs.PDFDocumentProxy"},{name:"null"}]},description:""}}};const Ng=({pageNum:i})=>{var M,D,x,S,F,z,L;const{state:{mainState:e,paginated:t,zoomLevel:s,numPages:n,currentPage:r}}=j.useContext(Tr);j.useContext(ln);const{t:a}=on(),o=j.useRef(null),[l,h]=j.useState({width:0,height:0}),u=j.useContext(Zh).state.query,f=((D=(M=e==null?void 0:e.config)==null?void 0:M.search)==null?void 0:D.enableSearch)??!1,p=(e==null?void 0:e.rendererRect)||null,m=(x=e==null?void 0:e.config)==null?void 0:x.annotations,g=(m==null?void 0:m.enableAnnotations)??!1,v=(S=e==null?void 0:e.config)==null?void 0:S.watermark,b=((z=(F=e==null?void 0:e.config)==null?void 0:F.textSelection)==null?void 0:z.enableTextSelection)??!1,y=i??r;j.useEffect(()=>{if(o.current){const B=o.current.querySelector("canvas");B&&h({width:B.width,height:B.height})}},[s,y]);const E=()=>{if(o.current){const B=o.current.querySelector("canvas");B&&h({width:B.offsetWidth,height:B.offsetHeight})}},C=j.useCallback(({str:B})=>{if(!f||!u.trim())return B;const w=u.toLowerCase(),G=B.toLowerCase();if(!G.includes(w))return B;const re=[];let $=0,Q=G.indexOf(w,0);for(;Q!==-1;){Q>$&&re.push(B.substring($,Q));const Y=B.substring(Q,Q+w.length);re.push(`<mark class="rdv-search-highlight">${Y}</mark>`),$=Q+w.length,Q=G.indexOf(w,$)}return $<B.length&&re.push(B.substring($)),re.join("")},[f,u]),R=y>=n;return k.jsxs("div",{id:"pdf-page-wrapper",className:"rdv-pdf-page-wrapper",...R?{"data-last-page":""}:{},children:[!t&&k.jsx("div",{id:"pdf-page-info",className:"rdv-pdf-page-tag-info",children:a("pdfPluginPageNumber",{currentPage:y,allPagesCount:n})}),k.jsxs("div",{className:"rdv-pdf-page-container",ref:o,children:[k.jsx(a_,{pageNumber:y||r,scale:s,height:((p==null?void 0:p.height)??100)-100,width:((p==null?void 0:p.width)??100)-100,loading:a("pdfPluginLoading"),onRenderSuccess:E,renderTextLayer:b||f,customTextRenderer:f&&u?C:void 0}),g&&l.width>0&&k.jsx(O_,{pageNumber:y,documentUri:((L=e==null?void 0:e.currentDocument)==null?void 0:L.uri)||"",width:l.width,height:l.height}),v&&k.jsx($_,{config:v})]})]})};Ng.__docgenInfo={description:"",methods:[],displayName:"PDFSinglePage",props:{pageNum:{required:!1,tsType:{name:"number"},description:""}}};const ew=()=>{const{state:{numPages:i,currentPage:e}}=j.useContext(Tr),t=j.useRef(new Map),s=j.useCallback(r=>a=>{a?t.current.set(r,a):t.current.delete(r)},[]);j.useEffect(()=>{const r=t.current.get(e);r&&r.scrollIntoView({behavior:"smooth",block:"start"})},[e]);const n=[];for(let r=0;r<i;r++)n.push(k.jsx("div",{ref:s(r+1),children:k.jsx(Ng,{pageNum:r+1})},r+1));return k.jsx(k.Fragment,{children:n})};ew.__docgenInfo={description:"",methods:[],displayName:"PDFAllPages"};const tw="SET_SIDEBAR_OPEN",sw="SET_THUMBNAILS",nw="SET_SELECTED_PAGE",rw="UPDATE_SINGLE_THUMBNAIL",eI=i=>({type:tw,isOpen:i}),tI=i=>({type:sw,thumbnails:i}),Jb=i=>({type:nw,pageNumber:i}),Qb=(i,e)=>({type:rw,pageNumber:i,dataUrl:e}),Ig={isOpen:!1,thumbnails:[],selectedPage:1,thumbnailWidth:120},sI=(i=Ig,e)=>{switch(e.type){case tw:{const{isOpen:t}=e;return{...i,isOpen:t}}case sw:{const{thumbnails:t}=e;return{...i,thumbnails:t}}case nw:{const{pageNumber:t}=e;return{...i,selectedPage:t}}case rw:{const{pageNumber:t,dataUrl:s}=e;return{...i,thumbnails:i.thumbnails.map(n=>n.pageNumber===t?{...n,dataUrl:s,isLoading:!1}:n)}}default:return i}},Jh=j.createContext({state:Ig,dispatch:()=>null}),iw=({children:i,config:e})=>{const[t,s]=j.useReducer(sI,{...Ig,isOpen:(e==null?void 0:e.sidebarDefaultOpen)??!1,thumbnailWidth:(e==null?void 0:e.thumbnailWidth)??120});return k.jsx(Jh.Provider,{value:{state:t,dispatch:s},children:i})};iw.__docgenInfo={description:"",methods:[],displayName:"ThumbnailProvider",props:{config:{required:!1,tsType:{name:"IThumbnailConfig"},description:""}}};const aw=({thumbnail:i,isSelected:e,width:t,onClick:s})=>k.jsxs("div",{className:"rdv-thumbnail-item",onClick:s,...e?{"data-selected":""}:{},role:"button",tabIndex:0,"aria-label":`Page ${i.pageNumber}`,onKeyDown:n=>{(n.key==="Enter"||n.key===" ")&&s()},children:[k.jsx("div",{className:"rdv-thumbnail-wrapper",children:i.isLoading?k.jsx("div",{className:"rdv-thumbnail-loading",style:{width:t,height:t*1.4},children:k.jsx("div",{className:"rdv-thumbnail-spinner"})}):i.dataUrl?k.jsx("img",{className:"rdv-thumbnail-image",src:i.dataUrl,alt:`Page ${i.pageNumber}`,style:{width:t}}):k.jsx("div",{className:"rdv-thumbnail-placeholder",style:{width:t,height:t*1.4},children:i.pageNumber})}),k.jsx("span",{className:"rdv-thumbnail-page-number",children:i.pageNumber})]});aw.__docgenInfo={description:"",methods:[],displayName:"ThumbnailItem",props:{thumbnail:{required:!0,tsType:{name:"IThumbnail"},description:""},isSelected:{required:!0,tsType:{name:"boolean"},description:""},width:{required:!0,tsType:{name:"number"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ow=({onPageSelect:i,currentPage:e})=>{const{state:t,dispatch:s}=j.useContext(Jh),n=j.useRef(null),r=j.useRef(null);if(j.useEffect(()=>{s(Jb(e))},[e,s]),j.useEffect(()=>{if(r.current&&n.current){const o=n.current,l=r.current,h=o.getBoundingClientRect(),d=l.getBoundingClientRect();(d.top<h.top||d.bottom>h.bottom)&&l.scrollIntoView({behavior:"smooth",block:"center"})}},[t.selectedPage]),!t.isOpen)return null;const a=o=>{s(Jb(o)),i(o)};return k.jsx("div",{className:"rdv-thumbnail-sidebar",children:k.jsx("div",{className:"rdv-thumbnail-scroll-area",ref:n,children:t.thumbnails.map(o=>k.jsx("div",{ref:o.pageNumber===t.selectedPage?r:null,children:k.jsx(aw,{thumbnail:o,isSelected:o.pageNumber===t.selectedPage,width:t.thumbnailWidth,onClick:()=>a(o.pageNumber)})},o.pageNumber))})})};ow.__docgenInfo={description:"",methods:[],displayName:"ThumbnailSidebar",props:{onPageSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(pageNumber: number) => void",signature:{arguments:[{type:{name:"number"},name:"pageNumber"}],return:{name:"void"}}},description:""},currentPage:{required:!0,tsType:{name:"number"},description:""}}};const lw=({title:i="Toggle thumbnails"})=>{const{state:e,dispatch:t}=j.useContext(Jh);return k.jsx("button",{className:"rdv-toolbar-btn",onClick:()=>t(eI(!e.isOpen)),title:i,"aria-label":i,"aria-pressed":e.isOpen,children:k.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#4b5563",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:e.isOpen?1:.7},children:[k.jsx("rect",{x:"3",y:"3",width:"7",height:"9",rx:"1"}),k.jsx("rect",{x:"14",y:"3",width:"7",height:"9",rx:"1"}),k.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),k.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})]})})};lw.__docgenInfo={description:"",methods:[],displayName:"ThumbnailToggle",props:{title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Toggle thumbnails"',computed:!1}}}};const nI=({numPages:i,documentUri:e,scale:t=.15})=>{const{state:s,dispatch:n}=j.useContext(Jh),r=j.useCallback(()=>{if(i>0){const o=Array.from({length:i},(l,h)=>({pageNumber:h+1,isLoading:!0}));n(tI(o))}},[i,n]),a=j.useCallback((o,l)=>{try{const h=o.toDataURL("image/png",.8);n(Qb(l,h))}catch{n(Qb(l,""))}},[n]);return j.useEffect(()=>{r()},[i,e,r]),{thumbnails:s.thumbnails,generateThumbnailFromCanvas:a,scale:t}},rI=120,cw=()=>{var h,d;const{state:i}=j.useContext(Tr),{state:e}=j.useContext(Jh),{numPages:t,mainState:s}=i,n=(h=s==null?void 0:s.config)==null?void 0:h.thumbnail,r=(n==null?void 0:n.enableThumbnails)??!1,a=j.useRef(new Set),{generateThumbnailFromCanvas:o}=nI({numPages:t,documentUri:(d=s==null?void 0:s.currentDocument)==null?void 0:d.uri}),l=j.useCallback(u=>{setTimeout(()=>{const f=document.querySelector(`[data-thumbnail-page="${u}"]`);if(f){const p=f.querySelector("canvas");p&&!a.current.has(u)&&(o(p,u),a.current.add(u))}},100)},[o]);return!r||!e.isOpen||t===0?null:k.jsx("div",{className:"rdv-pdf-thumbnail-hidden","aria-hidden":"true",children:Array.from({length:t},(u,f)=>f+1).map(u=>{const f=e.thumbnails.find(p=>p.pageNumber===u);return f!=null&&f.dataUrl?null:k.jsx("div",{className:"rdv-pdf-thumbnail-page","data-thumbnail-page":u,children:k.jsx(a_,{pageNumber:u,width:rI,onRenderSuccess:()=>l(u),renderTextLayer:!1,renderAnnotationLayer:!1})},u)})})};cw.__docgenInfo={description:"",methods:[],displayName:"PDFThumbnailGenerator"};const hw=({onSubmit:i,error:e})=>{const{t}=on(),[s,n]=j.useState(""),r=j.useCallback(a=>{a.preventDefault(),s.trim()&&(i(s),n(""))},[s,i]);return k.jsx("div",{className:"rdv-password-overlay",children:k.jsxs("form",{className:"rdv-password-modal",onSubmit:r,children:[k.jsx("div",{className:"rdv-password-icon",children:k.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[k.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),k.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),k.jsx("p",{className:"rdv-password-title",children:t("passwordRequired")}),e&&k.jsx("p",{className:"rdv-password-error",children:t("passwordError")}),k.jsx("input",{type:"password",className:"rdv-password-input",placeholder:t("passwordPlaceholder"),value:s,onChange:a=>n(a.target.value),autoFocus:!0}),k.jsx("button",{type:"submit",className:"rdv-password-submit",children:t("passwordSubmit")})]})})};hw.__docgenInfo={description:"",methods:[],displayName:"PasswordPrompt",props:{onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(password: string) => void",signature:{arguments:[{type:{name:"string"},name:"password"}],return:{name:"void"}}},description:""},error:{required:!1,tsType:{name:"boolean"},description:""}}};const dw=()=>{var v,b,y,E;const{state:{mainState:i,paginated:e,loadingProgress:t,passwordRequired:s,passwordCallback:n},dispatch:r}=j.useContext(Tr),{t:a}=on(),[o,l]=j.useState(!1),h=(i==null?void 0:i.currentDocument)||null,d=((b=(v=i==null?void 0:i.config)==null?void 0:v.loadingProgress)==null?void 0:b.enableProgressBar)??!1,u=((E=(y=i==null?void 0:i.config)==null?void 0:y.password)==null?void 0:E.enablePasswordPrompt)??!1;j.useEffect(()=>{r(Vb(Qn.numPages)),r(Cp(0)),r(Tp(!1)),r(Pp(null)),l(!1)},[h]);const f=j.useCallback(({loaded:C,total:R})=>{d&&R>0&&r(Cp(Math.round(C/R*100)))},[r,d]),p=j.useCallback(C=>{r(Vb(C.numPages)),r(Cp(100)),r(Tp(!1)),r(Pp(null)),r($N(C))},[r]),m=j.useCallback((C,R)=>{u&&(R===2&&l(!0),r(Tp(!0)),r(Pp(C)))},[r,u]),g=j.useCallback(C=>{n&&n(C)},[n]);return!h||h.fileData===void 0?null:k.jsxs(k.Fragment,{children:[d&&t>0&&t<100&&k.jsx("div",{className:"rdv-pdf-progress-bar",children:k.jsx("div",{className:"rdv-pdf-progress-fill",style:{width:`${t}%`}})}),s&&u&&k.jsx(hw,{onSubmit:g,error:o}),k.jsxs(PN,{className:"rdv-pdf-document",file:h.fileData,onLoadSuccess:p,onLoadProgress:f,onPassword:u?m:void 0,loading:k.jsx("span",{children:a("pdfPluginLoading")}),children:[e?k.jsx(Ng,{}):k.jsx(ew,{}),k.jsx(cw,{})]})]})};dw.__docgenInfo={description:"",methods:[],displayName:"PDFPages"};const uw=()=>{const{state:{currentPage:i,numPages:e},dispatch:t}=j.useContext(Tr),[s,n]=j.useState(String(i));j.useEffect(()=>{n(String(i))},[i]);const r=j.useCallback(o=>{const l=parseInt(o,10);!isNaN(l)&&l>=1&&l<=e?t(nn(l)):n(String(i))},[e,i,t]),a=o=>{o.key==="Enter"&&r(s)};return k.jsxs(k.Fragment,{children:[k.jsx("button",{id:"pdf-pagination-prev",className:"rdv-toolbar-btn",onClick:()=>t(nn(i-1)),disabled:i===1,title:"Previous page",children:k.jsx(Rg,{size:"16"})}),k.jsxs("div",{className:"rdv-toolbar-page-info",children:[k.jsx("input",{id:"pdf-pagination-input",className:"rdv-toolbar-page-input",type:"text",inputMode:"numeric",value:s,onChange:o=>n(o.target.value),onBlur:()=>r(s),onKeyDown:a,onFocus:o=>o.target.select(),"aria-label":"Go to page"}),k.jsxs("span",{className:"rdv-toolbar-page-total",children:["of ",e]})]}),k.jsx("button",{id:"pdf-pagination-next",className:"rdv-toolbar-btn",onClick:()=>t(nn(i+1)),disabled:i>=e,title:"Next page",children:k.jsx(Lg,{size:"16"})})]})};uw.__docgenInfo={description:"",methods:[],displayName:"PDFPagination"};const fw={outline:[],isOpen:!1,isLoading:!1};function iI(i,e){switch(e.type){case"SET_OUTLINE":return{...i,outline:e.value};case"SET_IS_OPEN":return{...i,isOpen:e.value};case"SET_IS_LOADING":return{...i,isLoading:e.value};case"TOGGLE_OPEN":return{...i,isOpen:!i.isOpen};default:return i}}const Qf=j.createContext({state:fw,dispatch:()=>{}}),pw=({children:i})=>{const[e,t]=j.useReducer(iI,fw);return k.jsx(Qf.Provider,{value:{state:e,dispatch:t},children:i})};pw.__docgenInfo={description:"",methods:[],displayName:"BookmarksProvider"};const Mg=({item:i,depth:e,onNavigate:t})=>k.jsxs("div",{className:"rdv-bookmark-item-wrapper",children:[k.jsxs("button",{className:"rdv-bookmark-item",style:{paddingLeft:`${12+e*16}px`},onClick:()=>t(i.pageIndex),title:`Go to page ${i.pageIndex}`,children:[k.jsx("span",{className:"rdv-bookmark-title",children:i.title}),k.jsx("span",{className:"rdv-bookmark-page",children:i.pageIndex})]}),i.items.length>0&&k.jsx("div",{className:"rdv-bookmark-children",children:i.items.map((s,n)=>k.jsx(Mg,{item:s,depth:e+1,onNavigate:t},n))})]});Mg.__docgenInfo={description:"",methods:[],displayName:"BookmarkItem",props:{item:{required:!0,tsType:{name:"OutlineItem"},description:""},depth:{required:!0,tsType:{name:"number"},description:""},onNavigate:{required:!0,tsType:{name:"signature",type:"function",raw:"(pageIndex: number) => void",signature:{arguments:[{type:{name:"number"},name:"pageIndex"}],return:{name:"void"}}},description:""}}};const mw=({onNavigate:i})=>{const{state:e}=j.useContext(Qf),{t}=on();return e.isOpen?k.jsxs("div",{className:"rdv-bookmarks-sidebar",children:[k.jsx("div",{className:"rdv-bookmarks-header",children:k.jsx("span",{className:"rdv-bookmarks-title",children:t("bookmarksSidebar")})}),k.jsx("div",{className:"rdv-bookmarks-list",children:e.outline.length===0?k.jsx("div",{className:"rdv-bookmarks-empty",children:t("noBookmarks")}):e.outline.map((s,n)=>k.jsx(Mg,{item:s,depth:0,onNavigate:i},n))})]}):null};mw.__docgenInfo={description:"",methods:[],displayName:"BookmarksSidebar",props:{onNavigate:{required:!0,tsType:{name:"signature",type:"function",raw:"(pageIndex: number) => void",signature:{arguments:[{type:{name:"number"},name:"pageIndex"}],return:{name:"void"}}},description:""}}};const Rp=i=>({type:"SET_OUTLINE",value:i}),ev=i=>({type:"SET_IS_LOADING",value:i}),aI=()=>({type:"TOGGLE_OPEN"}),gw=()=>{const{state:i,dispatch:e}=j.useContext(Qf),{t}=on();return k.jsx("button",{className:"rdv-toolbar-btn",onMouseDown:()=>e(aI()),title:i.isOpen?t("hideBookmarks"):t("showBookmarks"),children:k.jsx(K_,{size:"16"})})};gw.__docgenInfo={description:"",methods:[],displayName:"BookmarksToggle"};async function oI(i,e){try{if(typeof e=="number")return e;if(Array.isArray(e)&&e[0])return await i.getPageIndex(e[0])+1;if(typeof e=="string"){const t=await i.getDestination(e);if(t&&t[0])return await i.getPageIndex(t[0])+1}}catch{}return 1}async function bw(i,e){var s;const t=[];for(const n of e){const r=await oI(i,n.dest),a=(s=n.items)!=null&&s.length?await bw(i,n.items):[];t.push({title:n.title||"Untitled",pageIndex:r,items:a})}return t}function lI(i){const{state:e,dispatch:t}=j.useContext(Qf);j.useEffect(()=>{if(!i)return;let n=!1;return t(ev(!0)),i.getOutline().then(async r=>{if(!n)if(r&&r.length>0){const a=await bw(i,r);n||t(Rp(a))}else t(Rp([]))}).catch(()=>{n||t(Rp([]))}).finally(()=>{n||t(ev(!1))}),()=>{n=!0}},[i,t]);const s=j.useCallback(n=>n,[]);return{state:e,dispatch:t,navigateToBookmark:s}}function cI(i){const[e,t]=j.useState(!1);j.useEffect(()=>{const n=()=>{t(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",n),()=>document.removeEventListener("fullscreenchange",n)},[]);const s=j.useCallback(()=>{i.current&&(document.fullscreenElement?document.exitFullscreen().catch(()=>{}):i.current.requestFullscreen().catch(()=>{}))},[i]);return{isFullscreen:e,toggleFullscreen:s}}const vw=({containerRef:i})=>{var S,F,z,L,B,w,G,re,$;const{t:e}=on(),{state:{mainState:t,paginated:s,zoomLevel:n,numPages:r,zoomJump:a,defaultZoomLevel:o},dispatch:l}=j.useContext(Tr),h=j.useRef(null),d=i||h,{isFullscreen:u,toggleFullscreen:f}=cI(d),p=j.useContext(Zh),m=(t==null?void 0:t.currentDocument)||null,g=(S=t==null?void 0:t.config)==null?void 0:S.thumbnail,v=(g==null?void 0:g.enableThumbnails)??!1,b=((z=(F=t==null?void 0:t.config)==null?void 0:F.print)==null?void 0:z.enablePrint)??!1,y=((B=(L=t==null?void 0:t.config)==null?void 0:L.fullscreen)==null?void 0:B.enableFullscreen)??!1,E=((G=(w=t==null?void 0:t.config)==null?void 0:w.search)==null?void 0:G.enableSearch)??!1,C=(($=(re=t==null?void 0:t.config)==null?void 0:re.bookmarks)==null?void 0:$.enableBookmarks)??!1,R=Math.round(n*100),M=j.useCallback(()=>{const Q=m==null?void 0:m.fileData,Y=(m==null?void 0:m.fileName)||(m==null?void 0:m.uri)||"download";Q&&fetch(Q).then(le=>le.blob()).then(le=>{const H=URL.createObjectURL(le),O=document.createElement("a");O.href=H,O.download=Y,O.click(),URL.revokeObjectURL(H)}).catch(()=>{const le=document.createElement("a");le.href=Q,le.download=Y,le.click()})},[m]),D=j.useCallback(async()=>{const Q=m==null?void 0:m.fileData;if(!Q)return;let Y;try{let le;Q.startsWith("data:")?le=await(await fetch(Q)).blob():le=await(await fetch(Q)).blob(),Y=URL.createObjectURL(new Blob([le],{type:"application/pdf"}));const H=document.createElement("iframe");H.style.display="none",H.src=Y,document.body.appendChild(H),H.onload=()=>{var O,ee;(O=H.contentWindow)==null||O.focus(),(ee=H.contentWindow)==null||ee.print(),setTimeout(()=>{document.body.removeChild(H),Y&&URL.revokeObjectURL(Y)},1e3)}}catch{window.print()}},[m]),x=j.useCallback(()=>{p.dispatch(yl(!p.state.isOpen))},[p]);return k.jsx("div",{id:"pdf-controls",className:"rdv-pdf-controls",children:k.jsxs("div",{className:"rdv-toolbar-inner",children:[r>1&&k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"rdv-toolbar-group",children:k.jsx(uw,{})}),k.jsx("div",{className:"rdv-toolbar-divider"})]}),(m==null?void 0:m.fileData)&&k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"rdv-toolbar-group",children:[k.jsx("button",{id:"pdf-download",className:"rdv-toolbar-btn",title:e("downloadButtonLabel"),onMouseDown:M,children:k.jsx(H_,{size:"16"})}),b&&k.jsx("button",{id:"pdf-print",className:"rdv-toolbar-btn",title:e("printButtonLabel"),onMouseDown:D,children:k.jsx(q_,{size:"16"})})]}),k.jsx("div",{className:"rdv-toolbar-divider"})]}),k.jsxs("div",{className:"rdv-toolbar-group",children:[k.jsx("button",{id:"pdf-zoom-out",className:"rdv-toolbar-btn",onMouseDown:()=>l(zr(n-a)),title:"Zoom out",children:k.jsx(W_,{size:"16"})}),k.jsxs("span",{className:"rdv-toolbar-zoom-label",children:[R,"%"]}),k.jsx("button",{id:"pdf-zoom-in",className:"rdv-toolbar-btn",onMouseDown:()=>l(zr(n+a)),title:"Zoom in",children:k.jsx(U_,{size:"16"})}),k.jsx("button",{id:"pdf-zoom-reset",className:"rdv-toolbar-btn",onMouseDown:()=>l(zr(o)),disabled:n===o,title:"Fit to width",children:k.jsx(V_,{size:"16"})})]}),k.jsx("div",{className:"rdv-toolbar-divider"}),k.jsxs("div",{className:"rdv-toolbar-group",children:[E&&k.jsx("button",{id:"pdf-search",className:"rdv-toolbar-btn",onMouseDown:x,title:"Search",children:k.jsx(Y_,{size:"16"})}),y&&k.jsx("button",{id:"pdf-fullscreen",className:"rdv-toolbar-btn",onMouseDown:f,title:e(u?"exitFullscreenButtonLabel":"fullscreenButtonLabel"),children:u?k.jsx(X_,{size:"16"}):k.jsx(G_,{size:"16"})}),C&&k.jsx(gw,{}),v&&k.jsx(lw,{title:"Toggle thumbnails"}),r>1&&k.jsx("button",{id:"pdf-toggle-pagination",className:"rdv-toolbar-btn",onMouseDown:()=>l(Sg(!s)),title:s?"Scroll mode":"Page mode",children:k.jsx(J_,{size:"16",reverse:s})})]})]})})};vw.__docgenInfo={description:"",methods:[],displayName:"PDFControls",props:{containerRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement | null>",elements:[{name:"union",raw:"HTMLDivElement | null",elements:[{name:"HTMLDivElement"},{name:"null"}]}]},description:""}}};function hI(i,e){const t=j.useCallback(s=>{if(!e)return;const n=s.target;if(!(n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.isContentEditable))for(const r of i){const a=r.ctrlKey?s.ctrlKey||s.metaKey:!s.ctrlKey&&!s.metaKey,o=r.shiftKey?s.shiftKey:!s.shiftKey,l=r.altKey?s.altKey:!s.altKey;if(s.key===r.key&&a&&o&&l){s.preventDefault(),r.action();return}}},[i,e]);j.useEffect(()=>{if(e)return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[t,e])}Eg.workerSrc=new URL(""+new URL("pdf.worker.min-l1Cnq-yx.mjs",import.meta.url).href,import.meta.url).toString();const dI=()=>{var v,b,y,E,C,R,M,D,x,S,F,z,L,B,w,G,re,$,Q,Y,le;const{state:i,dispatch:e}=j.useContext(Tr),t=j.useContext(Zh),s=(b=(v=i.mainState)==null?void 0:v.config)==null?void 0:b.thumbnail,n=(E=(y=i.mainState)==null?void 0:y.config)==null?void 0:E.annotations,r=(s==null?void 0:s.enableThumbnails)??!1,a=(n==null?void 0:n.enableAnnotations)??!1,o=((M=(R=(C=i.mainState)==null?void 0:C.config)==null?void 0:R.keyboard)==null?void 0:M.enableKeyboardShortcuts)??!1,l=((S=(x=(D=i.mainState)==null?void 0:D.config)==null?void 0:x.search)==null?void 0:S.enableSearch)??!1,h=((L=(z=(F=i.mainState)==null?void 0:F.config)==null?void 0:z.bookmarks)==null?void 0:L.enableBookmarks)??!1,d=((G=(w=(B=i.mainState)==null?void 0:B.config)==null?void 0:w.fullscreen)==null?void 0:G.enableFullscreen)??!1,u=((Q=($=(re=i.mainState)==null?void 0:re.config)==null?void 0:$.print)==null?void 0:Q.enablePrint)??!1,f=j.useRef(null),p=i.pdfDocument;lI(p),j.useEffect(()=>{const{matches:H,currentMatchIndex:O}=t.state;if(!H.length)return;const ee=H[O];ee&&ee.pageIndex!==i.currentPage&&e(nn(ee.pageIndex))},[t.state.currentMatchIndex,t.state.matches]);const m=H=>{e(nn(H)),i.paginated||e(Sg(!0))},g=j.useMemo(()=>{const H=[{key:"ArrowLeft",action:()=>{i.currentPage>1&&e(nn(i.currentPage-1))},description:"Previous page"},{key:"ArrowRight",action:()=>{i.currentPage<i.numPages&&e(nn(i.currentPage+1))},description:"Next page"},{key:"Home",action:()=>e(nn(1)),description:"First page"},{key:"End",action:()=>e(nn(i.numPages)),description:"Last page"},{key:"+",action:()=>e(zr(i.zoomLevel+i.zoomJump)),description:"Zoom in"},{key:"=",action:()=>e(zr(i.zoomLevel+i.zoomJump)),description:"Zoom in"},{key:"-",action:()=>e(zr(i.zoomLevel-i.zoomJump)),description:"Zoom out"},{key:"0",action:()=>e(zr(i.defaultZoomLevel)),description:"Reset zoom"},{key:"Escape",action:()=>{t.state.isOpen&&t.dispatch(yl(!1)),document.fullscreenElement&&document.exitFullscreen().catch(()=>{})},description:"Exit"}];return l&&H.push({key:"f",ctrlKey:!0,action:()=>t.dispatch(yl(!0)),description:"Open search"}),u&&H.push({key:"p",ctrlKey:!0,action:()=>{var ae,Z;const O=(Z=(ae=i.mainState)==null?void 0:ae.currentDocument)==null?void 0:Z.fileData;if(!O)return;const ee=document.createElement("iframe");ee.style.display="none",ee.src=O,document.body.appendChild(ee),ee.onload=()=>{var me;(me=ee.contentWindow)==null||me.print(),setTimeout(()=>document.body.removeChild(ee),1e3)}},description:"Print"}),d&&H.push({key:"f",action:()=>{f.current&&(document.fullscreenElement?document.exitFullscreen().catch(()=>{}):f.current.requestFullscreen().catch(()=>{}))},description:"Toggle fullscreen"}),H},[i.currentPage,i.numPages,i.zoomLevel,i.zoomJump,i.defaultZoomLevel,(le=(Y=i.mainState)==null?void 0:Y.currentDocument)==null?void 0:le.fileData,e,t,l,u,d]);return hI(g,o),k.jsxs("div",{className:"rdv-pdf-content-wrapper",ref:f,children:[r&&k.jsx(ow,{onPageSelect:m,currentPage:i.currentPage}),h&&k.jsx(mw,{onNavigate:m}),k.jsxs("div",{className:"rdv-pdf-main-content",children:[a&&k.jsx(j_,{}),k.jsx(vw,{containerRef:f}),l&&k.jsx(Q_,{pdfDocument:p}),k.jsx(dw,{})]})]})},ep=({mainState:i})=>{var n,r,a,o;const e=(n=i.config)==null?void 0:n.thumbnail,t=(r=i.config)==null?void 0:r.annotations,s=(a=i.config)==null?void 0:a.pdfVerticalScrollByDefault;return k.jsx(g_,{mainState:i,children:k.jsx(iw,{config:e,children:k.jsx(C_,{config:t,documentUri:(o=i.currentDocument)==null?void 0:o.uri,children:k.jsx(z_,{children:k.jsx(pw,{children:k.jsx("div",{id:"pdf-renderer","data-testid":"pdf-renderer",className:"rdv-pdf-container",...s?{"data-disable-scrollbar":""}:{},children:k.jsx(dI,{})})})})})})})};ep.fileTypes=["pdf","application/pdf"];ep.weight=0;ep.__docgenInfo={description:"",methods:[],displayName:"PDFRenderer"};const tp=i=>k.jsx("div",{className:"rdv-png-checkerboard",children:k.jsx(rn,{...i})});tp.fileTypes=["png","image/png"];tp.weight=0;tp.__docgenInfo={description:"",methods:[],displayName:"PNGRenderer"};function uI(i){let e=i,t="";for(;t!==e;)t=e,e=e.replace(/\{[^{}]*\}/g,"");return e=e.replace(/\\par\b/g,`
`),e=e.replace(/\\line\b/g,`
`),e=e.replace(/\\tab\b/g,"	"),e=e.replace(/\\'([0-9a-fA-F]{2})/g,(s,n)=>String.fromCharCode(parseInt(n,16))),e=e.replace(/\\[a-z]+[-]?\d*\s?/gi,""),e=e.replace(/\\/g,""),e=e.replace(/[{}]/g,""),e=e.replace(/\r\n/g,`
`),e=e.replace(/\n{3,}/g,`

`),e.trim()}const Qh=({mainState:{currentDocument:i}})=>{const e=j.useMemo(()=>i!=null&&i.fileData?uI(i.fileData):"",[i==null?void 0:i.fileData]);return k.jsx("div",{id:"rtf-renderer",className:"rdv-txt-container",children:e})};Qh.fileTypes=["rtf","application/rtf","text/rtf"];Qh.weight=0;Qh.fileLoader=Df;Qh.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"RTFRenderer"};let Wn,os,Zd=[];const fI=()=>{var i=Xt(2,0);if(i===18761)os=!0;else if(i===19789)os=!1;else throw TypeError("Invalid byte order value.");return os},pI=()=>{if(Xt(2,2)!==42)throw RangeError("You forgot your towel!");return!0},mI=i=>{var e={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},t;return i in e?t=e[i]:t="Tag"+i,t},gI=i=>{var e={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"},t;return i in e&&(t=e[i]),t},bI=i=>{var e;return["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(i)!==-1?e=1:["SHORT","SSHORT"].indexOf(i)!==-1?e=2:["LONG","SLONG","FLOAT"].indexOf(i)!==-1?e=4:["RATIONAL","SRATIONAL","DOUBLE"].indexOf(i)!==-1&&(e=8),e},vI=(i,e,t)=>{t=t||0;var s=Math.floor(t/8),n=e+s,r=t+i,a=32-i;if(r<=0)throw RangeError("No bits requested");if(r<=8)var o=24+t,l=Wn.getUint8(n,os);else if(r<=16)var o=16+t,l=Wn.getUint16(n,os);else if(r<=32)var o=t,l=Wn.getUint32(n,os);else throw RangeError("Too many bits requested");var h={bits:l<<o>>>a,byteOffset:n+Math.floor(r/8),bitOffset:r%8};return h},Xt=(i,e)=>{if(i<=0)throw RangeError("No bytes requested");if(i<=1)return Wn.getUint8(e,os);if(i<=2)return Wn.getUint16(e,os);if(i<=3)return Wn.getUint32(e,os)>>>8;if(i<=4)return Wn.getUint32(e,os);throw RangeError("Too many bytes requested")},yI=(i,e,t,s)=>{var n=[],r=bI(e),a=r*t;if(a<=4){if(os===!1)var o=s>>>(4-r)*8;else var o=s;n.push(o)}else for(var l=0;l<t;l++){var h=r*l;if(r>=8)if(["RATIONAL","SRATIONAL"].indexOf(e)!==-1)n.push(Xt(4,s+h)),n.push(Xt(4,s+h+4));else throw TypeError("Can't handle this field type or size");else n.push(Xt(r,s+h))}return e==="ASCII"&&n.forEach(function(d,u,f){f[u]=String.fromCharCode(d)}),n},Mr=(i,e)=>{var t=Math.pow(2,8-e);return Math.floor(i*t+(t-1))},tv=(i,e,t,s)=>(typeof s>"u"&&(s=1),"rgba("+i+", "+e+", "+t+", "+s+")"),yw=i=>{for(var e=Xt(2,i),t=[],s=i+2,n=0;n<e;s+=12,n++){var r=Xt(2,s),a=Xt(2,s+2),o=Xt(4,s+4),l=Xt(4,s+8),h=mI(r),d=gI(a),u=yI(h,d,o,l);t[h]={type:d,values:u}}Zd.push(t);var f=Xt(4,s);return f===0?Zd:yw(f)},_I=(i,e)=>{let t=e||document.createElement("canvas");if(i&&(Wn=new DataView(i),os=fI(),!!pI())){var s=Xt(4,4);Zd=yw(s);var n=Zd[0],r=n.ImageWidth.values[0],a=n.ImageLength.values[0];t.width=r,t.height=a;var o=[],l=n.Compression?n.Compression.values[0]:1,h=n.SamplesPerPixel.values[0],d=[],u=0,f=!1;if(n.BitsPerSample.values.forEach(function(he,se,pe){d[se]={bitsPerSample:he,hasBytesPerSample:!1,bytesPerSample:void 0},he%8===0&&(d[se].hasBytesPerSample=!0,d[se].bytesPerSample=he/8),u+=he},void 0),u%8===0){f=!0;var p=u/8}var m=n.StripOffsets.values,g=m.length;if(n.StripByteCounts)var v=n.StripByteCounts.values;else if(g===1)var v=[Math.ceil(r*a*u/8)];else throw Error("Cannot recover from missing StripByteCounts");for(var b=0;b<g;b++){var y=m[b];o[b]=[];for(var E=v[b],C=0,R=0,M=1,D=!0,x=[],S=0,F=0,z=0;C<E;C+=M)switch(l){case 1:for(var L=0,x=[];L<h;L++)if(d[L].hasBytesPerSample){var B=d[L].bytesPerSample*L;x.push(Xt(d[L].bytesPerSample,y+C+B))}else{var w=vI(d[L].bitsPerSample,y+C,R);throw x.push(w.bits),C=w.byteOffset-y,R=w.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}if(o[b].push(x),f)M=p;else throw M=0,RangeError("Cannot handle sub-byte bits per pixel");break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:break;case 7:break;case 32773:if(D){D=!1;var G=1,re=1,$=Wn.getInt8(y+C,os);$>=0&&$<=127?G=$+1:$>=-127&&$<=-1?re=-$+1:D=!0}else{for(var Q=Xt(1,y+C),L=0;L<re;L++){if(d[F].hasBytesPerSample)z=z<<8*S|Q,S++,S===d[F].bytesPerSample&&(x.push(z),z=S=0,F++);else throw RangeError("Cannot handle sub-byte bits per sample");F===h&&(o[b].push(x),x=[],F=0)}G--,G===0&&(D=!0)}M=1;break}}if(t.getContext){var Y=t.getContext("2d");if(Y.fillStyle=tv(255,255,255,0),n.RowsPerStrip)var le=n.RowsPerStrip.values[0];else var le=a;var H=o.length,O=a%le,ee=O===0?le:O,ae=le,Z=0,me=n.PhotometricInterpretation.values[0],ue=[],fe=0;if(n.ExtraSamples&&(ue=n.ExtraSamples.values,fe=ue.length),n.ColorMap)var oe=n.ColorMap.values,de=Math.pow(2,d[0].bitsPerSample);for(var b=0;b<H;b++){b+1===H&&(ae=ee);for(var ye=o[b].length,Ce=Z*b,ge=0,_=0;_<ye;ge++)for(var K=0;K<r;K++,_++){var V=o[b][_],I=0,N=0,U=0,te=1;if(fe>0){for(var ne=0;ne<fe;ne++)if(ue[ne]===1||ue[ne]===2){te=V[3+ne]/256;break}}switch(me){case 0:if(d[0].hasBytesPerSample)var X=Math.pow(16,d[0].bytesPerSample*2);V.forEach(function(se,pe,we){we[pe]=X-se});case 1:I=N=U=Mr(V[0],d[0].bitsPerSample);break;case 2:I=Mr(V[0],d[0].bitsPerSample),N=Mr(V[1],d[1].bitsPerSample),U=Mr(V[2],d[2].bitsPerSample);break;case 3:if(oe===void 0)throw Error("Palette image missing color map");var ie=V[0];I=Mr(oe[ie],16),N=Mr(oe[de+ie],16),U=Mr(oe[2*de+ie],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",me)}Y.fillStyle=tv(I,N,U,te),Y.fillRect(K,Ce+ge,1,1)}Z=ae}}return t}},ed=i=>{const{mainState:{currentDocument:e}}=i,{t}=on(),[s,n]=j.useState(!1),[r,a]=j.useState(!1);return j.useEffect(()=>{if(!e||s)return;const o=document.getElementById("tiff-img");try{o&&_I(e.fileData,o),n(!0)}catch{a(!0)}},[e,s]),r?k.jsx(rn,{...i,children:k.jsx("div",{children:t("brokenFile")})}):k.jsx(rn,{...i,children:k.jsx("canvas",{id:"tiff-img",className:"rdv-tiff-canvas"})})};ed.fileTypes=["tif","tiff","image/tif","image/tiff"];ed.weight=0;ed.fileLoader=Cv;ed.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"TIFFRenderer"};const td=({mainState:{currentDocument:i}})=>k.jsx("div",{id:"txt-renderer",className:"rdv-txt-container",children:i==null?void 0:i.fileData});td.fileTypes=["txt","text/plain"];td.weight=0;td.fileLoader=Df;td.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"TXTRenderer"};var _w={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(i,e){(function(t,s){i.exports=s()})(Jo,function t(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},n=!s.document&&!!s.postMessage,r=s.IS_PAPA_WORKER||!1,a={},o=0,l={parse:function(x,S){var F=(S=S||{}).dynamicTyping||!1;if(D(F)&&(S.dynamicTypingFunction=F,F={}),S.dynamicTyping=F,S.transform=!!D(S.transform)&&S.transform,S.worker&&l.WORKERS_SUPPORTED){var z=function(){if(!l.WORKERS_SUPPORTED)return!1;var B=(G=s.URL||s.webkitURL||null,re=t.toString(),l.BLOB_URL||(l.BLOB_URL=G.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",re,")();"],{type:"text/javascript"})))),w=new s.Worker(B),G,re;return w.onmessage=y,w.id=o++,a[w.id]=w}();return z.userStep=S.step,z.userChunk=S.chunk,z.userComplete=S.complete,z.userError=S.error,S.step=D(S.step),S.chunk=D(S.chunk),S.complete=D(S.complete),S.error=D(S.error),delete S.worker,void z.postMessage({input:x,config:S,workerId:z.id})}var L=null;return l.NODE_STREAM_INPUT,typeof x=="string"?(x=function(B){return B.charCodeAt(0)===65279?B.slice(1):B}(x),L=S.download?new u(S):new p(S)):x.readable===!0&&D(x.read)&&D(x.on)?L=new m(S):(s.File&&x instanceof File||x instanceof Object)&&(L=new f(S)),L.stream(x)},unparse:function(x,S){var F=!1,z=!0,L=",",B=`\r
`,w='"',G=w+w,re=!1,$=null,Q=!1;(function(){if(typeof S=="object"){if(typeof S.delimiter!="string"||l.BAD_DELIMITERS.filter(function(O){return S.delimiter.indexOf(O)!==-1}).length||(L=S.delimiter),(typeof S.quotes=="boolean"||typeof S.quotes=="function"||Array.isArray(S.quotes))&&(F=S.quotes),typeof S.skipEmptyLines!="boolean"&&typeof S.skipEmptyLines!="string"||(re=S.skipEmptyLines),typeof S.newline=="string"&&(B=S.newline),typeof S.quoteChar=="string"&&(w=S.quoteChar),typeof S.header=="boolean"&&(z=S.header),Array.isArray(S.columns)){if(S.columns.length===0)throw new Error("Option columns is empty");$=S.columns}S.escapeChar!==void 0&&(G=S.escapeChar+w),(typeof S.escapeFormulae=="boolean"||S.escapeFormulae instanceof RegExp)&&(Q=S.escapeFormulae instanceof RegExp?S.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var Y=new RegExp(v(w),"g");if(typeof x=="string"&&(x=JSON.parse(x)),Array.isArray(x)){if(!x.length||Array.isArray(x[0]))return le(null,x,re);if(typeof x[0]=="object")return le($||Object.keys(x[0]),x,re)}else if(typeof x=="object")return typeof x.data=="string"&&(x.data=JSON.parse(x.data)),Array.isArray(x.data)&&(x.fields||(x.fields=x.meta&&x.meta.fields||$),x.fields||(x.fields=Array.isArray(x.data[0])?x.fields:typeof x.data[0]=="object"?Object.keys(x.data[0]):[]),Array.isArray(x.data[0])||typeof x.data[0]=="object"||(x.data=[x.data])),le(x.fields||[],x.data||[],re);throw new Error("Unable to serialize unrecognized input");function le(O,ee,ae){var Z="";typeof O=="string"&&(O=JSON.parse(O)),typeof ee=="string"&&(ee=JSON.parse(ee));var me=Array.isArray(O)&&0<O.length,ue=!Array.isArray(ee[0]);if(me&&z){for(var fe=0;fe<O.length;fe++)0<fe&&(Z+=L),Z+=H(O[fe],fe);0<ee.length&&(Z+=B)}for(var oe=0;oe<ee.length;oe++){var de=me?O.length:ee[oe].length,ye=!1,Ce=me?Object.keys(ee[oe]).length===0:ee[oe].length===0;if(ae&&!me&&(ye=ae==="greedy"?ee[oe].join("").trim()==="":ee[oe].length===1&&ee[oe][0].length===0),ae==="greedy"&&me){for(var ge=[],_=0;_<de;_++){var K=ue?O[_]:_;ge.push(ee[oe][K])}ye=ge.join("").trim()===""}if(!ye){for(var V=0;V<de;V++){0<V&&!Ce&&(Z+=L);var I=me&&ue?O[V]:V;Z+=H(ee[oe][I],V)}oe<ee.length-1&&(!ae||0<de&&!Ce)&&(Z+=B)}}return Z}function H(O,ee){if(O==null)return"";if(O.constructor===Date)return JSON.stringify(O).slice(1,25);var ae=!1;Q&&typeof O=="string"&&Q.test(O)&&(O="'"+O,ae=!0);var Z=O.toString().replace(Y,G);return(ae=ae||F===!0||typeof F=="function"&&F(O,ee)||Array.isArray(F)&&F[ee]||function(me,ue){for(var fe=0;fe<ue.length;fe++)if(-1<me.indexOf(ue[fe]))return!0;return!1}(Z,l.BAD_DELIMITERS)||-1<Z.indexOf(L)||Z.charAt(0)===" "||Z.charAt(Z.length-1)===" ")?w+Z+w:Z}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!n&&!!s.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=b,l.ParserHandle=g,l.NetworkStreamer=u,l.FileStreamer=f,l.StringStreamer=p,l.ReadableStreamStreamer=m,s.jQuery){var h=s.jQuery;h.fn.parse=function(x){var S=x.config||{},F=[];return this.each(function(B){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var w=0;w<this.files.length;w++)F.push({file:this.files[w],inputElem:this,instanceConfig:h.extend({},S)})}),z(),this;function z(){if(F.length!==0){var B,w,G,re,$=F[0];if(D(x.before)){var Q=x.before($.file,$.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return B="AbortError",w=$.file,G=$.inputElem,re=Q.reason,void(D(x.error)&&x.error({name:B},w,G,re));if(Q.action==="skip")return void L();typeof Q.config=="object"&&($.instanceConfig=h.extend($.instanceConfig,Q.config))}else if(Q==="skip")return void L()}var Y=$.instanceConfig.complete;$.instanceConfig.complete=function(le){D(Y)&&Y(le,$.file,$.inputElem),L()},l.parse($.file,$.instanceConfig)}else D(x.complete)&&x.complete()}function L(){F.splice(0,1),z()}}}function d(x){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(S){var F=R(S);F.chunkSize=parseInt(F.chunkSize),S.step||S.chunk||(F.chunkSize=null),this._handle=new g(F),(this._handle.streamer=this)._config=F}).call(this,x),this.parseChunk=function(S,F){if(this.isFirstChunk&&D(this._config.beforeFirstChunk)){var z=this._config.beforeFirstChunk(S);z!==void 0&&(S=z)}this.isFirstChunk=!1,this._halted=!1;var L=this._partialLine+S;this._partialLine="";var B=this._handle.parse(L,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var w=B.meta.cursor;this._finished||(this._partialLine=L.substring(w-this._baseIndex),this._baseIndex=w),B&&B.data&&(this._rowCount+=B.data.length);var G=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(r)s.postMessage({results:B,workerId:l.WORKER_ID,finished:G});else if(D(this._config.chunk)&&!F){if(this._config.chunk(B,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);B=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(B.data),this._completeResults.errors=this._completeResults.errors.concat(B.errors),this._completeResults.meta=B.meta),this._completed||!G||!D(this._config.complete)||B&&B.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),G||B&&B.meta.paused||this._nextChunk(),B}this._halted=!0},this._sendError=function(S){D(this._config.error)?this._config.error(S):r&&this._config.error&&s.postMessage({workerId:l.WORKER_ID,error:S,finished:!1})}}function u(x){var S;(x=x||{}).chunkSize||(x.chunkSize=l.RemoteChunkSize),d.call(this,x),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(F){this._input=F,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(S=new XMLHttpRequest,this._config.withCredentials&&(S.withCredentials=this._config.withCredentials),n||(S.onload=M(this._chunkLoaded,this),S.onerror=M(this._chunkError,this)),S.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var F=this._config.downloadRequestHeaders;for(var z in F)S.setRequestHeader(z,F[z])}if(this._config.chunkSize){var L=this._start+this._config.chunkSize-1;S.setRequestHeader("Range","bytes="+this._start+"-"+L)}try{S.send(this._config.downloadRequestBody)}catch(B){this._chunkError(B.message)}n&&S.status===0&&this._chunkError()}},this._chunkLoaded=function(){S.readyState===4&&(S.status<200||400<=S.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:S.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(F){var z=F.getResponseHeader("Content-Range");return z===null?-1:parseInt(z.substring(z.lastIndexOf("/")+1))}(S),this.parseChunk(S.responseText)))},this._chunkError=function(F){var z=S.statusText||F;this._sendError(new Error(z))}}function f(x){var S,F;(x=x||{}).chunkSize||(x.chunkSize=l.LocalChunkSize),d.call(this,x);var z=typeof FileReader<"u";this.stream=function(L){this._input=L,F=L.slice||L.webkitSlice||L.mozSlice,z?((S=new FileReader).onload=M(this._chunkLoaded,this),S.onerror=M(this._chunkError,this)):S=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var L=this._input;if(this._config.chunkSize){var B=Math.min(this._start+this._config.chunkSize,this._input.size);L=F.call(L,this._start,B)}var w=S.readAsText(L,this._config.encoding);z||this._chunkLoaded({target:{result:w}})},this._chunkLoaded=function(L){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(L.target.result)},this._chunkError=function(){this._sendError(S.error)}}function p(x){var S;d.call(this,x=x||{}),this.stream=function(F){return S=F,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var F,z=this._config.chunkSize;return z?(F=S.substring(0,z),S=S.substring(z)):(F=S,S=""),this._finished=!S,this.parseChunk(F)}}}function m(x){d.call(this,x=x||{});var S=[],F=!0,z=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(L){this._input=L,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){z&&S.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),S.length?this.parseChunk(S.shift()):F=!0},this._streamData=M(function(L){try{S.push(typeof L=="string"?L:L.toString(this._config.encoding)),F&&(F=!1,this._checkIsFinished(),this.parseChunk(S.shift()))}catch(B){this._streamError(B)}},this),this._streamError=M(function(L){this._streamCleanUp(),this._sendError(L)},this),this._streamEnd=M(function(){this._streamCleanUp(),z=!0,this._streamData("")},this),this._streamCleanUp=M(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(x){var S,F,z,L=Math.pow(2,53),B=-L,w=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,G=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,re=this,$=0,Q=0,Y=!1,le=!1,H=[],O={data:[],errors:[],meta:{}};if(D(x.step)){var ee=x.step;x.step=function(oe){if(O=oe,me())Z();else{if(Z(),O.data.length===0)return;$+=oe.data.length,x.preview&&$>x.preview?F.abort():(O.data=O.data[0],ee(O,re))}}}function ae(oe){return x.skipEmptyLines==="greedy"?oe.join("").trim()==="":oe.length===1&&oe[0].length===0}function Z(){return O&&z&&(fe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),z=!1),x.skipEmptyLines&&(O.data=O.data.filter(function(oe){return!ae(oe)})),me()&&function(){if(!O)return;function oe(ye,Ce){D(x.transformHeader)&&(ye=x.transformHeader(ye,Ce)),H.push(ye)}if(Array.isArray(O.data[0])){for(var de=0;me()&&de<O.data.length;de++)O.data[de].forEach(oe);O.data.splice(0,1)}else O.data.forEach(oe)}(),function(){if(!O||!x.header&&!x.dynamicTyping&&!x.transform)return O;function oe(ye,Ce){var ge,_=x.header?{}:[];for(ge=0;ge<ye.length;ge++){var K=ge,V=ye[ge];x.header&&(K=ge>=H.length?"__parsed_extra":H[ge]),x.transform&&(V=x.transform(V,K)),V=ue(K,V),K==="__parsed_extra"?(_[K]=_[K]||[],_[K].push(V)):_[K]=V}return x.header&&(ge>H.length?fe("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+ge,Q+Ce):ge<H.length&&fe("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+ge,Q+Ce)),_}var de=1;return!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(oe),de=O.data.length):O.data=oe(O.data,0),x.header&&O.meta&&(O.meta.fields=H),Q+=de,O}()}function me(){return x.header&&H.length===0}function ue(oe,de){return ye=oe,x.dynamicTypingFunction&&x.dynamicTyping[ye]===void 0&&(x.dynamicTyping[ye]=x.dynamicTypingFunction(ye)),(x.dynamicTyping[ye]||x.dynamicTyping)===!0?de==="true"||de==="TRUE"||de!=="false"&&de!=="FALSE"&&(function(Ce){if(w.test(Ce)){var ge=parseFloat(Ce);if(B<ge&&ge<L)return!0}return!1}(de)?parseFloat(de):G.test(de)?new Date(de):de===""?null:de):de;var ye}function fe(oe,de,ye,Ce){var ge={type:oe,code:de,message:ye};Ce!==void 0&&(ge.row=Ce),O.errors.push(ge)}this.parse=function(oe,de,ye){var Ce=x.quoteChar||'"';if(x.newline||(x.newline=function(K,V){K=K.substring(0,1048576);var I=new RegExp(v(V)+"([^]*?)"+v(V),"gm"),N=(K=K.replace(I,"")).split("\r"),U=K.split(`
`),te=1<U.length&&U[0].length<N[0].length;if(N.length===1||te)return`
`;for(var ne=0,X=0;X<N.length;X++)N[X][0]===`
`&&ne++;return ne>=N.length/2?`\r
`:"\r"}(oe,Ce)),z=!1,x.delimiter)D(x.delimiter)&&(x.delimiter=x.delimiter(oe),O.meta.delimiter=x.delimiter);else{var ge=function(K,V,I,N,U){var te,ne,X,ie;U=U||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var he=0;he<U.length;he++){var se=U[he],pe=0,we=0,ke=0;X=void 0;for(var qe=new b({comments:N,delimiter:se,newline:V,preview:10}).parse(K),Xe=0;Xe<qe.data.length;Xe++)if(I&&ae(qe.data[Xe]))ke++;else{var ze=qe.data[Xe].length;we+=ze,X!==void 0?0<ze&&(pe+=Math.abs(ze-X),X=ze):X=ze}0<qe.data.length&&(we/=qe.data.length-ke),(ne===void 0||pe<=ne)&&(ie===void 0||ie<we)&&1.99<we&&(ne=pe,te=se,ie=we)}return{successful:!!(x.delimiter=te),bestDelimiter:te}}(oe,x.newline,x.skipEmptyLines,x.comments,x.delimitersToGuess);ge.successful?x.delimiter=ge.bestDelimiter:(z=!0,x.delimiter=l.DefaultDelimiter),O.meta.delimiter=x.delimiter}var _=R(x);return x.preview&&x.header&&_.preview++,S=oe,F=new b(_),O=F.parse(S,de,ye),Z(),Y?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return Y},this.pause=function(){Y=!0,F.abort(),S=D(x.chunk)?"":S.substring(F.getCharIndex())},this.resume=function(){re.streamer._halted?(Y=!1,re.streamer.parseChunk(S,!0)):setTimeout(re.resume,3)},this.aborted=function(){return le},this.abort=function(){le=!0,F.abort(),O.meta.aborted=!0,D(x.complete)&&x.complete(O),S=""}}function v(x){return x.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function b(x){var S,F=(x=x||{}).delimiter,z=x.newline,L=x.comments,B=x.step,w=x.preview,G=x.fastMode,re=S=x.quoteChar===void 0||x.quoteChar===null?'"':x.quoteChar;if(x.escapeChar!==void 0&&(re=x.escapeChar),(typeof F!="string"||-1<l.BAD_DELIMITERS.indexOf(F))&&(F=","),L===F)throw new Error("Comment character same as delimiter");L===!0?L="#":(typeof L!="string"||-1<l.BAD_DELIMITERS.indexOf(L))&&(L=!1),z!==`
`&&z!=="\r"&&z!==`\r
`&&(z=`
`);var $=0,Q=!1;this.parse=function(Y,le,H){if(typeof Y!="string")throw new Error("Input must be a string");var O=Y.length,ee=F.length,ae=z.length,Z=L.length,me=D(B),ue=[],fe=[],oe=[],de=$=0;if(!Y)return Be();if(x.header&&!le){var ye=Y.split(z)[0].split(F),Ce=[],ge={},_=!1;for(var K in ye){var V=ye[K];D(x.transformHeader)&&(V=x.transformHeader(V,K));var I=V,N=ge[V]||0;for(0<N&&(_=!0,I=V+"_"+N),ge[V]=N+1;Ce.includes(I);)I=I+"_"+N;Ce.push(I)}if(_){var U=Y.split(z);U[0]=Ce.join(F),Y=U.join(z)}}if(G||G!==!1&&Y.indexOf(S)===-1){for(var te=Y.split(z),ne=0;ne<te.length;ne++){if(oe=te[ne],$+=oe.length,ne!==te.length-1)$+=z.length;else if(H)return Be();if(!L||oe.substring(0,Z)!==L){if(me){if(ue=[],ke(oe.split(F)),De(),Q)return Be()}else ke(oe.split(F));if(w&&w<=ne)return ue=ue.slice(0,w),Be(!0)}}return Be()}for(var X=Y.indexOf(F,$),ie=Y.indexOf(z,$),he=new RegExp(v(re)+v(S),"g"),se=Y.indexOf(S,$);;)if(Y[$]!==S)if(L&&oe.length===0&&Y.substring($,$+Z)===L){if(ie===-1)return Be();$=ie+ae,ie=Y.indexOf(z,$),X=Y.indexOf(F,$)}else if(X!==-1&&(X<ie||ie===-1))oe.push(Y.substring($,X)),$=X+ee,X=Y.indexOf(F,$);else{if(ie===-1)break;if(oe.push(Y.substring($,ie)),ze(ie+ae),me&&(De(),Q))return Be();if(w&&ue.length>=w)return Be(!0)}else for(se=$,$++;;){if((se=Y.indexOf(S,se+1))===-1)return H||fe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ue.length,index:$}),Xe();if(se===O-1)return Xe(Y.substring($,se).replace(he,S));if(S!==re||Y[se+1]!==re){if(S===re||se===0||Y[se-1]!==re){X!==-1&&X<se+1&&(X=Y.indexOf(F,se+1)),ie!==-1&&ie<se+1&&(ie=Y.indexOf(z,se+1));var pe=qe(ie===-1?X:Math.min(X,ie));if(Y.substr(se+1+pe,ee)===F){oe.push(Y.substring($,se).replace(he,S)),Y[$=se+1+pe+ee]!==S&&(se=Y.indexOf(S,$)),X=Y.indexOf(F,$),ie=Y.indexOf(z,$);break}var we=qe(ie);if(Y.substring(se+1+we,se+1+we+ae)===z){if(oe.push(Y.substring($,se).replace(he,S)),ze(se+1+we+ae),X=Y.indexOf(F,$),se=Y.indexOf(S,$),me&&(De(),Q))return Be();if(w&&ue.length>=w)return Be(!0);break}fe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ue.length,index:$}),se++}}else se++}return Xe();function ke(Ze){ue.push(Ze),de=$}function qe(Ze){var xt=0;if(Ze!==-1){var st=Y.substring(se+1,Ze);st&&st.trim()===""&&(xt=st.length)}return xt}function Xe(Ze){return H||(Ze===void 0&&(Ze=Y.substring($)),oe.push(Ze),$=O,ke(oe),me&&De()),Be()}function ze(Ze){$=Ze,ke(oe),oe=[],ie=Y.indexOf(z,$)}function Be(Ze){return{data:ue,errors:fe,meta:{delimiter:F,linebreak:z,aborted:Q,truncated:!!Ze,cursor:de+(le||0)}}}function De(){B(Be()),ue=[],fe=[]}},this.abort=function(){Q=!0},this.getCharIndex=function(){return $}}function y(x){var S=x.data,F=a[S.workerId],z=!1;if(S.error)F.userError(S.error,S.file);else if(S.results&&S.results.data){var L={abort:function(){z=!0,E(S.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(D(F.userStep)){for(var B=0;B<S.results.data.length&&(F.userStep({data:S.results.data[B],errors:S.results.errors,meta:S.results.meta},L),!z);B++);delete S.results}else D(F.userChunk)&&(F.userChunk(S.results,L,S.file),delete S.results)}S.finished&&!z&&E(S.workerId,S.results)}function E(x,S){var F=a[x];D(F.userComplete)&&F.userComplete(S),F.terminate(),delete a[x]}function C(){throw new Error("Not implemented.")}function R(x){if(typeof x!="object"||x===null)return x;var S=Array.isArray(x)?[]:{};for(var F in x)S[F]=R(x[F]);return S}function M(x,S){return function(){x.apply(S,arguments)}}function D(x){return typeof x=="function"}return r&&(s.onmessage=function(x){var S=x.data;if(l.WORKER_ID===void 0&&S&&(l.WORKER_ID=S.workerId),typeof S.input=="string")s.postMessage({workerId:l.WORKER_ID,results:l.parse(S.input,S.config),finished:!0});else if(s.File&&S.input instanceof File||S.input instanceof Object){var F=l.parse(S.input,S.config);F&&s.postMessage({workerId:l.WORKER_ID,results:F,finished:!0})}}),(u.prototype=Object.create(d.prototype)).constructor=u,(f.prototype=Object.create(d.prototype)).constructor=f,(p.prototype=Object.create(p.prototype)).constructor=p,(m.prototype=Object.create(d.prototype)).constructor=m,l})})(_w);var wI=_w.exports;const AI=ig(wI),sd=({mainState:{currentDocument:i,config:e}})=>{const[t,s]=j.useState([]);return j.useEffect(()=>{var n;if(i!=null&&i.fileData){const r=AI.parse(i.fileData,{delimiter:(e==null?void 0:e.csvDelimiter)??","});!((n=r.errors)!=null&&n.length)&&r.data&&s(r.data)}},[i,e==null?void 0:e.csvDelimiter]),t.length?k.jsx("div",{className:"rdv-csv-container",children:k.jsxs("table",{className:"rdv-csv-table",children:[k.jsx("thead",{children:k.jsx("tr",{children:t[0].map(n=>k.jsx("th",{children:n},n))})}),k.jsx("tbody",{children:t.slice(1,t.length).map(n=>k.jsx("tr",{children:n.map(r=>k.jsx("td",{children:r},r))},n.join("")))})]})}):null};sd.fileTypes=["csv","text/csv"];sd.weight=0;sd.fileLoader=Df;sd.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"CSVRenderer"};const sp=i=>k.jsx(rn,{...i});sp.fileTypes=["gif","image/gif"];sp.weight=0;sp.__docgenInfo={description:"",methods:[],displayName:"JPGRenderer"};const np=({mainState:{currentDocument:i}})=>i?k.jsx("div",{id:"video-renderer",className:"rdv-video-container",children:k.jsx("video",{className:"rdv-video-player",controls:!0,src:i.uri})}):null;np.fileTypes=["video/mp4","video/quicktime","video/x-msvideo"];np.weight=0;np.__docgenInfo={description:"",methods:[],displayName:"VideoRenderer"};const rp=i=>k.jsx(rn,{...i});rp.fileTypes=["webp","image/webp"];rp.weight=0;rp.__docgenInfo={description:"",methods:[],displayName:"WebPRenderer"};const kI=[Ff,Hh,Uh,Of,Wh,Vh,ep,tp,Qh,ed,td,sd,sp,np,rp],ww=j.forwardRef((i,e)=>{const{documents:t,theme:s,config:n}=i,r=n==null?void 0:n.dragDrop,a=(r==null?void 0:r.enableDragDrop)??!1,o=j.useRef(null),l=(n==null?void 0:n.themeMode)??"light",[h,d]=j.useState(l==="auto"?"light":l);j.useEffect(()=>{if(l!=="auto"){d(l);return}const E=window.matchMedia("(prefers-color-scheme: dark)");d(E.matches?"dark":"light");const C=R=>d(R.matches?"dark":"light");return E.addEventListener("change",C),()=>E.removeEventListener("change",C)},[l]);const{dragState:u,handleDragEnter:f,handleDragLeave:p,handleDragOver:m,handleDrop:g}=CC(),v=j.useCallback(E=>{var C;(C=o.current)==null||C.handleFilesDropped(E)},[]),b=j.useMemo(()=>s?{...eb,...s}:eb,[s]),y=j.useMemo(()=>({"--rdv-primary":b.primary,"--rdv-secondary":b.secondary,"--rdv-tertiary":b.tertiary,"--rdv-text-primary":b.textPrimary,"--rdv-text-secondary":b.textSecondary,"--rdv-text-tertiary":b.textTertiary,...i.style}),[b,i.style]);if(!t)throw new Error("Please provide an array of documents to DocViewer!");return k.jsx(gv,{ref:e,providerRef:o,pluginRenderers:kI,...i,dragDropConfig:a?r:void 0,children:k.jsxs("div",{id:"react-doc-viewer","data-testid":"react-doc-viewer","data-theme":h,className:`rdv-container ${i.className||""}`,style:y,onDragEnter:a?f:void 0,onDragLeave:a?p:void 0,onDragOver:a?m:void 0,onDrop:a?E=>g(E,v):void 0,children:[k.jsx(xv,{}),k.jsx(Rv,{}),a&&k.jsx(mv,{dragState:u})]})})}),II=j.memo(ww);ww.__docgenInfo={description:"",methods:[],displayName:"DocViewer"};export{II as D,kI as a,k as j};

const __vite__fileDeps=["./index-CiodtZIu.js","./index-CDs2tPxN.js","./index-BKD8Dact.js","./index-BAMY2Nnw.js","./util-DMkKVjcQ.js","./url-amwFPBqB.js","./index-DHa0OMiM.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var jA=Object.defineProperty;var BA=(r,e,t)=>e in r?jA(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var re=(r,e,t)=>(BA(r,typeof e!="symbol"?e+"":e,t),t),Gf=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var o=(r,e,t)=>(Gf(r,e,"read from private field"),t?t.call(r):e.get(r)),p=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},v=(r,e,t,n)=>(Gf(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var zt=(r,e,t,n)=>({set _(s){v(r,e,s,t)},get _(){return o(r,e,n)}}),b=(r,e,t)=>(Gf(r,e,"access private method"),t);import{r as P,g as Vv,c as HA}from"./index-CDs2tPxN.js";import{_ as Gh}from"./iframe-BwWnEaJO.js";import{p as Wr}from"./index-BAMY2Nnw.js";import{B as bm}from"./index-BKD8Dact.js";import{i as ke}from"./tiny-invariant-CopsF_GD.js";import"../sb-preview/runtime.js";var qv={exports:{}},mf={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UA=P,zA=Symbol.for("react.element"),WA=Symbol.for("react.fragment"),GA=Object.prototype.hasOwnProperty,VA=UA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qA={key:!0,ref:!0,__self:!0,__source:!0};function $v(r,e,t){var n,s={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)GA.call(e,n)&&!qA.hasOwnProperty(n)&&(s[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:zA,type:r,key:i,ref:a,props:s,_owner:VA.current}}mf.Fragment=WA;mf.jsx=$v;mf.jsxs=$v;qv.exports=mf;var y=qv.exports;const $A="Document {{ currentFileNo }} of {{ allFilesCount }}",XA="No renderer for file type: {{{ fileType }}}",YA="Download file",KA="Your file is broken. Please check it on your machine.",ZA="Recipients",JA="Sender",QA="Loading...",e_="Page {{ currentPage }}/{{ allPagesCount }}",t_="Drop files here",n_="Thumbnail sidebar",s_="Show thumbnails",i_="Hide thumbnails",r_="Annotation toolbar",a_="Select",o_="Highlight",l_="Pen",c_="Comment",h_="Eraser",d_="Add comment",u_="Delete annotation",f_="Save annotations",p_={documentNavInfo:$A,noRendererMessage:XA,downloadButtonLabel:YA,brokenFile:KA,msgPluginRecipients:ZA,msgPluginSender:JA,pdfPluginLoading:QA,pdfPluginPageNumber:e_,dropFilesHere:t_,thumbnailSidebar:n_,showThumbnails:s_,hideThumbnails:i_,annotationToolbar:r_,selectTool:a_,highlightTool:o_,penTool:l_,commentTool:c_,eraserTool:h_,addComment:d_,deleteAnnotation:u_,saveAnnotations:f_},g_="Dokument {{ currentFileNo }} z {{ allFilesCount }}",m_="Brak funckji renderującej dla: {{{ fileType }}}",v_="Pobierz plik",b_="Twój plik jest uszkodzony. Sprawdź go na swoim komputerze.",y_="Odbiorcy",A_="Nadawca",__="Wczytywanie...",E_="Strona {{ currentPage }}/{{ allPagesCount }}",w_={documentNavInfo:g_,noRendererMessage:m_,downloadButtonLabel:v_,brokenFile:b_,msgPluginRecipients:y_,msgPluginSender:A_,pdfPluginLoading:__,pdfPluginPageNumber:E_},x_="Documento {{ currentFileNo }} de {{ allFilesCount }}",T_="No hay procesador para el tipo de archivo: {{{ fileType }}}",S_="Descargar archivo",C_="Tu archivo está roto. Compruébalo en tu máquina.",P_="Destinatarios",R_="Remitente",L_="Cargando...",D_="Página {{ currentPage }}/{{ allPagesCount }}",k_={documentNavInfo:x_,noRendererMessage:T_,downloadButtonLabel:S_,brokenFile:C_,msgPluginRecipients:P_,msgPluginSender:R_,pdfPluginLoading:L_,pdfPluginPageNumber:D_},I_="Dokument {{ currentFileNo }} von {{ allFilesCount }}",M_="Kein Renderer für Dateityp: {{{ fileType }}}",N_="Datei herunterladen",F_="Ihre Datei ist defekt. Bitte überprüfen Sie sie auf Ihrem Rechner.",O_="Empfänger",j_="Absender",B_="Wird geladen...",H_="Seite {{ currentPage }}/{{ allPagesCount }}",U_={documentNavInfo:I_,noRendererMessage:M_,downloadButtonLabel:N_,brokenFile:F_,msgPluginRecipients:O_,msgPluginSender:j_,pdfPluginLoading:B_,pdfPluginPageNumber:H_},z_="Documento {{ currentFileNo }} di {{ allFilesCount }}",W_="Nessun renderer per il tipo di file: {{{ fileType }}}",G_="Scarica file",V_="Il tuo file è danneggiato. Controllalo sul tuo computer.",q_="Destinatari",$_="Mittente",X_="Caricamento in corso...",Y_="Pagina {{ currentPage }}/{{ allPagesCount }}",K_={documentNavInfo:z_,noRendererMessage:W_,downloadButtonLabel:G_,brokenFile:V_,msgPluginRecipients:q_,msgPluginSender:$_,pdfPluginLoading:X_,pdfPluginPageNumber:Y_},Z_="Documento {{ currentFileNo }} de {{ allFilesCount }}",J_="Nenhum renderizador para o tipo de arquivo: {{{ fileType }}}",Q_="Baixar arquivo",eE="Seu arquivo está quebrado. Por favor, verifique-o em sua máquina.",tE="Destinatários",nE="Remetente",sE="Carregando...",iE="Página {{ currentPage }}/{{ allPagesCount }}",rE={documentNavInfo:Z_,noRendererMessage:J_,downloadButtonLabel:Q_,brokenFile:eE,msgPluginRecipients:tE,msgPluginSender:nE,pdfPluginLoading:sE,pdfPluginPageNumber:iE},aE="Document {{ currentFileNo }} de {{ allFilesCount }}",oE="Aucun moteur de rendu pour le type de fichier : {{{ fileType }}}",lE="Télécharger le fichier",cE="Votre fichier est cassé. Veuillez le vérifier sur votre machine.",hE="Destinataires",dE="Expéditeur",uE="Chargement...",fE="Page {{ currentPage }}/{{ allPagesCount }}",pE={documentNavInfo:aE,noRendererMessage:oE,downloadButtonLabel:lE,brokenFile:cE,msgPluginRecipients:hE,msgPluginSender:dE,pdfPluginLoading:uE,pdfPluginPageNumber:fE},gE="مستند {{ currentFileNo }} من {{ allFilesCount }}",mE="{{{ fileType }}} : لا يمكننا عرض هذا النوع من الملفات",vE="تحميل الملف",bE="الملف تالف، يرجى التحقق منه على جهازك الخاص.",yE="المستلمين",AE="المرسل",_E="تحميل ...",EE=" {{ allPagesCount }} \\ {{ currentPage }} صفحة ",wE={documentNavInfo:gE,noRendererMessage:mE,downloadButtonLabel:vE,brokenFile:bE,msgPluginRecipients:yE,msgPluginSender:AE,pdfPluginLoading:_E,pdfPluginPageNumber:EE},xE="Dokument {{ currentFileNo }} od {{ allFilesCount }}",TE="Ne postoji pregledač za tip fajla: {{ fileType }}",SE="Preuzimanje fajla",CE="Vaš fajl nije dobar. Molimo Vas da probate da ga otvorite na vašem računaru.",PE="Primaoci",RE="Pošiljalac",LE="Učitavanje...",DE="Strana {{ currentPage }}/{{ allPagesCount }}",kE={documentNavInfo:xE,noRendererMessage:TE,downloadButtonLabel:SE,brokenFile:CE,msgPluginRecipients:PE,msgPluginSender:RE,pdfPluginLoading:LE,pdfPluginPageNumber:DE},IE="Документ {{ currentFileNo }} od {{ allFilesCount }}",ME="Не постоји прегледач за тип фајла: {{ fileType }}",NE="Преузимање фајла",FE="Ваш фајл није добар. Молимо Вас да пробате да га отворите на вашем рачунару.",OE="Примаоци",jE="Пошиљалац",BE="Учитавање...",HE="Страна {{ currentPage }}/{{ allPagesCount }}",UE={documentNavInfo:IE,noRendererMessage:ME,downloadButtonLabel:NE,brokenFile:FE,msgPluginRecipients:OE,msgPluginSender:jE,pdfPluginLoading:BE,pdfPluginPageNumber:HE},zE="ファイル {{ currentFileNo }} / {{ allFilesCount }}",WE="ファイルタイプに対応したレンダラーはありません: {{ fileType }}",GE="ダウンロード",VE="ファイルが壊れています。あなたのマシンでファイルを確認してください。",qE="受信者",$E="送信者",XE="ローティング中...",YE="ページ {{ currentPage }}/{{ allPagesCount }}",KE={documentNavInfo:zE,noRendererMessage:WE,downloadButtonLabel:GE,brokenFile:VE,msgPluginRecipients:qE,msgPluginSender:$E,pdfPluginLoading:XE,pdfPluginPageNumber:YE},ZE="Документ {{ currentFileNo }} из {{ allFilesCount }}",JE="Данный тип файла не поддерживается рендером: {{{ fileType }}}",QE="Скачать файл",ew="Ваш файл сломан. Пожалуйста, проверьте его на своём комьютере.",tw="Получатели",nw="Отправитель",sw="Загрузка...",iw="Страница {{ currentPage }}/{{ allPagesCount }}",rw={documentNavInfo:ZE,noRendererMessage:JE,downloadButtonLabel:QE,brokenFile:ew,msgPluginRecipients:tw,msgPluginSender:nw,pdfPluginLoading:sw,pdfPluginPageNumber:iw},aw="Dokument {{ currentFileNo }} av {{ allFilesCount }}",ow="Ingen renderare för filtypen: {{{ fileType }}}",lw="Ladda ner",cw="Filen är trasig. Var vänlig kontrollera den på din maskin.",hw="Mottagare",dw="Avsändare",uw="Laddar...",fw="Sida {{ currentPage }}/{{ allPagesCount }}",pw={documentNavInfo:aw,noRendererMessage:ow,downloadButtonLabel:lw,brokenFile:cw,msgPluginRecipients:hw,msgPluginSender:dw,pdfPluginLoading:uw,pdfPluginPageNumber:fw},gw="Belge {{ currentFileNo }} / {{ allFilesCount }}",mw="Dosya türü için görüntüleyici bulunamadı: {{{ fileType }}}",vw="Dosyayı indir",bw="Dosyanız bozuk. Lütfen kendi cihazınızda kontrol edin.",yw="Alıcılar",Aw="Gönderen",_w="Yükleniyor...",Ew="Sayfa {{ currentPage }}/{{ allPagesCount }}",ww={documentNavInfo:gw,noRendererMessage:mw,downloadButtonLabel:vw,brokenFile:bw,msgPluginRecipients:yw,msgPluginSender:Aw,pdfPluginLoading:_w,pdfPluginPageNumber:Ew},ap={en:p_,pl:w_,es:k_,de:U_,it:K_,pt:rE,fr:pE,ar:wE,sr:kE,sr_cyr:UE,ja:KE,ru:rw,se:pw,tr:ww},Ig="en",Xv="SET_ALL_DOCUMENTS",Yv="SET_DOCUMENT_LOADING",Kv="NEXT_DOCUMENT",Zv="PREVIOUS_DOCUMENT",Jv="UPDATE_CURRENT_DOCUMENT",Qv="SET_RENDERER_RECT",eb="SET_MAIN_CONFIG",tb="ADD_DOCUMENTS_FROM_DROP",xw="SET_DRAG_STATE",nb="GO_TO_PAGE",Tw=(r,e)=>({type:Xv,documents:r,initialActiveDocument:e}),Vf=r=>({type:Yv,value:r}),Mg=()=>({type:Kv}),Ng=()=>({type:Zv}),op=r=>({type:Jv,document:r}),Sw=r=>({type:Qv,rect:r}),Cw=r=>({type:eb,config:r}),Pw=(r,e="append")=>({type:tb,documents:r,behavior:e}),ym=r=>({type:nb,pageNumber:r}),xd={currentFileNo:0,documents:[],documentLoading:!0,currentDocument:void 0,rendererRect:void 0,config:{},pluginRenderers:[],language:Ig,isDragging:!1,targetPage:void 0},Rw=(r=xd,e)=>{switch(e.type){case Xv:{const{documents:t,initialActiveDocument:n}=e;return{...r,documents:t,currentDocument:n||t[0]||null,currentFileNo:n&&t.includes(n)?t.indexOf(n):xd.currentFileNo}}case Yv:{const{value:t}=e;return{...r,documentLoading:t}}case Kv:{if(r.currentFileNo>=r.documents.length-1)return r;const t=r.currentFileNo+1;return r.onDocumentChange&&r.onDocumentChange(r.documents[t]),{...r,currentFileNo:t,currentDocument:r.documents[t],documentLoading:!0}}case Zv:{if(r.currentFileNo<=0)return r;const t=r.currentFileNo-1;return r.onDocumentChange&&r.onDocumentChange(r.documents[t]),{...r,currentFileNo:r.currentFileNo-1,currentDocument:r.documents[t],documentLoading:!0}}case Jv:{const{document:t}=e;return{...r,currentDocument:t,currentFileNo:r.documents.findIndex(n=>n.uri===t.uri)}}case Qv:{const{rect:t}=e;return{...r,rendererRect:t}}case eb:{const{config:t}=e;return{...r,config:t}}case tb:{const{documents:t,behavior:n}=e;if(t.length===0)return r;const s=n==="replace"?t:[...r.documents,...t],i=n==="replace"?0:r.documents.length;return{...r,documents:s,currentDocument:s[i],currentFileNo:i,documentLoading:!0}}case xw:{const{isDragging:t}=e;return{...r,isDragging:t}}case nb:{const{pageNumber:t}=e;return{...r,targetPage:t}}default:return r}},sb=({dragState:r,dropMessage:e="Drop files here"})=>r.isOverDropZone?y.jsx("div",{className:"rdv-dropzone-overlay",children:y.jsxs("div",{className:"rdv-dropzone-content",children:[y.jsx(Lw,{}),y.jsx("span",{className:"rdv-dropzone-message",children:e})]})}):null,Lw=()=>y.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),y.jsx("polyline",{points:"17 8 12 3 7 8"}),y.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]});sb.__docgenInfo={description:"",methods:[],displayName:"DropZoneOverlay",props:{dragState:{required:!0,tsType:{name:"IDragState"},description:""},dropMessage:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Drop files here"',computed:!1}}}};const Dw=()=>{const[r,e]=P.useState({isDragging:!1,isOverDropZone:!1}),t=P.useRef(0),n=P.useCallback(c=>{c.preventDefault(),c.stopPropagation(),t.current++,c.dataTransfer.items&&c.dataTransfer.items.length>0&&e({isDragging:!0,isOverDropZone:!0})},[]),s=P.useCallback(c=>{c.preventDefault(),c.stopPropagation(),t.current--,t.current===0&&e({isDragging:!1,isOverDropZone:!1})},[]),i=P.useCallback(c=>{c.preventDefault(),c.stopPropagation()},[]),a=P.useCallback((c,h)=>{c.preventDefault(),c.stopPropagation(),t.current=0,e({isDragging:!1,isOverDropZone:!1});const d=Array.from(c.dataTransfer.files);d.length>0&&h(d)},[]),l=P.useCallback(()=>{t.current=0,e({isDragging:!1,isOverDropZone:!1})},[]);return{dragState:r,handleDragEnter:n,handleDragLeave:s,handleDragOver:i,handleDrop:a,resetDragState:l}},kw=["application/pdf","image/png","image/jpeg","image/gif","image/bmp","image/webp","image/tiff","text/plain","text/html","text/csv","video/mp4","video/webm"],Iw=50*1024*1024,Mw=r=>{const e=(r==null?void 0:r.acceptedFileTypes)||kw,t=(r==null?void 0:r.maxFileSize)||Iw,n=P.useCallback(c=>{var u;const h=c.type.toLowerCase(),d=((u=c.name.split(".").pop())==null?void 0:u.toLowerCase())||"";return e.some(f=>{if(f.includes("*")){const[g]=f.split("/");return h.startsWith(g)}return f.startsWith(".")?`.${d}`===f.toLowerCase():h===f.toLowerCase()||d===f.toLowerCase()})},[e]),s=P.useCallback(c=>c.size<=t,[t]),i=P.useCallback(c=>new Promise((h,d)=>{const u=new FileReader;u.onload=()=>{const f=u.result;h({uri:URL.createObjectURL(c),fileType:c.type||Nw(c.name),fileName:c.name,fileData:f})},u.onerror=()=>{d(new Error(`Failed to read file: ${c.name}`))},u.readAsDataURL(c)}),[]),a=P.useCallback(async c=>{const h=c.filter(u=>n(u)&&s(u));return(await Promise.all(h.map(i))).map(u=>({uri:u.uri,fileType:u.fileType,fileName:u.fileName,fileData:u.fileData}))},[n,s,i]),l=P.useCallback(c=>{const h=[],d=[],u=[];return c.forEach(f=>{n(f)?s(f)?h.push(f):u.push(f):d.push(f)}),{valid:h,invalidType:d,invalidSize:u}},[n,s]);return{processFiles:a,validateFiles:l,isFileTypeAccepted:n,isFileSizeValid:s}};function Nw(r){var n;const e=((n=r.split(".").pop())==null?void 0:n.toLowerCase())||"";return{pdf:"application/pdf",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",bmp:"image/bmp",webp:"image/webp",tiff:"image/tiff",tif:"image/tiff",txt:"text/plain",html:"text/html",htm:"text/html",csv:"text/csv",mp4:"video/mp4",webm:"video/webm"}[e]||"application/octet-stream"}const fi=P.createContext({state:xd,dispatch:()=>null}),ib=P.forwardRef((r,e)=>{const{children:t,documents:n,config:s,pluginRenderers:i,prefetchMethod:a,requestHeaders:l,initialActiveDocument:c,language:h,activeDocument:d,onDocumentChange:u,dragDropConfig:f,providerRef:g,jumpToPage:m}=r,{processFiles:A,validateFiles:E}=Mw(f),[_,T]=P.useReducer(Rw,{...xd,documents:n||[],currentDocument:n&&n.length?c||n[0]:void 0,config:s,pluginRenderers:i,prefetchMethod:a,requestHeaders:l,currentFileNo:c?n.findIndex(D=>D===c)??0:0,language:h&&ap[h]?h:Ig,activeDocument:d,onDocumentChange:u});P.useEffect(()=>{T(Tw(n,c)),s&&T(Cw(s))},[n,s,c]),P.useEffect(()=>{d&&T(op(d))},[d]),P.useEffect(()=>{m!==void 0&&m>0&&T(ym(m))},[m]);const C=P.useCallback(D=>{const I=(f==null?void 0:f.dropBehavior)||"append";T(Pw(D,I))},[T,f]),L=P.useCallback(async D=>{const{valid:I,invalidType:N,invalidSize:w}=E(D);if(N.length>0&&(f!=null&&f.onDropRejected)&&f.onDropRejected(N,"file-type"),w.length>0&&(f!=null&&f.onDropRejected)&&f.onDropRejected(w,"file-size"),I.length>0){f!=null&&f.onDrop&&f.onDrop(I);const x=await A(I);x.length>0&&C(x)}},[E,A,C,f]);return P.useImperativeHandle(e,()=>({prev(){T(Ng())},next(){T(Mg())},goToPage(D){T(ym(D))}}),[T]),P.useEffect(()=>{g&&(g.current={handleFilesDropped:L})},[g,L]),y.jsx(fi.Provider,{value:{state:_,dispatch:T,addDroppedDocuments:C},children:t})});ib.__docgenInfo={description:"",methods:[{name:"prev",docblock:null,modifiers:[],params:[],returns:null},{name:"next",docblock:null,modifiers:[],params:[],returns:null},{name:"goToPage",docblock:null,modifiers:[],params:[{name:"pageNumber",optional:!1,type:{name:"number"}}],returns:null}],displayName:"DocViewerProvider"};const Ti=({className:r="",...e})=>y.jsx("button",{className:`rdv-btn ${r}`,...e}),lp=({className:r="",...e})=>y.jsx("button",{className:`rdv-btn rdv-btn-secondary ${r}`,...e}),Fg=({className:r="",...e})=>y.jsx("a",{className:`rdv-link-btn ${r}`,...e});Ti.__docgenInfo={description:"",methods:[],displayName:"Button",props:{className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};lp.__docgenInfo={description:"",methods:[],displayName:"ButtonSecondary",props:{className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};Fg.__docgenInfo={description:"",methods:[],displayName:"LinkButton",props:{className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};const rb=r=>y.jsx(ob,{...r}),ab=r=>y.jsx(ob,{...r,reverse:!0}),ob=({color:r,size:e,reverse:t})=>y.jsx("svg",{width:e||"100%",height:e||"100%",style:{transform:`${t?"rotate(180deg)":""}`},id:"arrow_left",version:"1.1",viewBox:"0 0 32 32",xmlSpace:"preserve",children:y.jsx("path",{clipRule:"evenodd",d:"M31.106,15H3.278l8.325-8.293  c0.391-0.391,0.391-1.024,0-1.414c-0.391-0.391-1.024-0.391-1.414,0l-9.9,9.899c-0.385,0.385-0.385,1.029,0,1.414l9.9,9.9  c0.391,0.391,1.024,0.391,1.414,0c0.391-0.391,0.391-1.024,0-1.414L3.278,17h27.828c0.552,0,1-0.448,1-1  C32.106,15.448,31.658,15,31.106,15z",fill:r||"#aaa",fillRule:"evenodd",id:"Arrow_Back"})}),lb=r=>{const{color:e,size:t}=r;return y.jsx("svg",{width:t||"100%",height:t||"100%",version:"1.1",id:"Icons",viewBox:"0 0 32 32",xmlSpace:"preserve",style:{alignSelf:"center",justifySelf:"center"},children:y.jsxs("g",{children:[y.jsx("path",{fill:e||"#aaa",d:"M16,2c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1V3C17,2.4,16.6,2,16,2z"}),y.jsx("path",{fill:e||"#aaa",d:`M7.5,6.1c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.5,6.1
		z`}),y.jsx("path",{fill:e||"#aaa",d:"M9,16c0-0.6-0.4-1-1-1H3c-0.6,0-1,0.4-1,1s0.4,1,1,1h5C8.6,17,9,16.6,9,16z"}),y.jsx("path",{fill:e||"#aaa",d:`M9.6,20.9l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4
		S10,20.6,9.6,20.9z`}),y.jsx("path",{fill:e||"#aaa",d:"M16,23c-0.6,0-1,0.4-1,1v5c0,0.6,0.4,1,1,1s1-0.4,1-1v-5C17,23.4,16.6,23,16,23z"}),y.jsx("path",{fill:e||"#aaa",d:`M22.4,20.9c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l3.5,3.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4
		L22.4,20.9z`}),y.jsx("path",{fill:e||"#aaa",d:"M29,15h-5c-0.6,0-1,0.4-1,1s0.4,1,1,1h5c0.6,0,1-0.4,1-1S29.6,15,29,15z"}),y.jsx("path",{fill:e||"#aaa",d:`M21.7,11.3c0.3,0,0.5-0.1,0.7-0.3l3.5-3.5c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-3.5,3.5c-0.4,0.4-0.4,1,0,1.4
		C21.1,11.2,21.4,11.3,21.7,11.3z`})]})})};rb.__docgenInfo={description:"",methods:[],displayName:"PrevDocIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};ab.__docgenInfo={description:"",methods:[],displayName:"NextDocIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};lb.__docgenInfo={description:"",methods:[],displayName:"LoadingIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var Fw=Object.prototype.toString,_o=Array.isArray||function(e){return Fw.call(e)==="[object Array]"};function Og(r){return typeof r=="function"}function Ow(r){return _o(r)?"array":typeof r}function qf(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Am(r,e){return r!=null&&typeof r=="object"&&e in r}function jw(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var Bw=RegExp.prototype.test;function Hw(r,e){return Bw.call(r,e)}var Uw=/\S/;function zw(r){return!Hw(Uw,r)}var Ww={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Gw(r){return String(r).replace(/[&<>"'`=\/]/g,function(t){return Ww[t]})}var Vw=/\s*/,qw=/\s+/,_m=/\s*=/,$w=/\s*\}/,Xw=/#|\^|\/|>|\{|&|=|!/;function Yw(r,e){if(!r)return[];var t=!1,n=[],s=[],i=[],a=!1,l=!1,c="",h=0;function d(){if(a&&!l)for(;i.length;)delete s[i.pop()];else i=[];a=!1,l=!1}var u,f,g;function m(w){if(typeof w=="string"&&(w=w.split(qw,2)),!_o(w)||w.length!==2)throw new Error("Invalid tags: "+w);u=new RegExp(qf(w[0])+"\\s*"),f=new RegExp("\\s*"+qf(w[1])),g=new RegExp("\\s*"+qf("}"+w[1]))}m(e||Jt.tags);for(var A=new Lh(r),E,_,T,C,L,D;!A.eos();){if(E=A.pos,T=A.scanUntil(u),T)for(var I=0,N=T.length;I<N;++I)C=T.charAt(I),zw(C)?(i.push(s.length),c+=C):(l=!0,t=!0,c+=" "),s.push(["text",C,E,E+1]),E+=1,C===`
`&&(d(),c="",h=0,t=!1);if(!A.scan(u))break;if(a=!0,_=A.scan(Xw)||"name",A.scan(Vw),_==="="?(T=A.scanUntil(_m),A.scan(_m),A.scanUntil(f)):_==="{"?(T=A.scanUntil(g),A.scan($w),A.scanUntil(f),_="&"):T=A.scanUntil(f),!A.scan(f))throw new Error("Unclosed tag at "+A.pos);if(_==">"?L=[_,T,E,A.pos,c,h,t]:L=[_,T,E,A.pos],h++,s.push(L),_==="#"||_==="^")n.push(L);else if(_==="/"){if(D=n.pop(),!D)throw new Error('Unopened section "'+T+'" at '+E);if(D[1]!==T)throw new Error('Unclosed section "'+D[1]+'" at '+E)}else _==="name"||_==="{"||_==="&"?l=!0:_==="="&&m(T)}if(d(),D=n.pop(),D)throw new Error('Unclosed section "'+D[1]+'" at '+A.pos);return Zw(Kw(s))}function Kw(r){for(var e=[],t,n,s=0,i=r.length;s<i;++s)t=r[s],t&&(t[0]==="text"&&n&&n[0]==="text"?(n[1]+=t[1],n[3]=t[3]):(e.push(t),n=t));return e}function Zw(r){for(var e=[],t=e,n=[],s,i,a=0,l=r.length;a<l;++a)switch(s=r[a],s[0]){case"#":case"^":t.push(s),n.push(s),t=s[4]=[];break;case"/":i=n.pop(),i[5]=s[2],t=n.length>0?n[n.length-1][4]:e;break;default:t.push(s)}return e}function Lh(r){this.string=r,this.tail=r,this.pos=0}Lh.prototype.eos=function(){return this.tail===""};Lh.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n};Lh.prototype.scanUntil=function(e){var t=this.tail.search(e),n;switch(t){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=n.length,n};function bo(r,e){this.view=r,this.cache={".":this.view},this.parent=e}bo.prototype.push=function(e){return new bo(e,this)};bo.prototype.lookup=function(e){var t=this.cache,n;if(t.hasOwnProperty(e))n=t[e];else{for(var s=this,i,a,l,c=!1;s;){if(e.indexOf(".")>0)for(i=s.view,a=e.split("."),l=0;i!=null&&l<a.length;)l===a.length-1&&(c=Am(i,a[l])||jw(i,a[l])),i=i[a[l++]];else i=s.view[e],c=Am(s.view,e);if(c){n=i;break}s=s.parent}t[e]=n}return Og(n)&&(n=n.call(this.view)),n};function Lt(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Lt.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};Lt.prototype.parse=function(e,t){var n=this.templateCache,s=e+":"+(t||Jt.tags).join(":"),i=typeof n<"u",a=i?n.get(s):void 0;return a==null&&(a=Yw(e,t),i&&n.set(s,a)),a};Lt.prototype.render=function(e,t,n,s){var i=this.getConfigTags(s),a=this.parse(e,i),l=t instanceof bo?t:new bo(t,void 0);return this.renderTokens(a,l,n,e,s)};Lt.prototype.renderTokens=function(e,t,n,s,i){for(var a="",l,c,h,d=0,u=e.length;d<u;++d)h=void 0,l=e[d],c=l[0],c==="#"?h=this.renderSection(l,t,n,s,i):c==="^"?h=this.renderInverted(l,t,n,s,i):c===">"?h=this.renderPartial(l,t,n,i):c==="&"?h=this.unescapedValue(l,t):c==="name"?h=this.escapedValue(l,t,i):c==="text"&&(h=this.rawValue(l)),h!==void 0&&(a+=h);return a};Lt.prototype.renderSection=function(e,t,n,s,i){var a=this,l="",c=t.lookup(e[1]);function h(f){return a.render(f,t,n,i)}if(c){if(_o(c))for(var d=0,u=c.length;d<u;++d)l+=this.renderTokens(e[4],t.push(c[d]),n,s,i);else if(typeof c=="object"||typeof c=="string"||typeof c=="number")l+=this.renderTokens(e[4],t.push(c),n,s,i);else if(Og(c)){if(typeof s!="string")throw new Error("Cannot use higher-order sections without the original template");c=c.call(t.view,s.slice(e[3],e[5]),h),c!=null&&(l+=c)}else l+=this.renderTokens(e[4],t,n,s,i);return l}};Lt.prototype.renderInverted=function(e,t,n,s,i){var a=t.lookup(e[1]);if(!a||_o(a)&&a.length===0)return this.renderTokens(e[4],t,n,s,i)};Lt.prototype.indentPartial=function(e,t,n){for(var s=t.replace(/[^ \t]/g,""),i=e.split(`
`),a=0;a<i.length;a++)i[a].length&&(a>0||!n)&&(i[a]=s+i[a]);return i.join(`
`)};Lt.prototype.renderPartial=function(e,t,n,s){if(n){var i=this.getConfigTags(s),a=Og(n)?n(e[1]):n[e[1]];if(a!=null){var l=e[6],c=e[5],h=e[4],d=a;c==0&&h&&(d=this.indentPartial(a,h,l));var u=this.parse(d,i);return this.renderTokens(u,t,n,d,s)}}};Lt.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(n!=null)return n};Lt.prototype.escapedValue=function(e,t,n){var s=this.getConfigEscape(n)||Jt.escape,i=t.lookup(e[1]);if(i!=null)return typeof i=="number"&&s===Jt.escape?String(i):s(i)};Lt.prototype.rawValue=function(e){return e[1]};Lt.prototype.getConfigTags=function(e){return _o(e)?e:e&&typeof e=="object"?e.tags:void 0};Lt.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!_o(e))return e.escape};var Jt={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){ol.templateCache=r},get templateCache(){return ol.templateCache}},ol=new Lt;Jt.clearCache=function(){return ol.clearCache()};Jt.parse=function(e,t){return ol.parse(e,t)};Jt.render=function(e,t,n,s){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Ow(e)+'" was given as the first argument for mustache#render(template, view, partials)');return ol.render(e,t,n,s)};Jt.escape=Gw;Jt.Scanner=Lh;Jt.Context=bo;Jt.Writer=Lt;const Or=()=>{const{state:{language:r}}=P.useContext(fi),e=ap[Ig];return{t:P.useCallback((n,s)=>{const i=ap[r];return i[n]?Jt.render(i[n],s):e[n]?Jt.render(e[n],s):n},[r,e])}},cb=()=>{const{state:{currentDocument:r,currentFileNo:e,documents:t},dispatch:n}=P.useContext(fi),{t:s}=Or();if(t.length<=1||!r)return null;let i=r.uri||"";const a=i==null?void 0:i.split("/");return a.length&&(i=a[a.length-1]),y.jsxs("div",{id:"doc-nav",className:"rdv-doc-nav",children:[y.jsx("p",{id:"doc-nav-info",children:s("documentNavInfo",{currentFileNo:e+1,allFilesCount:t.length})}),y.jsx(lp,{id:"doc-nav-prev",className:"rdv-doc-nav-btn-prev",onClick:()=>n(Ng()),disabled:e===0,children:y.jsx(rb,{color:"#fff",size:"60%"})}),y.jsx(lp,{id:"doc-nav-next",className:"rdv-doc-nav-btn-next",onClick:()=>n(Mg()),disabled:e>=t.length-1,children:y.jsx(ab,{color:"#fff",size:"60%"})})]})};cb.__docgenInfo={description:"",methods:[],displayName:"DocumentNav"};const hb=(r,e)=>{var n;if(!r)return"";let t="";if(r.fileName)t=r.fileName;else{t=r.uri||"",t=decodeURI(t),e||(t=(n=t==null?void 0:t.split("?"))==null?void 0:n[0]);const s=t==null?void 0:t.split("/");s.length&&(t=s[s.length-1])}return t},db=()=>{var n,s;const{state:{config:r,currentDocument:e}}=P.useContext(fi);if(!e||(n=r==null?void 0:r.header)!=null&&n.disableFileName)return null;const t=hb(e,((s=r==null?void 0:r.header)==null?void 0:s.retainURLParams)||!1);return y.jsx("div",{id:"file-name","data-testid":"file-name",className:"rdv-file-name",children:t})};db.__docgenInfo={description:"",methods:[],displayName:"FileName"};const ub=()=>{var s,i,a;const{state:r,dispatch:e}=P.useContext(fi),{config:t}=r;if((s=t==null?void 0:t.header)!=null&&s.disableHeader)return null;const n=(a=(i=t==null?void 0:t.header)==null?void 0:i.overrideComponent)==null?void 0:a.call(i,r,()=>e(Ng()),()=>e(Mg()));return n||y.jsxs("div",{id:"header-bar","data-testid":"header-bar",className:"rdv-header-bar",children:[y.jsx(db,{}),y.jsx(cb,{})]})};ub.__docgenInfo={description:"",methods:[],displayName:"HeaderBar"};const jg=({documentURI:r,signal:e,fileLoaderComplete:t,readerTypeFunction:n,headers:s})=>fetch(r,{signal:e,headers:s}).then(async i=>{const a=await i.blob(),l=new FileReader;switch(l.addEventListener("loadend",()=>t(l)),n){case"arrayBuffer":l.readAsArrayBuffer(a);break;case"binaryString":l.readAsBinaryString(a);break;case"dataURL":l.readAsDataURL(a);break;case"text":l.readAsText(a);break}}).catch(i=>i),Jw=r=>jg({...r,readerTypeFunction:"arrayBuffer"}),fb=r=>jg({...r,readerTypeFunction:"dataURL"}),pb=r=>jg({...r,readerTypeFunction:"text"}),Qw=fb,ex=()=>{const{state:{currentDocument:r,pluginRenderers:e}}=P.useContext(fi),[t,n]=P.useState();return P.useEffect(()=>{if(!r)return;if(!r.fileType){n(void 0);return}const s=[];e==null||e.forEach(a=>{r.fileType!==void 0&&a.fileTypes.indexOf(r.fileType)>=0&&s.push(a)});const[i]=s.sort((a,l)=>l.weight-a.weight);n(i&&i!==void 0?()=>i:null)},[r,e]),{CurrentRenderer:t}},tx=()=>{const{state:r,dispatch:e}=P.useContext(fi),{currentFileNo:t,currentDocument:n,prefetchMethod:s}=r,{CurrentRenderer:i}=ex(),a=(n==null?void 0:n.uri)||"";return P.useEffect(()=>{if(!n||n.fileType!==void 0)return;const l=new AbortController,{signal:c}=l;return fetch(a,{method:s||a.startsWith("blob:")?"GET":"HEAD",signal:c,headers:r==null?void 0:r.requestHeaders}).then(h=>{const d=h.headers.get("content-type"),u=(d==null?void 0:d.split(";"))||[],f=u.length?u[0]:void 0;e(op({...n,fileType:f||void 0}))}).catch(h=>{if((h==null?void 0:h.name)!=="AbortError")throw h}),()=>{l.abort()}},[t,a,n]),P.useEffect(()=>{var u;if(!n||i===void 0)return;const l=new AbortController,{signal:c}=l,d={documentURI:a,signal:c,fileLoaderComplete:f=>{if(!n||!f){e(Vf(!1));return}const g={...n};f.result!==null&&(g.fileData=f.result),e(op(g)),e(Vf(!1))},headers:r==null?void 0:r.requestHeaders};return i===null?e(Vf(!1)):i.fileLoader!==void 0?(u=i.fileLoader)==null||u.call(i,d):Qw(d),()=>{l.abort()}},[i,t]),{state:r,dispatch:e,CurrentRenderer:i}},nx=()=>{const[r,e]=P.useState({width:void 0,height:void 0});return P.useEffect(()=>{function t(){e({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),r},cp=({children:r})=>{var i,a;const{state:e}=P.useContext(fi),{config:t}=e,[n,s]=P.useState(((i=t==null?void 0:t.loadingRenderer)==null?void 0:i.showLoadingTimeout)===!1);return P.useEffect(()=>{var l;setTimeout(()=>{s(!0)},typeof((l=t==null?void 0:t.loadingRenderer)==null?void 0:l.showLoadingTimeout)=="number"?t.loadingRenderer.showLoadingTimeout:500)},[(a=t==null?void 0:t.loadingRenderer)==null?void 0:a.showLoadingTimeout]),n?y.jsx(y.Fragment,{children:r}):null};cp.__docgenInfo={description:"",methods:[],displayName:"LoadingTimeout"};const sx=({documents:r,documentLoading:e,config:t,currentDocument:n,fileName:s,CurrentRenderer:i,state:a,t:l})=>{var c,h;if(r.length)if(e){if(t&&((c=t==null?void 0:t.loadingRenderer)!=null&&c.overrideComponent)){const d=t.loadingRenderer.overrideComponent;return y.jsx(cp,{children:y.jsx(d,{document:n,fileName:s})})}return y.jsx(cp,{children:y.jsx("div",{id:"loading-renderer","data-testid":"loading-renderer",className:"rdv-loading-container",children:y.jsx("div",{className:"rdv-loading-icon",children:y.jsx(lb,{color:"#444",size:40})})})})}else{if(i)return y.jsx(i,{mainState:a});if(i===void 0)return null;if(t&&((h=t==null?void 0:t.noRenderer)!=null&&h.overrideComponent)){const d=t.noRenderer.overrideComponent;return y.jsx(d,{document:n,fileName:s})}return y.jsxs("div",{id:"no-renderer","data-testid":"no-renderer",children:[l("noRendererMessage",{fileType:(n==null?void 0:n.fileType)??""}),y.jsx(Fg,{id:"no-renderer-download",className:"rdv-download-btn",href:n==null?void 0:n.uri,download:n==null?void 0:n.uri,children:l("downloadButtonLabel")})]})}else return y.jsx("div",{id:"no-documents"})},gb=()=>{var u;const{state:r,dispatch:e,CurrentRenderer:t}=tx(),{documents:n,documentLoading:s,currentDocument:i,config:a}=r,l=nx(),{t:c}=Or(),h=P.useCallback(f=>{f&&e(Sw(f==null?void 0:f.getBoundingClientRect()))},[l,e]),d=hb(i,((u=a==null?void 0:a.header)==null?void 0:u.retainURLParams)||!1);return y.jsx("div",{id:"proxy-renderer","data-testid":"proxy-renderer",ref:h,children:y.jsx(sx,{state:r,documents:n,documentLoading:s,config:a,currentDocument:i,fileName:d,CurrentRenderer:t,t:c})})};gb.__docgenInfo={description:"",methods:[],displayName:"ProxyRenderer"};const Em={primary:"#fff",secondary:"#000",tertiary:"#ffffff99",textPrimary:"#000",textSecondary:"#fff",textTertiary:"#00000044",disableThemeScrollbar:!1},$n=({mainState:{currentDocument:r},children:e})=>r?y.jsx("div",{id:"image-renderer",className:"rdv-image-container",children:e||y.jsx("img",{id:"image-img",className:"rdv-image-img",src:r.fileData})}):null;$n.fileTypes=[];$n.weight=0;$n.__docgenInfo={description:"",methods:[],displayName:"ImageProxyRenderer"};const vf=r=>y.jsx($n,{...r});vf.fileTypes=["bmp","image/bmp"];vf.weight=0;vf.__docgenInfo={description:"",methods:[],displayName:"BMPRenderer"};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:mb,setPrototypeOf:wm,isFrozen:ix,getPrototypeOf:rx,getOwnPropertyDescriptor:ax}=Object;let{freeze:Pt,seal:on,create:hp}=Object,{apply:dp,construct:up}=typeof Reflect<"u"&&Reflect;Pt||(Pt=function(e){return e});on||(on=function(e){return e});dp||(dp=function(e,t){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];return e.apply(t,s)});up||(up=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return new e(...n)});const Vh=Rt(Array.prototype.forEach),ox=Rt(Array.prototype.lastIndexOf),xm=Rt(Array.prototype.pop),xo=Rt(Array.prototype.push),lx=Rt(Array.prototype.splice),Jh=Rt(String.prototype.toLowerCase),$f=Rt(String.prototype.toString),Xf=Rt(String.prototype.match),To=Rt(String.prototype.replace),cx=Rt(String.prototype.indexOf),hx=Rt(String.prototype.trim),ln=Rt(Object.prototype.hasOwnProperty),Et=Rt(RegExp.prototype.test),So=dx(TypeError);function Rt(r){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return dp(r,e,n)}}function dx(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return up(r,t)}}function he(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jh;wm&&wm(r,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){const i=t(s);i!==s&&(ix(e)||(e[n]=i),s=i)}r[s]=!0}return r}function ux(r){for(let e=0;e<r.length;e++)ln(r,e)||(r[e]=null);return r}function Cn(r){const e=hp(null);for(const[t,n]of mb(r))ln(r,t)&&(Array.isArray(n)?e[t]=ux(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=Cn(n):e[t]=n);return e}function Co(r,e){for(;r!==null;){const n=ax(r,e);if(n){if(n.get)return Rt(n.get);if(typeof n.value=="function")return Rt(n.value)}r=rx(r)}function t(){return null}return t}const Tm=Pt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Yf=Pt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Kf=Pt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),fx=Pt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Zf=Pt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),px=Pt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Sm=Pt(["#text"]),Cm=Pt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Jf=Pt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pm=Pt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),qh=Pt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gx=on(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mx=on(/<%[\w\W]*|[\w\W]*%>/gm),vx=on(/\$\{[\w\W]*/gm),bx=on(/^data-[\-\w.\u00B7-\uFFFF]+$/),yx=on(/^aria-[\-\w]+$/),vb=on(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ax=on(/^(?:\w+script|data):/i),_x=on(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),bb=on(/^html$/i),Ex=on(/^[a-z][.\w]*(-[.\w]+)+$/i);var Rm=Object.freeze({__proto__:null,ARIA_ATTR:yx,ATTR_WHITESPACE:_x,CUSTOM_ELEMENT:Ex,DATA_ATTR:bx,DOCTYPE_NAME:bb,ERB_EXPR:mx,IS_ALLOWED_URI:vb,IS_SCRIPT_OR_DATA:Ax,MUSTACHE_EXPR:gx,TMPLIT_EXPR:vx});const Po={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},wx=function(){return typeof window>"u"?null:window},xx=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(n=t.getAttribute(s));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Lm=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function yb(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:wx();const e=Q=>yb(Q);if(e.version="3.3.1",e.removed=[],!r||!r.document||r.document.nodeType!==Po.document||!r.Element)return e.isSupported=!1,e;let{document:t}=r;const n=t,s=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:h,NamedNodeMap:d=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:u,DOMParser:f,trustedTypes:g}=r,m=c.prototype,A=Co(m,"cloneNode"),E=Co(m,"remove"),_=Co(m,"nextSibling"),T=Co(m,"childNodes"),C=Co(m,"parentNode");if(typeof a=="function"){const Q=t.createElement("template");Q.content&&Q.content.ownerDocument&&(t=Q.content.ownerDocument)}let L,D="";const{implementation:I,createNodeIterator:N,createDocumentFragment:w,getElementsByTagName:x}=t,{importNode:k}=n;let R=Lm();e.isSupported=typeof mb=="function"&&typeof C=="function"&&I&&I.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:F,ERB_EXPR:O,TMPLIT_EXPR:j,DATA_ATTR:q,ARIA_ATTR:X,IS_SCRIPT_OR_DATA:M,ATTR_WHITESPACE:U,CUSTOM_ELEMENT:z}=Rm;let{IS_ALLOWED_URI:_e}=Rm,ee=null;const H=he({},[...Tm,...Yf,...Kf,...Zf,...Sm]);let W=null;const ce=he({},[...Cm,...Jf,...Pm,...qh]);let K=Object.seal(hp(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),oe=null,Z=null;const ue=Object.seal(hp(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let G=!0,J=!0,ve=!1,Ee=!0,te=!1,fe=!0,ae=!1,V=!1,pe=!1,ge=!1,xe=!1,je=!1,Fe=!0,we=!1;const Ce="user-content-";let Ue=!0,le=!1,Qe={},Me=null;const Ht=he({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ut=null;const et=he({},["audio","video","img","source","image","track"]);let gt=null;const Be=he({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Kn="http://www.w3.org/1998/Math/MathML",rt="http://www.w3.org/2000/svg",Qt="http://www.w3.org/1999/xhtml";let xn=Qt,Bf=!1,Hf=null;const DA=he({},[Kn,rt,Qt],$f);let zh=he({},["mi","mo","mn","ms","mtext"]),Wh=he({},["annotation-xml"]);const kA=he({},["title","style","font","a","script"]);let wo=null;const IA=["application/xhtml+xml","text/html"],MA="text/html";let qe=null,Ur=null;const NA=t.createElement("form"),am=function(S){return S instanceof RegExp||S instanceof Function},Uf=function(){let S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ur&&Ur===S)){if((!S||typeof S!="object")&&(S={}),S=Cn(S),wo=IA.indexOf(S.PARSER_MEDIA_TYPE)===-1?MA:S.PARSER_MEDIA_TYPE,qe=wo==="application/xhtml+xml"?$f:Jh,ee=ln(S,"ALLOWED_TAGS")?he({},S.ALLOWED_TAGS,qe):H,W=ln(S,"ALLOWED_ATTR")?he({},S.ALLOWED_ATTR,qe):ce,Hf=ln(S,"ALLOWED_NAMESPACES")?he({},S.ALLOWED_NAMESPACES,$f):DA,gt=ln(S,"ADD_URI_SAFE_ATTR")?he(Cn(Be),S.ADD_URI_SAFE_ATTR,qe):Be,Ut=ln(S,"ADD_DATA_URI_TAGS")?he(Cn(et),S.ADD_DATA_URI_TAGS,qe):et,Me=ln(S,"FORBID_CONTENTS")?he({},S.FORBID_CONTENTS,qe):Ht,oe=ln(S,"FORBID_TAGS")?he({},S.FORBID_TAGS,qe):Cn({}),Z=ln(S,"FORBID_ATTR")?he({},S.FORBID_ATTR,qe):Cn({}),Qe=ln(S,"USE_PROFILES")?S.USE_PROFILES:!1,G=S.ALLOW_ARIA_ATTR!==!1,J=S.ALLOW_DATA_ATTR!==!1,ve=S.ALLOW_UNKNOWN_PROTOCOLS||!1,Ee=S.ALLOW_SELF_CLOSE_IN_ATTR!==!1,te=S.SAFE_FOR_TEMPLATES||!1,fe=S.SAFE_FOR_XML!==!1,ae=S.WHOLE_DOCUMENT||!1,ge=S.RETURN_DOM||!1,xe=S.RETURN_DOM_FRAGMENT||!1,je=S.RETURN_TRUSTED_TYPE||!1,pe=S.FORCE_BODY||!1,Fe=S.SANITIZE_DOM!==!1,we=S.SANITIZE_NAMED_PROPS||!1,Ue=S.KEEP_CONTENT!==!1,le=S.IN_PLACE||!1,_e=S.ALLOWED_URI_REGEXP||vb,xn=S.NAMESPACE||Qt,zh=S.MATHML_TEXT_INTEGRATION_POINTS||zh,Wh=S.HTML_INTEGRATION_POINTS||Wh,K=S.CUSTOM_ELEMENT_HANDLING||{},S.CUSTOM_ELEMENT_HANDLING&&am(S.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=S.CUSTOM_ELEMENT_HANDLING.tagNameCheck),S.CUSTOM_ELEMENT_HANDLING&&am(S.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=S.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),S.CUSTOM_ELEMENT_HANDLING&&typeof S.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=S.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),te&&(J=!1),xe&&(ge=!0),Qe&&(ee=he({},Sm),W=[],Qe.html===!0&&(he(ee,Tm),he(W,Cm)),Qe.svg===!0&&(he(ee,Yf),he(W,Jf),he(W,qh)),Qe.svgFilters===!0&&(he(ee,Kf),he(W,Jf),he(W,qh)),Qe.mathMl===!0&&(he(ee,Zf),he(W,Pm),he(W,qh))),S.ADD_TAGS&&(typeof S.ADD_TAGS=="function"?ue.tagCheck=S.ADD_TAGS:(ee===H&&(ee=Cn(ee)),he(ee,S.ADD_TAGS,qe))),S.ADD_ATTR&&(typeof S.ADD_ATTR=="function"?ue.attributeCheck=S.ADD_ATTR:(W===ce&&(W=Cn(W)),he(W,S.ADD_ATTR,qe))),S.ADD_URI_SAFE_ATTR&&he(gt,S.ADD_URI_SAFE_ATTR,qe),S.FORBID_CONTENTS&&(Me===Ht&&(Me=Cn(Me)),he(Me,S.FORBID_CONTENTS,qe)),S.ADD_FORBID_CONTENTS&&(Me===Ht&&(Me=Cn(Me)),he(Me,S.ADD_FORBID_CONTENTS,qe)),Ue&&(ee["#text"]=!0),ae&&he(ee,["html","head","body"]),ee.table&&(he(ee,["tbody"]),delete oe.tbody),S.TRUSTED_TYPES_POLICY){if(typeof S.TRUSTED_TYPES_POLICY.createHTML!="function")throw So('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof S.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw So('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=S.TRUSTED_TYPES_POLICY,D=L.createHTML("")}else L===void 0&&(L=xx(g,s)),L!==null&&typeof D=="string"&&(D=L.createHTML(""));Pt&&Pt(S),Ur=S}},om=he({},[...Yf,...Kf,...fx]),lm=he({},[...Zf,...px]),FA=function(S){let B=C(S);(!B||!B.tagName)&&(B={namespaceURI:xn,tagName:"template"});const $=Jh(S.tagName),Ne=Jh(B.tagName);return Hf[S.namespaceURI]?S.namespaceURI===rt?B.namespaceURI===Qt?$==="svg":B.namespaceURI===Kn?$==="svg"&&(Ne==="annotation-xml"||zh[Ne]):!!om[$]:S.namespaceURI===Kn?B.namespaceURI===Qt?$==="math":B.namespaceURI===rt?$==="math"&&Wh[Ne]:!!lm[$]:S.namespaceURI===Qt?B.namespaceURI===rt&&!Wh[Ne]||B.namespaceURI===Kn&&!zh[Ne]?!1:!lm[$]&&(kA[$]||!om[$]):!!(wo==="application/xhtml+xml"&&Hf[S.namespaceURI]):!1},Tn=function(S){xo(e.removed,{element:S});try{C(S).removeChild(S)}catch{E(S)}},mi=function(S,B){try{xo(e.removed,{attribute:B.getAttributeNode(S),from:B})}catch{xo(e.removed,{attribute:null,from:B})}if(B.removeAttribute(S),S==="is")if(ge||xe)try{Tn(B)}catch{}else try{B.setAttribute(S,"")}catch{}},cm=function(S){let B=null,$=null;if(pe)S="<remove></remove>"+S;else{const Ge=Xf(S,/^[\r\n\t ]+/);$=Ge&&Ge[0]}wo==="application/xhtml+xml"&&xn===Qt&&(S='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+S+"</body></html>");const Ne=L?L.createHTML(S):S;if(xn===Qt)try{B=new f().parseFromString(Ne,wo)}catch{}if(!B||!B.documentElement){B=I.createDocument(xn,"template",null);try{B.documentElement.innerHTML=Bf?D:Ne}catch{}}const mt=B.body||B.documentElement;return S&&$&&mt.insertBefore(t.createTextNode($),mt.childNodes[0]||null),xn===Qt?x.call(B,ae?"html":"body")[0]:ae?B.documentElement:mt},hm=function(S){return N.call(S.ownerDocument||S,S,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},zf=function(S){return S instanceof u&&(typeof S.nodeName!="string"||typeof S.textContent!="string"||typeof S.removeChild!="function"||!(S.attributes instanceof d)||typeof S.removeAttribute!="function"||typeof S.setAttribute!="function"||typeof S.namespaceURI!="string"||typeof S.insertBefore!="function"||typeof S.hasChildNodes!="function")},dm=function(S){return typeof l=="function"&&S instanceof l};function Zn(Q,S,B){Vh(Q,$=>{$.call(e,S,B,Ur)})}const um=function(S){let B=null;if(Zn(R.beforeSanitizeElements,S,null),zf(S))return Tn(S),!0;const $=qe(S.nodeName);if(Zn(R.uponSanitizeElement,S,{tagName:$,allowedTags:ee}),fe&&S.hasChildNodes()&&!dm(S.firstElementChild)&&Et(/<[/\w!]/g,S.innerHTML)&&Et(/<[/\w!]/g,S.textContent)||S.nodeType===Po.progressingInstruction||fe&&S.nodeType===Po.comment&&Et(/<[/\w]/g,S.data))return Tn(S),!0;if(!(ue.tagCheck instanceof Function&&ue.tagCheck($))&&(!ee[$]||oe[$])){if(!oe[$]&&pm($)&&(K.tagNameCheck instanceof RegExp&&Et(K.tagNameCheck,$)||K.tagNameCheck instanceof Function&&K.tagNameCheck($)))return!1;if(Ue&&!Me[$]){const Ne=C(S)||S.parentNode,mt=T(S)||S.childNodes;if(mt&&Ne){const Ge=mt.length;for(let Dt=Ge-1;Dt>=0;--Dt){const Jn=A(mt[Dt],!0);Jn.__removalCount=(S.__removalCount||0)+1,Ne.insertBefore(Jn,_(S))}}}return Tn(S),!0}return S instanceof c&&!FA(S)||($==="noscript"||$==="noembed"||$==="noframes")&&Et(/<\/no(script|embed|frames)/i,S.innerHTML)?(Tn(S),!0):(te&&S.nodeType===Po.text&&(B=S.textContent,Vh([F,O,j],Ne=>{B=To(B,Ne," ")}),S.textContent!==B&&(xo(e.removed,{element:S.cloneNode()}),S.textContent=B)),Zn(R.afterSanitizeElements,S,null),!1)},fm=function(S,B,$){if(Fe&&(B==="id"||B==="name")&&($ in t||$ in NA))return!1;if(!(J&&!Z[B]&&Et(q,B))){if(!(G&&Et(X,B))){if(!(ue.attributeCheck instanceof Function&&ue.attributeCheck(B,S))){if(!W[B]||Z[B]){if(!(pm(S)&&(K.tagNameCheck instanceof RegExp&&Et(K.tagNameCheck,S)||K.tagNameCheck instanceof Function&&K.tagNameCheck(S))&&(K.attributeNameCheck instanceof RegExp&&Et(K.attributeNameCheck,B)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(B,S))||B==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&Et(K.tagNameCheck,$)||K.tagNameCheck instanceof Function&&K.tagNameCheck($))))return!1}else if(!gt[B]){if(!Et(_e,To($,U,""))){if(!((B==="src"||B==="xlink:href"||B==="href")&&S!=="script"&&cx($,"data:")===0&&Ut[S])){if(!(ve&&!Et(M,To($,U,"")))){if($)return!1}}}}}}}return!0},pm=function(S){return S!=="annotation-xml"&&Xf(S,z)},gm=function(S){Zn(R.beforeSanitizeAttributes,S,null);const{attributes:B}=S;if(!B||zf(S))return;const $={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W,forceKeepAttr:void 0};let Ne=B.length;for(;Ne--;){const mt=B[Ne],{name:Ge,namespaceURI:Dt,value:Jn}=mt,zr=qe(Ge),Wf=Jn;let at=Ge==="value"?Wf:hx(Wf);if($.attrName=zr,$.attrValue=at,$.keepAttr=!0,$.forceKeepAttr=void 0,Zn(R.uponSanitizeAttribute,S,$),at=$.attrValue,we&&(zr==="id"||zr==="name")&&(mi(Ge,S),at=Ce+at),fe&&Et(/((--!?|])>)|<\/(style|title|textarea)/i,at)){mi(Ge,S);continue}if(zr==="attributename"&&Xf(at,"href")){mi(Ge,S);continue}if($.forceKeepAttr)continue;if(!$.keepAttr){mi(Ge,S);continue}if(!Ee&&Et(/\/>/i,at)){mi(Ge,S);continue}te&&Vh([F,O,j],vm=>{at=To(at,vm," ")});const mm=qe(S.nodeName);if(!fm(mm,zr,at)){mi(Ge,S);continue}if(L&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Dt)switch(g.getAttributeType(mm,zr)){case"TrustedHTML":{at=L.createHTML(at);break}case"TrustedScriptURL":{at=L.createScriptURL(at);break}}if(at!==Wf)try{Dt?S.setAttributeNS(Dt,Ge,at):S.setAttribute(Ge,at),zf(S)?Tn(S):xm(e.removed)}catch{mi(Ge,S)}}Zn(R.afterSanitizeAttributes,S,null)},OA=function Q(S){let B=null;const $=hm(S);for(Zn(R.beforeSanitizeShadowDOM,S,null);B=$.nextNode();)Zn(R.uponSanitizeShadowNode,B,null),um(B),gm(B),B.content instanceof i&&Q(B.content);Zn(R.afterSanitizeShadowDOM,S,null)};return e.sanitize=function(Q){let S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=null,$=null,Ne=null,mt=null;if(Bf=!Q,Bf&&(Q="<!-->"),typeof Q!="string"&&!dm(Q))if(typeof Q.toString=="function"){if(Q=Q.toString(),typeof Q!="string")throw So("dirty is not a string, aborting")}else throw So("toString is not a function");if(!e.isSupported)return Q;if(V||Uf(S),e.removed=[],typeof Q=="string"&&(le=!1),le){if(Q.nodeName){const Jn=qe(Q.nodeName);if(!ee[Jn]||oe[Jn])throw So("root node is forbidden and cannot be sanitized in-place")}}else if(Q instanceof l)B=cm("<!---->"),$=B.ownerDocument.importNode(Q,!0),$.nodeType===Po.element&&$.nodeName==="BODY"||$.nodeName==="HTML"?B=$:B.appendChild($);else{if(!ge&&!te&&!ae&&Q.indexOf("<")===-1)return L&&je?L.createHTML(Q):Q;if(B=cm(Q),!B)return ge?null:je?D:""}B&&pe&&Tn(B.firstChild);const Ge=hm(le?Q:B);for(;Ne=Ge.nextNode();)um(Ne),gm(Ne),Ne.content instanceof i&&OA(Ne.content);if(le)return Q;if(ge){if(xe)for(mt=w.call(B.ownerDocument);B.firstChild;)mt.appendChild(B.firstChild);else mt=B;return(W.shadowroot||W.shadowrootmode)&&(mt=k.call(n,mt,!0)),mt}let Dt=ae?B.outerHTML:B.innerHTML;return ae&&ee["!doctype"]&&B.ownerDocument&&B.ownerDocument.doctype&&B.ownerDocument.doctype.name&&Et(bb,B.ownerDocument.doctype.name)&&(Dt="<!DOCTYPE "+B.ownerDocument.doctype.name+`>
`+Dt),te&&Vh([F,O,j],Jn=>{Dt=To(Dt,Jn," ")}),L&&je?L.createHTML(Dt):Dt},e.setConfig=function(){let Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Uf(Q),V=!0},e.clearConfig=function(){Ur=null,V=!1},e.isValidAttribute=function(Q,S,B){Ur||Uf({});const $=qe(Q),Ne=qe(S);return fm($,Ne,B)},e.addHook=function(Q,S){typeof S=="function"&&xo(R[Q],S)},e.removeHook=function(Q,S){if(S!==void 0){const B=ox(R[Q],S);return B===-1?void 0:lx(R[Q],B,1)[0]}return xm(R[Q])},e.removeHooks=function(Q){R[Q]=[]},e.removeAllHooks=function(){R=Lm()},e}var Tx=yb();const Dh=({mainState:{currentDocument:r}})=>(P.useEffect(()=>{const e=r==null?void 0:r.fileData;let t="";const n=e==null?void 0:e.replace(/^data:text\/html;(?:charset=([^;]*);)?base64,/,(d,u)=>(t=u||"utf-8",""));let s=window.atob(n);const i=Uint8Array.from(s,d=>d.charCodeAt(0));s=new TextDecoder(t).decode(i);const a=document.getElementById("html-body"),l=(a==null?void 0:a.contentWindow)&&a.contentWindow;if(!l)return;const c=Tx.sanitize(s,{WHOLE_DOCUMENT:!0,ADD_TAGS:["style","link"],FORBID_TAGS:["script","object","embed","form"]}),h=l.document;h.open(),h.write(c),h.close()},[r]),y.jsx("div",{id:"html-renderer",className:"rdv-html-container",children:y.jsx("iframe",{id:"html-body",className:"rdv-html-iframe",sandbox:"allow-same-origin"})}));Dh.fileTypes=["htm","html","text/htm","text/html"];Dh.weight=0;Dh.fileLoader=fb;Dh.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"HTMLRenderer"};const bf=r=>y.jsx($n,{...r});bf.fileTypes=["jpg","jpeg","image/jpg","image/jpeg"];bf.weight=0;bf.__docgenInfo={description:"",methods:[],displayName:"JPGRenderer"};const Sx={doc:"Word Document (.doc)",docx:"Word Document (.docx)",odt:"OpenDocument Text (.odt)",xls:"Excel Spreadsheet (.xls)",xlsx:"Excel Spreadsheet (.xlsx)",ppt:"PowerPoint Presentation (.ppt)",pptx:"PowerPoint Presentation (.pptx)"},kh=({mainState:{currentDocument:r}})=>{if(!r)return null;const e=r.fileName||r.uri.split("/").pop()||"document",t=r.fileType||"",n=Sx[t]||`Office Document (.${t||"unknown"})`;return y.jsx("div",{id:"msdoc-renderer",className:"rdv-msdoc-container",children:y.jsxs("div",{className:"rdv-msdoc-content",children:[y.jsx("div",{className:"rdv-msdoc-file-icon",children:y.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),y.jsx("polyline",{points:"14 2 14 8 20 8"}),y.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),y.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),y.jsx("polyline",{points:"10 9 9 9 8 9"})]})}),y.jsx("div",{className:"rdv-msdoc-file-name",children:e}),y.jsx("div",{className:"rdv-msdoc-file-type",children:n}),y.jsx("a",{className:"rdv-msdoc-download-link",href:r.uri,download:e,children:"Download File"})]})})},vi={odt:["odt","application/vnd.oasis.opendocument.text"],doc:["doc","application/msword"],docx:["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/octet-stream"],xls:["xls","application/vnd.ms-excel"],xlsx:["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],ppt:["ppt","application/vnd.ms-powerpoint"],pptx:["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"]};kh.fileTypes=[...vi.odt,...vi.doc,...vi.docx,...vi.xls,...vi.xlsx,...vi.ppt,...vi.pptx];kh.weight=0;kh.fileLoader=({fileLoaderComplete:r})=>r();kh.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"{ fileLoaderComplete }",optional:!1,type:null}],returns:null}],displayName:"MSDocRenderer"};var il={};il.d=(r,e)=>{for(var t in e)il.o(e,t)&&!il.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})};il.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e);var se=globalThis.pdfjsLib={};il.d(se,{AbortException:()=>Br,AnnotationEditorLayer:()=>xg,AnnotationEditorParamsType:()=>ie,AnnotationEditorType:()=>be,AnnotationEditorUIManager:()=>Mr,AnnotationLayer:()=>x1,AnnotationMode:()=>js,CMapCompressionType:()=>pp,ColorPicker:()=>By,DOMSVGFactory:()=>Ug,DrawLayer:()=>Pg,FeatureTest:()=>jt,GlobalWorkerOptions:()=>Is,ImageKind:()=>Qh,InvalidPDFException:()=>_b,MissingPDFException:()=>jr,OPS:()=>hn,Outliner:()=>rg,PDFDataRangeTransport:()=>fy,PDFDateString:()=>Pb,PDFWorker:()=>Jr,PasswordResponses:()=>Lx,PermissionFlag:()=>Rx,PixelsPerInch:()=>ui,RenderingCancelledException:()=>zg,TextLayer:()=>Pd,UnexpectedResponseException:()=>Ef,Util:()=>Y,VerbosityLevel:()=>yf,XfaLayer:()=>gy,build:()=>i1,createValidAbsoluteUrl:()=>Mx,fetchData:()=>Pf,getDocument:()=>YT,getFilenameFromUrl:()=>Gx,getPdfFilenameFromUrl:()=>Vx,getXfaPageViewport:()=>qx,isDataScheme:()=>Wg,isPdfFile:()=>Gg,noContextMenu:()=>Bt,normalizeUnicode:()=>Hx,renderTextLayer:()=>HT,setLayerDimensions:()=>Ir,shadow:()=>Ae,updateTextLayer:()=>UT,version:()=>s1});const _t=typeof Wr=="object"&&Wr+""=="[object process]"&&!Wr.versions.nw&&!(Wr.versions.electron&&Wr.type&&Wr.type!=="browser"),Ab=[1,0,0,1,0,0],fp=[.001,0,0,.001,0,0],Cx=1e7,Qf=1.35,an={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},js={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Px="pdfjs_internal_editor_",be={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ie={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},Rx={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},vt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Qh={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},$e={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Ro={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},yf={ERRORS:0,WARNINGS:1,INFOS:5},pp={NONE:0,BINARY:1},hn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},Lx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Af=yf.WARNINGS;function Dx(r){Number.isInteger(r)&&(Af=r)}function kx(){return Af}function _f(r){Af>=yf.INFOS&&console.log(`Info: ${r}`)}function de(r){Af>=yf.WARNINGS&&console.log(`Warning: ${r}`)}function Re(r){throw new Error(r)}function Je(r,e){r||Re(e)}function Ix(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Mx(r,e=null,t=null){if(!r)return null;try{if(t&&typeof r=="string"){if(t.addDefaultProtocol&&r.startsWith("www.")){const s=r.match(/\./g);(s==null?void 0:s.length)>=2&&(r=`http://${r}`)}if(t.tryConvertEncoding)try{r=Bx(r)}catch{}}const n=e?new URL(r,e):new URL(r);if(Ix(n))return n}catch{}return null}function Ae(r,e,t,n=!1){return Object.defineProperty(r,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const pi=function(){function e(t,n){this.constructor===e&&Re("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class gp extends pi{constructor(e,t){super(e,"PasswordException"),this.code=t}}class mp extends pi{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class _b extends pi{constructor(e){super(e,"InvalidPDFException")}}class jr extends pi{constructor(e){super(e,"MissingPDFException")}}class Ef extends pi{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class Nx extends pi{constructor(e){super(e,"FormatError")}}class Br extends pi{constructor(e){super(e,"AbortException")}}function Eb(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&Re("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const n=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=r.subarray(s,i);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function wf(r){typeof r!="string"&&Re("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=r.charCodeAt(n)&255;return t}function Fx(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function Bg(r){const e=Object.create(null);for(const[t,n]of r)e[t]=n;return e}function Ox(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function jx(){try{return new Function(""),!0}catch{return!1}}class jt{static get isLittleEndian(){return Ae(this,"isLittleEndian",Ox())}static get isEvalSupported(){return Ae(this,"isEvalSupported",jx())}static get isOffscreenCanvasSupported(){return Ae(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ae(this,"platform",{isMac:navigator.platform.includes("Mac")}):Ae(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){var e,t;return Ae(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ep=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var ta,ed,cl,vp;class Y{static makeHexColor(e,t,n){return`#${ep[e]}${ep[t]}${ep[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[n,s]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[s,i]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],s[0],i[0],a[0]),Math.min(n[1],s[1],i[1],a[1]),Math.max(n[0],s[0],i[0],a[0]),Math.max(n[1],s[1],i[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],l=(n+a)/2,c=Math.sqrt((n+a)**2-4*(n*a-i*s))/2,h=l+c||1,d=l-c||1;return[Math.sqrt(h),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[n,i,s,a]}static bezierBoundingBox(e,t,n,s,i,a,l,c,h){return h?(h[0]=Math.min(h[0],e,l),h[1]=Math.min(h[1],t,c),h[2]=Math.max(h[2],e,l),h[3]=Math.max(h[3],t,c)):h=[Math.min(e,l),Math.min(t,c),Math.max(e,l),Math.max(t,c)],b(this,cl,vp).call(this,e,n,i,l,t,s,a,c,3*(-e+3*(n-i)+l),6*(e-2*n+i),3*(n-e),h),b(this,cl,vp).call(this,e,n,i,l,t,s,a,c,3*(-t+3*(s-a)+c),6*(t-2*s+a),3*(s-t),h),h}}ta=new WeakSet,ed=function(e,t,n,s,i,a,l,c,h,d){if(h<=0||h>=1)return;const u=1-h,f=h*h,g=f*h,m=u*(u*(u*e+3*h*t)+3*f*n)+g*s,A=u*(u*(u*i+3*h*a)+3*f*l)+g*c;d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],A),d[2]=Math.max(d[2],m),d[3]=Math.max(d[3],A)},cl=new WeakSet,vp=function(e,t,n,s,i,a,l,c,h,d,u,f){if(Math.abs(h)<1e-12){Math.abs(d)>=1e-12&&b(this,ta,ed).call(this,e,t,n,s,i,a,l,c,-u/d,f);return}const g=d**2-4*u*h;if(g<0)return;const m=Math.sqrt(g),A=2*h;b(this,ta,ed).call(this,e,t,n,s,i,a,l,c,(-d+m)/A,f),b(this,ta,ed).call(this,e,t,n,s,i,a,l,c,(-d-m)/A,f)},p(Y,ta),p(Y,cl);function Bx(r){return decodeURIComponent(escape(r))}let tp=null,Dm=null;function Hx(r){return tp||(tp=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Dm=new Map([["ﬅ","ſt"]])),r.replaceAll(tp,(e,t,n)=>t?t.normalize("NFKC"):Dm.get(n))}function Ux(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const r=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(r);else for(let e=0;e<32;e++)r[e]=Math.floor(Math.random()*255);return Eb(r)}const wb="pdfjs_internal_id_",Qn={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};class xf{constructor(){this.constructor===xf&&Re("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,i){return"none"}destroy(e=!1){}}class Tf{constructor(){this.constructor===Tf&&Re("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Re("Abstract method `_createCanvas` called.")}}class Sf{constructor({baseUrl:e=null,isCompressed:t=!0}){this.constructor===Sf&&Re("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),n=this.isCompressed?pp.BINARY:pp.NONE;return this._fetchData(t,n).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}_fetchData(e,t){Re("Abstract method `_fetchData` called.")}}class Cf{constructor({baseUrl:e=null}){this.constructor===Cf&&Re("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}_fetchData(e){Re("Abstract method `_fetchData` called.")}}class Hg{constructor(){this.constructor===Hg&&Re("Cannot initialize BaseSVGFactory.")}create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Re("Abstract method `_createSVG` called.")}}const ts="http://www.w3.org/2000/svg",wi=class wi{};re(wi,"CSS",96),re(wi,"PDF",72),re(wi,"PDF_TO_CSS_UNITS",wi.CSS/wi.PDF);let ui=wi;var Si,Pn,rs,It,Md,Ci,nt,bt,Hs,Gr,Us,Vr,na,td,Nd,xb,hl,bp,zs,qr,Pi,ko,Ri,Io,dl,yp,Li,Mo;class zx extends xf{constructor({docId:t,ownerDocument:n=globalThis.document}={}){super();p(this,nt);p(this,Hs);p(this,Us);p(this,na);p(this,Nd);p(this,hl);p(this,zs);p(this,Pi);p(this,Ri);p(this,dl);p(this,Li);p(this,Si,void 0);p(this,Pn,void 0);p(this,rs,void 0);p(this,It,void 0);p(this,Md,void 0);p(this,Ci,0);v(this,rs,t),v(this,It,n)}addFilter(t){if(!t)return"none";let n=o(this,nt,bt).get(t);if(n)return n;const[s,i,a]=b(this,na,td).call(this,t),l=t.length===1?s:`${s}${i}${a}`;if(n=o(this,nt,bt).get(l),n)return o(this,nt,bt).set(t,n),n;const c=`g_${o(this,rs)}_transfer_map_${zt(this,Ci)._++}`,h=`url(#${c})`;o(this,nt,bt).set(t,h),o(this,nt,bt).set(l,h);const d=b(this,zs,qr).call(this,c);return b(this,Ri,Io).call(this,s,i,a,d),h}addHCMFilter(t,n){var m;const s=`${t}-${n}`,i="base";let a=o(this,Hs,Gr).get(i);if((a==null?void 0:a.key)===s||(a?((m=a.filter)==null||m.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},o(this,Hs,Gr).set(i,a)),!t||!n))return a.url;const l=b(this,Li,Mo).call(this,t);t=Y.makeHexColor(...l);const c=b(this,Li,Mo).call(this,n);if(n=Y.makeHexColor(...c),o(this,Us,Vr).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const h=new Array(256);for(let A=0;A<=255;A++){const E=A/255;h[A]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const d=h.join(","),u=`g_${o(this,rs)}_hcm_filter`,f=a.filter=b(this,zs,qr).call(this,u);b(this,Ri,Io).call(this,d,d,d,f),b(this,hl,bp).call(this,f);const g=(A,E)=>{const _=l[A]/255,T=c[A]/255,C=new Array(E+1);for(let L=0;L<=E;L++)C[L]=_+L/E*(T-_);return C.join(",")};return b(this,Ri,Io).call(this,g(0,5),g(1,5),g(2,5),f),a.url=`url(#${u})`,a.url}addAlphaFilter(t){let n=o(this,nt,bt).get(t);if(n)return n;const[s]=b(this,na,td).call(this,[t]),i=`alpha_${s}`;if(n=o(this,nt,bt).get(i),n)return o(this,nt,bt).set(t,n),n;const a=`g_${o(this,rs)}_alpha_map_${zt(this,Ci)._++}`,l=`url(#${a})`;o(this,nt,bt).set(t,l),o(this,nt,bt).set(i,l);const c=b(this,zs,qr).call(this,a);return b(this,dl,yp).call(this,s,c),l}addLuminosityFilter(t){let n=o(this,nt,bt).get(t||"luminosity");if(n)return n;let s,i;if(t?([s]=b(this,na,td).call(this,[t]),i=`luminosity_${s}`):i="luminosity",n=o(this,nt,bt).get(i),n)return o(this,nt,bt).set(t,n),n;const a=`g_${o(this,rs)}_luminosity_map_${zt(this,Ci)._++}`,l=`url(#${a})`;o(this,nt,bt).set(t,l),o(this,nt,bt).set(i,l);const c=b(this,zs,qr).call(this,a);return b(this,Nd,xb).call(this,c),t&&b(this,dl,yp).call(this,s,c),l}addHighlightHCMFilter(t,n,s,i,a){var T;const l=`${n}-${s}-${i}-${a}`;let c=o(this,Hs,Gr).get(t);if((c==null?void 0:c.key)===l||(c?((T=c.filter)==null||T.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},o(this,Hs,Gr).set(t,c)),!n||!s))return c.url;const[h,d]=[n,s].map(b(this,Li,Mo).bind(this));let u=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[g,m]=[i,a].map(b(this,Li,Mo).bind(this));f<u&&([u,f,g,m]=[f,u,m,g]),o(this,Us,Vr).style.color="";const A=(C,L,D)=>{const I=new Array(256),N=(f-u)/D,w=C/255,x=(L-C)/(255*D);let k=0;for(let R=0;R<=D;R++){const F=Math.round(u+R*N),O=w+R*x;for(let j=k;j<=F;j++)I[j]=O;k=F+1}for(let R=k;R<256;R++)I[R]=I[k-1];return I.join(",")},E=`g_${o(this,rs)}_hcm_${t}_filter`,_=c.filter=b(this,zs,qr).call(this,E);return b(this,hl,bp).call(this,_),b(this,Ri,Io).call(this,A(g[0],m[0],5),A(g[1],m[1],5),A(g[2],m[2],5),_),c.url=`url(#${E})`,c.url}destroy(t=!1){t&&o(this,Hs,Gr).size!==0||(o(this,Pn)&&(o(this,Pn).parentNode.parentNode.remove(),v(this,Pn,null)),o(this,Si)&&(o(this,Si).clear(),v(this,Si,null)),v(this,Ci,0))}}Si=new WeakMap,Pn=new WeakMap,rs=new WeakMap,It=new WeakMap,Md=new WeakMap,Ci=new WeakMap,nt=new WeakSet,bt=function(){return o(this,Si)||v(this,Si,new Map)},Hs=new WeakSet,Gr=function(){return o(this,Md)||v(this,Md,new Map)},Us=new WeakSet,Vr=function(){if(!o(this,Pn)){const t=o(this,It).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=o(this,It).createElementNS(ts,"svg");s.setAttribute("width",0),s.setAttribute("height",0),v(this,Pn,o(this,It).createElementNS(ts,"defs")),t.append(s),s.append(o(this,Pn)),o(this,It).body.append(t)}return o(this,Pn)},na=new WeakSet,td=function(t){if(t.length===1){const h=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=h[f]/255;const u=d.join(",");return[u,u,u]}const[n,s,i]=t,a=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)a[h]=n[h]/255,l[h]=s[h]/255,c[h]=i[h]/255;return[a.join(","),l.join(","),c.join(",")]},Nd=new WeakSet,xb=function(t){const n=o(this,It).createElementNS(ts,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},hl=new WeakSet,bp=function(t){const n=o(this,It).createElementNS(ts,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},zs=new WeakSet,qr=function(t){const n=o(this,It).createElementNS(ts,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),o(this,Us,Vr).append(n),n},Pi=new WeakSet,ko=function(t,n,s){const i=o(this,It).createElementNS(ts,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},Ri=new WeakSet,Io=function(t,n,s,i){const a=o(this,It).createElementNS(ts,"feComponentTransfer");i.append(a),b(this,Pi,ko).call(this,a,"feFuncR",t),b(this,Pi,ko).call(this,a,"feFuncG",n),b(this,Pi,ko).call(this,a,"feFuncB",s)},dl=new WeakSet,yp=function(t,n){const s=o(this,It).createElementNS(ts,"feComponentTransfer");n.append(s),b(this,Pi,ko).call(this,s,"feFuncA",t)},Li=new WeakSet,Mo=function(t){return o(this,Us,Vr).style.color=t,Vg(getComputedStyle(o(this,Us,Vr)).getPropertyValue("color"))};class Wx extends Tf{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}async function Pf(r,e="text"){if(No(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Tb extends Sf{_fetchData(e,t){return Pf(e,this.isCompressed?"arraybuffer":"text").then(n=>({cMapData:n instanceof ArrayBuffer?new Uint8Array(n):wf(n),compressionType:t}))}}class Sb extends Cf{_fetchData(e){return Pf(e,"arraybuffer").then(t=>new Uint8Array(t))}}class Ug extends Hg{_createSVG(e){return document.createElementNS(ts,e)}}class Ih{constructor({viewBox:e,scale:t,rotation:n,offsetX:s=0,offsetY:i=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=n,this.offsetX=s,this.offsetY=i;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let h,d,u,f;switch(n%=360,n<0&&(n+=360),n){case 180:h=-1,d=0,u=0,f=1;break;case 90:h=0,d=1,u=1,f=0;break;case 270:h=0,d=-1,u=-1,f=0;break;case 0:h=1,d=0,u=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(u=-u,f=-f);let g,m,A,E;h===0?(g=Math.abs(c-e[1])*t+s,m=Math.abs(l-e[0])*t+i,A=(e[3]-e[1])*t,E=(e[2]-e[0])*t):(g=Math.abs(l-e[0])*t+s,m=Math.abs(c-e[1])*t+i,A=(e[2]-e[0])*t,E=(e[3]-e[1])*t),this.transform=[h*t,d*t,u*t,f*t,g-h*t*l-u*t*c,m-d*t*l-f*t*c],this.width=A,this.height=E}get rawDims(){const{viewBox:e}=this;return Ae(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new Ih({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){return Y.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=Y.applyTransform([e[0],e[1]],this.transform),n=Y.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return Y.applyInverseTransform([e,t],this.transform)}}class zg extends pi{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Wg(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function Gg(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function Gx(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function Vx(r,e="document.pdf"){if(typeof r!="string")return e;if(Wg(r))return de('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(r);let i=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(i&&(i=i[0],i.includes("%")))try{i=n.exec(decodeURIComponent(i))[0]}catch{}return i||e}class km{constructor(){re(this,"started",Object.create(null));re(this,"times",[])}time(e){e in this.started&&de(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||de(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-s}ms
`);return e.join("")}}function No(r,e){try{const{protocol:t}=e?new URL(r,e):new URL(r);return t==="http:"||t==="https:"}catch{return!1}}function Bt(r){r.preventDefault()}function Cb(r){console.log("Deprecated API usage: "+r)}let Im;class Pb{static toDateObject(e){if(!e||typeof e!="string")return null;Im||(Im=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=Im.exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const h=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let u=parseInt(t[9],10)||0;return u=u>=0&&u<=59?u:0,h==="-"?(a+=d,l+=u):h==="+"&&(a-=d,l-=u),new Date(Date.UTC(n,s,i,a,l,c))}}function qx(r,{scale:e=1,rotation:t=0}){const{width:n,height:s}=r.attributes.style,i=[0,0,parseInt(n),parseInt(s)];return new Ih({viewBox:i,scale:e,rotation:t})}function Vg(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(de(`Not a valid color format: "${r}"`),[0,0,0])}function $x(r){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of r.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;r.set(t,Vg(n))}e.remove()}function Oe(r){const{a:e,b:t,c:n,d:s,e:i,f:a}=r.getTransform();return[e,t,n,s,i,a]}function es(r){const{a:e,b:t,c:n,d:s,e:i,f:a}=r.getTransform().invertSelf();return[e,t,n,s,i,a]}function Ir(r,e,t=!1,n=!0){if(e instanceof Ih){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=r,l=jt.isCSSRoundSupported,c=`var(--scale-factor) * ${s}px`,h=`var(--scale-factor) * ${i}px`,d=l?`round(${c}, 1px)`:`calc(${c})`,u=l?`round(${h}, 1px)`:`calc(${h})`;!t||e.rotation%180===0?(a.width=d,a.height=u):(a.width=u,a.height=d)}n&&r.setAttribute("data-main-rotation",e.rotation)}var Di,ki,Rn,Ii,Fd,Rb,Od,Lb,jd,Db,sa,nd,Bd,kb,ul,_p;const Hd=class Hd{constructor(e){p(this,Od);p(this,jd);p(this,sa);p(this,Bd);p(this,ul);p(this,Di,null);p(this,ki,null);p(this,Rn,void 0);p(this,Ii,null);v(this,Rn,e)}render(){const e=v(this,Di,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Bt),e.addEventListener("pointerdown",b(Hd,Fd,Rb));const t=v(this,Ii,document.createElement("div"));t.className="buttons",e.append(t);const n=o(this,Rn).toolbarPosition;if(n){const{style:s}=e,i=o(this,Rn)._uiManager.direction==="ltr"?1-n[0]:n[0];s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return b(this,Bd,kb).call(this),e}hide(){var e;o(this,Di).classList.add("hidden"),(e=o(this,ki))==null||e.hideDropdown()}show(){o(this,Di).classList.remove("hidden")}addAltTextButton(e){b(this,sa,nd).call(this,e),o(this,Ii).prepend(e,o(this,ul,_p))}addColorPicker(e){v(this,ki,e);const t=e.renderButton();b(this,sa,nd).call(this,t),o(this,Ii).prepend(t,o(this,ul,_p))}remove(){var e;o(this,Di).remove(),(e=o(this,ki))==null||e.destroy(),v(this,ki,null)}};Di=new WeakMap,ki=new WeakMap,Rn=new WeakMap,Ii=new WeakMap,Fd=new WeakSet,Rb=function(e){e.stopPropagation()},Od=new WeakSet,Lb=function(e){o(this,Rn)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},jd=new WeakSet,Db=function(e){o(this,Rn)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},sa=new WeakSet,nd=function(e){e.addEventListener("focusin",b(this,Od,Lb).bind(this),{capture:!0}),e.addEventListener("focusout",b(this,jd,Db).bind(this),{capture:!0}),e.addEventListener("contextmenu",Bt)},Bd=new WeakSet,kb=function(){const e=document.createElement("button");e.className="delete",e.tabIndex=0,e.setAttribute("data-l10n-id",`pdfjs-editor-remove-${o(this,Rn).editorType}-button`),b(this,sa,nd).call(this,e),e.addEventListener("click",t=>{o(this,Rn)._uiManager.delete()}),o(this,Ii).append(e)},ul=new WeakSet,_p=function(){const e=document.createElement("div");return e.className="divider",e},p(Hd,Fd);let Ap=Hd;var fl,Mi,pl,Ud,Ib,zd,Mb,Wd,Nb;class Xx{constructor(e){p(this,Ud);p(this,zd);p(this,Wd);p(this,fl,null);p(this,Mi,null);p(this,pl,void 0);v(this,pl,e)}show(e,t,n){const[s,i]=b(this,zd,Mb).call(this,t,n),{style:a}=o(this,Mi)||v(this,Mi,b(this,Ud,Ib).call(this));e.append(o(this,Mi)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){o(this,Mi).remove()}}fl=new WeakMap,Mi=new WeakMap,pl=new WeakMap,Ud=new WeakSet,Ib=function(){const e=v(this,Mi,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",Bt);const t=v(this,fl,document.createElement("div"));return t.className="buttons",e.append(t),b(this,Wd,Nb).call(this),e},zd=new WeakSet,Mb=function(e,t){let n=0,s=0;for(const i of e){const a=i.y+i.height;if(a<n)continue;const l=i.x+(t?i.width:0);if(a>n){s=l,n=a;continue}t?l>s&&(s=l):l<s&&(s=l)}return[t?1-s:s,n]},Wd=new WeakSet,Nb=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label"),e.addEventListener("contextmenu",Bt),e.addEventListener("click",()=>{o(this,pl).highlightSelection("floating_button")}),o(this,fl).append(e)};function Td(r,e,t){for(const n of t)e.addEventListener(n,r[n].bind(r))}function Yx(r){return Math.round(Math.min(255,Math.max(1,255*r))).toString(16).padStart(2,"0")}var Gd;class Kx{constructor(){p(this,Gd,0)}get id(){return`${Px}${zt(this,Gd)._++}`}}Gd=new WeakMap;var gl,Vd,tn,ml,wp;const sm=class sm{constructor(){p(this,ml);p(this,gl,Ux());p(this,Vd,0);p(this,tn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d"),s=new Image;s.src=e;const i=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ae(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:i}=e;return b(this,ml,wp).call(this,`${t}_${n}_${s}_${i}`,e)}async getFromUrl(e){return b(this,ml,wp).call(this,e,e)}async getFromId(e){o(this,tn)||v(this,tn,new Map);const t=o(this,tn).get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=o(this,tn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){o(this,tn)||v(this,tn,new Map);const t=o(this,tn).get(e);t&&(t.refCounter-=1,t.refCounter===0&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${o(this,gl)}_`)}};gl=new WeakMap,Vd=new WeakMap,tn=new WeakMap,ml=new WeakSet,wp=async function(e,t){o(this,tn)||v(this,tn,new Map);let n=o(this,tn).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${o(this,gl)}_${zt(this,Vd)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(n.url=t,s=await Pf(t,"blob")):s=n.file=t,s.type==="image/svg+xml"){const i=sm._isSVGFittingCanvas,a=new FileReader,l=new Image,c=new Promise((h,d)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,h()},a.onload=async()=>{const u=n.svgUrl=a.result;l.src=await i?`${u}#svgView(preserveAspectRatio(none))`:u},l.onerror=a.onerror=d});a.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){console.error(s),n=null}return o(this,tn).set(e,n),n&&o(this,tn).set(n.id,n),n};let Ep=sm;var st,Ws,vl,it;class Zx{constructor(e=128){p(this,st,[]);p(this,Ws,!1);p(this,vl,void 0);p(this,it,-1);v(this,vl,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:l=!1}){if(s&&e(),o(this,Ws))return;const c={cmd:e,undo:t,post:n,type:i};if(o(this,it)===-1){o(this,st).length>0&&(o(this,st).length=0),v(this,it,0),o(this,st).push(c);return}if(a&&o(this,st)[o(this,it)].type===i){l&&(c.undo=o(this,st)[o(this,it)].undo),o(this,st)[o(this,it)]=c;return}const h=o(this,it)+1;h===o(this,vl)?o(this,st).splice(0,1):(v(this,it,h),h<o(this,st).length&&o(this,st).splice(h)),o(this,st).push(c)}undo(){if(o(this,it)===-1)return;v(this,Ws,!0);const{undo:e,post:t}=o(this,st)[o(this,it)];e(),t==null||t(),v(this,Ws,!1),v(this,it,o(this,it)-1)}redo(){if(o(this,it)<o(this,st).length-1){v(this,it,o(this,it)+1),v(this,Ws,!0);const{cmd:e,post:t}=o(this,st)[o(this,it)];e(),t==null||t(),v(this,Ws,!1)}}hasSomethingToUndo(){return o(this,it)!==-1}hasSomethingToRedo(){return o(this,it)<o(this,st).length-1}destroy(){v(this,st,null)}}st=new WeakMap,Ws=new WeakMap,vl=new WeakMap,it=new WeakMap;var qd,Fb;class Mh{constructor(e){p(this,qd);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=jt.platform;for(const[n,s,i={}]of e)for(const a of n){const l=a.startsWith("mac+");t&&l?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!l&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(b(this,qd,Fb).call(this,t));if(!n)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:l=null}}=n;l&&!l(e,t)||(s.bind(e,...a,t)(),i||(t.stopPropagation(),t.preventDefault()))}}qd=new WeakSet,Fb=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const $d=class $d{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return $x(e),Ae(this,"_colors",e)}convert(e){const t=Vg(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((i,a)=>i===t[a]))return $d._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Y.makeHexColor(...t):e}};re($d,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let xp=$d;var Vt,Xe,lt,ia,as,ra,dn,aa,Ni,Ln,os,Fi,bl,yl,Dn,oa,Gs,kn,Xd,Vs,Al,Oi,_l,la,ct,Te,ls,ji,El,wl,xl,Tl,Sl,Cl,Pl,Rl,Ll,Dl,kl,Il,Ml,Nl,qs,In,cs,Fl,ca,sd,Yd,Ob,Kd,jb,ha,id,Zd,Bb,Jd,Hb,Qd,Ub,Ol,Tp,jl,Sp,Bl,Cp,Hl,Pp,Ul,Rp,ht,wt,Mn,Ns,eu,zb,tu,Wb,zl,Lp,nu,Gb,Bi,Fo,Wl,Dp;const Kr=class Kr{constructor(e,t,n,s,i,a,l,c,h){p(this,ca);p(this,Yd);p(this,Kd);p(this,ha);p(this,Zd);p(this,Jd);p(this,Qd);p(this,Ol);p(this,jl);p(this,Bl);p(this,Hl);p(this,Ul);p(this,ht);p(this,Mn);p(this,eu);p(this,tu);p(this,zl);p(this,nu);p(this,Bi);p(this,Wl);p(this,Vt,null);p(this,Xe,new Map);p(this,lt,new Map);p(this,ia,null);p(this,as,null);p(this,ra,null);p(this,dn,new Zx);p(this,aa,0);p(this,Ni,new Set);p(this,Ln,null);p(this,os,null);p(this,Fi,new Set);p(this,bl,!1);p(this,yl,null);p(this,Dn,null);p(this,oa,null);p(this,Gs,!1);p(this,kn,null);p(this,Xd,new Kx);p(this,Vs,!1);p(this,Al,!1);p(this,Oi,null);p(this,_l,null);p(this,la,null);p(this,ct,be.NONE);p(this,Te,new Set);p(this,ls,null);p(this,ji,null);p(this,El,null);p(this,wl,this.blur.bind(this));p(this,xl,this.focus.bind(this));p(this,Tl,this.copy.bind(this));p(this,Sl,this.cut.bind(this));p(this,Cl,this.paste.bind(this));p(this,Pl,this.keydown.bind(this));p(this,Rl,this.keyup.bind(this));p(this,Ll,this.onEditingAction.bind(this));p(this,Dl,this.onPageChanging.bind(this));p(this,kl,this.onScaleChanging.bind(this));p(this,Il,b(this,Kd,jb).bind(this));p(this,Ml,this.onRotationChanging.bind(this));p(this,Nl,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});p(this,qs,[0,0]);p(this,In,null);p(this,cs,null);p(this,Fl,null);v(this,cs,e),v(this,Fl,t),v(this,ia,n),this._eventBus=s,this._eventBus._on("editingaction",o(this,Ll)),this._eventBus._on("pagechanging",o(this,Dl)),this._eventBus._on("scalechanging",o(this,kl)),this._eventBus._on("rotationchanging",o(this,Ml)),b(this,Zd,Bb).call(this),b(this,jl,Sp).call(this),v(this,as,i.annotationStorage),v(this,yl,i.filterFactory),v(this,ji,a),v(this,oa,l||null),v(this,bl,c),v(this,la,h||null),this.viewParameters={realScale:ui.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=Kr.prototype,t=a=>o(a,cs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Ae(this,"_keyboardManager",new Mh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,cs).contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&o(a,cs).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t;b(this,Bl,Cp).call(this),b(this,Ol,Tp).call(this),this._eventBus._off("editingaction",o(this,Ll)),this._eventBus._off("pagechanging",o(this,Dl)),this._eventBus._off("scalechanging",o(this,kl)),this._eventBus._off("rotationchanging",o(this,Ml));for(const n of o(this,lt).values())n.destroy();o(this,lt).clear(),o(this,Xe).clear(),o(this,Fi).clear(),v(this,Vt,null),o(this,Te).clear(),o(this,dn).destroy(),(e=o(this,ia))==null||e.destroy(),(t=o(this,kn))==null||t.hide(),v(this,kn,null),o(this,Dn)&&(clearTimeout(o(this,Dn)),v(this,Dn,null)),o(this,In)&&(clearTimeout(o(this,In)),v(this,In,null)),b(this,Jd,Hb).call(this)}async mlGuess(e){var t;return((t=o(this,la))==null?void 0:t.guess(e))||null}get hasMLManager(){return!!o(this,la)}get hcmFilter(){return Ae(this,"hcmFilter",o(this,ji)?o(this,yl).addHCMFilter(o(this,ji).foreground,o(this,ji).background):"none")}get direction(){return Ae(this,"direction",getComputedStyle(o(this,cs)).direction)}get highlightColors(){return Ae(this,"highlightColors",o(this,oa)?new Map(o(this,oa).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Ae(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){v(this,_l,e)}editAltText(e){var t;(t=o(this,ia))==null||t.editAltText(this,e)}onPageChanging({pageNumber:e}){v(this,aa,e-1)}focusMainContainer(){o(this,cs).focus()}findParent(e,t){for(const n of o(this,lt).values()){const{x:s,y:i,width:a,height:l}=n.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+l)return n}return null}disableUserSelect(e=!1){o(this,Fl).classList.toggle("noUserSelect",e)}addShouldRescale(e){o(this,Fi).add(e)}removeShouldRescale(e){o(this,Fi).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ui.PDF_TO_CSS_UNITS;for(const t of o(this,Fi))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:a}=t,l=t.toString(),h=b(this,ca,sd).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(h);if(d){t.empty(),o(this,ct)===be.NONE&&(this._eventBus.dispatch("showannotationeditorui",{source:this,mode:be.HIGHLIGHT}),this.showAllEditors("highlight",!0,!0));for(const u of o(this,lt).values())if(u.hasTextLayer(h)){u.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:n,anchorOffset:s,focusNode:i,focusOffset:a,text:l});break}}}addToAnnotationStorage(e){!e.isEmpty()&&o(this,as)&&!o(this,as).has(e.id)&&o(this,as).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,o(this,Gs)&&(v(this,Gs,!1),b(this,ha,id).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of o(this,Te))if(t.div.contains(e)){v(this,Oi,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!o(this,Oi))return;const[e,t]=o(this,Oi);v(this,Oi,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus()}addEditListeners(){b(this,jl,Sp).call(this),b(this,Hl,Pp).call(this)}removeEditListeners(){b(this,Bl,Cp).call(this),b(this,Ul,Rp).call(this)}copy(e){var n;if(e.preventDefault(),(n=o(this,Vt))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of o(this,Te)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of o(this,os))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){de(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const c of n){const h=s.deserialize(c);if(!h)return;i.push(h)}const a=()=>{for(const c of i)b(this,zl,Lp).call(this,c);b(this,Wl,Dp).call(this,i)},l=()=>{for(const c of i)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(i){de(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),o(this,ct)!==be.NONE&&!this.isEditorHandlingKeyboard&&Kr._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,o(this,Gs)&&(v(this,Gs,!1),b(this,ha,id).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(b(this,Qd,Ub).call(this),b(this,Hl,Pp).call(this),b(this,ht,wt).call(this,{isEditing:o(this,ct)!==be.NONE,isEmpty:b(this,Bi,Fo).call(this),hasSomethingToUndo:o(this,dn).hasSomethingToUndo(),hasSomethingToRedo:o(this,dn).hasSomethingToRedo(),hasSelectedEditor:!1})):(b(this,Ol,Tp).call(this),b(this,Ul,Rp).call(this),b(this,ht,wt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!o(this,os)){v(this,os,e);for(const t of o(this,os))b(this,Mn,Ns).call(this,t.defaultPropertiesToUpdate)}}getId(){return o(this,Xd).id}get currentLayer(){return o(this,lt).get(o(this,aa))}getLayer(e){return o(this,lt).get(e)}get currentPageIndex(){return o(this,aa)}addLayer(e){o(this,lt).set(e.pageIndex,e),o(this,Vs)?e.enable():e.disable()}removeLayer(e){o(this,lt).delete(e.pageIndex)}updateMode(e,t=null,n=!1){if(o(this,ct)!==e){if(v(this,ct,e),e===be.NONE){this.setEditingState(!1),b(this,tu,Wb).call(this);return}this.setEditingState(!0),b(this,eu,zb).call(this),this.unselectAll();for(const s of o(this,lt).values())s.updateMode(e);if(!t&&n){this.addNewEditorFromKeyboard();return}if(t){for(const s of o(this,Xe).values())if(s.annotationElementId===t){this.setSelected(s),s.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==o(this,ct)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(o(this,os)){switch(e){case ie.CREATE:this.currentLayer.addNewEditor();return;case ie.HIGHLIGHT_DEFAULT_COLOR:(n=o(this,_l))==null||n.updateColor(t);break;case ie.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(o(this,El)||v(this,El,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const s of o(this,Te))s.updateParams(e,t);for(const s of o(this,os))s.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var i;for(const a of o(this,Xe).values())a.editorType===e&&a.show(t);(((i=o(this,El))==null?void 0:i.get(ie.HIGHLIGHT_SHOW_ALL))??!0)!==t&&b(this,Mn,Ns).call(this,[[ie.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(o(this,Al)!==e){v(this,Al,e);for(const t of o(this,lt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of o(this,Xe).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return o(this,Xe).get(e)}addEditor(e){o(this,Xe).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(o(this,Dn)&&clearTimeout(o(this,Dn)),v(this,Dn,setTimeout(()=>{this.focusMainContainer(),v(this,Dn,null)},0))),o(this,Xe).delete(e.id),this.unselect(e),(!e.annotationElementId||!o(this,Ni).has(e.annotationElementId))&&((t=o(this,as))==null||t.remove(e.id))}addDeletedAnnotationElement(e){o(this,Ni).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return o(this,Ni).has(e)}removeDeletedAnnotationElement(e){o(this,Ni).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){o(this,Vt)!==e&&(v(this,Vt,e),e&&b(this,Mn,Ns).call(this,e.propertiesToUpdate))}updateUI(e){o(this,nu,Gb)===e&&b(this,Mn,Ns).call(this,e.propertiesToUpdate)}toggleSelected(e){if(o(this,Te).has(e)){o(this,Te).delete(e),e.unselect(),b(this,ht,wt).call(this,{hasSelectedEditor:this.hasSelection});return}o(this,Te).add(e),e.select(),b(this,Mn,Ns).call(this,e.propertiesToUpdate),b(this,ht,wt).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of o(this,Te))t!==e&&t.unselect();o(this,Te).clear(),o(this,Te).add(e),e.select(),b(this,Mn,Ns).call(this,e.propertiesToUpdate),b(this,ht,wt).call(this,{hasSelectedEditor:!0})}isSelected(e){return o(this,Te).has(e)}get firstSelectedEditor(){return o(this,Te).values().next().value}unselect(e){e.unselect(),o(this,Te).delete(e),b(this,ht,wt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return o(this,Te).size!==0}get isEnterHandled(){return o(this,Te).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){o(this,dn).undo(),b(this,ht,wt).call(this,{hasSomethingToUndo:o(this,dn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:b(this,Bi,Fo).call(this)})}redo(){o(this,dn).redo(),b(this,ht,wt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:o(this,dn).hasSomethingToRedo(),isEmpty:b(this,Bi,Fo).call(this)})}addCommands(e){o(this,dn).add(e),b(this,ht,wt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:b(this,Bi,Fo).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...o(this,Te)],t=()=>{for(const s of e)s.remove()},n=()=>{for(const s of e)b(this,zl,Lp).call(this,s)};this.addCommands({cmd:t,undo:n,mustExec:!0})}commitOrRemove(){var e;(e=o(this,Vt))==null||e.commitOrRemove()}hasSomethingToControl(){return o(this,Vt)||this.hasSelection}selectAll(){for(const e of o(this,Te))e.commit();b(this,Wl,Dp).call(this,o(this,Xe).values())}unselectAll(){if(!(o(this,Vt)&&(o(this,Vt).commitOrRemove(),o(this,ct)!==be.NONE))&&this.hasSelection){for(const e of o(this,Te))e.unselect();o(this,Te).clear(),b(this,ht,wt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;o(this,qs)[0]+=e,o(this,qs)[1]+=t;const[s,i]=o(this,qs),a=[...o(this,Te)],l=1e3;o(this,In)&&clearTimeout(o(this,In)),v(this,In,setTimeout(()=>{v(this,In,null),o(this,qs)[0]=o(this,qs)[1]=0,this.addCommands({cmd:()=>{for(const c of a)o(this,Xe).has(c.id)&&c.translateInPage(s,i)},undo:()=>{for(const c of a)o(this,Xe).has(c.id)&&c.translateInPage(-s,-i)},mustExec:!1})},l));for(const c of a)c.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),v(this,Ln,new Map);for(const e of o(this,Te))o(this,Ln).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!o(this,Ln))return!1;this.disableUserSelect(!1);const e=o(this,Ln);v(this,Ln,null);let t=!1;for(const[{x:s,y:i,pageIndex:a},l]of e)l.newX=s,l.newY=i,l.newPageIndex=a,t||(t=s!==l.savedX||i!==l.savedY||a!==l.savedPageIndex);if(!t)return!1;const n=(s,i,a,l)=>{if(o(this,Xe).has(s.id)){const c=o(this,lt).get(l);c?s._setParentAndPosition(c,i,a):(s.pageIndex=l,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:l}]of e)n(s,i,a,l)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:l}]of e)n(s,i,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(o(this,Ln))for(const n of o(this,Ln).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||o(this,Te).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return o(this,Vt)===e}getActive(){return o(this,Vt)}getMode(){return o(this,ct)}get imageManager(){return Ae(this,"imageManager",new Ep)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let h=0,d=t.rangeCount;h<d;h++)if(!e.contains(t.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:s,width:i,height:a}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(h,d,u,f)=>({x:(d-s)/a,y:1-(h+u-n)/i,width:f/a,height:u/i});break;case"180":l=(h,d,u,f)=>({x:1-(h+u-n)/i,y:1-(d+f-s)/a,width:u/i,height:f/a});break;case"270":l=(h,d,u,f)=>({x:1-(d+f-s)/a,y:(h-n)/i,width:f/a,height:u/i});break;default:l=(h,d,u,f)=>({x:(h-n)/i,y:(d-s)/a,width:u/i,height:f/a});break}const c=[];for(let h=0,d=t.rangeCount;h<d;h++){const u=t.getRangeAt(h);if(!u.collapsed)for(const{x:f,y:g,width:m,height:A}of u.getClientRects())m===0||A===0||c.push(l(f,g,m,A))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(o(this,ra)||v(this,ra,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=o(this,ra))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=o(this,ra))==null?void 0:s.get(e.data.id);if(!t)return;const n=o(this,as).getRawValue(t);n&&(o(this,ct)===be.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};Vt=new WeakMap,Xe=new WeakMap,lt=new WeakMap,ia=new WeakMap,as=new WeakMap,ra=new WeakMap,dn=new WeakMap,aa=new WeakMap,Ni=new WeakMap,Ln=new WeakMap,os=new WeakMap,Fi=new WeakMap,bl=new WeakMap,yl=new WeakMap,Dn=new WeakMap,oa=new WeakMap,Gs=new WeakMap,kn=new WeakMap,Xd=new WeakMap,Vs=new WeakMap,Al=new WeakMap,Oi=new WeakMap,_l=new WeakMap,la=new WeakMap,ct=new WeakMap,Te=new WeakMap,ls=new WeakMap,ji=new WeakMap,El=new WeakMap,wl=new WeakMap,xl=new WeakMap,Tl=new WeakMap,Sl=new WeakMap,Cl=new WeakMap,Pl=new WeakMap,Rl=new WeakMap,Ll=new WeakMap,Dl=new WeakMap,kl=new WeakMap,Il=new WeakMap,Ml=new WeakMap,Nl=new WeakMap,qs=new WeakMap,In=new WeakMap,cs=new WeakMap,Fl=new WeakMap,ca=new WeakSet,sd=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Yd=new WeakSet,Ob=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=b(this,ca,sd).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(o(this,kn)||v(this,kn,new Xx(this)),o(this,kn).show(n,s,this.direction==="ltr"))},Kd=new WeakSet,jb=function(){var i,a,l;const e=document.getSelection();if(!e||e.isCollapsed){o(this,ls)&&((i=o(this,kn))==null||i.hide(),v(this,ls,null),b(this,ht,wt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===o(this,ls))return;if(!b(this,ca,sd).call(this,e).closest(".textLayer")){o(this,ls)&&((a=o(this,kn))==null||a.hide(),v(this,ls,null),b(this,ht,wt).call(this,{hasSelectedText:!1}));return}if((l=o(this,kn))==null||l.hide(),v(this,ls,t),b(this,ht,wt).call(this,{hasSelectedText:!0}),!(o(this,ct)!==be.HIGHLIGHT&&o(this,ct)!==be.NONE)&&(o(this,ct)===be.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),v(this,Gs,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=h=>{h.type==="pointerup"&&h.button!==0||(window.removeEventListener("pointerup",c),window.removeEventListener("blur",c),h.type==="pointerup"&&b(this,ha,id).call(this,"main_toolbar"))};window.addEventListener("pointerup",c),window.addEventListener("blur",c)}},ha=new WeakSet,id=function(e=""){o(this,ct)===be.HIGHLIGHT?this.highlightSelection(e):o(this,bl)&&b(this,Yd,Ob).call(this)},Zd=new WeakSet,Bb=function(){document.addEventListener("selectionchange",o(this,Il))},Jd=new WeakSet,Hb=function(){document.removeEventListener("selectionchange",o(this,Il))},Qd=new WeakSet,Ub=function(){window.addEventListener("focus",o(this,xl)),window.addEventListener("blur",o(this,wl))},Ol=new WeakSet,Tp=function(){window.removeEventListener("focus",o(this,xl)),window.removeEventListener("blur",o(this,wl))},jl=new WeakSet,Sp=function(){window.addEventListener("keydown",o(this,Pl)),window.addEventListener("keyup",o(this,Rl))},Bl=new WeakSet,Cp=function(){window.removeEventListener("keydown",o(this,Pl)),window.removeEventListener("keyup",o(this,Rl))},Hl=new WeakSet,Pp=function(){document.addEventListener("copy",o(this,Tl)),document.addEventListener("cut",o(this,Sl)),document.addEventListener("paste",o(this,Cl))},Ul=new WeakSet,Rp=function(){document.removeEventListener("copy",o(this,Tl)),document.removeEventListener("cut",o(this,Sl)),document.removeEventListener("paste",o(this,Cl))},ht=new WeakSet,wt=function(e){Object.entries(e).some(([n,s])=>o(this,Nl)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(o(this,Nl),e)}),o(this,ct)===be.HIGHLIGHT&&e.hasSelectedEditor===!1&&b(this,Mn,Ns).call(this,[[ie.HIGHLIGHT_FREE,!0]]))},Mn=new WeakSet,Ns=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},eu=new WeakSet,zb=function(){if(!o(this,Vs)){v(this,Vs,!0);for(const e of o(this,lt).values())e.enable();for(const e of o(this,Xe).values())e.enable()}},tu=new WeakSet,Wb=function(){if(this.unselectAll(),o(this,Vs)){v(this,Vs,!1);for(const e of o(this,lt).values())e.disable();for(const e of o(this,Xe).values())e.disable()}},zl=new WeakSet,Lp=function(e){const t=o(this,lt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},nu=new WeakSet,Gb=function(){let e=null;for(e of o(this,Te));return e},Bi=new WeakSet,Fo=function(){if(o(this,Xe).size===0)return!0;if(o(this,Xe).size===1)for(const e of o(this,Xe).values())return e.isEmpty();return!1},Wl=new WeakSet,Dp=function(e){for(const t of o(this,Te))t.unselect();o(this,Te).clear();for(const t of e)t.isEmpty()||(o(this,Te).add(t),t.select());b(this,ht,wt).call(this,{hasSelectedEditor:this.hasSelection})},re(Kr,"TRANSLATE_SMALL",1),re(Kr,"TRANSLATE_BIG",10);let Mr=Kr;var hs,ds,un,us,fn,da,fs,Gl,kp;const ns=class ns{constructor(e){p(this,Gl);p(this,hs,"");p(this,ds,!1);p(this,un,null);p(this,us,null);p(this,fn,null);p(this,da,!1);p(this,fs,null);v(this,fs,e)}static initialize(e){ns._l10nPromise||(ns._l10nPromise=e)}async render(){const e=v(this,un,document.createElement("button"));e.className="altText";const t=await ns._l10nPromise.get("pdfjs-editor-alt-text-button-label");e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0",e.addEventListener("contextmenu",Bt),e.addEventListener("pointerdown",s=>s.stopPropagation());const n=s=>{s.preventDefault(),o(this,fs)._uiManager.editAltText(o(this,fs))};return e.addEventListener("click",n,{capture:!0}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(v(this,da,!0),n(s))}),await b(this,Gl,kp).call(this),e}finish(){o(this,un)&&(o(this,un).focus({focusVisible:o(this,da)}),v(this,da,!1))}isEmpty(){return!o(this,hs)&&!o(this,ds)}get data(){return{altText:o(this,hs),decorative:o(this,ds)}}set data({altText:e,decorative:t}){o(this,hs)===e&&o(this,ds)===t||(v(this,hs,e),v(this,ds,t),b(this,Gl,kp).call(this))}toggle(e=!1){o(this,un)&&(!e&&o(this,fn)&&(clearTimeout(o(this,fn)),v(this,fn,null)),o(this,un).disabled=!e)}destroy(){var e;(e=o(this,un))==null||e.remove(),v(this,un,null),v(this,us,null)}};hs=new WeakMap,ds=new WeakMap,un=new WeakMap,us=new WeakMap,fn=new WeakMap,da=new WeakMap,fs=new WeakMap,Gl=new WeakSet,kp=async function(){var s;const e=o(this,un);if(!e)return;if(!o(this,hs)&&!o(this,ds)){e.classList.remove("done"),(s=o(this,us))==null||s.remove();return}e.classList.add("done"),ns._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(i=>{e.setAttribute("aria-label",i)});let t=o(this,us);if(!t){v(this,us,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip");const i=t.id=`alt-text-tooltip-${o(this,fs).id}`;e.setAttribute("aria-describedby",i);const a=100;e.addEventListener("mouseenter",()=>{v(this,fn,setTimeout(()=>{v(this,fn,null),o(this,us).classList.add("show"),o(this,fs)._reportTelemetry({action:"alt_text_tooltip"})},a))}),e.addEventListener("mouseleave",()=>{var l;o(this,fn)&&(clearTimeout(o(this,fn)),v(this,fn,null)),(l=o(this,us))==null||l.classList.remove("show")})}t.innerText=o(this,ds)?await ns._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):o(this,hs),t.parentNode||e.append(t);const n=o(this,fs).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},re(ns,"_l10nPromise",null);let Sd=ns;var pn,xt,ua,Hi,dt,Ui,fa,pa,yt,Vl,zi,$s,ql,Wi,ps,Nn,ga,ma,nn,$l,su,Xl,Ip,Yl,Mp,Kl,Np,iu,Vb,ru,qb,Zl,Fp,Jl,Op,Ql,jp,au,$b,ou,Xb,lu,Yb,cu,Kb,ec,Bp,Gi,Oo;const Le=class Le{constructor(e){p(this,Xl);p(this,Kl);p(this,iu);p(this,ru);p(this,Zl);p(this,Jl);p(this,Ql);p(this,au);p(this,ou);p(this,lu);p(this,cu);p(this,ec);p(this,Gi);p(this,pn,null);p(this,xt,null);p(this,ua,!1);p(this,Hi,!1);p(this,dt,null);p(this,Ui,null);p(this,fa,this.focusin.bind(this));p(this,pa,this.focusout.bind(this));p(this,yt,null);p(this,Vl,"");p(this,zi,!1);p(this,$s,null);p(this,ql,!1);p(this,Wi,!1);p(this,ps,!1);p(this,Nn,null);p(this,ga,0);p(this,ma,0);p(this,nn,null);re(this,"_initialOptions",Object.create(null));re(this,"_isVisible",!0);re(this,"_uiManager",null);re(this,"_focusEventsAllowed",!0);re(this,"_l10nPromise",null);p(this,$l,!1);p(this,su,Le._zIndex++);this.constructor===Le&&Re("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[i,a];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Le.prototype._resizeWithKeyboard,t=Mr.TRANSLATE_SMALL,n=Mr.TRANSLATE_BIG;return Ae(this,"_resizerKeyboardManager",new Mh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Le.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Ae(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new Jx({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t,n){if(Le._l10nPromise||(Le._l10nPromise=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(i=>[i,e.get(i.replaceAll(/([A-Z])/g,a=>`-${a.toLowerCase()}`))]))),n!=null&&n.strings)for(const i of n.strings)Le._l10nPromise.set(i,e.get(i));if(Le._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Le._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Re("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return o(this,$l)}set _isDraggable(e){var t;v(this,$l,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=o(this,su)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):b(this,Gi,Oo).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(o(this,zi)?v(this,zi,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[i,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/i,this.y=(t+s)/a,this.fixAndSetPosition()}translate(e,t){b(this,Xl,Ip).call(this,this.parentDimensions,e,t)}translateInPage(e,t){o(this,$s)||v(this,$s,[this.x,this.y]),b(this,Xl,Ip).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){o(this,$s)||v(this,$s,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=e/n,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:a}=this;const[l,c]=this.getBaseTranslation();i+=l,a+=c,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!o(this,$s)&&(o(this,$s)[0]!==this.x||o(this,$s)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Le,s=n/e,i=n/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,n]=this.pageDimensions;let{x:s,y:i,width:a,height:l}=this;if(a*=t,l*=n,s*=t,i*=n,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(t-a,s)),i=Math.max(0,Math.min(n-l,i));break;case 90:s=Math.max(0,Math.min(t-l,s)),i=Math.min(n,Math.max(a,i));break;case 180:s=Math.min(t,Math.max(a,s)),i=Math.min(n,Math.max(l,i));break;case 270:s=Math.min(t,Math.max(l,s)),i=Math.max(0,Math.min(n-a,i));break}this.x=s/=t,this.y=i/=n;const[c,h]=this.getBaseTranslation();s+=c,i+=h;const{style:d}=this.div;d.left=`${(100*s).toFixed(2)}%`,d.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return b(n=Le,Yl,Mp).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return b(n=Le,Yl,Mp).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this,s=t*e,i=n*e;return jt.isCSSRoundSupported?[Math.round(s),Math.round(i)]:[s,i]}setDims(e,t){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,o(this,Hi)||(this.div.style.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,s=n.endsWith("%"),i=!o(this,Hi)&&t.endsWith("%");if(s&&i)return;const[a,l]=this.parentDimensions;s||(e.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!o(this,Hi)&&!i&&(e.height=`${(100*parseFloat(t)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=o(this,xt))==null||e.finish()}async addEditToolbar(){return o(this,yt)||o(this,Wi)?o(this,yt):(v(this,yt,new Ap(this)),this.div.append(o(this,yt).render()),o(this,xt)&&o(this,yt).addAltTextButton(await o(this,xt).render()),o(this,yt))}removeEditToolbar(){var e;o(this,yt)&&(o(this,yt).remove(),v(this,yt,null),(e=o(this,xt))==null||e.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){o(this,xt)||(Sd.initialize(Le._l10nPromise),v(this,xt,new Sd(this)),await this.addEditToolbar())}get altTextData(){var e;return(e=o(this,xt))==null?void 0:e.data}set altTextData(e){o(this,xt)&&(o(this,xt).data=e)}hasAltText(){var e;return!((e=o(this,xt))!=null&&e.isEmpty())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=o(this,ua)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.div.addEventListener("focusin",o(this,fa)),this.div.addEventListener("focusout",o(this,pa));const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),Td(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=jt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(v(this,zi,!0),this._isDraggable){b(this,au,$b).call(this,e);return}b(this,Ql,jp).call(this,e)}moveInDOM(){o(this,Nn)&&clearTimeout(o(this,Nn)),v(this,Nn,setTimeout(()=>{var e;v(this,Nn,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t,n=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[l,c]=this.pageTranslation,h=e/s,d=t/s,u=this.x*i,f=this.y*a,g=this.width*i,m=this.height*a;switch(n){case 0:return[u+h+l,a-f-d-m+c,u+h+g+l,a-f-d+c];case 90:return[u+d+l,a-f+h+c,u+d+m+l,a-f+h+g+c];case 180:return[u-h-g+l,a-f+d+c,u-h+l,a-f+d+m+c];case 270:return[u-d-m+l,a-f-h-g+c,u-d+l,a-f-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,i,a]=e,l=i-n,c=a-s;switch(this.rotation){case 0:return[n,t-a,l,c];case 90:return[n,t-s,c,l];case 180:return[i,t-s,l,c];case 270:return[i,t-a,c,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){v(this,Wi,!0)}disableEditMode(){v(this,Wi,!1)}isInEditMode(){return o(this,Wi)}shouldGetKeyboardEvents(){return o(this,ps)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e,t;(e=this.div)==null||e.addEventListener("focusin",o(this,fa)),(t=this.div)==null||t.addEventListener("focusout",o(this,pa))}rotate(e){}serialize(e=!1,t=null){Re("An editor must be serializable")}static deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});s.rotation=e.rotation;const[i,a]=s.pageDimensions,[l,c,h,d]=s.getRectInCurrentCoords(e.rect,a);return s.x=l/i,s.y=c/a,s.width=h/i,s.height=d/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.div.removeEventListener("focusin",o(this,fa)),this.div.removeEventListener("focusout",o(this,pa)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),o(this,Nn)&&(clearTimeout(o(this,Nn)),v(this,Nn,null)),b(this,Gi,Oo).call(this),this.removeEditToolbar(),o(this,nn)){for(const e of o(this,nn).values())clearTimeout(e);v(this,nn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(b(this,iu,Vb).call(this),o(this,dt).classList.remove("hidden"),Td(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),v(this,Ui,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=o(this,dt).children;if(!o(this,pn)){v(this,pn,Array.from(t));const a=b(this,ou,Xb).bind(this),l=b(this,lu,Yb).bind(this);for(const c of o(this,pn)){const h=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a),c.addEventListener("blur",l),c.addEventListener("focus",b(this,cu,Kb).bind(this,h)),Le._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(d=>c.setAttribute("aria-label",d))}}const n=o(this,pn)[0];let s=0;for(const a of t){if(a===n)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(o(this,pn).length/4);if(i!==s){if(i<s)for(let l=0;l<s-i;l++)o(this,dt).append(o(this,dt).firstChild);else if(i>s)for(let l=0;l<i-s;l++)o(this,dt).firstChild.before(o(this,dt).lastChild);let a=0;for(const l of t){const h=o(this,pn)[a++].getAttribute("data-resizer-name");Le._l10nPromise.get(`pdfjs-editor-resizer-label-${h}`).then(d=>l.setAttribute("aria-label",d))}}b(this,ec,Bp).call(this,0),v(this,ps,!0),o(this,dt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){o(this,ps)&&b(this,Jl,Op).call(this,o(this,Vl),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){b(this,Gi,Oo).call(this),this.div.focus()}select(){var e,t;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!o(this,yt)){this.addEditToolbar().then(()=>{var n,s;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((s=o(this,yt))==null||s.show())});return}(t=o(this,yt))==null||t.show()}unselect(){var e,t,n,s;(e=o(this,dt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=o(this,yt))==null||s.hide()}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return o(this,ql)}set isEditing(e){v(this,ql,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){v(this,Hi,!0);const n=e/t,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){o(this,nn)||v(this,nn,new Map);const{action:n}=e;let s=o(this,nn).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),o(this,nn).delete(n),o(this,nn).size===0&&v(this,nn,null)},Le._telemetryTimeout),o(this,nn).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),v(this,ua,!1)}disable(){this.div&&(this.div.tabIndex=-1),v(this,ua,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};pn=new WeakMap,xt=new WeakMap,ua=new WeakMap,Hi=new WeakMap,dt=new WeakMap,Ui=new WeakMap,fa=new WeakMap,pa=new WeakMap,yt=new WeakMap,Vl=new WeakMap,zi=new WeakMap,$s=new WeakMap,ql=new WeakMap,Wi=new WeakMap,ps=new WeakMap,Nn=new WeakMap,ga=new WeakMap,ma=new WeakMap,nn=new WeakMap,$l=new WeakMap,su=new WeakMap,Xl=new WeakSet,Ip=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this.fixAndSetPosition()},Yl=new WeakSet,Mp=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Kl=new WeakSet,Np=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},iu=new WeakSet,Vb=function(){if(o(this,dt))return;v(this,dt,document.createElement("div")),o(this,dt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const t of e){const n=document.createElement("div");o(this,dt).append(n),n.classList.add("resizer",t),n.setAttribute("data-resizer-name",t),n.addEventListener("pointerdown",b(this,ru,qb).bind(this,t)),n.addEventListener("contextmenu",Bt),n.tabIndex=-1}this.div.prepend(o(this,dt))},ru=new WeakSet,qb=function(e,t){var m;t.preventDefault();const{isMac:n}=jt.platform;if(t.button!==0||t.ctrlKey&&n)return;(m=o(this,xt))==null||m.toggle(!1);const s=b(this,Jl,Op).bind(this,e),i=this._isDraggable;this._isDraggable=!1;const a={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",s,a),window.addEventListener("contextmenu",Bt);const l=this.x,c=this.y,h=this.width,d=this.height,u=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const g=()=>{var A;this.parent.togglePointerEvents(!0),(A=o(this,xt))==null||A.toggle(!0),this._isDraggable=i,window.removeEventListener("pointerup",g),window.removeEventListener("blur",g),window.removeEventListener("pointermove",s,a),window.removeEventListener("contextmenu",Bt),this.parent.div.style.cursor=u,this.div.style.cursor=f,b(this,Zl,Fp).call(this,l,c,h,d)};window.addEventListener("pointerup",g),window.addEventListener("blur",g)},Zl=new WeakSet,Fp=function(e,t,n,s){const i=this.x,a=this.y,l=this.width,c=this.height;i===e&&a===t&&l===n&&c===s||this.addCommands({cmd:()=>{this.width=l,this.height=c,this.x=i,this.y=a;const[h,d]=this.parentDimensions;this.setDims(h*l,d*c),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=s,this.x=e,this.y=t;const[h,d]=this.parentDimensions;this.setDims(h*n,d*s),this.fixAndSetPosition()},mustExec:!0})},Jl=new WeakSet,Op=function(e,t){const[n,s]=this.parentDimensions,i=this.x,a=this.y,l=this.width,c=this.height,h=Le.MIN_SIZE/n,d=Le.MIN_SIZE/s,u=M=>Math.round(M*1e4)/1e4,f=b(this,Kl,Np).call(this,this.rotation),g=(M,U)=>[f[0]*M+f[2]*U,f[1]*M+f[3]*U],m=b(this,Kl,Np).call(this,360-this.rotation),A=(M,U)=>[m[0]*M+m[2]*U,m[1]*M+m[3]*U];let E,_,T=!1,C=!1;switch(e){case"topLeft":T=!0,E=(M,U)=>[0,0],_=(M,U)=>[M,U];break;case"topMiddle":E=(M,U)=>[M/2,0],_=(M,U)=>[M/2,U];break;case"topRight":T=!0,E=(M,U)=>[M,0],_=(M,U)=>[0,U];break;case"middleRight":C=!0,E=(M,U)=>[M,U/2],_=(M,U)=>[0,U/2];break;case"bottomRight":T=!0,E=(M,U)=>[M,U],_=(M,U)=>[0,0];break;case"bottomMiddle":E=(M,U)=>[M/2,U],_=(M,U)=>[M/2,0];break;case"bottomLeft":T=!0,E=(M,U)=>[0,U],_=(M,U)=>[M,0];break;case"middleLeft":C=!0,E=(M,U)=>[0,U/2],_=(M,U)=>[M,U/2];break}const L=E(l,c),D=_(l,c);let I=g(...D);const N=u(i+I[0]),w=u(a+I[1]);let x=1,k=1,[R,F]=this.screenToPageTranslation(t.movementX,t.movementY);if([R,F]=A(R/n,F/s),T){const M=Math.hypot(l,c);x=k=Math.max(Math.min(Math.hypot(D[0]-L[0]-R,D[1]-L[1]-F)/M,1/l,1/c),h/l,d/c)}else C?x=Math.max(h,Math.min(1,Math.abs(D[0]-L[0]-R)))/l:k=Math.max(d,Math.min(1,Math.abs(D[1]-L[1]-F)))/c;const O=u(l*x),j=u(c*k);I=g(..._(O,j));const q=N-I[0],X=w-I[1];this.width=O,this.height=j,this.x=q,this.y=X,this.setDims(n*O,s*j),this.fixAndSetPosition()},Ql=new WeakSet,jp=function(e){const{isMac:t}=jt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},au=new WeakSet,$b=function(e){const t=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let n,s;t&&(this.div.classList.add("moving"),n={passive:!0,capture:!0},v(this,ga,e.clientX),v(this,ma,e.clientY),s=a=>{const{clientX:l,clientY:c}=a,[h,d]=this.screenToPageTranslation(l-o(this,ga),c-o(this,ma));v(this,ga,l),v(this,ma,c),this._uiManager.dragSelectedEditors(h,d)},window.addEventListener("pointermove",s,n));const i=()=>{window.removeEventListener("pointerup",i),window.removeEventListener("blur",i),t&&(this.div.classList.remove("moving"),window.removeEventListener("pointermove",s,n)),v(this,zi,!1),this._uiManager.endDragSession()||b(this,Ql,jp).call(this,e)};window.addEventListener("pointerup",i),window.addEventListener("blur",i)},ou=new WeakSet,Xb=function(e){Le._resizerKeyboardManager.exec(this,e)},lu=new WeakSet,Yb=function(e){var t;o(this,ps)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==o(this,dt)&&b(this,Gi,Oo).call(this)},cu=new WeakSet,Kb=function(e){v(this,Vl,o(this,ps)?e:"")},ec=new WeakSet,Bp=function(e){if(o(this,pn))for(const t of o(this,pn))t.tabIndex=e},Gi=new WeakSet,Oo=function(){if(v(this,ps,!1),b(this,ec,Bp).call(this,-1),o(this,Ui)){const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=o(this,Ui);b(this,Zl,Fp).call(this,e,t,n,s),v(this,Ui,null)}},p(Le,Yl),re(Le,"_borderLineWidth",-1),re(Le,"_colorManager",new xp),re(Le,"_zIndex",1),re(Le,"_telemetryTimeout",1e3);let Se=Le;class Jx extends Se{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}const Mm=3285377520,en=4294901760,Sn=65535;class Zb{constructor(e){this.h1=e?e&4294967295:Mm,this.h2=e?e&4294967295:Mm}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let A=0,E=e.length;A<E;A++){const _=e.charCodeAt(A);_<=255?t[n++]=_:(t[n++]=_>>>8,t[n++]=_&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,i=n-s*4,a=new Uint32Array(t.buffer,0,s);let l=0,c=0,h=this.h1,d=this.h2;const u=3432918353,f=461845907,g=u&Sn,m=f&Sn;for(let A=0;A<s;A++)A&1?(l=a[A],l=l*u&en|l*g&Sn,l=l<<15|l>>>17,l=l*f&en|l*m&Sn,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(c=a[A],c=c*u&en|c*g&Sn,c=c<<15|c>>>17,c=c*f&en|c*m&Sn,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(l=0,i){case 3:l^=t[s*4+2]<<16;case 2:l^=t[s*4+1]<<8;case 1:l^=t[s*4],l=l*u&en|l*g&Sn,l=l<<15|l>>>17,l=l*f&en|l*m&Sn,s&1?h^=l:d^=l}this.h1=h,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&en|e*36045&Sn,t=t*4283543511&en|((t<<16|e>>>16)*2950163797&en)>>>16,e^=t>>>1,e=e*444984403&en|e*60499&Sn,t=t*3301882366&en|((t<<16|e>>>16)*3120437893&en)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Hp=Object.freeze({map:null,hash:"",transfer:void 0});var Vi,ut,hu,Jb;class qg{constructor(){p(this,hu);p(this,Vi,!1);p(this,ut,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=o(this,ut).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return o(this,ut).get(e)}remove(e){if(o(this,ut).delete(e),o(this,ut).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of o(this,ut).values())if(t instanceof Se)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=o(this,ut).get(e);let s=!1;if(n!==void 0)for(const[i,a]of Object.entries(t))n[i]!==a&&(s=!0,n[i]=a);else s=!0,o(this,ut).set(e,t);s&&b(this,hu,Jb).call(this),t instanceof Se&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return o(this,ut).has(e)}getAll(){return o(this,ut).size>0?Bg(o(this,ut)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return o(this,ut).size}resetModified(){o(this,Vi)&&(v(this,Vi,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Qb(this)}get serializable(){if(o(this,ut).size===0)return Hp;const e=new Map,t=new Zb,n=[],s=Object.create(null);let i=!1;for(const[a,l]of o(this,ut)){const c=l instanceof Se?l.serialize(!1,s):l;c&&(e.set(a,c),t.update(`${a}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Hp}get editorStats(){let e=null;const t=new Map;for(const n of o(this,ut).values()){if(!(n instanceof Se))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:i}=s;t.has(i)||t.set(i,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const a=e[i]||(e[i]=new Map);for(const[l,c]of Object.entries(s)){if(l==="type")continue;let h=a.get(l);h||(h=new Map,a.set(l,h));const d=h.get(c)??0;h.set(c,d+1)}}for(const[n,s]of t)e[n]=s.computeTelemetryFinalData(e[n]);return e}}Vi=new WeakMap,ut=new WeakMap,hu=new WeakSet,Jb=function(){o(this,Vi)||(v(this,Vi,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var tc;class Qb extends qg{constructor(t){super();p(this,tc,void 0);const{map:n,hash:s,transfer:i}=t.serializable,a=structuredClone(n,i?{transfer:i}:null);v(this,tc,{map:a,hash:s,transfer:i})}get print(){Re("Should not call PrintAnnotationStorage.print")}get serializable(){return o(this,tc)}}tc=new WeakMap;var va;class Qx{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){p(this,va,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),o(this,va).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||o(this,va).has(e.loadedName))){if(Je(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:i}=e,a=new FontFace(n,s,i);this.addNativeFontFace(a);try{await a.load(),o(this,va).add(n),t==null||t(e)}catch{de(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Re("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw de(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ae(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(_t||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Ae(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(Je(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ae(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(L,D){return L.charCodeAt(D)<<24|L.charCodeAt(D+1)<<16|L.charCodeAt(D+2)<<8|L.charCodeAt(D+3)&255}function s(L,D,I,N){const w=L.substring(0,D),x=L.substring(D+I);return w+N+x}let i,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let h=0;function d(L,D){if(++h>30){de("Load test font never loaded."),D();return}if(c.font="30px "+L,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(d.bind(null,L,D))}const u=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,u.length,u);const m=16,A=1482184792;let E=n(f,m);for(i=0,a=u.length-3;i<a;i+=4)E=E-A+n(u,i)|0;i<u.length&&(E=E-A+n(u+"XXX",i)|0),f=s(f,m,4,Fx(E));const _=`url(data:font/opentype;base64,${btoa(f)});`,T=`@font-face {font-family:"${u}";src:${_}}`;this.insertRule(T);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const L of[e.loadedName,u]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=L,C.append(D)}this._document.body.append(C),d(u,()=>{C.remove(),t.complete()})}}va=new WeakMap;class eT{constructor(e,{disableFontFace:t=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this._inspectFont=n}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=Eb(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),n}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(i){de(`getPathGenerator - ignoring character: "${i}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[t]=function(i,a){};const s=[];for(let i=0,a=n.length;i<a;)switch(n[i++]){case Qn.BEZIER_CURVE_TO:{const[l,c,h,d,u,f]=n.slice(i,i+6);s.push(g=>g.bezierCurveTo(l,c,h,d,u,f)),i+=6}break;case Qn.MOVE_TO:{const[l,c]=n.slice(i,i+2);s.push(h=>h.moveTo(l,c)),i+=2}break;case Qn.LINE_TO:{const[l,c]=n.slice(i,i+2);s.push(h=>h.lineTo(l,c)),i+=2}break;case Qn.QUADRATIC_CURVE_TO:{const[l,c,h,d]=n.slice(i,i+4);s.push(u=>u.quadraticCurveTo(l,c,h,d)),i+=4}break;case Qn.RESTORE:s.push(l=>l.restore());break;case Qn.SAVE:s.push(l=>l.save());break;case Qn.SCALE:Je(s.length===2,"Scale command is only valid at the third position.");break;case Qn.TRANSFORM:{const[l,c,h,d,u,f]=n.slice(i,i+6);s.push(g=>g.transform(l,c,h,d,u,f)),i+=6}break;case Qn.TRANSLATE:{const[l,c]=n.slice(i,i+2);s.push(h=>h.translate(l,c)),i+=2}break}return this.compiledGlyphs[t]=function(a,l){s[0](a),s[1](a),a.scale(l,-l);for(let c=2,h=s.length;c<h;c++)s[c](a)}}}if(_t){var Up=Promise.withResolvers(),rl=null;(async()=>{const e=await Gh(()=>import("./empty-CRMO4_-l.js"),[],import.meta.url),t=await Gh(()=>import("./index-CiodtZIu.js").then(l=>l.i),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url),n=await Gh(()=>import("./index-DHa0OMiM.js").then(l=>l.i),__vite__mapDeps([6,1,0,2,3,4,5]),import.meta.url),s=await Gh(()=>import("./url-amwFPBqB.js").then(l=>l.u),__vite__mapDeps([5,1]),import.meta.url);let i,a;return new Map(Object.entries({fs:e,http:t,https:n,url:s,canvas:i,path2d:a}))})().then(e=>{rl=e,Up.resolve()},e=>{de(`loadPackages: ${e}`),rl=new Map,Up.resolve()})}class Xn{static get promise(){return Up.promise}static get(e){return rl==null?void 0:rl.get(e)}}const ey=function(r){return Xn.get("fs").promises.readFile(r).then(t=>new Uint8Array(t))};class tT extends xf{}class nT extends Tf{_createCanvas(e,t){return Xn.get("canvas").createCanvas(e,t)}}class sT extends Sf{_fetchData(e,t){return ey(e).then(n=>({cMapData:n,compressionType:t}))}}class iT extends Cf{_fetchData(e){return ey(e)}}const Ct={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function zp(r,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),r.clip(s)}class Nh{constructor(){this.constructor===Nh&&Re("Cannot initialize BaseShadingPattern.")}getPattern(){Re("Abstract method `getPattern` called.")}}class rT extends Nh{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let i;if(s===Ct.STROKE||s===Ct.FILL){const a=t.current.getClippedPathBoundingBox(s,Oe(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,h=t.cachedCanvases.getCanvas("pattern",l,c,!0),d=h.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),n=Y.transform(n,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),zp(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(h.canvas,"no-repeat");const u=new DOMMatrix(n);i.setTransform(u)}else zp(e,this._bbox),i=this._createGradient(e);return i}}function np(r,e,t,n,s,i,a,l){const c=e.coords,h=e.colors,d=r.data,u=r.width*4;let f;c[t+1]>c[n+1]&&(f=t,t=n,n=f,f=i,i=a,a=f),c[n+1]>c[s+1]&&(f=n,n=s,s=f,f=a,a=l,l=f),c[t+1]>c[n+1]&&(f=t,t=n,n=f,f=i,i=a,a=f);const g=(c[t]+e.offsetX)*e.scaleX,m=(c[t+1]+e.offsetY)*e.scaleY,A=(c[n]+e.offsetX)*e.scaleX,E=(c[n+1]+e.offsetY)*e.scaleY,_=(c[s]+e.offsetX)*e.scaleX,T=(c[s+1]+e.offsetY)*e.scaleY;if(m>=T)return;const C=h[i],L=h[i+1],D=h[i+2],I=h[a],N=h[a+1],w=h[a+2],x=h[l],k=h[l+1],R=h[l+2],F=Math.round(m),O=Math.round(T);let j,q,X,M,U,z,_e,ee;for(let H=F;H<=O;H++){if(H<E){const Z=H<m?0:(m-H)/(m-E);j=g-(g-A)*Z,q=C-(C-I)*Z,X=L-(L-N)*Z,M=D-(D-w)*Z}else{let Z;H>T?Z=1:E===T?Z=0:Z=(E-H)/(E-T),j=A-(A-_)*Z,q=I-(I-x)*Z,X=N-(N-k)*Z,M=w-(w-R)*Z}let W;H<m?W=0:H>T?W=1:W=(m-H)/(m-T),U=g-(g-_)*W,z=C-(C-x)*W,_e=L-(L-k)*W,ee=D-(D-R)*W;const ce=Math.round(Math.min(j,U)),K=Math.round(Math.max(j,U));let oe=u*H+ce*4;for(let Z=ce;Z<=K;Z++)W=(j-Z)/(j-U),W<0?W=0:W>1&&(W=1),d[oe++]=q-(q-z)*W|0,d[oe++]=X-(X-_e)*W|0,d[oe++]=M-(M-ee)*W|0,d[oe++]=255}}function aT(r,e,t){const n=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(n.length/l)-1,h=l-1;for(i=0;i<c;i++){let d=i*l;for(let u=0;u<h;u++,d++)np(r,t,n[d],n[d+1],n[d+l],s[d],s[d+1],s[d+l]),np(r,t,n[d+l+1],n[d+1],n[d+l],s[d+l+1],s[d+1],s[d+l])}break;case"triangles":for(i=0,a=n.length;i<a;i+=3)np(r,t,n[i],n[i+1],n[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class oT extends Nh{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,d=Math.ceil(this._bounds[3])-c,u=Math.min(Math.ceil(Math.abs(h*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),g=h/u,m=d/f,A={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/g,scaleY:1/m},E=u+2*2,_=f+2*2,T=n.getCanvas("mesh",E,_,!1),C=T.context,L=C.createImageData(u,f);if(t){const I=L.data;for(let N=0,w=I.length;N<w;N+=4)I[N]=t[0],I[N+1]=t[1],I[N+2]=t[2],I[N+3]=255}for(const I of this._figures)aT(L,I,A);return C.putImageData(L,2,2),{canvas:T.canvas,offsetX:l-2*g,offsetY:c-2*m,scaleX:g,scaleY:m}}getPattern(e,t,n,s){zp(e,this._bbox);let i;if(s===Ct.SHADING)i=Y.singularValueDecompose2dScale(Oe(e));else if(i=Y.singularValueDecompose2dScale(t.baseTransform),this.matrix){const l=Y.singularValueDecompose2dScale(this.matrix);i=[i[0]*l[0],i[1]*l[1]]}const a=this._createMeshCanvas(i,s===Ct.SHADING?null:this._background,t.cachedCanvases);return s!==Ct.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class lT extends Nh{getPattern(){return"hotpink"}}function cT(r){switch(r[0]){case"RadialAxial":return new rT(r);case"Mesh":return new oT(r);case"Dummy":return new lT}throw new Error(`Unknown IR type: ${r[0]}`)}const Nm={COLORED:1,UNCOLORED:2},du=class du{constructor(e,t,n,s,i){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,s=this.xstep,i=this.ystep,a=this.paintType,l=this.tilingType,c=this.color,h=this.canvasGraphicsFactory;_f("TilingType: "+l);const d=n[0],u=n[1],f=n[2],g=n[3],m=Y.singularValueDecompose2dScale(this.matrix),A=Y.singularValueDecompose2dScale(this.baseTransform),E=[m[0]*A[0],m[1]*A[1]],_=this.getSizeAndScale(s,this.ctx.canvas.width,E[0]),T=this.getSizeAndScale(i,this.ctx.canvas.height,E[1]),C=e.cachedCanvases.getCanvas("pattern",_.size,T.size,!0),L=C.context,D=h.createCanvasGraphics(L);D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,a,c);let I=d,N=u,w=f,x=g;return d<0&&(I=0,w+=Math.abs(d)),u<0&&(N=0,x+=Math.abs(u)),L.translate(-(_.scale*I),-(T.scale*N)),D.transform(_.scale,0,0,T.scale,0,0),L.save(),this.clipBbox(D,I,N,w,x),D.baseTransform=Oe(D.ctx),D.executeOperatorList(t),D.endDrawing(),{canvas:C.canvas,scaleX:_.scale,scaleY:T.scale,offsetX:I,offsetY:N}}getSizeAndScale(e,t,n){e=Math.abs(e);const s=Math.max(du.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=s?i=s:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,s,i){const a=s-t,l=i-n;e.ctx.rect(t,n,a,l),e.current.updateRectMinMax(Oe(e.ctx),[t,n,s,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,i=e.current;switch(t){case Nm.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,i.fillColor=a.fillStyle,i.strokeColor=a.strokeStyle;break;case Nm.UNCOLORED:const l=Y.makeHexColor(n[0],n[1],n[2]);s.fillStyle=l,s.strokeStyle=l,i.fillColor=l,i.strokeColor=l;break;default:throw new Nx(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,s){let i=n;s!==Ct.SHADING&&(i=Y.transform(i,t.baseTransform),this.matrix&&(i=Y.transform(i,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(i);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}};re(du,"MAX_PATTERN_SIZE",3e3);let Wp=du;function hT({src:r,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const l=jt.isLittleEndian?4278190080:255,[c,h]=a?[i,l]:[l,i],d=n>>3,u=n&7,f=r.length;t=new Uint32Array(t.buffer);let g=0;for(let m=0;m<s;m++){for(const E=e+d;e<E;e++){const _=e<f?r[e]:255;t[g++]=_&128?h:c,t[g++]=_&64?h:c,t[g++]=_&32?h:c,t[g++]=_&16?h:c,t[g++]=_&8?h:c,t[g++]=_&4?h:c,t[g++]=_&2?h:c,t[g++]=_&1?h:c}if(u===0)continue;const A=e<f?r[e++]:255;for(let E=0;E<u;E++)t[g++]=A&1<<7-E?h:c}return{srcPos:e,destPos:g}}const Fm=16,Om=100,dT=15,jm=10,Bm=1e3,Nt=16;function uT(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(n,s){e.translate(n,s),this.__originalTranslate(n,s)},r.scale=function(n,s){e.scale(n,s),this.__originalScale(n,s)},r.transform=function(n,s,i,a,l,c){e.transform(n,s,i,a,l,c),this.__originalTransform(n,s,i,a,l,c)},r.setTransform=function(n,s,i,a,l,c){e.setTransform(n,s,i,a,l,c),this.__originalSetTransform(n,s,i,a,l,c)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(n){e.rotate(n),this.__originalRotate(n)},r.clip=function(n){e.clip(n),this.__originalClip(n)},r.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},r.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},r.bezierCurveTo=function(t,n,s,i,a,l){e.bezierCurveTo(t,n,s,i,a,l),this.__originalBezierCurveTo(t,n,s,i,a,l)},r.rect=function(t,n,s,i){e.rect(t,n,s,i),this.__originalRect(t,n,s,i)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class fT{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function $h(r,e,t,n,s,i,a,l,c,h){const[d,u,f,g,m,A]=Oe(r);if(u===0&&f===0){const T=a*d+m,C=Math.round(T),L=l*g+A,D=Math.round(L),I=(a+c)*d+m,N=Math.abs(Math.round(I)-C)||1,w=(l+h)*g+A,x=Math.abs(Math.round(w)-D)||1;return r.setTransform(Math.sign(d),0,0,Math.sign(g),C,D),r.drawImage(e,t,n,s,i,0,0,N,x),r.setTransform(d,u,f,g,m,A),[N,x]}if(d===0&&g===0){const T=l*f+m,C=Math.round(T),L=a*u+A,D=Math.round(L),I=(l+h)*f+m,N=Math.abs(Math.round(I)-C)||1,w=(a+c)*u+A,x=Math.abs(Math.round(w)-D)||1;return r.setTransform(0,Math.sign(u),Math.sign(f),0,C,D),r.drawImage(e,t,n,s,i,0,0,x,N),r.setTransform(d,u,f,g,m,A),[x,N]}r.drawImage(e,t,n,s,i,a,l,c,h);const E=Math.hypot(d,u),_=Math.hypot(f,g);return[E*c,_*h]}function pT(r){const{width:e,height:t}=r;if(e>Bm||t>Bm)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=e+1;let a=new Uint8Array(i*(t+1)),l,c,h;const d=e+7&-8;let u=new Uint8Array(d*t),f=0;for(const _ of r.data){let T=128;for(;T>0;)u[f++]=_&T?0:255,T>>=1}let g=0;for(f=0,u[f]!==0&&(a[0]=1,++g),c=1;c<e;c++)u[f]!==u[f+1]&&(a[c]=u[f]?2:1,++g),f++;for(u[f]!==0&&(a[c]=2,++g),l=1;l<t;l++){f=l*d,h=l*i,u[f-d]!==u[f]&&(a[h]=u[f]?1:8,++g);let _=(u[f]?4:0)+(u[f-d]?8:0);for(c=1;c<e;c++)_=(_>>2)+(u[f+1]?4:0)+(u[f-d+1]?8:0),s[_]&&(a[h+c]=s[_],++g),f++;if(u[f-d]!==u[f]&&(a[h+c]=u[f]?2:4,++g),g>n)return null}for(f=d*(t-1),h=l*i,u[f]!==0&&(a[h]=8,++g),c=1;c<e;c++)u[f]!==u[f+1]&&(a[h+c]=u[f]?4:8,++g),f++;if(u[f]!==0&&(a[h+c]=4,++g),g>n)return null;const m=new Int32Array([0,i,-1,0,-i,0,0,0,1]),A=new Path2D;for(l=0;g&&l<=t;l++){let _=l*i;const T=_+e;for(;_<T&&!a[_];)_++;if(_===T)continue;A.moveTo(_%i,l);const C=_;let L=a[_];do{const D=m[L];do _+=D;while(!a[_]);const I=a[_];I!==5&&I!==10?(L=I,a[_]=0):(L=I&51*L>>4,a[_]&=L>>2|L<<2),A.lineTo(_%i,_/i|0),a[_]||--g}while(C!==_);--l}return u=null,a=null,function(_){_.save(),_.scale(1/e,-1/t),_.translate(0,-t),_.fill(A),_.beginPath(),_.restore()}}class Hm{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=Ab,this.textMatrixScale=1,this.fontMatrix=fp,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=vt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=Y.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=Y.applyTransform(t,e),s=Y.applyTransform(t.slice(2),e),i=Y.applyTransform([t[0],t[3]],e),a=Y.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],s[0],i[0],a[0]),this.minY=Math.min(this.minY,n[1],s[1],i[1],a[1]),this.maxX=Math.max(this.maxX,n[0],s[0],i[0],a[0]),this.maxY=Math.max(this.maxY,n[1],s[1],i[1],a[1])}updateScalingPathMinMax(e,t){Y.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,s,i,a,l,c,h,d){const u=Y.bezierBoundingBox(t,n,s,i,a,l,c,h,d);d||this.updateRectMinMax(e,u)}getPathBoundingBox(e=Ct.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===Ct.STROKE){t||Re("Stroke bounding box must include transform.");const s=Y.singularValueDecompose2dScale(t),i=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;n[0]-=i,n[1]-=a,n[2]+=i,n[3]+=a}return n}updateClipFromPath(){const e=Y.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Ct.FILL,t=null){return Y.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Um(r,e){if(typeof ImageData<"u"&&e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%Nt,i=(t-s)/Nt,a=s===0?i:i+1,l=r.createImageData(n,Nt);let c=0,h;const d=e.data,u=l.data;let f,g,m,A;if(e.kind===Qh.GRAYSCALE_1BPP){const E=d.byteLength,_=new Uint32Array(u.buffer,0,u.byteLength>>2),T=_.length,C=n+7>>3,L=4294967295,D=jt.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(m=f<i?Nt:s,h=0,g=0;g<m;g++){const I=E-c;let N=0;const w=I>C?n:I*8-7,x=w&-8;let k=0,R=0;for(;N<x;N+=8)R=d[c++],_[h++]=R&128?L:D,_[h++]=R&64?L:D,_[h++]=R&32?L:D,_[h++]=R&16?L:D,_[h++]=R&8?L:D,_[h++]=R&4?L:D,_[h++]=R&2?L:D,_[h++]=R&1?L:D;for(;N<w;N++)k===0&&(R=d[c++],k=128),_[h++]=R&k?L:D,k>>=1}for(;h<T;)_[h++]=0;r.putImageData(l,0,f*Nt)}}else if(e.kind===Qh.RGBA_32BPP){for(g=0,A=n*Nt*4,f=0;f<i;f++)u.set(d.subarray(c,c+A)),c+=A,r.putImageData(l,0,g),g+=Nt;f<a&&(A=n*s*4,u.set(d.subarray(c,c+A)),r.putImageData(l,0,g))}else if(e.kind===Qh.RGB_24BPP)for(m=Nt,A=n*m,f=0;f<a;f++){for(f>=i&&(m=s,A=n*m),h=0,g=A;g--;)u[h++]=d[c++],u[h++]=d[c++],u[h++]=d[c++],u[h++]=255;r.putImageData(l,0,f*Nt)}else throw new Error(`bad image kind: ${e.kind}`)}function zm(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%Nt,i=(t-s)/Nt,a=s===0?i:i+1,l=r.createImageData(n,Nt);let c=0;const h=e.data,d=l.data;for(let u=0;u<a;u++){const f=u<i?Nt:s;({srcPos:c}=hT({src:h,srcPos:c,dest:d,width:n,height:f,nonBlackColor:0})),r.putImageData(l,0,u*Nt)}}function Lo(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)r[n]!==void 0&&(e[n]=r[n]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function Xh(r){if(r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0),!_t){const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}}function Wm(r,e){if(e)return!0;const t=Y.singularValueDecompose2dScale(r);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*ui.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const gT=["butt","round","square"],mT=["miter","round","bevel"],vT={},Gm={};var nc,Gp,sc,Vp;const im=class im{constructor(e,t,n,s,i,{optionalContentConfig:a,markedContentStack:l=null},c,h){p(this,nc);p(this,sc);this.ctx=e,this.current=new Hm(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=a,this.cachedCanvases=new fT(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Oe(this.compositeCtx))}this.ctx.save(),Xh(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Oe(this.ctx)}executeOperatorList(e,t,n,s){const i=e.argsArray,a=e.fnArray;let l=t||0;const c=i.length;if(c===l)return l;const h=c-l>jm&&typeof n=="function",d=h?Date.now()+dT:0;let u=0;const f=this.commonObjs,g=this.objs;let m;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,n),l;if(m=a[l],m!==hn.dependency)this[m].apply(this,i[l]);else for(const A of i[l]){const E=A.startsWith("g_")?f:g;if(!E.has(A))return E.get(A,n),l}if(l++,l===c)return l;if(h&&++u>jm){if(Date.now()>d)return n(),l;u=0}}}endDrawing(){b(this,nc,Gp).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),b(this,sc,Vp).call(this)}_scaleImage(e,t){const n=e.width,s=e.height;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=n,c=s,h="prescale1",d,u;for(;i>2&&l>1||a>2&&c>1;){let f=l,g=c;i>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),i/=l/f),a>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/g),d=this.cachedCanvases.getCanvas(h,f,g),u=d.context,u.clearRect(0,0,f,g),u.drawImage(e,0,0,l,c,0,0,f,g),e=d.canvas,l=f,c=g,h=h==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:s}=e,i=this.current.fillColor,a=this.current.patternFill,l=Oe(t);let c,h,d,u;if((e.bitmap||e.data)&&e.count>1){const w=e.bitmap||e.data.buffer;h=JSON.stringify(a?l:[l.slice(0,4),i]),c=this._cachedBitmapsMap.get(w),c||(c=new Map,this._cachedBitmapsMap.set(w,c));const x=c.get(h);if(x&&!a){const k=Math.round(Math.min(l[0],l[2])+l[4]),R=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:x,offsetX:k,offsetY:R}}d=x}d||(u=this.cachedCanvases.getCanvas("maskCanvas",n,s),zm(u.context,e));let f=Y.transform(l,[1/n,0,0,-1/s,0,0]);f=Y.transform(f,[1,0,0,1,0,-s]);const[g,m,A,E]=Y.getAxialAlignedBoundingBox([0,0,n,s],f),_=Math.round(A-g)||1,T=Math.round(E-m)||1,C=this.cachedCanvases.getCanvas("fillCanvas",_,T),L=C.context,D=g,I=m;L.translate(-D,-I),L.transform(...f),d||(d=this._scaleImage(u.canvas,es(L)),d=d.img,c&&a&&c.set(h,d)),L.imageSmoothingEnabled=Wm(Oe(L),e.interpolate),$h(L,d,0,0,d.width,d.height,0,0,n,s),L.globalCompositeOperation="source-in";const N=Y.transform(es(L),[1,0,0,1,-D,-I]);return L.fillStyle=a?i.getPattern(t,this,N,Ct.FILL):i,L.fillRect(0,0,n,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,C.canvas)),{canvas:C.canvas,offsetX:Math.round(D),offsetY:Math.round(I)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=gT[e]}setLineJoin(e){this.ctx.lineJoin=mT[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const i=this.ctx;i.setTransform(...Oe(this.suspendedCtx)),Lo(this.suspendedCtx,i),uT(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Lo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const i=s[0],a=s[1],l=s[2]-i,c=s[3]-a;l===0||c===0||(this.genericComposeSMask(t.context,n,l,c,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,i,a,l,c,h,d,u){let f=e.canvas,g=c-d,m=h-u;if(a){if(g<0||m<0||g+n>f.width||m+s>f.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,s),_=E.context;_.drawImage(f,-g,-m),a.some(T=>T!==0)&&(_.globalCompositeOperation="destination-atop",_.fillStyle=Y.makeHexColor(...a),_.fillRect(0,0,n,s),_.globalCompositeOperation="source-over"),f=E.canvas,g=m=0}else if(a.some(E=>E!==0)){e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(g,m,n,s),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=Y.makeHexColor(...a),e.fillRect(g,m,n,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const A=new Path2D;A.rect(c,h,n,s),t.clip(A),t.globalCompositeOperation="destination-in",t.drawImage(f,g,m,n,s,c,h,n,s),t.restore()}save(){this.inSMaskMode?(Lo(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Lo(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,s,i,a){this.ctx.transform(e,t,n,s,i,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const s=this.ctx,i=this.current;let a=i.x,l=i.y,c,h;const d=Oe(s),u=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,f=u?n.slice(0):null;for(let g=0,m=0,A=e.length;g<A;g++)switch(e[g]|0){case hn.rectangle:a=t[m++],l=t[m++];const E=t[m++],_=t[m++],T=a+E,C=l+_;s.moveTo(a,l),E===0||_===0?s.lineTo(T,C):(s.lineTo(T,l),s.lineTo(T,C),s.lineTo(a,C)),u||i.updateRectMinMax(d,[a,l,T,C]),s.closePath();break;case hn.moveTo:a=t[m++],l=t[m++],s.moveTo(a,l),u||i.updatePathMinMax(d,a,l);break;case hn.lineTo:a=t[m++],l=t[m++],s.lineTo(a,l),u||i.updatePathMinMax(d,a,l);break;case hn.curveTo:c=a,h=l,a=t[m+4],l=t[m+5],s.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],a,l),i.updateCurvePathMinMax(d,c,h,t[m],t[m+1],t[m+2],t[m+3],a,l,f),m+=6;break;case hn.curveTo2:c=a,h=l,s.bezierCurveTo(a,l,t[m],t[m+1],t[m+2],t[m+3]),i.updateCurvePathMinMax(d,c,h,a,l,t[m],t[m+1],t[m+2],t[m+3],f),a=t[m+2],l=t[m+3],m+=4;break;case hn.curveTo3:c=a,h=l,a=t[m+2],l=t[m+3],s.bezierCurveTo(t[m],t[m+1],a,l,a,l),i.updateCurvePathMinMax(d,c,h,t[m],t[m+1],a,l,a,l,f),m+=4;break;case hn.closePath:s.closePath();break}u&&i.updateScalingPathMinMax(d,f),i.setCurrentPoint(a,l)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,es(t),Ct.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let i=!1;s&&(t.save(),t.fillStyle=n.getPattern(t,this,es(t),Ct.FILL),i=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),i&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=vT}eoClip(){this.pendingClip=Gm}beginText(){this.current.textMatrix=Ab,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const n=this.commonObjs.get(e),s=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=n.fontMatrix||fp,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&de("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const i=n.loadedName||"sans-serif",a=((d=n.systemFontInfo)==null?void 0:d.css)||`"${i}", ${n.fallbackName}`;let l="normal";n.black?l="900":n.bold&&(l="bold");const c=n.italic?"italic":"normal";let h=t;t<Fm?h=Fm:t>Om&&(h=Om),this.current.fontSizeScale=t/h,this.ctx.font=`${c} ${l} ${h}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,s,i,a){this.current.textMatrix=[e,t,n,s,i,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,s){const i=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,d=c&vt.FILL_STROKE_MASK,u=!!(c&vt.ADD_TO_PATH_FLAG),f=a.patternFill&&!l.missingFile;let g;(l.disableFontFace||u||f)&&(g=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||f?(i.save(),i.translate(t,n),i.beginPath(),g(i,h),s&&i.setTransform(...s),(d===vt.FILL||d===vt.FILL_STROKE)&&i.fill(),(d===vt.STROKE||d===vt.FILL_STROKE)&&i.stroke(),i.restore()):((d===vt.FILL||d===vt.FILL_STROKE)&&i.fillText(e,t,n),(d===vt.STROKE||d===vt.FILL_STROKE)&&i.strokeText(e,t,n)),u&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Oe(i),x:t,y:n,fontSize:h,addToPath:g})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return Ae(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const i=this.ctx,a=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,h=t.fontDirection,d=t.textHScale*h,u=e.length,f=n.vertical,g=f?1:-1,m=n.defaultVMetrics,A=s*t.fontMatrix[0],E=t.textRenderingMode===vt.FILL&&!n.disableFontFace&&!t.patternFill;i.save(),i.transform(...t.textMatrix),i.translate(t.x,t.y+t.textRise),h>0?i.scale(d,-1):i.scale(d,1);let _;if(t.patternFill){i.save();const I=t.fillColor.getPattern(i,this,es(i),Ct.FILL);_=Oe(i),i.restore(),i.fillStyle=I}let T=t.lineWidth;const C=t.textMatrixScale;if(C===0||T===0){const I=t.textRenderingMode&vt.FILL_STROKE_MASK;(I===vt.STROKE||I===vt.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=C;if(a!==1&&(i.scale(a,a),T/=a),i.lineWidth=T,n.isInvalidPDFjsFont){const I=[];let N=0;for(const w of e)I.push(w.unicode),N+=w.width;i.fillText(I.join(""),0,0),t.x+=N*A*d,i.restore(),this.compose();return}let L=0,D;for(D=0;D<u;++D){const I=e[D];if(typeof I=="number"){L+=g*I*s/1e3;continue}let N=!1;const w=(I.isSpace?c:0)+l,x=I.fontChar,k=I.accent;let R,F,O=I.width;if(f){const q=I.vmetric||m,X=-(I.vmetric?q[1]:O*.5)*A,M=q[2]*A;O=q?-q[0]:O,R=X/a,F=(L+M)/a}else R=L/a,F=0;if(n.remeasure&&O>0){const q=i.measureText(x).width*1e3/s*a;if(O<q&&this.isFontSubpixelAAEnabled){const X=O/q;N=!0,i.save(),i.scale(X,1),R/=X}else O!==q&&(R+=(O-q)/2e3*s/a)}if(this.contentVisible&&(I.isInFont||n.missingFile)){if(E&&!k)i.fillText(x,R,F);else if(this.paintChar(x,R,F,_),k){const q=R+s*k.offset.x/a,X=F-s*k.offset.y/a;this.paintChar(k.fontChar,q,X,_)}}const j=f?O*A-w*h:O*A+w*h;L+=j,N&&i.restore()}f?t.y-=L:t.x+=L*d,i.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,s=n.font,i=n.fontSize,a=n.fontDirection,l=s.vertical?1:-1,c=n.charSpacing,h=n.wordSpacing,d=n.textHScale*a,u=n.fontMatrix||fp,f=e.length,g=n.textRenderingMode===vt.INVISIBLE;let m,A,E,_;if(!(g||i===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(d,a),m=0;m<f;++m){if(A=e[m],typeof A=="number"){_=l*A*i/1e3,this.ctx.translate(_,0),n.x+=_*d;continue}const T=(A.isSpace?h:0)+c,C=s.charProcOperatorList[A.operatorListId];if(!C){de(`Type3 character "${A.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=A,this.save(),t.scale(i,i),t.transform(...u),this.executeOperatorList(C),this.restore()),E=Y.applyTransform([A.width,0],u)[0]*i+T,t.translate(E,0),n.x+=E*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,s,i,a){this.ctx.rect(n,s,i-n,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],s=this.baseTransform||Oe(this.ctx),i={createCanvasGraphics:a=>new im(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Wp(e,n,this.ctx,i,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const s=Y.makeHexColor(e,t,n);this.ctx.strokeStyle=s,this.current.strokeColor=s}setFillRGBColor(e,t,n){const s=Y.makeHexColor(e,t,n);this.ctx.fillStyle=s,this.current.fillColor=s,this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=cT(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,es(t),Ct.SHADING);const s=es(t);if(s){const{width:i,height:a}=t.canvas,[l,c,h,d]=Y.getAxialAlignedBoundingBox([0,0,i,a],s);this.ctx.fillRect(l,c,h-l,d-c)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Re("Should not call beginInlineImage")}beginImageData(){Re("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Oe(this.ctx),t)){const n=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],n,s),this.current.updateRectMinMax(Oe(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||_f("TODO: Support non-isolated groups."),e.knockout&&de("Knockout groups not supported.");const n=Oe(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Y.getAxialAlignedBoundingBox(e.bbox,Oe(t));const i=[0,0,t.canvas.width,t.canvas.height];s=Y.intersect(s,i)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),h=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,h]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const u=this.cachedCanvases.getCanvas(d,c,h),f=u.context;f.translate(-a,-l),f.transform(...n),e.smask?this.smaskStack.push({canvas:u.canvas,context:f,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,l),t.save()),Lo(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Oe(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const i=Y.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(e,t,n,s,i){if(b(this,nc,Gp).call(this),Xh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],l=t[3]-t[1];if(i&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=l;const[c,h]=Y.singularValueDecompose2dScale(Oe(this.ctx)),{viewportScale:d}=this,u=Math.ceil(a*this.outputScaleX*d),f=Math.ceil(l*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(u,f);const{canvas:g,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,g),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(c,0,0,-h,0,l*h),Xh(this.ctx)}else Xh(this.ctx),this.ctx.rect(t[0],t[1],a,l),this.ctx.clip(),this.endPath()}this.current=new Hm(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),b(this,sc,Vp).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=pT(e)),s.compiled)){s.compiled(n);return}const i=this._createMaskCanvas(e),a=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,s=0,i,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=Oe(l);l.transform(t,n,s,i,0,0);const h=this._createMaskCanvas(e);l.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let d=0,u=a.length;d<u;d+=2){const f=Y.transform(c,[t,n,s,i,a[d],a[d+1]]),[g,m]=Y.applyTransform([0,0],f);l.drawImage(h.canvas,g,m)}l.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const i of e){const{data:a,width:l,height:c,transform:h}=i,d=this.cachedCanvases.getCanvas("maskCanvas",l,c),u=d.context;u.save();const f=this.getObject(a,i);zm(u,f),u.globalCompositeOperation="source-in",u.fillStyle=s?n.getPattern(u,this,es(t),Ct.FILL):n,u.fillRect(0,0,l,c),u.restore(),t.save(),t.transform(...h),t.scale(1,-1),$h(t,d.canvas,0,0,l,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){de("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,s){if(!this.contentVisible)return;const i=this.getObject(e);if(!i){de("Dependent image isn't ready yet");return}const a=i.width,l=i.height,c=[];for(let h=0,d=s.length;h<d;h+=2)c.push({transform:[t,0,0,n,s[h],s[h+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(i,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,s=this.ctx;if(this.save(),!_t){const{filter:l}=s;l!=="none"&&l!==""&&(s.filter="none")}s.scale(1/t,-1/n);let i;if(e.bitmap)i=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)i=e;else{const c=this.cachedCanvases.getCanvas("inlineImage",t,n).context;Um(c,e),i=this.applyTransferMapsToCanvas(c)}const a=this._scaleImage(i,es(s));s.imageSmoothingEnabled=Wm(Oe(s),e.interpolate),$h(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const i=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",i,a).context;Um(c,e),s=this.applyTransferMapsToCanvas(c)}for(const i of t)n.save(),n.transform(...i.transform),n.scale(1,-1),$h(n,s,i.x,i.y,i.w,i.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===Gm?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Oe(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:i}=this.ctx.getTransform();let a,l;if(n===0&&s===0){const c=Math.abs(t),h=Math.abs(i);if(c===h)if(e===0)a=l=1/c;else{const d=c*e;a=l=d<1?1/d:1}else if(e===0)a=1/c,l=1/h;else{const d=c*e,u=h*e;a=d<1?1/d:1,l=u<1?1/u:1}}else{const c=Math.abs(t*i-n*s),h=Math.hypot(t,n),d=Math.hypot(s,i);if(e===0)a=d/c,l=h/c;else{const u=e*c;a=d>u?d/u:1,l=h>u?h/u:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[s,i]=this.getScaleForStroking();if(t.lineWidth=n||1,s===1&&i===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(s,i),a.length>0){const l=Math.max(s,i);t.setLineDash(a.map(c=>c/l)),t.lineDashOffset/=l}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};nc=new WeakSet,Gp=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},sc=new WeakSet,Vp=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let Zr=im;for(const r in hn)Zr.prototype[r]!==void 0&&(Zr.prototype[hn[r]]=Zr.prototype[r]);var ic,rc;class Is{static get workerPort(){return o(this,ic)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");v(this,ic,e)}static get workerSrc(){return o(this,rc)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");v(this,rc,e)}}ic=new WeakMap,rc=new WeakMap,p(Is,ic,null),p(Is,rc,"");const Yh={UNKNOWN:0,DATA:1,ERROR:2},Ve={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Wt(r){switch(r instanceof Error||typeof r=="object"&&r!==null||Re('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Br(r.message);case"MissingPDFException":return new jr(r.message);case"PasswordException":return new gp(r.message,r.code);case"UnexpectedResponseException":return new Ef(r.message,r.status);case"UnknownErrorException":return new mp(r.message,r.details);default:return new mp(r.message,r.toString())}}var uu,ty,fu,ny,ba,rd;class jo{constructor(e,t,n){p(this,uu);p(this,fu);p(this,ba);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=s=>{const i=s.data;if(i.targetName!==this.sourceName)return;if(i.stream){b(this,fu,ny).call(this,i);return}if(i.callback){const l=i.callbackId,c=this.callbackCapabilities[l];if(!c)throw new Error(`Cannot resolve callback ${l}`);if(delete this.callbackCapabilities[l],i.callback===Yh.DATA)c.resolve(i.data);else if(i.callback===Yh.ERROR)c.reject(Wt(i.reason));else throw new Error("Unexpected callback case");return}const a=this.actionHandler[i.action];if(!a)throw new Error(`Unknown action from worker: ${i.action}`);if(i.callbackId){const l=this.sourceName,c=i.sourceName;new Promise(function(h){h(a(i.data))}).then(function(h){n.postMessage({sourceName:l,targetName:c,callback:Yh.DATA,callbackId:i.callbackId,data:h})},function(h){n.postMessage({sourceName:l,targetName:c,callback:Yh.ERROR,callbackId:i.callbackId,reason:Wt(h)})});return}if(i.streamId){b(this,uu,ty).call(this,i);return}a(i.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,n,s){const i=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:h,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:e,streamId:i,data:t,desiredSize:h.desiredSize},s),d.promise},pull:h=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,c.postMessage({sourceName:a,targetName:l,stream:Ve.PULL,streamId:i,desiredSize:h.desiredSize}),d.promise},cancel:h=>{Je(h instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:Ve.CANCEL,streamId:i,reason:Wt(h)}),d.promise}},n)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}uu=new WeakSet,ty=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj,a=this,l=this.actionHandler[e.action],c={enqueue(h,d=1,u){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:s,stream:Ve.ENQUEUE,streamId:t,chunk:h},u)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:Ve.CLOSE,streamId:t}),delete a.streamSinks[t])},error(h){Je(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:Ve.ERROR,streamId:t,reason:Wt(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise(function(h){h(l(e.data,c))}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:Ve.START_COMPLETE,streamId:t,success:!0})},function(h){i.postMessage({sourceName:n,targetName:s,stream:Ve.START_COMPLETE,streamId:t,reason:Wt(h)})})},fu=new WeakSet,ny=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case Ve.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Wt(e.reason));break;case Ve.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Wt(e.reason));break;case Ve.PULL:if(!l){i.postMessage({sourceName:n,targetName:s,stream:Ve.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,new Promise(function(c){var h;c((h=l.onPull)==null?void 0:h.call(l))}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:Ve.PULL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:n,targetName:s,stream:Ve.PULL_COMPLETE,streamId:t,reason:Wt(c)})});break;case Ve.ENQUEUE:if(Je(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Ve.CLOSE:if(Je(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),b(this,ba,rd).call(this,a,t);break;case Ve.ERROR:Je(a,"error should have stream controller"),a.controller.error(Wt(e.reason)),b(this,ba,rd).call(this,a,t);break;case Ve.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Wt(e.reason)),b(this,ba,rd).call(this,a,t);break;case Ve.CANCEL:if(!l)break;new Promise(function(c){var h;c((h=l.onCancel)==null?void 0:h.call(l,Wt(e.reason)))}).then(function(){i.postMessage({sourceName:n,targetName:s,stream:Ve.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:n,targetName:s,stream:Ve.CANCEL_COMPLETE,streamId:t,reason:Wt(c)})}),l.sinkCapability.reject(Wt(e.reason)),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},ba=new WeakSet,rd=async function(e,t){var n,s,i;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var qi,ac;class bT{constructor({parsedData:e,rawData:t}){p(this,qi,void 0);p(this,ac,void 0);v(this,qi,e),v(this,ac,t)}getRaw(){return o(this,ac)}get(e){return o(this,qi).get(e)??null}getAll(){return Bg(o(this,qi))}has(e){return o(this,qi).has(e)}}qi=new WeakMap,ac=new WeakMap;const Fs=Symbol("INTERNAL");var oc,lc,cc,ya;class yT{constructor(e,{name:t,intent:n,usage:s}){p(this,oc,!1);p(this,lc,!1);p(this,cc,!1);p(this,ya,!0);v(this,oc,!!(e&an.DISPLAY)),v(this,lc,!!(e&an.PRINT)),this.name=t,this.intent=n,this.usage=s}get visible(){if(o(this,cc))return o(this,ya);if(!o(this,ya))return!1;const{print:e,view:t}=this.usage;return o(this,oc)?(t==null?void 0:t.viewState)!=="OFF":o(this,lc)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==Fs&&Re("Internal method `_setVisible` called."),v(this,cc,n),v(this,ya,t)}}oc=new WeakMap,lc=new WeakMap,cc=new WeakMap,ya=new WeakMap;var Xs,Pe,Aa,_a,hc,qp;class AT{constructor(e,t=an.DISPLAY){p(this,hc);p(this,Xs,null);p(this,Pe,new Map);p(this,Aa,null);p(this,_a,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,v(this,_a,e.order);for(const n of e.groups)o(this,Pe).set(n.id,new yT(t,n));if(e.baseState==="OFF")for(const n of o(this,Pe).values())n._setVisible(Fs,!1);for(const n of e.on)o(this,Pe).get(n)._setVisible(Fs,!0);for(const n of e.off)o(this,Pe).get(n)._setVisible(Fs,!1);v(this,Aa,this.getHash())}}isVisible(e){if(o(this,Pe).size===0)return!0;if(!e)return _f("Optional content group not defined."),!0;if(e.type==="OCG")return o(this,Pe).has(e.id)?o(this,Pe).get(e.id).visible:(de(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return b(this,hc,qp).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!o(this,Pe).has(t))return de(`Optional content group not found: ${t}`),!0;if(o(this,Pe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!o(this,Pe).has(t))return de(`Optional content group not found: ${t}`),!0;if(!o(this,Pe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!o(this,Pe).has(t))return de(`Optional content group not found: ${t}`),!0;if(!o(this,Pe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!o(this,Pe).has(t))return de(`Optional content group not found: ${t}`),!0;if(o(this,Pe).get(t).visible)return!1}return!0}return de(`Unknown optional content policy ${e.policy}.`),!0}return de(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){const n=o(this,Pe).get(e);if(!n){de(`Optional content group not found: ${e}`);return}n._setVisible(Fs,!!t,!0),v(this,Xs,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const i=o(this,Pe).get(s);if(i)switch(n){case"ON":i._setVisible(Fs,!0);break;case"OFF":i._setVisible(Fs,!1);break;case"Toggle":i._setVisible(Fs,!i.visible);break}}v(this,Xs,null)}get hasInitialVisibility(){return o(this,Aa)===null||this.getHash()===o(this,Aa)}getOrder(){return o(this,Pe).size?o(this,_a)?o(this,_a).slice():[...o(this,Pe).keys()]:null}getGroups(){return o(this,Pe).size>0?Bg(o(this,Pe)):null}getGroup(e){return o(this,Pe).get(e)||null}getHash(){if(o(this,Xs)!==null)return o(this,Xs);const e=new Zb;for(const[t,n]of o(this,Pe))e.update(`${t}:${n.visible}`);return v(this,Xs,e.hexdigest())}}Xs=new WeakMap,Pe=new WeakMap,Aa=new WeakMap,_a=new WeakMap,hc=new WeakSet,qp=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=b(this,hc,qp).call(this,i);else if(o(this,Pe).has(i))a=o(this,Pe).get(i).visible;else return de(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class _T{constructor(e,{disableRange:t=!1,disableStream:n=!1}){Je(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=l,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),e.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(n),!0)});Je(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,i;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Je(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new ET(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new wT(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class ET{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=Gg(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class wT{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function xT(r){let e=!0,t=n("filename\\*","i").exec(r);if(t){t=t[1];let d=l(t);return d=unescape(d),d=c(d),d=h(d),i(d)}if(t=a(r),t){const d=h(t);return i(d)}if(t=n("filename","i").exec(r),t){t=t[1];let d=l(t);return d=h(d),i(d)}function n(d,u){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',u)}function s(d,u){if(d){if(!/^[\x00-\xFF]+$/.test(u))return u;try{const f=new TextDecoder(d,{fatal:!0}),g=wf(u);u=f.decode(g),e=!1}catch{}}return u}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function a(d){const u=[];let f;const g=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(d))!==null;){let[,A,E,_]=f;if(A=parseInt(A,10),A in u){if(A===0)break;continue}u[A]=[E,_]}const m=[];for(let A=0;A<u.length&&A in u;++A){let[E,_]=u[A];_=l(_),E&&(_=unescape(_),A===0&&(_=c(_))),m.push(_)}return m.join("")}function l(d){if(d.startsWith('"')){const u=d.slice(1).split('\\"');for(let f=0;f<u.length;++f){const g=u[f].indexOf('"');g!==-1&&(u[f]=u[f].slice(0,g),u.length=f+1),u[f]=u[f].replaceAll(/\\(.)/g,"$1")}d=u.join('"')}return d}function c(d){const u=d.indexOf("'");if(u===-1)return d;const f=d.slice(0,u),m=d.slice(u+1).replace(/^[^']*'/,"");return s(f,m)}function h(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(u,f,g,m){if(g==="q"||g==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,E){return String.fromCharCode(parseInt(E,16))}),s(f,m);try{m=atob(m)}catch{}return s(f,m)})}return""}function $g({getResponseHeader:r,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(r("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||n||!e||r("Accept-Ranges")!=="bytes"||(r("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function Xg(r){const e=r("Content-Disposition");if(e){let t=xT(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Gg(t))return t}return null}function Rf(r,e){return r===404||r===0&&e.startsWith("file:")?new jr('Missing PDF "'+e+'".'):new Ef(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r)}function sy(r){return r===200||r===206}function iy(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function ry(r){const e=new Headers;for(const t in r){const n=r[t];n!==void 0&&e.append(t,n)}return e}function ay(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(de(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class Vm{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Je(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new TT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new ST(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class TT{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=ry(this._stream.httpHeaders);const n=t.url;fetch(n,iy(this._headers,this._withCredentials,this._abortController)).then(s=>{if(!sy(s.status))throw Rf(s.status,n);this._reader=s.body.getReader(),this._headersCapability.resolve();const i=c=>s.headers.get(c),{allowRangeRequests:a,suggestedLength:l}=$g({getResponseHeader:i,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=Xg(i),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Br("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ay(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class ST{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=ry(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${n-1}`);const i=s.url;fetch(i,iy(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!sy(a.status))throw Rf(a.status,i);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:ay(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const sp=200,ip=206;function CT(r){const e=r.response;return typeof e!="string"?e:wf(e).buffer}class PT{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const s={begin:e,end:t};for(const i in n)s[i]=n[i];return this.request(s)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const i in this.httpHeaders){const a=this.httpHeaders[i];a!==void 0&&t.setRequestHeader(i,a)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=ip):s.expectedStatus=sp,t.responseType="arraybuffer",e.onError&&(t.onerror=function(i){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var s;const n=this.pendingRequests[e];n&&((s=n.onProgress)==null||s.call(n,t))}onStateChange(e,t){var c,h,d;const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){(c=n.onError)==null||c.call(n,s.status);return}const i=s.status||sp;if(!(i===sp&&n.expectedStatus===ip)&&i!==n.expectedStatus){(h=n.onError)==null||h.call(n,s.status);return}const l=CT(s);if(i===ip){const u=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);n.onDone({begin:parseInt(f[1],10),chunk:l})}else l?n.onDone({begin:0,chunk:l}):(d=n.onError)==null||d.call(n,s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class RT{constructor(e){this._source=e,this._manager=new PT(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Je(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new LT(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new DT(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class LT{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=a=>t.getResponseHeader(a),{allowRangeRequests:s,suggestedLength:i}=$g({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=i||this._contentLength,this._filename=Xg(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Rf(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class DT{constructor(e,t,n){this._manager=e;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=Rf(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const oy=/^file:\/\/\/[a-zA-Z]:\//;function kT(r){const e=Xn.get("url"),t=e.parse(r);return t.protocol==="file:"||t.host?t:/^[a-z]:[/\\]/i.test(r)?e.parse(`file:///${r}`):(t.host||(t.protocol="file:"),t)}class IT{constructor(e){this.source=e,this.url=kT(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Je(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new FT(this):new MT(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new OT(this,e,t):new NT(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class ly{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Br("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class cy{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Cd(r,e){return{protocol:r.protocol,auth:r.auth,host:r.hostname,port:r.port,path:r.path,method:"GET",headers:e}}class MT extends ly{constructor(e){super(e);const t=n=>{if(n.statusCode===404){const l=new jr(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(n);const s=l=>this._readableStream.headers[l.toLowerCase()],{allowRangeRequests:i,suggestedLength:a}=$g({getResponseHeader:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=a||this._contentLength,this._filename=Xg(s)};if(this._request=null,this._url.protocol==="http:"){const n=Xn.get("http");this._request=n.request(Cd(this._url,e.httpHeaders),t)}else{const n=Xn.get("https");this._request=n.request(Cd(this._url,e.httpHeaders),t)}this._request.on("error",n=>{this._storedError=n,this._headersCapability.reject(n)}),this._request.end()}}class NT extends cy{constructor(e,t,n){super(e),this._httpHeaders={};for(const i in e.httpHeaders){const a=e.httpHeaders[i];a!==void 0&&(this._httpHeaders[i]=a)}this._httpHeaders.Range=`bytes=${t}-${n-1}`;const s=i=>{if(i.statusCode===404){const a=new jr(`Missing PDF "${this._url}".`);this._storedError=a;return}this._setReadableStream(i)};if(this._request=null,this._url.protocol==="http:"){const i=Xn.get("http");this._request=i.request(Cd(this._url,this._httpHeaders),s)}else{const i=Xn.get("https");this._request=i.request(Cd(this._url,this._httpHeaders),s)}this._request.on("error",i=>{this._storedError=i}),this._request.end()}}class FT extends ly{constructor(e){super(e);let t=decodeURIComponent(this._url.path);oy.test(this._url.href)&&(t=t.replace(/^\//,""));const n=Xn.get("fs");n.promises.lstat(t).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new jr(`Missing PDF "${t}".`)),this._storedError=s,this._headersCapability.reject(s)})}}class OT extends cy{constructor(e,t,n){super(e);let s=decodeURIComponent(this._url.path);oy.test(this._url.href)&&(s=s.replace(/^\//,""));const i=Xn.get("fs");this._setReadableStream(i.createReadStream(s,{start:t,end:n-1}))}}const jT=1e5,kt=30,BT=.8;var hv,Ys,Mt,dc,uc,$i,gs,fc,pc,Xi,Ea,wa,Ks,xa,gc,Ta,Yi,mc,vc,Ft,Ki,Zi,Sa,pu,hy,gu,dy,bc,$p,Ca,ad,mu,uy;let Pd=(Ft=class{constructor({textContentSource:e,container:t,viewport:n}){p(this,pu);p(this,gu);p(this,bc);p(this,Ys,Promise.withResolvers());p(this,Mt,null);p(this,dc,!1);p(this,uc,!!((hv=globalThis.FontInspector)!=null&&hv.enabled));p(this,$i,null);p(this,gs,null);p(this,fc,0);p(this,pc,0);p(this,Xi,null);p(this,Ea,null);p(this,wa,0);p(this,Ks,0);p(this,xa,Object.create(null));p(this,gc,[]);p(this,Ta,null);p(this,Yi,[]);p(this,mc,new WeakMap);p(this,vc,null);if(e instanceof ReadableStream)v(this,Ta,e);else if(typeof e=="object")v(this,Ta,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');v(this,Mt,v(this,Ea,t)),v(this,Ks,n.scale*(globalThis.devicePixelRatio||1)),v(this,wa,n.rotation),v(this,gs,{prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:a,pageY:l}=n.rawDims;v(this,vc,[1,0,0,-1,-a,l+i]),v(this,pc,s),v(this,fc,i),Ir(t,n),o(this,Ys).promise.catch(()=>{}).then(()=>{o(Ft,Sa).delete(this),v(this,gs,null),v(this,xa,null)})}render(){const e=()=>{o(this,Xi).read().then(({value:t,done:n})=>{if(n){o(this,Ys).resolve();return}o(this,$i)??v(this,$i,t.lang),Object.assign(o(this,xa),t.styles),b(this,pu,hy).call(this,t.items),e()},o(this,Ys).reject)};return v(this,Xi,o(this,Ta).getReader()),o(Ft,Sa).add(this),e(),o(this,Ys).promise}update({viewport:e,onBefore:t=null}){var i;const n=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==o(this,wa)&&(t==null||t(),v(this,wa,s),Ir(o(this,Ea),{rotation:s})),n!==o(this,Ks)){t==null||t(),v(this,Ks,n);const a={prevFontSize:null,prevFontFamily:null,div:null,properties:null,ctx:b(i=Ft,Ca,ad).call(i,o(this,$i))};for(const l of o(this,Yi))a.properties=o(this,mc).get(l),a.div=l,b(this,bc,$p).call(this,a)}}cancel(){var t;const e=new Br("TextLayer task cancelled.");(t=o(this,Xi))==null||t.cancel(e).catch(()=>{}),v(this,Xi,null),o(this,Ys).reject(e)}get textDivs(){return o(this,Yi)}get textContentItemsStr(){return o(this,gc)}static cleanup(){if(!(o(this,Sa).size>0)){o(this,Ki).clear();for(const{canvas:e}of o(this,Zi).values())e.remove();o(this,Zi).clear()}}},Ys=new WeakMap,Mt=new WeakMap,dc=new WeakMap,uc=new WeakMap,$i=new WeakMap,gs=new WeakMap,fc=new WeakMap,pc=new WeakMap,Xi=new WeakMap,Ea=new WeakMap,wa=new WeakMap,Ks=new WeakMap,xa=new WeakMap,gc=new WeakMap,Ta=new WeakMap,Yi=new WeakMap,mc=new WeakMap,vc=new WeakMap,Ki=new WeakMap,Zi=new WeakMap,Sa=new WeakMap,pu=new WeakSet,hy=function(e){var s,i;if(o(this,dc))return;(i=o(this,gs)).ctx||(i.ctx=b(s=Ft,Ca,ad).call(s,o(this,$i)));const t=o(this,Yi),n=o(this,gc);for(const a of e){if(t.length>jT){de("Ignoring additional textDivs for performance reasons."),v(this,dc,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=o(this,Mt);v(this,Mt,document.createElement("span")),o(this,Mt).classList.add("markedContent"),a.id!==null&&o(this,Mt).setAttribute("id",`${a.id}`),l.append(o(this,Mt))}else a.type==="endMarkedContent"&&v(this,Mt,o(this,Mt).parentNode);continue}n.push(a.str),b(this,gu,dy).call(this,a)}},gu=new WeakSet,dy=function(e){var A;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};o(this,Yi).push(t);const s=Y.transform(o(this,vc),e.transform);let i=Math.atan2(s[1],s[0]);const a=o(this,xa)[e.fontName];a.vertical&&(i+=Math.PI/2);const l=o(this,uc)&&a.fontSubstitution||a.fontFamily,c=Math.hypot(s[2],s[3]),h=c*b(A=Ft,mu,uy).call(A,l,o(this,$i));let d,u;i===0?(d=s[4],u=s[5]-h):(d=s[4]+h*Math.sin(i),u=s[5]-h*Math.cos(i));const f="calc(var(--scale-factor)*",g=t.style;o(this,Mt)===o(this,Ea)?(g.left=`${(100*d/o(this,pc)).toFixed(2)}%`,g.top=`${(100*u/o(this,fc)).toFixed(2)}%`):(g.left=`${f}${d.toFixed(2)}px)`,g.top=`${f}${u.toFixed(2)}px)`),g.fontSize=`${f}${c.toFixed(2)}px)`,g.fontFamily=l,n.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,o(this,uc)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(n.angle=i*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),_=Math.abs(e.transform[3]);E!==_&&Math.max(E,_)/Math.min(E,_)>1.5&&(m=!0)}if(m&&(n.canvasWidth=a.vertical?e.height:e.width),o(this,mc).set(t,n),o(this,gs).div=t,o(this,gs).properties=n,b(this,bc,$p).call(this,o(this,gs)),n.hasText&&o(this,Mt).append(t),n.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),o(this,Mt).append(E)}},bc=new WeakSet,$p=function(e){const{div:t,properties:n,ctx:s,prevFontSize:i,prevFontFamily:a}=e,{style:l}=t;let c="";if(n.canvasWidth!==0&&n.hasText){const{fontFamily:h}=l,{canvasWidth:d,fontSize:u}=n;(i!==u||a!==h)&&(s.font=`${u*o(this,Ks)}px ${h}`,e.prevFontSize=u,e.prevFontFamily=h);const{width:f}=s.measureText(t.textContent);f>0&&(c=`scaleX(${d*o(this,Ks)/f})`)}n.angle!==0&&(c=`rotate(${n.angle}deg) ${c}`),c.length>0&&(l.transform=c)},Ca=new WeakSet,ad=function(e=null){let t=o(this,Zi).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1}),o(this,Zi).set(e,t)}return t},mu=new WeakSet,uy=function(e,t){const n=o(this,Ki).get(e);if(n)return n;const s=b(this,Ca,ad).call(this,t),i=s.font;s.canvas.width=s.canvas.height=kt,s.font=`${kt}px ${e}`;const a=s.measureText("");let l=a.fontBoundingBoxAscent,c=Math.abs(a.fontBoundingBoxDescent);if(l){const u=l/(l+c);return o(this,Ki).set(e,u),s.canvas.width=s.canvas.height=0,s.font=i,u}s.strokeStyle="red",s.clearRect(0,0,kt,kt),s.strokeText("g",0,0);let h=s.getImageData(0,0,kt,kt).data;c=0;for(let u=h.length-1-3;u>=0;u-=4)if(h[u]>0){c=Math.ceil(u/4/kt);break}s.clearRect(0,0,kt,kt),s.strokeText("A",0,kt),h=s.getImageData(0,0,kt,kt).data,l=0;for(let u=0,f=h.length;u<f;u+=4)if(h[u]>0){l=kt-Math.floor(u/4/kt);break}s.canvas.width=s.canvas.height=0,s.font=i;const d=l?l/(l+c):BT;return o(this,Ki).set(e,d),d},p(Ft,Ca),p(Ft,mu),p(Ft,Ki,new Map),p(Ft,Zi,new Map),p(Ft,Sa,new Set),Ft);function HT(){Cb("`renderTextLayer`, please use `TextLayer` instead.");const{textContentSource:r,container:e,viewport:t,...n}=arguments[0],s=Object.keys(n);s.length>0&&de("Ignoring `renderTextLayer` parameters: "+s.join(", "));const i=new Pd({textContentSource:r,container:e,viewport:t}),{textDivs:a,textContentItemsStr:l}=i;return{promise:i.render(),textDivs:a,textContentItemsStr:l}}function UT(){Cb("`updateTextLayer`, please use `TextLayer` instead.")}class ll{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(i){var c;if(!i)return;let a=null;const l=i.name;if(l==="#text")a=i.value;else if(ll.shouldBuildText(l))(c=i==null?void 0:i.attributes)!=null&&c.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const h of i.children)s(h)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const zT=65536,WT=100,GT=5e3,VT=_t?nT:Wx,qT=_t?sT:Tb,$T=_t?tT:zx,XT=_t?iT:Sb;function YT(r){if(typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r}),typeof r!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!r.url&&!r.data&&!r.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new Xp,{docId:t}=e,n=r.url?KT(r.url):null,s=r.data?ZT(r.data):null,i=r.httpHeaders||null,a=r.withCredentials===!0,l=r.password??null,c=r.range instanceof fy?r.range:null,h=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:zT;let d=r.worker instanceof Jr?r.worker:null;const u=r.verbosity,f=typeof r.docBaseUrl=="string"&&!Wg(r.docBaseUrl)?r.docBaseUrl:null,g=typeof r.cMapUrl=="string"?r.cMapUrl:null,m=r.cMapPacked!==!1,A=r.CMapReaderFactory||qT,E=typeof r.standardFontDataUrl=="string"?r.standardFontDataUrl:null,_=r.StandardFontDataFactory||XT,T=r.stopAtErrors!==!0,C=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,L=r.isEvalSupported!==!1,D=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!_t,I=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,N=typeof r.disableFontFace=="boolean"?r.disableFontFace:_t,w=r.fontExtraProperties===!0,x=r.enableXfa===!0,k=r.ownerDocument||globalThis.document,R=r.disableRange===!0,F=r.disableStream===!0,O=r.disableAutoFetch===!0,j=r.pdfBug===!0,q=c?c.length:r.length??NaN,X=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!_t&&!N,M=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:A===Tb&&_===Sb&&g&&E&&No(g,document.baseURI)&&No(E,document.baseURI),U=r.canvasFactory||new VT({ownerDocument:k}),z=r.filterFactory||new $T({docId:t,ownerDocument:k}),_e=null;Dx(u);const ee={canvasFactory:U,filterFactory:z};if(M||(ee.cMapReaderFactory=new A({baseUrl:g,isCompressed:m}),ee.standardFontDataFactory=new _({baseUrl:E})),!d){const ce={verbosity:u,port:Is.workerPort};d=ce.port?Jr.fromPort(ce):new Jr(ce),e._worker=d}const H={docId:t,apiVersion:"4.3.136",data:s,password:l,disableAutoFetch:O,rangeChunkSize:h,length:q,docBaseUrl:f,enableXfa:x,evaluatorOptions:{maxImageSize:C,disableFontFace:N,ignoreErrors:T,isEvalSupported:L,isOffscreenCanvasSupported:D,canvasMaxAreaInBytes:I,fontExtraProperties:w,useSystemFonts:X,cMapUrl:M?g:null,standardFontDataUrl:M?E:null}},W={disableFontFace:N,fontExtraProperties:w,ownerDocument:k,pdfBug:j,styleElement:_e,loadingParams:{disableAutoFetch:O,enableXfa:x}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ce=d.messageHandler.sendWithPromise("GetDocRequest",H,s?[s.buffer]:null);let K;return c?K=new _T(c,{disableRange:R,disableStream:F}):s||(K=(Z=>_t?function(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype}()&&No(Z.url)?new Vm(Z):new IT(Z):No(Z.url)?new Vm(Z):new RT(Z))({url:n,length:q,httpHeaders:i,withCredentials:a,rangeChunkSize:h,disableRange:R,disableStream:F})),ce.then(oe=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Z=new jo(t,oe,d.port),ue=new t1(Z,e,K,W,ee);e._transport=ue,Z.send("Ready",null)})}).catch(e._capability.reject),e}function KT(r){if(r instanceof URL)return r.href;try{return new URL(r,window.location).href}catch{if(_t&&typeof r=="string")return r}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ZT(r){if(_t&&typeof bm<"u"&&r instanceof bm)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return wf(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function qm(r){return typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0}var vu;const bu=class bu{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${zt(bu,vu)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};vu=new WeakMap,p(bu,vu,0);let Xp=bu,fy=class{constructor(e,t,n=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Re("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class JT{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ae(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Zs,ms,Js,$r,Pa,od;class QT{constructor(e,t,n,s=!1){p(this,Js);p(this,Pa);p(this,Zs,null);p(this,ms,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new km:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new py,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:i=!1}={}){return new Ih({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ae(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:s=js.ENABLE,transform:i=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:d=null}){var C,L;(C=this._stats)==null||C.time("Overall");const u=this._transport.getRenderingIntent(n,s,d),{renderingIntent:f,cacheKey:g}=u;v(this,ms,!1),b(this,Pa,od).call(this),l||(l=this._transport.getOptionalContentConfig(f));let m=this._intentStates.get(g);m||(m=Object.create(null),this._intentStates.set(g,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const A=!!(f&an.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(u));const E=D=>{var I;m.renderTasks.delete(_),(this._maybeCleanupAfterRender||A)&&v(this,ms,!0),b(this,Js,$r).call(this,!A),D?(_.capability.reject(D),this._abortOperatorList({intentState:m,reason:D instanceof Error?D:new Error(D)})):_.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new Kp({callback:E,params:{canvasContext:e,viewport:t,transform:i,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:h});(m.renderTasks||(m.renderTasks=new Set)).add(_);const T=_.task;return Promise.all([m.displayReadyCapability.promise,l]).then(([D,I])=>{var N;if(this.destroyed){E();return}if((N=this._stats)==null||N.time("Rendering"),!(I.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:D,optionalContentConfig:I}),_.operatorListChanged()}).catch(E),T}getOperatorList({intent:e="display",annotationMode:t=js.ENABLE,printAnnotationStorage:n=null}={}){var c;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const i=this._transport.getRenderingIntent(e,t,n,!0);let a=this._intentStates.get(i.cacheKey);a||(a=Object.create(null),this._intentStates.set(i.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(i)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>ll.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function i(){a.read().then(function({value:c,done:h}){if(h){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),i()},s)}const a=t.getReader(),l={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),v(this,ms,!1),b(this,Pa,od).call(this),Promise.all(e)}cleanup(e=!1){v(this,ms,!0);const t=b(this,Js,$r).call(this,!1);return e&&t&&this._stats&&(this._stats=new km),t}_startRenderPage(e,t){var s,i;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&b(this,Js,$r).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n}){const{map:s,transfer:i}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s},i).getReader(),c=this._intentStates.get(t);c.streamReader=l;const h=()=>{l.read().then(({value:d,done:u})=>{if(u){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),h())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const u of c.renderTasks)u.operatorListChanged();b(this,Js,$r).call(this,!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof zg){let s=WT;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Br(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Zs=new WeakMap,ms=new WeakMap,Js=new WeakSet,$r=function(e=!1){if(b(this,Pa,od).call(this),!o(this,ms)||this.destroyed)return!1;if(e)return v(this,Zs,setTimeout(()=>{v(this,Zs,null),b(this,Js,$r).call(this,!1)},GT)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),v(this,ms,!1),!0},Pa=new WeakSet,od=function(){o(this,Zs)&&(clearTimeout(o(this,Zs)),v(this,Zs,null))};var Ji,yu;class e1{constructor(){p(this,Ji,new Set);p(this,yu,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};o(this,yu).then(()=>{for(const s of o(this,Ji))s.call(this,n)})}addEventListener(e,t){o(this,Ji).add(t)}removeEventListener(e,t){o(this,Ji).delete(t)}terminate(){o(this,Ji).clear()}}Ji=new WeakMap,yu=new WeakMap;const is={isWorkerDisabled:!1,fakeWorkerId:0};_t&&(is.isWorkerDisabled=!0,Is.workerSrc||(Is.workerSrc="./pdf.worker.mjs")),is.isSameOrigin=function(r,e){let t;try{if(t=new URL(r),!t.origin||t.origin==="null")return!1}catch{return!1}const n=new URL(e,t);return t.origin===n.origin},is.createCDNWrapper=function(r){const e=`await import("${r}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};var Qi,Ra,ld;const Gt=class Gt{constructor({name:e=null,port:t=null,verbosity:n=kx()}={}){var s;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((s=o(Gt,Qi))!=null&&s.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(o(Gt,Qi)||v(Gt,Qi,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return _t?Promise.all([Xn.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new jo("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!is.isWorkerDisabled&&!o(Gt,Ra,ld)){let{workerSrc:e}=Gt;try{is.isSameOrigin(window.location.href,e)||(e=is.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new jo("main","worker",t),s=()=>{t.removeEventListener("error",i),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||s()};t.addEventListener("error",i),n.on("test",l=>{if(t.removeEventListener("error",i),this.destroyed){s();return}l?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())}),n.on("ready",l=>{if(t.removeEventListener("error",i),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};a();return}catch{_f("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){is.isWorkerDisabled||(de("Setting up fake worker."),is.isWorkerDisabled=!0),Gt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new e1;this._port=t;const n=`fake${is.fakeWorkerId++}`,s=new jo(n+"_worker",n,t);e.setup(s,t);const i=new jo(n,n+"_worker",t);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=o(Gt,Qi))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=o(this,Qi))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Gt(e)}static get workerSrc(){if(Is.workerSrc)return Is.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ae(this,"_setupFakeWorkerGlobal",(async()=>o(this,Ra,ld)?o(this,Ra,ld):(await import(this.workerSrc)).WorkerMessageHandler)())}};Qi=new WeakMap,Ra=new WeakSet,ld=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},p(Gt,Ra),p(Gt,Qi,void 0);let Jr=Gt;var vs,Fn,La,Da,On,er,Bo;class t1{constructor(e,t,n,s,i){p(this,er);p(this,vs,new Map);p(this,Fn,new Map);p(this,La,new Map);p(this,Da,new Map);p(this,On,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new py,this.fontLoader=new Qx({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ae(this,"annotationStorage",new qg)}getRenderingIntent(e,t=js.ENABLE,n=null,s=!1){let i=an.DISPLAY,a=Hp;switch(e){case"any":i=an.ANY;break;case"display":break;case"print":i=an.PRINT;break;default:de(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case js.DISABLE:i+=an.ANNOTATIONS_DISABLE;break;case js.ENABLE:break;case js.ENABLE_FORMS:i+=an.ANNOTATIONS_FORMS;break;case js.ENABLE_STORAGE:i+=an.ANNOTATIONS_STORAGE,a=(i&an.PRINT&&n instanceof Qb?n:this.annotationStorage).serializable;break;default:de(`getRenderingIntent - invalid annotationMode: ${t}`)}return s&&(i+=an.OPLIST),{renderingIntent:i,cacheKey:`${i}_${a.hash}`,annotationStorageSerializable:a}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=o(this,On))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of o(this,Fn).values())e.push(s._destroy());o(this,Fn).clear(),o(this,La).clear(),o(this,Da).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),o(this,vs).clear(),this.filterFactory.destroy(),Pd.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Br("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{Je(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}Je(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",n=>{const s=Promise.withResolvers(),i=this._fullReader;return i.headersReady.then(()=>{var a;(!i.isStreamingSupported||!i.isRangeSupported)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),i.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),s.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})},s.reject),s.promise}),e.on("GetRangeReader",(n,s)=>{Je(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:l}){if(l){s.close();return}Je(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new JT(n,this))}),e.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new gp(n.message,n.code);break;case"InvalidPDFException":s=new _b(n.message);break;case"MissingPDFException":s=new jr(n.message);break;case"UnexpectedResponseException":s=new Ef(n.message,n.status);break;case"UnknownErrorException":s=new mp(n.message,n.details);break;default:Re("DocException - expected a valid Error.")}t._capability.reject(s)}),e.on("PasswordRequest",n=>{if(v(this,On,Promise.withResolvers()),t.onPassword){const s=i=>{i instanceof Error?o(this,On).reject(i):o(this,On).resolve({password:i})};try{t.onPassword(s,n.code)}catch(i){o(this,On).reject(i)}}else o(this,On).reject(new gp(n.message,n.code));return o(this,On).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;o(this,Fn).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,i])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:l,fontExtraProperties:c,pdfBug:h}=this._params;if("error"in i){const g=i.error;de(`Error during font loading: ${g}`),this.commonObjs.resolve(n,g);break}const d=h&&((a=globalThis.FontInspector)!=null&&a.enabled)?(g,m)=>globalThis.FontInspector.fontAdded(g,m):null,u=new eT(i,{disableFontFace:l,inspectFont:d});this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c&&u.data&&(u.data=null),this.commonObjs.resolve(n,u)});break;case"CopyLocalImage":const{imageRef:f}=i;Je(f,"The imageRef must be defined.");for(const g of o(this,Fn).values())for(const[,m]of g.objs)if((m==null?void 0:m.ref)===f)return m.dataLen?(this.commonObjs.resolve(n,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,i,a])=>{var c;if(this.destroyed)return;const l=o(this,Fn).get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=a==null?void 0:a.bitmap)==null||c.close();return}switch(i){case"Image":l.objs.resolve(n,a),(a==null?void 0:a.dataLen)>Cx&&(l._maybeCleanupAfterRender=!0);break;case"Pattern":l.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&de("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=o(this,La).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&o(this,Da).set(i.refStr,e);const a=new QT(t,i,this,this._params.pdfBug);return o(this,Fn).set(t,a),a});return o(this,La).set(t,s),s}getPageIndex(e){return qm(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return b(this,er,Bo).call(this,"GetFieldObjects")}hasJSActions(){return b(this,er,Bo).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return b(this,er,Bo).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return b(this,er,Bo).call(this,"GetOptionalContentConfig").then(t=>new AT(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=o(this,vs).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,a;return{info:s[0],metadata:s[1]?new bT(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return o(this,vs).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of o(this,Fn).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),o(this,vs).clear(),this.filterFactory.destroy(!0),Pd.cleanup()}}cachedPageNumber(e){if(!qm(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return o(this,Da).get(t)??null}}vs=new WeakMap,Fn=new WeakMap,La=new WeakMap,Da=new WeakMap,On=new WeakMap,er=new WeakSet,Bo=function(e,t=null){const n=o(this,vs).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return o(this,vs).set(e,s),s};const Kh=Symbol("INITIAL_DATA");var gn,yc,Yp;class py{constructor(){p(this,yc);p(this,gn,Object.create(null))}get(e,t=null){if(t){const s=b(this,yc,Yp).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=o(this,gn)[e];if(!n||n.data===Kh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=o(this,gn)[e];return!!t&&t.data!==Kh}resolve(e,t=null){const n=b(this,yc,Yp).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in o(this,gn)){const{data:n}=o(this,gn)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}v(this,gn,Object.create(null))}*[Symbol.iterator](){for(const e in o(this,gn)){const{data:t}=o(this,gn)[e];t!==Kh&&(yield[e,t])}}}gn=new WeakMap,yc=new WeakSet,Yp=function(e){var t;return(t=o(this,gn))[e]||(t[e]={...Promise.withResolvers(),data:Kh})};var Qs;class n1{constructor(e){p(this,Qs,null);v(this,Qs,e),this.onContinue=null}get promise(){return o(this,Qs).capability.promise}cancel(e=0){o(this,Qs).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=o(this,Qs).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=o(this,Qs);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Qs=new WeakMap;var tr;const xi=class xi{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:l,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:f=null}){this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=u,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new n1(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,c;if(this.cancelled)return;if(this._canvas){if(o(xi,tr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");o(xi,tr).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:i,background:a}=this.params;this.gfx=new Zr(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),o(xi,tr).delete(this._canvas),this.callback(e||new zg(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),o(xi,tr).delete(this._canvas),this.callback())))}};tr=new WeakMap,p(xi,tr,new WeakSet);let Kp=xi;const s1="4.3.136",i1="0cec64437";function $m(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Do(r){return Math.max(0,Math.min(255,255*r))}class Xm{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Do(e),[e,e,e]}static G_HTML([e]){const t=$m(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Do)}static RGB_HTML(e){return`#${e.map($m).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[Do(1-Math.min(1,e+s)),Do(1-Math.min(1,n+s)),Do(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,i=1-t,a=1-n,l=Math.min(s,i,a);return["CMYK",s,i,a,l]}}class gy{static setupStorage(e,t,n,s,i){const a=s.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",l=>{s.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const l of n.children)l.attributes.value===a.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:h})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:i}){const{attributes:a}=t,l=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[c,h]of Object.entries(a))if(h!=null)switch(c){case"class":h.length&&e.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",h);break;case"style":Object.assign(e.style,h);break;case"textContent":e.textContent=h;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,h)}l&&i.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var u,f;const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:n});const l=i!=="richText",c=e.div;if(c.append(a),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=g}l&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);a.append(g),l&&ll.shouldBuildText(s.name)&&h.push(g)}return{textDivs:h}}const d=[[s,-1,a]];for(;d.length>0;){const[g,m,A]=d.at(-1);if(m+1===g.children.length){d.pop();continue}const E=g.children[++d.at(-1)[1]];if(E===null)continue;const{name:_}=E;if(_==="#text"){const C=document.createTextNode(E.value);h.push(C),A.append(C);continue}const T=(u=E==null?void 0:E.attributes)!=null&&u.xmlns?document.createElementNS(E.attributes.xmlns,_):document.createElement(_);if(A.append(T),E.attributes&&this.setAttributes({html:T,element:E,storage:t,intent:i,linkService:n}),((f=E.children)==null?void 0:f.length)>0)d.push([E,-1,T]);else if(E.value){const C=document.createTextNode(E.value);l&&ll.shouldBuildText(_)&&h.push(C),T.append(C)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Fh=1e3,r1=9,Nr=new WeakSet;function Ms(r){return{width:r[2]-r[0],height:r[3]-r[1]}}class a1{static create(e){switch(e.data.annotationType){case $e.LINK:return new my(e);case $e.TEXT:return new o1(e);case $e.WIDGET:switch(e.data.fieldType){case"Tx":return new l1(e);case"Btn":return e.data.radioButton?new yy(e):e.data.checkBox?new h1(e):new d1(e);case"Ch":return new u1(e);case"Sig":return new c1(e)}return new Hr(e);case $e.POPUP:return new Jp(e);case $e.FREETEXT:return new xy(e);case $e.LINE:return new p1(e);case $e.SQUARE:return new g1(e);case $e.CIRCLE:return new m1(e);case $e.POLYLINE:return new Ty(e);case $e.CARET:return new b1(e);case $e.INK:return new Sy(e);case $e.POLYGON:return new v1(e);case $e.HIGHLIGHT:return new y1(e);case $e.UNDERLINE:return new A1(e);case $e.SQUIGGLY:return new _1(e);case $e.STRIKEOUT:return new E1(e);case $e.STAMP:return new Cy(e);case $e.FILEATTACHMENT:return new w1(e);default:return new We(e)}}}var nr,ka,Ia,Ac,Zp;const rm=class rm{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){p(this,Ac);p(this,nr,null);p(this,ka,!1);p(this,Ia,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get hasPopupData(){return rm._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;o(this,nr)||v(this,nr,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&b(this,Ac,Zp).call(this,t),(n=o(this,Ia))==null||n.popup.updateEdited(e)}resetEdited(){var e;o(this,nr)&&(b(this,Ac,Zp).call(this,o(this,nr).rect),(e=o(this,Ia))==null||e.popup.resetEdited(),v(this,nr,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof Hr||(i.tabIndex=Fh);const{style:a}=i;if(a.zIndex=this.parent.zIndex++,t.popupRef&&i.setAttribute("aria-haspopup","dialog"),t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof Jp){const{rotation:A}=t;return!t.hasOwnCanvas&&A!==0&&this.setRotation(A,i),i}const{width:l,height:c}=Ms(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const A=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(A>0||E>0){const T=`calc(${A}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;a.borderRadius=T}else if(this instanceof yy){const T=`calc(${l}px * var(--scale-factor)) / calc(${c}px * var(--scale-factor))`;a.borderRadius=T}switch(t.borderStyle.style){case Ro.SOLID:a.borderStyle="solid";break;case Ro.DASHED:a.borderStyle="dashed";break;case Ro.BEVELED:de("Unimplemented border style: beveled");break;case Ro.INSET:de("Unimplemented border style: inset");break;case Ro.UNDERLINE:a.borderBottomStyle="solid";break}const _=t.borderColor||null;_?(v(this,ka,!0),a.borderColor=Y.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):a.borderWidth=0}const h=Y.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:d,pageHeight:u,pageX:f,pageY:g}=s.rawDims;a.left=`${100*(h[0]-f)/d}%`,a.top=`${100*(h[1]-g)/u}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(a.width=`${100*l/d}%`,a.height=`${100*c/u}%`):this.setRotation(m,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:i,height:a}=Ms(this.data.rect);let l,c;e%180===0?(l=100*i/n,c=100*a/s):(l=100*a/n,c=100*i/s),t.style.width=`${l}%`,t.style.height=`${c}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const i=s.detail[t],a=i[0],l=i.slice(1);s.target.style[n]=Xm[`${a}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:Xm[`${a}_rgb`](l)})};return Ae(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||n[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,i]of Object.entries(t)){const a=n[s];if(a){const l={detail:{[s]:i},target:e};a(l),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,i]=this.data.rect;if(e.length===1){const[,{x:A,y:E},{x:_,y:T}]=e[0];if(s===A&&i===E&&t===_&&n===T)return}const{style:a}=this.container;let l;if(o(this,ka)){const{borderColor:A,borderWidth:E}=a;a.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=s-t,h=i-n,{svgFactory:d}=this,u=d.createElement("svg");u.classList.add("quadrilateralsContainer"),u.setAttribute("width",0),u.setAttribute("height",0);const f=d.createElement("defs");u.append(f);const g=d.createElement("clipPath"),m=`clippath_${this.data.id}`;g.setAttribute("id",m),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(const[,{x:A,y:E},{x:_,y:T}]of e){const C=d.createElement("rect"),L=(_-t)/c,D=(i-E)/h,I=(A-_)/c,N=(E-T)/h;C.setAttribute("x",L),C.setAttribute("y",D),C.setAttribute("width",I),C.setAttribute("height",N),g.append(C),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${L}" y="${D}" width="${I}" height="${N}"/>`)}o(this,ka)&&(l.push("</g></svg>')"),a.backgroundImage=l.join("")),this.container.append(u),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const n=v(this,Ia,new Jp({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(n.render())}render(){Re("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:l}of s){if(i===-1||a===t)continue;const c=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!Nr.has(h)){de(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:c,domElement:h})}return n}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&Nr.has(s)&&n.push({id:a,exportValue:i,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};nr=new WeakMap,ka=new WeakMap,Ia=new WeakMap,Ac=new WeakSet,Zp=function(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...e);const{width:h,height:d}=Ms(e);t.left=`${100*(e[0]-l)/i}%`,t.top=`${100*(a-e[3]+c)/a}%`,s===0?(t.width=`${100*h/i}%`,t.height=`${100*d/a}%`):this.setRotation(s)};let We=rm;var bs,Ai,Au,vy,_u,by;class my extends We{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});p(this,bs);p(this,Au);p(this,_u);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action),i=!0):t.attachment?(b(this,Au,vy).call(this,s,t.attachment,t.attachmentDest),i=!0):t.setOCGState?(b(this,_u,by).call(this,s,t.setOCGState),i=!0):t.dest?(this._bindLink(s,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&b(this,bs,Ai).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),b(this,bs,Ai).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const a=s.get(i);a&&(t[a]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}t.onclick||(t.onclick=()=>!1),b(this,bs,Ai).call(this)}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),b(this,bs,Ai).call(this),!this._fieldObjects){de('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var u;s==null||s();const{fields:i,refs:a,include:l}=n,c=[];if(i.length!==0||a.length!==0){const f=new Set(a);for(const g of i){const m=this._fieldObjects[g]||[];for(const{id:A}of m)f.add(A)}for(const g of Object.values(this._fieldObjects))for(const m of g)f.has(m.id)===l&&c.push(m)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const h=this.annotationStorage,d=[];for(const f of c){const{id:g}=f;switch(d.push(g),f.type){case"text":{const A=f.defaultValue||"";h.setValue(g,{value:A});break}case"checkbox":case"radiobutton":{const A=f.defaultValue===f.exportValues;h.setValue(g,{value:A});break}case"combobox":case"listbox":{const A=f.defaultValue||"";h.setValue(g,{value:A});break}default:continue}const m=document.querySelector(`[data-element-id="${g}"]`);if(m){if(!Nr.has(m)){de(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((u=this.linkService.eventBus)==null||u.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}bs=new WeakSet,Ai=function(){this.container.setAttribute("data-internal-link","")},Au=new WeakSet,vy=function(t,n,s=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var i;return(i=this.downloadManager)==null||i.openOrDownloadData(n.content,n.filename,s),!1},b(this,bs,Ai).call(this)},_u=new WeakSet,by=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),b(this,bs,Ai).call(this)};class o1 extends We{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Hr extends We{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return jt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,i){n.includes("mouse")?e.addEventListener(n,a=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var l;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}i&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}}))})}_setEventListeners(e,t,n,s){var i,a,l;for(const[c,h]of n)(h==="Action"||(i=this.data.actions)!=null&&i[h])&&((h==="Focus"||h==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,h,s),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):h==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Y.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||r1,i=e.style;let a;const l=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),d=Math.round(h/(Qf*s))||1,u=h/d;a=Math.min(s,c(u/Qf))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);a=Math.min(s,c(h/Qf))}i.fontSize=`calc(${a}px * var(--scale-factor))`,i.color=Y.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class l1 extends Hr{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),i.setValue(a.id,{[s]:n})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let l=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",h??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),Nr.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Fh,this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),d.formattedValue=null}),n.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue??"";n.value=d.userValue=g,d.formattedValue=null});let u=f=>{const{formattedValue:g}=d;g!=null&&(f.target.value=g),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",g=>{var A;if(d.focused)return;const{target:m}=g;d.userValue&&(m.value=d.userValue),d.lastCommittedValue=m.value,d.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(d.focused=!0)}),n.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const m={value(A){d.userValue=A.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),A.target.value=d.userValue},formattedValue(A){const{formattedValue:E}=A.detail;d.formattedValue=E,E!=null&&A.target!==document.activeElement&&(A.target.value=E),e.setValue(t,{formattedValue:E})},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var C;const{charLimit:E}=A.detail,{target:_}=A;if(E===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",E);let T=d.userValue;!T||T.length<=E||(T=T.slice(0,E),_.value=d.userValue=T,e.setValue(t,{value:T}),(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(m,g)}),n.addEventListener("keydown",g=>{var E;d.commitKey=1;let m=-1;if(g.key==="Escape"?m=0:g.key==="Enter"&&!this.data.multiLine?m=2:g.key==="Tab"&&(d.commitKey=3),m===-1)return;const{value:A}=g.target;d.lastCommittedValue!==A&&(d.lastCommittedValue=A,d.userValue=A,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:m,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const f=u;u=null,n.addEventListener("blur",g=>{var A,E;if(!d.focused||!g.relatedTarget)return;(A=this.data.actions)!=null&&A.Blur||(d.focused=!1);const{value:m}=g.target;d.userValue=m,d.lastCommittedValue!==m&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:d.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),f(g)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",g=>{var D;d.lastCommittedValue=null;const{data:m,target:A}=g,{value:E,selectionStart:_,selectionEnd:T}=A;let C=_,L=T;switch(g.inputType){case"deleteWordBackward":{const I=E.substring(0,_).match(/\w*[^\w]*$/);I&&(C-=I[0].length);break}case"deleteWordForward":{const I=E.substring(_).match(/^[^\w]*\w*/);I&&(L+=I[0].length);break}case"deleteContentBackward":_===T&&(C-=1);break;case"deleteContentForward":_===T&&(L+=1);break}g.preventDefault(),(D=this.linkService.eventBus)==null||D.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:m||"",willCommit:!1,selStart:C,selEnd:L}})}),this._setEventListeners(n,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(u&&n.addEventListener("blur",u),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${g}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class c1 extends Hr{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class h1 extends Hr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Nr.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=Fh,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const h of this._getElementsByName(l,n)){const d=c&&h.exportValue===t.exportValue;h.domElement&&(h.domElement.checked=d),e.setValue(h.id,{value:d})}e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue||"Off";a.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class yy extends Hr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Nr.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=Fh,i.addEventListener("change",a=>{const{name:l,checked:c}=a.target;for(const h of this._getElementsByName(l,n))e.setValue(h.id,{value:!1});e.setValue(n,{value:c})}),i.addEventListener("resetform",a=>{const l=t.defaultFieldValue;a.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",l=>{const c={value:h=>{const d=a===h.detail.value;for(const u of this._getElementsByName(h.target.name)){const f=d&&u.id===n;u.domElement&&(u.domElement.checked=f),e.setValue(u.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class d1 extends my{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class u1 extends Hr{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Nr.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Fh;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const u=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===u});for(const d of this.data.options){const u=document.createElement("option");u.textContent=d.displayValue,u.value=d.exportValue,n.value.includes(d.exportValue)&&(u.setAttribute("selected",!0),i=!1),s.append(u)}let a=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),a=()=>{d.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const l=d=>{const u=d?"value":"textContent",{options:f,multiple:g}=s;return g?Array.prototype.filter.call(f,m=>m.selected).map(m=>m[u]):f.selectedIndex===-1?null:f[f.selectedIndex][u]};let c=l(!1);const h=d=>{const u=d.target.options;return Array.prototype.map.call(u,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const u={value(f){a==null||a();const g=f.detail.value,m=new Set(Array.isArray(g)?g:[g]);for(const A of s.options)A.selected=m.has(A.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(f){s.multiple=!0},remove(f){const g=s.options,m=f.detail.remove;g[m].selected=!1,s.remove(m),g.length>0&&Array.prototype.findIndex.call(g,E=>E.selected)===-1&&(g[0].selected=!0),e.setValue(t,{value:l(!0),items:h(f)}),c=l(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(f){const{index:g,displayValue:m,exportValue:A}=f.detail.insert,E=s.children[g],_=document.createElement("option");_.textContent=m,_.value=A,E?E.before(_):s.append(_),e.setValue(t,{value:l(!0),items:h(f)}),c=l(!1)},items(f){const{items:g}=f.detail;for(;s.length!==0;)s.remove(0);for(const m of g){const{displayValue:A,exportValue:E}=m,_=document.createElement("option");_.textContent=A,_.value=E,s.append(_)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:l(!0),items:h(f)}),c=l(!1)},indices(f){const g=new Set(f.detail.indices);for(const m of f.target.options)m.selected=g.has(m.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(u,d)}),s.addEventListener("input",d=>{var g;const u=l(!0),f=l(!1);e.setValue(t,{value:u}),d.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:u,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Jp extends We{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:We._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new f1({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${wb}${n}`).join(",")),this.container}}var Ma,Eu,wu,Na,sr,He,ys,ir,_c,Ec,Fa,As,mn,_s,wc,Es,xc,rr,ar,Oa,cd,Tc,Qp,xu,Ay,Tu,_y,Su,Ey,Cu,wy,ja,hd,Ba,dd,Sc,eg;class f1{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:i,contentsObj:a,richText:l,parent:c,rect:h,parentRect:d,open:u}){p(this,Oa);p(this,Tc);p(this,xu);p(this,Tu);p(this,Su);p(this,Cu);p(this,ja);p(this,Ba);p(this,Sc);p(this,Ma,b(this,Su,Ey).bind(this));p(this,Eu,b(this,Sc,eg).bind(this));p(this,wu,b(this,Ba,dd).bind(this));p(this,Na,b(this,ja,hd).bind(this));p(this,sr,null);p(this,He,null);p(this,ys,null);p(this,ir,null);p(this,_c,null);p(this,Ec,null);p(this,Fa,null);p(this,As,!1);p(this,mn,null);p(this,_s,null);p(this,wc,null);p(this,Es,null);p(this,xc,null);p(this,rr,null);p(this,ar,!1);var f;v(this,He,e),v(this,xc,s),v(this,ys,a),v(this,Es,l),v(this,Ec,c),v(this,sr,t),v(this,wc,h),v(this,Fa,d),v(this,_c,n),v(this,ir,Pb.toDateObject(i)),this.trigger=n.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",o(this,Na)),g.addEventListener("mouseenter",o(this,wu)),g.addEventListener("mouseleave",o(this,Eu)),g.classList.add("popupTriggerArea");for(const g of n)(f=g.container)==null||f.addEventListener("keydown",o(this,Ma));o(this,He).hidden=!0,u&&b(this,ja,hd).call(this)}render(){if(o(this,mn))return;const e=v(this,mn,document.createElement("div"));if(e.className="popup",o(this,sr)){const i=e.style.outlineColor=Y.makeHexColor(...o(this,sr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`:e.style.backgroundColor=Y.makeHexColor(...o(this,sr).map(l=>Math.floor(.7*(255-l)+l)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=o(this,xc),e.append(t),o(this,ir)){const i=document.createElement("span");i.classList.add("popupDate"),i.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),i.setAttribute("data-l10n-args",JSON.stringify({date:o(this,ir).toLocaleDateString(),time:o(this,ir).toLocaleTimeString()})),t.append(i)}const s=o(this,Oa,cd);if(s)gy.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const i=this._formatContents(o(this,ys));e.append(i)}o(this,He).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let i=0,a=s.length;i<a;++i){const l=s[i];n.append(document.createTextNode(l)),i<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;o(this,rr)||v(this,rr,{contentsObj:o(this,ys),richText:o(this,Es)}),e&&v(this,_s,null),t&&(v(this,Es,b(this,Tu,_y).call(this,t)),v(this,ys,null)),(n=o(this,mn))==null||n.remove(),v(this,mn,null)}resetEdited(){var e;o(this,rr)&&({contentsObj:zt(this,ys)._,richText:zt(this,Es)._}=o(this,rr),v(this,rr,null),(e=o(this,mn))==null||e.remove(),v(this,mn,null),v(this,_s,null))}forceHide(){v(this,ar,this.isVisible),o(this,ar)&&(o(this,He).hidden=!0)}maybeShow(){o(this,ar)&&(o(this,mn)||b(this,Ba,dd).call(this),v(this,ar,!1),o(this,He).hidden=!1)}get isVisible(){return o(this,He).hidden===!1}}Ma=new WeakMap,Eu=new WeakMap,wu=new WeakMap,Na=new WeakMap,sr=new WeakMap,He=new WeakMap,ys=new WeakMap,ir=new WeakMap,_c=new WeakMap,Ec=new WeakMap,Fa=new WeakMap,As=new WeakMap,mn=new WeakMap,_s=new WeakMap,wc=new WeakMap,Es=new WeakMap,xc=new WeakMap,rr=new WeakMap,ar=new WeakMap,Oa=new WeakSet,cd=function(){const e=o(this,Es),t=o(this,ys);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&o(this,Es).html||null},Tc=new WeakSet,Qp=function(){var e,t,n;return((n=(t=(e=o(this,Oa,cd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},xu=new WeakSet,Ay=function(){var e,t,n;return((n=(t=(e=o(this,Oa,cd))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},Tu=new WeakSet,_y=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:o(this,xu,Ay),fontSize:o(this,Tc,Qp)?`calc(${o(this,Tc,Qp)}px * var(--scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return n},Su=new WeakSet,Ey=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&o(this,As))&&b(this,ja,hd).call(this)},Cu=new WeakSet,wy=function(){if(o(this,_s)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:i}}}=o(this,Ec);let a=!!o(this,Fa),l=a?o(this,Fa):o(this,wc);for(const m of o(this,_c))if(!l||Y.intersect(m.data.rect,l)!==null){l=m.data.rect,a=!0;break}const c=Y.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),d=a?l[2]-l[0]+5:0,u=c[0]+d,f=c[1];v(this,_s,[100*(u-s)/t,100*(f-i)/n]);const{style:g}=o(this,He);g.left=`${o(this,_s)[0]}%`,g.top=`${o(this,_s)[1]}%`},ja=new WeakSet,hd=function(){v(this,As,!o(this,As)),o(this,As)?(b(this,Ba,dd).call(this),o(this,He).addEventListener("click",o(this,Na)),o(this,He).addEventListener("keydown",o(this,Ma))):(b(this,Sc,eg).call(this),o(this,He).removeEventListener("click",o(this,Na)),o(this,He).removeEventListener("keydown",o(this,Ma)))},Ba=new WeakSet,dd=function(){o(this,mn)||this.render(),this.isVisible?o(this,As)&&o(this,He).classList.add("focused"):(b(this,Cu,wy).call(this),o(this,He).hidden=!1,o(this,He).style.zIndex=parseInt(o(this,He).style.zIndex)+1e3)},Sc=new WeakSet,eg=function(){o(this,He).classList.remove("focused"),!(o(this,As)||!this.isVisible)&&(o(this,He).hidden=!0,o(this,He).style.zIndex=parseInt(o(this,He).style.zIndex)-1e3)};class xy extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=be.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}var Cc;class p1 extends We{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,Cc,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:s}=Ms(t.rect),i=this.svgFactory.create(n,s,!0),a=v(this,Cc,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Cc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cc=new WeakMap;var Pc;class g1 extends We{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,Pc,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:s}=Ms(t.rect),i=this.svgFactory.create(n,s,!0),a=t.borderStyle.width,l=v(this,Pc,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",a/2),l.setAttribute("y",a/2),l.setAttribute("width",n-a),l.setAttribute("height",s-a),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Pc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pc=new WeakMap;var Rc;class m1 extends We{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,Rc,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:s}=Ms(t.rect),i=this.svgFactory.create(n,s,!0),a=t.borderStyle.width,l=v(this,Rc,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-a/2),l.setAttribute("ry",s/2-a/2),l.setAttribute("stroke-width",a||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Rc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rc=new WeakMap;var Lc;class Ty extends We{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,Lc,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:n,height:s}=Ms(t.rect),i=this.svgFactory.create(n,s,!0);let a=[];for(const c of t.vertices){const h=c.x-t.rect[0],d=t.rect[3]-c.y;a.push(h+","+d)}a=a.join(" ");const l=v(this,Lc,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",a),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),i.append(l),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return o(this,Lc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Lc=new WeakMap;class v1 extends Ty{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class b1 extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Dc;class Sy extends We{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,Dc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=be.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:n,height:s}=Ms(t.rect),i=this.svgFactory.create(n,s,!0);for(const a of t.inkLists){let l=[];for(const h of a){const d=h.x-t.rect[0],u=t.rect[3]-h.y;l.push(`${d},${u}`)}l=l.join(" ");const c=this.svgFactory.createElement(this.svgElementName);o(this,Dc).push(c),c.setAttribute("points",l),c.setAttribute("stroke-width",t.borderStyle.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),i.append(c)}return this.container.append(i),this.container}getElementsToTriggerPopup(){return o(this,Dc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Dc=new WeakMap;class y1 extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class A1 extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class _1 extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class E1 extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Cy extends We{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var kc,Ic,tg;class w1 extends We{constructor(t){var s;super(t,{isRenderable:!0});p(this,Ic);p(this,kc,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",b(this,Ic,tg).bind(this)),v(this,kc,s);const{isMac:i}=jt.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&b(this,Ic,tg).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return o(this,kc)}addHighlightArea(){this.container.classList.add("highlightArea")}}kc=new WeakMap,Ic=new WeakSet,tg=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Mc,or,Ha,Pu,Py,Nc,ng,dv;let x1=(dv=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:i,viewport:a}){p(this,Pu);p(this,Nc);p(this,Mc,null);p(this,or,null);p(this,Ha,new Map);this.div=e,v(this,Mc,t),v(this,or,n),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}async render(e){var a;const{annotations:t}=e,n=this.div;Ir(n,this.viewport);const s=new Map,i={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Ug,annotationStorage:e.annotationStorage||new qg,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of t){if(l.noHTML)continue;const c=l.annotationType===$e.POPUP;if(c){const u=s.get(l.id);if(!u)continue;i.elements=u}else{const{width:u,height:f}=Ms(l.rect);if(u<=0||f<=0)continue}i.data=l;const h=a1.create(i);if(!h.isRenderable)continue;if(!c&&l.popupRef){const u=s.get(l.popupRef);u?u.push(h):s.set(l.popupRef,[h])}const d=h.render();l.hidden&&(d.style.visibility="hidden"),b(this,Pu,Py).call(this,d,l.id),h.annotationEditorType>0&&(o(this,Ha).set(h.data.id,h),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(h))}b(this,Nc,ng).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,Ir(t,{rotation:e.rotation}),b(this,Nc,ng).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(o(this,Ha).values())}getEditableAnnotation(e){return o(this,Ha).get(e)}},Mc=new WeakMap,or=new WeakMap,Ha=new WeakMap,Pu=new WeakSet,Py=function(e,t){var s;const n=e.firstChild||e;n.id=`${wb}${t}`,this.div.append(e),(s=o(this,Mc))==null||s.moveElementInDOM(this.div,e,n,!1)},Nc=new WeakSet,ng=function(){if(!o(this,or))return;const e=this.div;for(const[t,n]of o(this,or)){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:i}=s;i?i.nodeName==="CANVAS"?i.replaceWith(n):i.classList.contains("annotationContent")?i.after(n):i.before(n):s.append(n)}o(this,or).clear()},dv);const Zh=/\r\n?|\n/g;var Fc,Oc,jc,Bc,Hc,vn,qt,Uc,$t,Ua,Ru,Ry,Lu,Ly,Du,Dy,za,ud,Wa,fd,Ga,pd,ku,ky,zc,ig,Iu,Iy;const De=class De extends Se{constructor(t){super({...t,name:"freeTextEditor"});p(this,Ru);p(this,Lu);p(this,Du);p(this,za);p(this,Ga);p(this,ku);p(this,Iu);p(this,Fc,this.editorDivBlur.bind(this));p(this,Oc,this.editorDivFocus.bind(this));p(this,jc,this.editorDivInput.bind(this));p(this,Bc,this.editorDivKeydown.bind(this));p(this,Hc,this.editorDivPaste.bind(this));p(this,vn,void 0);p(this,qt,"");p(this,Uc,`${this.id}-editor`);p(this,$t,void 0);p(this,Ua,null);v(this,vn,t.color||De._defaultColor||Se._defaultLineColor),v(this,$t,t.fontSize||De._defaultFontSize)}static get _keyboardManager(){const t=De.prototype,n=a=>a.isEmpty(),s=Mr.TRANSLATE_SMALL,i=Mr.TRANSLATE_BIG;return Ae(this,"_keyboardManager",new Mh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(t,n){Se.initialize(t,n,{strings:["pdfjs-free-text-default-content"]});const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case ie.FREETEXT_SIZE:De._defaultFontSize=n;break;case ie.FREETEXT_COLOR:De._defaultColor=n;break}}updateParams(t,n){switch(t){case ie.FREETEXT_SIZE:b(this,Ru,Ry).call(this,n);break;case ie.FREETEXT_COLOR:b(this,Lu,Ly).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ie.FREETEXT_SIZE,De._defaultFontSize],[ie.FREETEXT_COLOR,De._defaultColor||Se._defaultLineColor]]}get propertiesToUpdate(){return[[ie.FREETEXT_SIZE,o(this,$t)],[ie.FREETEXT_COLOR,o(this,vn)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-De._internalPadding*t,-(De._internalPadding+o(this,$t))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(be.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",o(this,Bc)),this.editorDiv.addEventListener("focus",o(this,Oc)),this.editorDiv.addEventListener("blur",o(this,Fc)),this.editorDiv.addEventListener("input",o(this,jc)),this.editorDiv.addEventListener("paste",o(this,Hc)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",o(this,Uc)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",o(this,Bc)),this.editorDiv.removeEventListener("focus",o(this,Oc)),this.editorDiv.removeEventListener("blur",o(this,Fc)),this.editorDiv.removeEventListener("input",o(this,jc)),this.editorDiv.removeEventListener("paste",o(this,Hc)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=o(this,qt),n=v(this,qt,b(this,Du,Dy).call(this).trimEnd());if(t===n)return;const s=i=>{if(v(this,qt,i),!i){this.remove();return}b(this,Ga,pd).call(this),this._uiManager.rebuild(this),b(this,za,ud).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),b(this,za,ud).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){De._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",o(this,Uc)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),Se._l10nPromise.get("pdfjs-free-text-default-content").then(i=>{var a;return(a=this.editorDiv)==null?void 0:a.setAttribute("default-content",i)}),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${o(this,$t)}px * var(--scale-factor))`,s.color=o(this,vn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Td(this,this.div,["dblclick","keydown"]),this.width){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:l}=o(this,Ua);let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[d,u]=this.pageDimensions,[f,g]=this.pageTranslation;let m,A;switch(this.rotation){case 0:m=t+(l[0]-f)/d,A=n+this.height-(l[1]-g)/u;break;case 90:m=t+(l[0]-f)/d,A=n-(l[1]-g)/u,[c,h]=[h,-c];break;case 180:m=t-this.width+(l[0]-f)/d,A=n-(l[1]-g)/u,[c,h]=[-c,-h];break;case 270:m=t+(l[0]-f-this.height*u)/d,A=n+(l[1]-g-this.width*d)/u,[c,h]=[-h,c];break}this.setAt(m*i,A*a,c,h)}else this.setAt(t*i,n*a,this.width*i,this.height*a);b(this,Ga,pd).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,A,E;const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=b(m=De,zc,ig).call(m,n.getData("text")||"").replaceAll(Zh,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const l=a.getRangeAt(0);if(!i.includes(`
`)){l.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:c,startOffset:h}=l,d=[],u=[];if(c.nodeType===Node.TEXT_NODE){const _=c.parentElement;if(u.push(c.nodeValue.slice(h).replaceAll(Zh,"")),_!==this.editorDiv){let T=d;for(const C of this.editorDiv.childNodes){if(C===_){T=u;continue}T.push(b(A=De,Wa,fd).call(A,C))}}d.push(c.nodeValue.slice(0,h).replaceAll(Zh,""))}else if(c===this.editorDiv){let _=d,T=0;for(const C of this.editorDiv.childNodes)T++===h&&(_=u),_.push(b(E=De,Wa,fd).call(E,C))}v(this,qt,`${d.join(`
`)}${i}${u.join(`
`)}`),b(this,Ga,pd).call(this);const f=new Range;let g=d.reduce((_,T)=>_+T.length,0);for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const T=_.nodeValue.length;if(g<=T){f.setStart(_,g),f.setEnd(_,g);break}g-=T}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static deserialize(t,n,s){var l;let i=null;if(t instanceof xy){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:u,id:f},textContent:g,textPosition:m,parent:{page:{pageNumber:A}}}=t;if(!g||g.length===0)return null;i=t={annotationType:be.FREETEXT,color:Array.from(h),fontSize:c,value:g.join(`
`),position:m,pageIndex:A-1,rect:d.slice(0),rotation:u,id:f,deleted:!1}}const a=super.deserialize(t,n,s);return v(a,$t,t.fontSize),v(a,vn,Y.makeHexColor(...t.color)),v(a,qt,b(l=De,zc,ig).call(l,t.value)),a.annotationElementId=t.id||null,v(a,Ua,i),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const n=De._internalPadding*this.parentScale,s=this.getRect(n,n),i=Se._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:o(this,vn)),a={annotationType:be.FREETEXT,color:i,fontSize:o(this,$t),value:b(this,ku,ky).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!b(this,Iu,Iy).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${o(this,$t)}px * var(--scale-factor))`,s.color=o(this,vn),n.replaceChildren();for(const a of o(this,qt).split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),n.append(l)}const i=De._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(i,i),popupContent:o(this,qt)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Fc=new WeakMap,Oc=new WeakMap,jc=new WeakMap,Bc=new WeakMap,Hc=new WeakMap,vn=new WeakMap,qt=new WeakMap,Uc=new WeakMap,$t=new WeakMap,Ua=new WeakMap,Ru=new WeakSet,Ry=function(t){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--scale-factor))`,this.translate(0,-(i-o(this,$t))*this.parentScale),v(this,$t,i),b(this,za,ud).call(this)},s=o(this,$t);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Lu=new WeakSet,Ly=function(t){const n=i=>{v(this,vn,this.editorDiv.style.color=i)},s=o(this,vn);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Du=new WeakSet,Dy=function(){var n;const t=[];this.editorDiv.normalize();for(const s of this.editorDiv.childNodes)t.push(b(n=De,Wa,fd).call(n,s));return t.join(`
`)},za=new WeakSet,ud=function(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,l=a.style.display,c=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=l,a.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()},Wa=new WeakSet,fd=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Zh,"")},Ga=new WeakSet,pd=function(){if(this.editorDiv.replaceChildren(),!!o(this,qt))for(const t of o(this,qt).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},ku=new WeakSet,ky=function(){return o(this,qt).replaceAll(" "," ")},zc=new WeakSet,ig=function(t){return t.replaceAll(" "," ")},Iu=new WeakSet,Iy=function(t){const{value:n,fontSize:s,color:i,pageIndex:a}=o(this,Ua);return this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((l,c)=>l!==i[c])||t.pageIndex!==a},p(De,Wa),p(De,zc),re(De,"_freeTextDefaultContent",""),re(De,"_internalPadding",0),re(De,"_defaultColor",null),re(De,"_defaultFontSize",10),re(De,"_type","freetext"),re(De,"_editorType",be.FREETEXT);let sg=De;var Wc,ei,bn,Mu,My,Va,gd,Nu,Ny,Fu,Fy,Gc,ag;class rg{constructor(e,t=0,n=0,s=!0){p(this,Mu);p(this,Va);p(this,Nu);p(this,Fu);p(this,Gc);p(this,Wc,void 0);p(this,ei,[]);p(this,bn,[]);let i=1/0,a=-1/0,l=1/0,c=-1/0;const d=10**-4;for(const{x:_,y:T,width:C,height:L}of e){const D=Math.floor((_-t)/d)*d,I=Math.ceil((_+C+t)/d)*d,N=Math.floor((T-t)/d)*d,w=Math.ceil((T+L+t)/d)*d,x=[D,N,w,!0],k=[I,N,w,!1];o(this,ei).push(x,k),i=Math.min(i,D),a=Math.max(a,I),l=Math.min(l,N),c=Math.max(c,w)}const u=a-i+2*n,f=c-l+2*n,g=i-n,m=l-n,A=o(this,ei).at(s?-1:-2),E=[A[0],A[2]];for(const _ of o(this,ei)){const[T,C,L]=_;_[0]=(T-g)/u,_[1]=(C-m)/f,_[2]=(L-m)/f}v(this,Wc,{x:g,y:m,width:u,height:f,lastPoint:E})}getOutlines(){o(this,ei).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of o(this,ei))t[3]?(e.push(...b(this,Gc,ag).call(this,t)),b(this,Nu,Ny).call(this,t)):(b(this,Fu,Fy).call(this,t),e.push(...b(this,Gc,ag).call(this,t)));return b(this,Mu,My).call(this,e)}}Wc=new WeakMap,ei=new WeakMap,bn=new WeakMap,Mu=new WeakSet,My=function(e){const t=[],n=new Set;for(const a of e){const[l,c,h]=a;t.push([l,c,a],[l,h,a])}t.sort((a,l)=>a[1]-l[1]||a[0]-l[0]);for(let a=0,l=t.length;a<l;a+=2){const c=t[a][2],h=t[a+1][2];c.push(h),h.push(c),n.add(c),n.add(h)}const s=[];let i;for(;n.size>0;){const a=n.values().next().value;let[l,c,h,d,u]=a;n.delete(a);let f=l,g=c;for(i=[l,h],s.push(i);;){let m;if(n.has(d))m=d;else if(n.has(u))m=u;else break;n.delete(m),[l,c,h,d,u]=m,f!==l&&(i.push(f,g,l,g===c?c:h),f=l),g=g===c?h:c}i.push(f,g)}return new T1(s,o(this,Wc))},Va=new WeakSet,gd=function(e){const t=o(this,bn);let n=0,s=t.length-1;for(;n<=s;){const i=n+s>>1,a=t[i][0];if(a===e)return i;a<e?n=i+1:s=i-1}return s+1},Nu=new WeakSet,Ny=function([,e,t]){const n=b(this,Va,gd).call(this,e);o(this,bn).splice(n,0,[e,t])},Fu=new WeakSet,Fy=function([,e,t]){const n=b(this,Va,gd).call(this,e);for(let s=n;s<o(this,bn).length;s++){const[i,a]=o(this,bn)[s];if(i!==e)break;if(i===e&&a===t){o(this,bn).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[i,a]=o(this,bn)[s];if(i!==e)break;if(i===e&&a===t){o(this,bn).splice(s,1);return}}},Gc=new WeakSet,ag=function(e){const[t,n,s]=e,i=[[t,n,s]],a=b(this,Va,gd).call(this,s);for(let l=0;l<a;l++){const[c,h]=o(this,bn)[l];for(let d=0,u=i.length;d<u;d++){const[,f,g]=i[d];if(!(h<=f||g<=c)){if(f>=c){if(g>h)i[d][1]=h;else{if(u===1)return[];i.splice(d,1),d--,u--}continue}i[d][2]=c,g>h&&i.push([t,h,g])}}}return i};class Oy{toSVGPath(){throw new Error("Abstract method `toSVGPath` must be implemented.")}get box(){throw new Error("Abstract getter `box` must be implemented.")}serialize(e,t){throw new Error("Abstract method `serialize` must be implemented.")}get free(){return this instanceof lg}}var Vc,qa;class T1 extends Oy{constructor(t,n){super();p(this,Vc,void 0);p(this,qa,void 0);v(this,qa,t),v(this,Vc,n)}toSVGPath(){const t=[];for(const n of o(this,qa)){let[s,i]=n;t.push(`M${s} ${i}`);for(let a=2;a<n.length;a+=2){const l=n[a],c=n[a+1];l===s?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,n,s,i],a){const l=[],c=s-t,h=i-n;for(const d of o(this,qa)){const u=new Array(d.length);for(let f=0;f<d.length;f+=2)u[f]=t+d[f]*c,u[f+1]=i-d[f+1]*h;l.push(u)}return l}get box(){return o(this,Vc)}}Vc=new WeakMap,qa=new WeakMap;var jn,ws,$a,Xa,Bn,me,lr,cr,qc,$c,Ya,Ka,ti,Xc,Ou,ju,Yc,og;const ss=class ss{constructor({x:e,y:t},n,s,i,a,l=0){p(this,Yc);p(this,jn,void 0);p(this,ws,[]);p(this,$a,void 0);p(this,Xa,void 0);p(this,Bn,[]);p(this,me,new Float64Array(18));p(this,lr,void 0);p(this,cr,void 0);p(this,qc,void 0);p(this,$c,void 0);p(this,Ya,void 0);p(this,Ka,void 0);p(this,ti,[]);v(this,jn,n),v(this,Ka,i*s),v(this,Xa,a),o(this,me).set([NaN,NaN,NaN,NaN,e,t],6),v(this,$a,l),v(this,$c,o(ss,Xc)*s),v(this,qc,o(ss,ju)*s),v(this,Ya,s),o(this,ti).push(e,t)}get free(){return!0}isEmpty(){return isNaN(o(this,me)[8])}add({x:e,y:t}){var x;v(this,lr,e),v(this,cr,t);const[n,s,i,a]=o(this,jn);let[l,c,h,d]=o(this,me).subarray(8,12);const u=e-h,f=t-d,g=Math.hypot(u,f);if(g<o(this,qc))return!1;const m=g-o(this,$c),A=m/g,E=A*u,_=A*f;let T=l,C=c;l=h,c=d,h+=E,d+=_,(x=o(this,ti))==null||x.push(e,t);const L=-_/m,D=E/m,I=L*o(this,Ka),N=D*o(this,Ka);return o(this,me).set(o(this,me).subarray(2,8),0),o(this,me).set([h+I,d+N],4),o(this,me).set(o(this,me).subarray(14,18),12),o(this,me).set([h-I,d-N],16),isNaN(o(this,me)[6])?(o(this,Bn).length===0&&(o(this,me).set([l+I,c+N],2),o(this,Bn).push(NaN,NaN,NaN,NaN,(l+I-n)/i,(c+N-s)/a),o(this,me).set([l-I,c-N],14),o(this,ws).push(NaN,NaN,NaN,NaN,(l-I-n)/i,(c-N-s)/a)),o(this,me).set([T,C,l,c,h,d],6),!this.isEmpty()):(o(this,me).set([T,C,l,c,h,d],6),Math.abs(Math.atan2(C-c,T-l)-Math.atan2(_,E))<Math.PI/2?([l,c,h,d]=o(this,me).subarray(2,6),o(this,Bn).push(NaN,NaN,NaN,NaN,((l+h)/2-n)/i,((c+d)/2-s)/a),[l,c,T,C]=o(this,me).subarray(14,18),o(this,ws).push(NaN,NaN,NaN,NaN,((T+l)/2-n)/i,((C+c)/2-s)/a),!0):([T,C,l,c,h,d]=o(this,me).subarray(0,6),o(this,Bn).push(((T+5*l)/6-n)/i,((C+5*c)/6-s)/a,((5*l+h)/6-n)/i,((5*c+d)/6-s)/a,((l+h)/2-n)/i,((c+d)/2-s)/a),[h,d,l,c,T,C]=o(this,me).subarray(12,18),o(this,ws).push(((T+5*l)/6-n)/i,((C+5*c)/6-s)/a,((5*l+h)/6-n)/i,((5*c+d)/6-s)/a,((l+h)/2-n)/i,((c+d)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=o(this,Bn),t=o(this,ws),n=o(this,me).subarray(4,6),s=o(this,me).subarray(16,18),[i,a,l,c]=o(this,jn),[h,d,u,f]=b(this,Yc,og).call(this);if(isNaN(o(this,me)[6])&&!this.isEmpty())return`M${(o(this,me)[2]-i)/l} ${(o(this,me)[3]-a)/c} L${(o(this,me)[4]-i)/l} ${(o(this,me)[5]-a)/c} L${h} ${d} L${u} ${f} L${(o(this,me)[16]-i)/l} ${(o(this,me)[17]-a)/c} L${(o(this,me)[14]-i)/l} ${(o(this,me)[15]-a)/c} Z`;const g=[];g.push(`M${e[4]} ${e[5]}`);for(let m=6;m<e.length;m+=6)isNaN(e[m])?g.push(`L${e[m+4]} ${e[m+5]}`):g.push(`C${e[m]} ${e[m+1]} ${e[m+2]} ${e[m+3]} ${e[m+4]} ${e[m+5]}`);g.push(`L${(n[0]-i)/l} ${(n[1]-a)/c} L${h} ${d} L${u} ${f} L${(s[0]-i)/l} ${(s[1]-a)/c}`);for(let m=t.length-6;m>=6;m-=6)isNaN(t[m])?g.push(`L${t[m+4]} ${t[m+5]}`):g.push(`C${t[m]} ${t[m+1]} ${t[m+2]} ${t[m+3]} ${t[m+4]} ${t[m+5]}`);return g.push(`L${t[4]} ${t[5]} Z`),g.join(" ")}getOutlines(){var _;const e=o(this,Bn),t=o(this,ws),n=o(this,me),s=n.subarray(4,6),i=n.subarray(16,18),[a,l,c,h]=o(this,jn),d=new Float64Array((((_=o(this,ti))==null?void 0:_.length)??0)+2);for(let T=0,C=d.length-2;T<C;T+=2)d[T]=(o(this,ti)[T]-a)/c,d[T+1]=(o(this,ti)[T+1]-l)/h;d[d.length-2]=(o(this,lr)-a)/c,d[d.length-1]=(o(this,cr)-l)/h;const[u,f,g,m]=b(this,Yc,og).call(this);if(isNaN(n[6])&&!this.isEmpty()){const T=new Float64Array(36);return T.set([NaN,NaN,NaN,NaN,(n[2]-a)/c,(n[3]-l)/h,NaN,NaN,NaN,NaN,(n[4]-a)/c,(n[5]-l)/h,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(n[16]-a)/c,(n[17]-l)/h,NaN,NaN,NaN,NaN,(n[14]-a)/c,(n[15]-l)/h],0),new lg(T,d,o(this,jn),o(this,Ya),o(this,$a),o(this,Xa))}const A=new Float64Array(o(this,Bn).length+24+o(this,ws).length);let E=e.length;for(let T=0;T<E;T+=2){if(isNaN(e[T])){A[T]=A[T+1]=NaN;continue}A[T]=e[T],A[T+1]=e[T+1]}A.set([NaN,NaN,NaN,NaN,(s[0]-a)/c,(s[1]-l)/h,NaN,NaN,NaN,NaN,u,f,NaN,NaN,NaN,NaN,g,m,NaN,NaN,NaN,NaN,(i[0]-a)/c,(i[1]-l)/h],E),E+=24;for(let T=t.length-6;T>=6;T-=6)for(let C=0;C<6;C+=2){if(isNaN(t[T+C])){A[E]=A[E+1]=NaN,E+=2;continue}A[E]=t[T+C],A[E+1]=t[T+C+1],E+=2}return A.set([NaN,NaN,NaN,NaN,t[4],t[5]],E),new lg(A,d,o(this,jn),o(this,Ya),o(this,$a),o(this,Xa))}};jn=new WeakMap,ws=new WeakMap,$a=new WeakMap,Xa=new WeakMap,Bn=new WeakMap,me=new WeakMap,lr=new WeakMap,cr=new WeakMap,qc=new WeakMap,$c=new WeakMap,Ya=new WeakMap,Ka=new WeakMap,ti=new WeakMap,Xc=new WeakMap,Ou=new WeakMap,ju=new WeakMap,Yc=new WeakSet,og=function(){const e=o(this,me).subarray(4,6),t=o(this,me).subarray(16,18),[n,s,i,a]=o(this,jn);return[(o(this,lr)+(e[0]-t[0])/2-n)/i,(o(this,cr)+(e[1]-t[1])/2-s)/a,(o(this,lr)+(t[0]-e[0])/2-n)/i,(o(this,cr)+(t[1]-e[1])/2-s)/a]},p(ss,Xc,8),p(ss,Ou,2),p(ss,ju,o(ss,Xc)+o(ss,Ou));let Rd=ss;var Za,hr,xs,Kc,Xt,Zc,ze,dr,Ho,ur,Uo,Bu,jy;class lg extends Oy{constructor(t,n,s,i,a,l){super();p(this,dr);p(this,ur);p(this,Bu);p(this,Za,void 0);p(this,hr,null);p(this,xs,void 0);p(this,Kc,void 0);p(this,Xt,void 0);p(this,Zc,void 0);p(this,ze,void 0);v(this,ze,t),v(this,Xt,n),v(this,Za,s),v(this,Zc,i),v(this,xs,a),v(this,Kc,l),b(this,Bu,jy).call(this,l);const{x:c,y:h,width:d,height:u}=o(this,hr);for(let f=0,g=t.length;f<g;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-h)/u;for(let f=0,g=n.length;f<g;f+=2)n[f]=(n[f]-c)/d,n[f+1]=(n[f+1]-h)/u}toSVGPath(){const t=[`M${o(this,ze)[4]} ${o(this,ze)[5]}`];for(let n=6,s=o(this,ze).length;n<s;n+=6){if(isNaN(o(this,ze)[n])){t.push(`L${o(this,ze)[n+4]} ${o(this,ze)[n+5]}`);continue}t.push(`C${o(this,ze)[n]} ${o(this,ze)[n+1]} ${o(this,ze)[n+2]} ${o(this,ze)[n+3]} ${o(this,ze)[n+4]} ${o(this,ze)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,i],a){const l=s-t,c=i-n;let h,d;switch(a){case 0:h=b(this,dr,Ho).call(this,o(this,ze),t,i,l,-c),d=b(this,dr,Ho).call(this,o(this,Xt),t,i,l,-c);break;case 90:h=b(this,ur,Uo).call(this,o(this,ze),t,n,l,c),d=b(this,ur,Uo).call(this,o(this,Xt),t,n,l,c);break;case 180:h=b(this,dr,Ho).call(this,o(this,ze),s,n,-l,c),d=b(this,dr,Ho).call(this,o(this,Xt),s,n,-l,c);break;case 270:h=b(this,ur,Uo).call(this,o(this,ze),s,i,-l,-c),d=b(this,ur,Uo).call(this,o(this,Xt),s,i,-l,-c);break}return{outline:Array.from(h),points:[Array.from(d)]}}get box(){return o(this,hr)}getNewOutline(t,n){const{x:s,y:i,width:a,height:l}=o(this,hr),[c,h,d,u]=o(this,Za),f=a*d,g=l*u,m=s*d+c,A=i*u+h,E=new Rd({x:o(this,Xt)[0]*f+m,y:o(this,Xt)[1]*g+A},o(this,Za),o(this,Zc),t,o(this,Kc),n??o(this,xs));for(let _=2;_<o(this,Xt).length;_+=2)E.add({x:o(this,Xt)[_]*f+m,y:o(this,Xt)[_+1]*g+A});return E.getOutlines()}}Za=new WeakMap,hr=new WeakMap,xs=new WeakMap,Kc=new WeakMap,Xt=new WeakMap,Zc=new WeakMap,ze=new WeakMap,dr=new WeakSet,Ho=function(t,n,s,i,a){const l=new Float64Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=n+t[c]*i,l[c+1]=s+t[c+1]*a;return l},ur=new WeakSet,Uo=function(t,n,s,i,a){const l=new Float64Array(t.length);for(let c=0,h=t.length;c<h;c+=2)l[c]=n+t[c+1]*i,l[c+1]=s+t[c]*a;return l},Bu=new WeakSet,jy=function(t){const n=o(this,ze);let s=n[4],i=n[5],a=s,l=i,c=s,h=i,d=s,u=i;const f=t?Math.max:Math.min;for(let _=6,T=n.length;_<T;_+=6){if(isNaN(n[_]))a=Math.min(a,n[_+4]),l=Math.min(l,n[_+5]),c=Math.max(c,n[_+4]),h=Math.max(h,n[_+5]),u<n[_+5]?(d=n[_+4],u=n[_+5]):u===n[_+5]&&(d=f(d,n[_+4]));else{const C=Y.bezierBoundingBox(s,i,...n.slice(_,_+6));a=Math.min(a,C[0]),l=Math.min(l,C[1]),c=Math.max(c,C[2]),h=Math.max(h,C[3]),u<C[3]?(d=C[2],u=C[3]):u===C[3]&&(d=f(d,C[2]))}s=n[_+4],i=n[_+5]}const g=a-o(this,xs),m=l-o(this,xs),A=c-a+2*o(this,xs),E=h-l+2*o(this,xs);v(this,hr,{x:g,y:m,width:A,height:E,lastPoint:[d,u]})};var Jc,Qc,yn,fr,Ja,Ye,eh,Qa,th,nh,ni,eo,sh,cg,ih,hg,Hu,Hy,Ts,_i,Uu,Uy,Hn,Os,En;let By=(En=class{constructor({editor:e=null,uiManager:t=null}){p(this,sh);p(this,ih);p(this,Hu);p(this,Ts);p(this,Uu);p(this,Hn);p(this,Jc,b(this,Hu,Hy).bind(this));p(this,Qc,b(this,Uu,Uy).bind(this));p(this,yn,null);p(this,fr,null);p(this,Ja,void 0);p(this,Ye,null);p(this,eh,!1);p(this,Qa,!1);p(this,th,null);p(this,nh,void 0);p(this,ni,null);p(this,eo,void 0);var n;e?(v(this,Qa,!1),v(this,eo,ie.HIGHLIGHT_COLOR),v(this,th,e)):(v(this,Qa,!0),v(this,eo,ie.HIGHLIGHT_DEFAULT_COLOR)),v(this,ni,(e==null?void 0:e._uiManager)||t),v(this,nh,o(this,ni)._eventBus),v(this,Ja,(e==null?void 0:e.color)||((n=o(this,ni))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98")}static get _keyboardManager(){return Ae(this,"_keyboardManager",new Mh([[["Escape","mac+Escape"],En.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],En.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],En.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],En.prototype._moveToPrevious],[["Home","mac+Home"],En.prototype._moveToBeginning],[["End","mac+End"],En.prototype._moveToEnd]]))}renderButton(){const e=v(this,yn,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0),e.addEventListener("click",b(this,Ts,_i).bind(this)),e.addEventListener("keydown",o(this,Jc));const t=v(this,fr,document.createElement("span"));return t.className="swatch",t.setAttribute("aria-hidden",!0),t.style.backgroundColor=o(this,Ja),e.append(t),e}renderMainDropdown(){const e=v(this,Ye,b(this,sh,cg).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===o(this,yn)){b(this,Ts,_i).call(this,e);return}const t=e.target.getAttribute("data-color");t&&b(this,ih,hg).call(this,t,e)}_moveToNext(e){var t,n;if(!o(this,Hn,Os)){b(this,Ts,_i).call(this,e);return}if(e.target===o(this,yn)){(t=o(this,Ye).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=o(this,Ye))==null?void 0:t.firstChild)||e.target===o(this,yn)){o(this,Hn,Os)&&this._hideDropdownFromKeyboard();return}o(this,Hn,Os)||b(this,Ts,_i).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!o(this,Hn,Os)){b(this,Ts,_i).call(this,e);return}(t=o(this,Ye).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!o(this,Hn,Os)){b(this,Ts,_i).call(this,e);return}(t=o(this,Ye).lastChild)==null||t.focus()}hideDropdown(){var e;(e=o(this,Ye))==null||e.classList.add("hidden"),window.removeEventListener("pointerdown",o(this,Qc))}_hideDropdownFromKeyboard(){var e;if(!o(this,Qa)){if(!o(this,Hn,Os)){(e=o(this,th))==null||e.unselect();return}this.hideDropdown(),o(this,yn).focus({preventScroll:!0,focusVisible:o(this,eh)})}}updateColor(e){if(o(this,fr)&&(o(this,fr).style.backgroundColor=e),!o(this,Ye))return;const t=o(this,ni).highlightColors.values();for(const n of o(this,Ye).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=o(this,yn))==null||e.remove(),v(this,yn,null),v(this,fr,null),(t=o(this,Ye))==null||t.remove(),v(this,Ye,null)}},Jc=new WeakMap,Qc=new WeakMap,yn=new WeakMap,fr=new WeakMap,Ja=new WeakMap,Ye=new WeakMap,eh=new WeakMap,Qa=new WeakMap,th=new WeakMap,nh=new WeakMap,ni=new WeakMap,eo=new WeakMap,sh=new WeakSet,cg=function(){const e=document.createElement("div");e.addEventListener("contextmenu",Bt),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[t,n]of o(this,ni).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",n),s.title=t,s.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${t}`);const i=document.createElement("span");s.append(i),i.className="swatch",i.style.backgroundColor=n,s.setAttribute("aria-selected",n===o(this,Ja)),s.addEventListener("click",b(this,ih,hg).bind(this,n)),e.append(s)}return e.addEventListener("keydown",o(this,Jc)),e},ih=new WeakSet,hg=function(e,t){t.stopPropagation(),o(this,nh).dispatch("switchannotationeditorparams",{source:this,type:o(this,eo),value:e})},Hu=new WeakSet,Hy=function(e){En._keyboardManager.exec(this,e)},Ts=new WeakSet,_i=function(e){if(o(this,Hn,Os)){this.hideDropdown();return}if(v(this,eh,e.detail===0),window.addEventListener("pointerdown",o(this,Qc)),o(this,Ye)){o(this,Ye).classList.remove("hidden");return}const t=v(this,Ye,b(this,sh,cg).call(this));o(this,yn).append(t)},Uu=new WeakSet,Uy=function(e){var t;(t=o(this,Ye))!=null&&t.contains(e.target)||this.hideDropdown()},Hn=new WeakSet,Os=function(){return o(this,Ye)&&!o(this,Ye).classList.contains("hidden")},En);var to,rh,si,pr,no,sn,ah,oh,gr,An,Tt,Yt,zu,so,mr,Ke,io,Un,lh,ch,dg,hh,ug,Wu,zy,Gu,Wy,Vu,Gy,dh,fg,vr,zo,ii,Xr,qu,Vy,ro,md,br,Wo,$u,qy,Xu,$y,Yu,Xy,Ku,Yy;const ye=class ye extends Se{constructor(t){super({...t,name:"highlightEditor"});p(this,ch);p(this,hh);p(this,Wu);p(this,Gu);p(this,Vu);p(this,dh);p(this,vr);p(this,qu);p(this,ro);p(this,br);p(this,$u);p(this,Xu);p(this,to,null);p(this,rh,0);p(this,si,void 0);p(this,pr,null);p(this,no,null);p(this,sn,null);p(this,ah,null);p(this,oh,0);p(this,gr,null);p(this,An,null);p(this,Tt,null);p(this,Yt,!1);p(this,zu,b(this,qu,Vy).bind(this));p(this,so,null);p(this,mr,void 0);p(this,Ke,null);p(this,io,"");p(this,Un,void 0);p(this,lh,"");this.color=t.color||ye._defaultColor,v(this,Un,t.thickness||ye._defaultThickness),v(this,mr,t.opacity||ye._defaultOpacity),v(this,si,t.boxes||null),v(this,lh,t.methodOfCreation||""),v(this,io,t.text||""),this._isDraggable=!1,t.highlightId>-1?(v(this,Yt,!0),b(this,hh,ug).call(this,t),b(this,vr,zo).call(this)):(v(this,to,t.anchorNode),v(this,rh,t.anchorOffset),v(this,ah,t.focusNode),v(this,oh,t.focusOffset),b(this,ch,dg).call(this),b(this,vr,zo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=ye.prototype;return Ae(this,"_keyboardManager",new Mh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:o(this,Yt)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:o(this,Un),methodOfCreation:o(this,lh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var s;Se.initialize(t,n),ye._defaultColor||(ye._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case ie.HIGHLIGHT_DEFAULT_COLOR:ye._defaultColor=n;break;case ie.HIGHLIGHT_THICKNESS:ye._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return o(this,so)}updateParams(t,n){switch(t){case ie.HIGHLIGHT_COLOR:b(this,Wu,zy).call(this,n);break;case ie.HIGHLIGHT_THICKNESS:b(this,Gu,Wy).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ie.HIGHLIGHT_DEFAULT_COLOR,ye._defaultColor],[ie.HIGHLIGHT_THICKNESS,ye._defaultThickness]]}get propertiesToUpdate(){return[[ie.HIGHLIGHT_COLOR,this.color||ye._defaultColor],[ie.HIGHLIGHT_THICKNESS,o(this,Un)||ye._defaultThickness],[ie.HIGHLIGHT_FREE,o(this,Yt)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(v(this,no,new By({editor:this})),t.addColorPicker(o(this,no))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(b(this,br,Wo).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,b(this,br,Wo).call(this))}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){b(this,dh,fg).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,vr,zo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?b(this,dh,fg).call(this):t&&(b(this,vr,zo).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var i,a,l;const{drawLayer:n}=this.parent;let s;o(this,Yt)?(t=(t-this.rotation+360)%360,s=b(i=ye,ii,Xr).call(i,o(this,An).box,t)):s=b(a=ye,ii,Xr).call(a,this,t),n.rotate(o(this,Tt),t),n.rotate(o(this,Ke),t),n.updateBox(o(this,Tt),s),n.updateBox(o(this,Ke),b(l=ye,ii,Xr).call(l,o(this,sn).box,t))}render(){if(this.div)return this.div;const t=super.render();o(this,io)&&(t.setAttribute("aria-label",o(this,io)),t.setAttribute("role","mark")),o(this,Yt)?t.classList.add("free"):this.div.addEventListener("keydown",o(this,zu));const n=v(this,gr,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=o(this,pr);const[s,i]=this.parentDimensions;return this.setDims(this.width*s,this.height*i),Td(this,o(this,gr),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.parent.drawLayer.addClass(o(this,Ke),"hovered")}pointerleave(){this.parent.drawLayer.removeClass(o(this,Ke),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:b(this,ro,md).call(this,!0);break;case 1:case 3:b(this,ro,md).call(this,!1);break}}select(){var t,n;super.select(),o(this,Ke)&&((t=this.parent)==null||t.drawLayer.removeClass(o(this,Ke),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(o(this,Ke),"selected"))}unselect(){var t;super.unselect(),o(this,Ke)&&((t=this.parent)==null||t.drawLayer.removeClass(o(this,Ke),"selected"),o(this,Yt)||b(this,ro,md).call(this,!1))}get _mustFixPosition(){return!o(this,Yt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(o(this,Tt),t),this.parent.drawLayer.show(o(this,Ke),t))}static startHighlighting(t,n,{target:s,x:i,y:a}){const{x:l,y:c,width:h,height:d}=s.getBoundingClientRect(),u=A=>{b(this,Yu,Xy).call(this,t,A)},f={capture:!0,passive:!1},g=A=>{A.preventDefault(),A.stopPropagation()},m=A=>{s.removeEventListener("pointermove",u),window.removeEventListener("blur",m),window.removeEventListener("pointerup",m),window.removeEventListener("pointerdown",g,f),window.removeEventListener("contextmenu",Bt),b(this,Ku,Yy).call(this,t,A)};window.addEventListener("blur",m),window.addEventListener("pointerup",m),window.addEventListener("pointerdown",g,f),window.addEventListener("contextmenu",Bt),s.addEventListener("pointermove",u),this._freeHighlight=new Rd({x:i,y:a},[l,c,h,d],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.highlight(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static deserialize(t,n,s){var A;const i=super.deserialize(t,n,s),{rect:[a,l,c,h],color:d,quadPoints:u}=t;i.color=Y.makeHexColor(...d),v(i,mr,t.opacity);const[f,g]=i.pageDimensions;i.width=(c-a)/f,i.height=(h-l)/g;const m=v(i,si,[]);for(let E=0;E<u.length;E+=8)m.push({x:(u[4]-c)/f,y:(h-(1-u[E+5]))/g,width:(u[E+2]-u[E])/f,height:(u[E+5]-u[E+1])/g});return b(A=i,ch,dg).call(A),i}serialize(t=!1){if(this.isEmpty()||t)return null;const n=this.getRect(0,0),s=Se._colorManager.convert(this.color);return{annotationType:be.HIGHLIGHT,color:s,opacity:o(this,mr),thickness:o(this,Un),quadPoints:b(this,$u,qy).call(this),outlines:b(this,Xu,$y).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:b(this,br,Wo).call(this),structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}};to=new WeakMap,rh=new WeakMap,si=new WeakMap,pr=new WeakMap,no=new WeakMap,sn=new WeakMap,ah=new WeakMap,oh=new WeakMap,gr=new WeakMap,An=new WeakMap,Tt=new WeakMap,Yt=new WeakMap,zu=new WeakMap,so=new WeakMap,mr=new WeakMap,Ke=new WeakMap,io=new WeakMap,Un=new WeakMap,lh=new WeakMap,ch=new WeakSet,dg=function(){const t=new rg(o(this,si),.001);v(this,An,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=o(this,An).box;const n=new rg(o(this,si),.0025,.001,this._uiManager.direction==="ltr");v(this,sn,n.getOutlines());const{lastPoint:s}=o(this,sn).box;v(this,so,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},hh=new WeakSet,ug=function({highlightOutlines:t,highlightId:n,clipPathId:s}){var u,f;if(v(this,An,t),v(this,sn,t.getNewOutline(o(this,Un)/2+1.5,.0025)),n>=0)v(this,Tt,n),v(this,pr,s),this.parent.drawLayer.finalizeLine(n,t),v(this,Ke,this.parent.drawLayer.highlightOutline(o(this,sn)));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(o(this,Tt),t),this.parent.drawLayer.updateBox(o(this,Tt),b(u=ye,ii,Xr).call(u,o(this,An).box,(g-this.rotation+360)%360)),this.parent.drawLayer.updateLine(o(this,Ke),o(this,sn)),this.parent.drawLayer.updateBox(o(this,Ke),b(f=ye,ii,Xr).call(f,o(this,sn).box,g))}const{x:a,y:l,width:c,height:h}=t.box;switch(this.rotation){case 0:this.x=a,this.y=l,this.width=c,this.height=h;break;case 90:{const[g,m]=this.parentDimensions;this.x=l,this.y=1-a,this.width=c*m/g,this.height=h*g/m;break}case 180:this.x=1-a,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[g,m]=this.parentDimensions;this.x=1-l,this.y=a,this.width=c*m/g,this.height=h*g/m;break}}const{lastPoint:d}=o(this,sn).box;v(this,so,[(d[0]-a)/c,(d[1]-l)/h])},Wu=new WeakSet,zy=function(t){const n=i=>{var a,l;this.color=i,(a=this.parent)==null||a.drawLayer.changeColor(o(this,Tt),i),(l=o(this,no))==null||l.updateColor(i)},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},Gu=new WeakSet,Wy=function(t){const n=o(this,Un),s=i=>{v(this,Un,i),b(this,Vu,Gy).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Vu=new WeakSet,Gy=function(t){if(!o(this,Yt))return;b(this,hh,ug).call(this,{highlightOutlines:o(this,An).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},dh=new WeakSet,fg=function(){o(this,Tt)===null||!this.parent||(this.parent.drawLayer.remove(o(this,Tt)),v(this,Tt,null),this.parent.drawLayer.remove(o(this,Ke)),v(this,Ke,null))},vr=new WeakSet,zo=function(t=this.parent){o(this,Tt)===null&&({id:zt(this,Tt)._,clipPathId:zt(this,pr)._}=t.drawLayer.highlight(o(this,An),this.color,o(this,mr)),v(this,Ke,t.drawLayer.highlightOutline(o(this,sn))),o(this,gr)&&(o(this,gr).style.clipPath=o(this,pr)))},ii=new WeakSet,Xr=function({x:t,y:n,width:s,height:i},a){switch(a){case 90:return{x:1-n-i,y:t,width:i,height:s};case 180:return{x:1-t-s,y:1-n-i,width:s,height:i};case 270:return{x:n,y:1-t-s,width:i,height:s}}return{x:t,y:n,width:s,height:i}},qu=new WeakSet,Vy=function(t){ye._keyboardManager.exec(this,t)},ro=new WeakSet,md=function(t){if(!o(this,to))return;const n=window.getSelection();t?n.setPosition(o(this,to),o(this,rh)):n.setPosition(o(this,ah),o(this,oh))},br=new WeakSet,Wo=function(){return o(this,Yt)?this.rotation:0},$u=new WeakSet,qy=function(){if(o(this,Yt))return null;const[t,n]=this.pageDimensions,s=o(this,si),i=new Array(s.length*8);let a=0;for(const{x:l,y:c,width:h,height:d}of s){const u=l*t,f=(1-c-d)*n;i[a]=i[a+4]=u,i[a+1]=i[a+3]=f,i[a+2]=i[a+6]=u+h*t,i[a+5]=i[a+7]=f+d*n,a+=8}return i},Xu=new WeakSet,$y=function(t){return o(this,An).serialize(t,b(this,br,Wo).call(this))},Yu=new WeakSet,Xy=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},Ku=new WeakSet,Yy=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.removeFreeHighlight(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},p(ye,ii),p(ye,Yu),p(ye,Ku),re(ye,"_defaultColor",null),re(ye,"_defaultOpacity",1),re(ye,"_defaultThickness",12),re(ye,"_l10nPromise"),re(ye,"_type","highlight"),re(ye,"_editorType",be.HIGHLIGHT),re(ye,"_freeHighlightId",-1),re(ye,"_freeHighlight",null),re(ye,"_freeHighlightClipId","");let Ld=ye;var yr,Ar,uh,fh,ph,_r,zn,Ss,rn,Er,wr,xr,Tr,Sr,ri,Zu,Ky,Ju,Zy,Qu,Jy,ef,Qy,gh,gg,tf,e0,mh,mg,nf,t0,sf,n0,rf,s0,af,i0,of,r0,Cs,Ei,vh,vg,ao,vd,oo,bd,ai,Yr,bh,bg,lo,yd,lf,a0,yh,yg,cf,o0,hf,l0,Ah,Ag,co,Ad,Cr,Go;const Ie=class Ie extends Se{constructor(t){super({...t,name:"inkEditor"});p(this,Zu);p(this,Ju);p(this,Qu);p(this,ef);p(this,gh);p(this,tf);p(this,mh);p(this,nf);p(this,sf);p(this,rf);p(this,af);p(this,of);p(this,Cs);p(this,vh);p(this,ao);p(this,oo);p(this,ai);p(this,bh);p(this,lo);p(this,hf);p(this,Ah);p(this,co);p(this,Cr);p(this,yr,0);p(this,Ar,0);p(this,uh,this.canvasPointermove.bind(this));p(this,fh,this.canvasPointerleave.bind(this));p(this,ph,this.canvasPointerup.bind(this));p(this,_r,this.canvasPointerdown.bind(this));p(this,zn,null);p(this,Ss,new Path2D);p(this,rn,!1);p(this,Er,!1);p(this,wr,!1);p(this,xr,null);p(this,Tr,0);p(this,Sr,0);p(this,ri,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,n){Se.initialize(t,n)}static updateDefaultParams(t,n){switch(t){case ie.INK_THICKNESS:Ie._defaultThickness=n;break;case ie.INK_COLOR:Ie._defaultColor=n;break;case ie.INK_OPACITY:Ie._defaultOpacity=n/100;break}}updateParams(t,n){switch(t){case ie.INK_THICKNESS:b(this,Zu,Ky).call(this,n);break;case ie.INK_COLOR:b(this,Ju,Zy).call(this,n);break;case ie.INK_OPACITY:b(this,Qu,Jy).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ie.INK_THICKNESS,Ie._defaultThickness],[ie.INK_COLOR,Ie._defaultColor||Se._defaultLineColor],[ie.INK_OPACITY,Math.round(Ie._defaultOpacity*100)]]}get propertiesToUpdate(){return[[ie.INK_THICKNESS,this.thickness||Ie._defaultThickness],[ie.INK_COLOR,this.color||Ie._defaultColor||Se._defaultLineColor],[ie.INK_OPACITY,Math.round(100*(this.opacity??Ie._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(b(this,ao,vd).call(this),b(this,oo,bd).call(this)),this.isAttachedToDOM||(this.parent.add(this),b(this,ai,Yr).call(this)),b(this,Cr,Go).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,o(this,zn)&&(clearTimeout(o(this,zn)),v(this,zn,null)),o(this,xr).disconnect(),v(this,xr,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,n]=this.parentDimensions,s=this.width*t,i=this.height*n;this.setDimensions(s,i)}enableEditMode(){o(this,rn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",o(this,_r)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",o(this,_r)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){o(this,rn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),v(this,rn,!0),this.div.classList.add("disabled"),b(this,Cr,Go).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||o(this,rn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),b(this,tf,e0).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),b(this,mh,mg).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),b(this,vh,vg).call(this,t)}canvasPointerleave(t){b(this,vh,vg).call(this,t)}get isResizable(){return!this.isEmpty()&&o(this,rn)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,i,a,l]=b(this,ef,Qy).call(this);if(this.setAt(s,i,0,0),this.setDims(a,l),b(this,ao,vd).call(this),this.width){const[c,h]=this.parentDimensions;this.setAspectRatio(this.width*c,this.height*h),this.setAt(t*c,n*h,this.width*c,this.height*h),v(this,wr,!0),b(this,ai,Yr).call(this),this.setDims(this.width*c,this.height*h),b(this,Cs,Ei).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return b(this,oo,bd).call(this),this.div}setDimensions(t,n){const s=Math.round(t),i=Math.round(n);if(o(this,Tr)===s&&o(this,Sr)===i)return;v(this,Tr,s),v(this,Sr,i),this.canvas.style.visibility="hidden";const[a,l]=this.parentDimensions;this.width=t/a,this.height=n/l,this.fixAndSetPosition(),o(this,rn)&&b(this,bh,bg).call(this,t,n),b(this,ai,Yr).call(this),b(this,Cs,Ei).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,n,s){var E,_,T;if(t instanceof Sy)return null;const i=super.deserialize(t,n,s);i.thickness=t.thickness,i.color=Y.makeHexColor(...t.color),i.opacity=t.opacity;const[a,l]=i.pageDimensions,c=i.width*a,h=i.height*l,d=i.parentScale,u=t.thickness/2;v(i,rn,!0),v(i,Tr,Math.round(c)),v(i,Sr,Math.round(h));const{paths:f,rect:g,rotation:m}=t;for(let{bezier:C}of f){C=b(E=Ie,cf,o0).call(E,C,g,m);const L=[];i.paths.push(L);let D=d*(C[0]-u),I=d*(C[1]-u);for(let w=2,x=C.length;w<x;w+=6){const k=d*(C[w]-u),R=d*(C[w+1]-u),F=d*(C[w+2]-u),O=d*(C[w+3]-u),j=d*(C[w+4]-u),q=d*(C[w+5]-u);L.push([[D,I],[k,R],[F,O],[j,q]]),D=j,I=q}const N=b(this,lf,a0).call(this,L);i.bezierPath2D.push(N)}const A=b(_=i,Ah,Ag).call(_);return v(i,Ar,Math.max(Se.MIN_SIZE,A[2]-A[0])),v(i,yr,Math.max(Se.MIN_SIZE,A[3]-A[1])),b(T=i,bh,bg).call(T,c,h),i}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),n=Se._colorManager.convert(this.ctx.strokeStyle);return{annotationType:be.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:b(this,hf,l0).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};yr=new WeakMap,Ar=new WeakMap,uh=new WeakMap,fh=new WeakMap,ph=new WeakMap,_r=new WeakMap,zn=new WeakMap,Ss=new WeakMap,rn=new WeakMap,Er=new WeakMap,wr=new WeakMap,xr=new WeakMap,Tr=new WeakMap,Sr=new WeakMap,ri=new WeakMap,Zu=new WeakSet,Ky=function(t){const n=i=>{this.thickness=i,b(this,Cr,Go).call(this)},s=this.thickness;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Ju=new WeakSet,Zy=function(t){const n=i=>{this.color=i,b(this,Cs,Ei).call(this)},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Qu=new WeakSet,Jy=function(t){const n=i=>{this.opacity=i,b(this,Cs,Ei).call(this)};t/=100;const s=this.opacity;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ie.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},ef=new WeakSet,Qy=function(){const{parentRotation:t,parentDimensions:[n,s]}=this;switch(t){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}},gh=new WeakSet,gg=function(){const{ctx:t,color:n,opacity:s,thickness:i,parentScale:a,scaleFactor:l}=this;t.lineWidth=i*a/l,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${n}${Yx(s)}`},tf=new WeakSet,e0=function(t,n){this.canvas.addEventListener("contextmenu",Bt),this.canvas.addEventListener("pointerleave",o(this,fh)),this.canvas.addEventListener("pointermove",o(this,uh)),this.canvas.addEventListener("pointerup",o(this,ph)),this.canvas.removeEventListener("pointerdown",o(this,_r)),this.isEditing=!0,o(this,wr)||(v(this,wr,!0),b(this,ai,Yr).call(this),this.thickness||(this.thickness=Ie._defaultThickness),this.color||(this.color=Ie._defaultColor||Se._defaultLineColor),this.opacity??(this.opacity=Ie._defaultOpacity)),this.currentPath.push([t,n]),v(this,Er,!1),b(this,gh,gg).call(this),v(this,ri,()=>{b(this,rf,s0).call(this),o(this,ri)&&window.requestAnimationFrame(o(this,ri))}),window.requestAnimationFrame(o(this,ri))},mh=new WeakSet,mg=function(t,n){const[s,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===s&&n===i)return;const a=this.currentPath;let l=o(this,Ss);if(a.push([t,n]),v(this,Er,!0),a.length<=2){l.moveTo(...a[0]),l.lineTo(t,n);return}a.length===3&&(v(this,Ss,l=new Path2D),l.moveTo(...a[0])),b(this,af,i0).call(this,l,...a.at(-3),...a.at(-2),t,n)},nf=new WeakSet,t0=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);o(this,Ss).lineTo(...t)},sf=new WeakSet,n0=function(t,n){v(this,ri,null),t=Math.min(Math.max(t,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),b(this,mh,mg).call(this,t,n),b(this,nf,t0).call(this);let s;if(this.currentPath.length!==1)s=b(this,of,r0).call(this);else{const h=[t,n];s=[[h,h.slice(),h.slice(),h]]}const i=o(this,Ss),a=this.currentPath;this.currentPath=[],v(this,Ss,new Path2D);const l=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(i),this._uiManager.rebuild(this)},c=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(b(this,ao,vd).call(this),b(this,oo,bd).call(this)),b(this,Cr,Go).call(this))};this.addCommands({cmd:l,undo:c,mustExec:!0})},rf=new WeakSet,s0=function(){if(!o(this,Er))return;v(this,Er,!1);const t=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),s=n.map(l=>l[0]),i=n.map(l=>l[1]);Math.min(...s)-t,Math.max(...s)+t,Math.min(...i)-t,Math.max(...i)+t;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const l of this.bezierPath2D)a.stroke(l);a.stroke(o(this,Ss)),a.restore()},af=new WeakSet,i0=function(t,n,s,i,a,l,c){const h=(n+i)/2,d=(s+a)/2,u=(i+l)/2,f=(a+c)/2;t.bezierCurveTo(h+2*(i-h)/3,d+2*(a-d)/3,u+2*(i-u)/3,f+2*(a-f)/3,u,f)},of=new WeakSet,r0=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const n=[];let s,[i,a]=t[0];for(s=1;s<t.length-2;s++){const[g,m]=t[s],[A,E]=t[s+1],_=(g+A)/2,T=(m+E)/2,C=[i+2*(g-i)/3,a+2*(m-a)/3],L=[_+2*(g-_)/3,T+2*(m-T)/3];n.push([[i,a],C,L,[_,T]]),[i,a]=[_,T]}const[l,c]=t[s],[h,d]=t[s+1],u=[i+2*(l-i)/3,a+2*(c-a)/3],f=[h+2*(l-h)/3,d+2*(c-d)/3];return n.push([[i,a],u,f,[h,d]]),n},Cs=new WeakSet,Ei=function(){if(this.isEmpty()){b(this,lo,yd).call(this);return}b(this,gh,gg).call(this);const{canvas:t,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.width,t.height),b(this,lo,yd).call(this);for(const s of this.bezierPath2D)n.stroke(s)},vh=new WeakSet,vg=function(t){this.canvas.removeEventListener("pointerleave",o(this,fh)),this.canvas.removeEventListener("pointermove",o(this,uh)),this.canvas.removeEventListener("pointerup",o(this,ph)),this.canvas.addEventListener("pointerdown",o(this,_r)),o(this,zn)&&clearTimeout(o(this,zn)),v(this,zn,setTimeout(()=>{v(this,zn,null),this.canvas.removeEventListener("contextmenu",Bt)},10)),b(this,sf,n0).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ao=new WeakSet,vd=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},oo=new WeakSet,bd=function(){v(this,xr,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),o(this,xr).observe(this.div)},ai=new WeakSet,Yr=function(){if(!o(this,wr))return;const[t,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*n),b(this,lo,yd).call(this)},bh=new WeakSet,bg=function(t,n){const s=b(this,co,Ad).call(this),i=(t-s)/o(this,Ar),a=(n-s)/o(this,yr);this.scaleFactor=Math.min(i,a)},lo=new WeakSet,yd=function(){const t=b(this,co,Ad).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},lf=new WeakSet,a0=function(t){const n=new Path2D;for(let s=0,i=t.length;s<i;s++){const[a,l,c,h]=t[s];s===0&&n.moveTo(...a),n.bezierCurveTo(l[0],l[1],c[0],c[1],h[0],h[1])}return n},yh=new WeakSet,yg=function(t,n,s){const[i,a,l,c]=n;switch(s){case 0:for(let h=0,d=t.length;h<d;h+=2)t[h]+=i,t[h+1]=c-t[h+1];break;case 90:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=t[h+1]+i,t[h+1]=u+a}break;case 180:for(let h=0,d=t.length;h<d;h+=2)t[h]=l-t[h],t[h+1]+=a;break;case 270:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=l-t[h+1],t[h+1]=c-u}break;default:throw new Error("Invalid rotation")}return t},cf=new WeakSet,o0=function(t,n,s){const[i,a,l,c]=n;switch(s){case 0:for(let h=0,d=t.length;h<d;h+=2)t[h]-=i,t[h+1]=c-t[h+1];break;case 90:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=t[h+1]-a,t[h+1]=u-i}break;case 180:for(let h=0,d=t.length;h<d;h+=2)t[h]=l-t[h],t[h+1]-=a;break;case 270:for(let h=0,d=t.length;h<d;h+=2){const u=t[h];t[h]=c-t[h+1],t[h+1]=l-u}break;default:throw new Error("Invalid rotation")}return t},hf=new WeakSet,l0=function(t,n,s,i){var d,u;const a=[],l=this.thickness/2,c=t*n+l,h=t*s+l;for(const f of this.paths){const g=[],m=[];for(let A=0,E=f.length;A<E;A++){const[_,T,C,L]=f[A];if(_[0]===L[0]&&_[1]===L[1]&&E===1){const O=t*_[0]+c,j=t*_[1]+h;g.push(O,j),m.push(O,j);break}const D=t*_[0]+c,I=t*_[1]+h,N=t*T[0]+c,w=t*T[1]+h,x=t*C[0]+c,k=t*C[1]+h,R=t*L[0]+c,F=t*L[1]+h;A===0&&(g.push(D,I),m.push(D,I)),g.push(N,w,x,k,R,F),m.push(N,w),A===E-1&&m.push(R,F)}a.push({bezier:b(d=Ie,yh,yg).call(d,g,i,this.rotation),points:b(u=Ie,yh,yg).call(u,m,i,this.rotation)})}return a},Ah=new WeakSet,Ag=function(){let t=1/0,n=-1/0,s=1/0,i=-1/0;for(const a of this.paths)for(const[l,c,h,d]of a){const u=Y.bezierBoundingBox(...l,...c,...h,...d);t=Math.min(t,u[0]),s=Math.min(s,u[1]),n=Math.max(n,u[2]),i=Math.max(i,u[3])}return[t,s,n,i]},co=new WeakSet,Ad=function(){return o(this,rn)?Math.ceil(this.thickness*this.parentScale):0},Cr=new WeakSet,Go=function(t=!1){if(this.isEmpty())return;if(!o(this,rn)){b(this,Cs,Ei).call(this);return}const n=b(this,Ah,Ag).call(this),s=b(this,co,Ad).call(this);v(this,Ar,Math.max(Se.MIN_SIZE,n[2]-n[0])),v(this,yr,Math.max(Se.MIN_SIZE,n[3]-n[1]));const i=Math.ceil(s+o(this,Ar)*this.scaleFactor),a=Math.ceil(s+o(this,yr)*this.scaleFactor),[l,c]=this.parentDimensions;this.width=i/l,this.height=a/c,this.setAspectRatio(i,a);const h=this.translationX,d=this.translationY;this.translationX=-n[0],this.translationY=-n[1],b(this,ai,Yr).call(this),b(this,Cs,Ei).call(this),v(this,Tr,i),v(this,Sr,a),this.setDims(i,a);const u=t?s/this.scaleFactor/2:0;this.translate(h-this.translationX-u,d-this.translationY-u)},p(Ie,lf),p(Ie,yh),p(Ie,cf),re(Ie,"_defaultColor",null),re(Ie,"_defaultOpacity",1),re(Ie,"_defaultThickness",1),re(Ie,"_type","ink"),re(Ie,"_editorType",be.INK);let pg=Ie;var ft,pt,oi,Ps,li,ho,Wn,Pr,Gn,_n,_h,Rr,Vo,Lr,qo,uo,_d,Eh,Eg,df,c0,uf,h0,wh,wg,fo,Ed,ff,d0;const al=class al extends Se{constructor(t){super({...t,name:"stampEditor"});p(this,Rr);p(this,Lr);p(this,uo);p(this,Eh);p(this,df);p(this,uf);p(this,wh);p(this,fo);p(this,ff);p(this,ft,null);p(this,pt,null);p(this,oi,null);p(this,Ps,null);p(this,li,null);p(this,ho,"");p(this,Wn,null);p(this,Pr,null);p(this,Gn,null);p(this,_n,!1);p(this,_h,!1);v(this,Ps,t.bitmapUrl),v(this,li,t.bitmapFile)}static initialize(t,n){Se.initialize(t,n)}static get supportedTypes(){return Ae(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return Ae(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(be.STAMP,{bitmapFile:t.getAsFile()})}remove(){var t,n;o(this,pt)&&(v(this,ft,null),this._uiManager.imageManager.deleteId(o(this,pt)),(t=o(this,Wn))==null||t.remove(),v(this,Wn,null),(n=o(this,Pr))==null||n.disconnect(),v(this,Pr,null),o(this,Gn)&&(clearTimeout(o(this,Gn)),v(this,Gn,null))),super.remove()}rebuild(){if(!this.parent){o(this,pt)&&b(this,uo,_d).call(this);return}super.rebuild(),this.div!==null&&(o(this,pt)&&o(this,Wn)===null&&b(this,uo,_d).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(o(this,oi)||o(this,ft)||o(this,Ps)||o(this,li)||o(this,pt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),o(this,ft)?b(this,Eh,Eg).call(this):b(this,uo,_d).call(this),this.width){const[s,i]=this.parentDimensions;this.setAt(t*s,n*i,this.width*s,this.height*i)}return this.div}getImageForAltText(){return o(this,Wn)}static deserialize(t,n,s){if(t instanceof Cy)return null;const i=super.deserialize(t,n,s),{rect:a,bitmapUrl:l,bitmapId:c,isSvg:h,accessibilityData:d}=t;c&&s.imageManager.isValidId(c)?v(i,pt,c):v(i,Ps,l),v(i,_n,h);const[u,f]=i.pageDimensions;return i.width=(a[2]-a[0])/u,i.height=(a[3]-a[1])/f,d&&(i.altTextData=d),i}serialize(t=!1,n=null){if(this.isEmpty())return null;const s={annotationType:be.STAMP,bitmapId:o(this,pt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:o(this,_n),structTreeParentId:this._structTreeParentId};if(t)return s.bitmapUrl=b(this,fo,Ed).call(this,!0),s.accessibilityData=this.altTextData,s;const{decorative:i,altText:a}=this.altTextData;if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),n===null)return s;n.stamps||(n.stamps=new Map);const l=o(this,_n)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(o(this,pt)))n.stamps.set(o(this,pt),{area:l,serialized:s}),s.bitmap=b(this,fo,Ed).call(this,!1);else if(o(this,_n)){const c=n.stamps.get(o(this,pt));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=b(this,fo,Ed).call(this,!1))}return s}};ft=new WeakMap,pt=new WeakMap,oi=new WeakMap,Ps=new WeakMap,li=new WeakMap,ho=new WeakMap,Wn=new WeakMap,Pr=new WeakMap,Gn=new WeakMap,_n=new WeakMap,_h=new WeakMap,Rr=new WeakSet,Vo=function(t,n=!1){if(!t){this.remove();return}v(this,ft,t.bitmap),n||(v(this,pt,t.id),v(this,_n,t.isSvg)),t.file&&v(this,ho,t.file.name),b(this,Eh,Eg).call(this)},Lr=new WeakSet,qo=function(){v(this,oi,null),this._uiManager.enableWaiting(!1),o(this,Wn)&&this.div.focus()},uo=new WeakSet,_d=function(){if(o(this,pt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(o(this,pt)).then(n=>b(this,Rr,Vo).call(this,n,!0)).finally(()=>b(this,Lr,qo).call(this));return}if(o(this,Ps)){const n=o(this,Ps);v(this,Ps,null),this._uiManager.enableWaiting(!0),v(this,oi,this._uiManager.imageManager.getFromUrl(n).then(s=>b(this,Rr,Vo).call(this,s)).finally(()=>b(this,Lr,qo).call(this)));return}if(o(this,li)){const n=o(this,li);v(this,li,null),this._uiManager.enableWaiting(!0),v(this,oi,this._uiManager.imageManager.getFromFile(n).then(s=>b(this,Rr,Vo).call(this,s)).finally(()=>b(this,Lr,qo).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=al.supportedTypesStr,v(this,oi,new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);b(this,Rr,Vo).call(this,s)}n()}),t.addEventListener("cancel",()=>{this.remove(),n()})}).finally(()=>b(this,Lr,qo).call(this))),t.click()},Eh=new WeakSet,Eg=function(){const{div:t}=this;let{width:n,height:s}=o(this,ft);const[i,a]=this.pageDimensions,l=.75;if(this.width)n=this.width*i,s=this.height*a;else if(n>l*i||s>l*a){const u=Math.min(l*i/n,l*a/s);n*=u,s*=u}const[c,h]=this.parentDimensions;this.setDims(n*c/i,s*h/a),this._uiManager.enableWaiting(!1);const d=v(this,Wn,document.createElement("canvas"));t.append(d),t.hidden=!1,b(this,wh,wg).call(this,n,s),b(this,ff,d0).call(this),o(this,_h)||(this.parent.addUndoableEditor(this),v(this,_h,!0)),this._reportTelemetry({action:"inserted_image"}),o(this,ho)&&d.setAttribute("aria-label",o(this,ho))},df=new WeakSet,c0=function(t,n){var l;const[s,i]=this.parentDimensions;this.width=t/s,this.height=n/i,this.setDims(t,n),(l=this._initialOptions)!=null&&l.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,o(this,Gn)!==null&&clearTimeout(o(this,Gn)),v(this,Gn,setTimeout(()=>{v(this,Gn,null),b(this,wh,wg).call(this,t,n)},200))},uf=new WeakSet,h0=function(t,n){const{width:s,height:i}=o(this,ft);let a=s,l=i,c=o(this,ft);for(;a>2*t||l>2*n;){const h=a,d=l;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const u=new OffscreenCanvas(a,l);u.getContext("2d").drawImage(c,0,0,h,d,0,0,a,l),c=u.transferToImageBitmap()}return c},wh=new WeakSet,wg=function(t,n){t=Math.ceil(t),n=Math.ceil(n);const s=o(this,Wn);if(!s||s.width===t&&s.height===n)return;s.width=t,s.height=n;const i=o(this,_n)?o(this,ft):b(this,uf,h0).call(this,t,n);if(this._uiManager.hasMLManager&&!this.hasAltText()){const c=new OffscreenCanvas(t,n).getContext("2d");c.drawImage(i,0,0,i.width,i.height,0,0,t,n),this._uiManager.mlGuess({service:"image-to-text",request:{data:c.getImageData(0,0,t,n).data,width:t,height:n,channels:4}}).then(h=>{const d=(h==null?void 0:h.output)||"";this.parent&&d&&!this.hasAltText()&&(this.altTextData={altText:d,decorative:!1})})}const a=s.getContext("2d");a.filter=this._uiManager.hcmFilter,a.drawImage(i,0,0,i.width,i.height,0,0,t,n)},fo=new WeakSet,Ed=function(t){if(t){if(o(this,_n)){const i=this._uiManager.imageManager.getSvgUrl(o(this,pt));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=o(this,ft),n.getContext("2d").drawImage(o(this,ft),0,0),n.toDataURL()}if(o(this,_n)){const[n,s]=this.pageDimensions,i=Math.round(this.width*n*ui.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*ui.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(i,a);return l.getContext("2d").drawImage(o(this,ft),0,0,o(this,ft).width,o(this,ft).height,0,0,i,a),l.transferToImageBitmap()}return structuredClone(o(this,ft))},ff=new WeakSet,d0=function(){v(this,Pr,new ResizeObserver(t=>{const n=t[0].contentRect;n.width&&n.height&&b(this,df,c0).call(this,n.width,n.height)})),o(this,Pr).observe(this.div)},re(al,"_type","stamp"),re(al,"_editorType",be.STAMP);let _g=al;var Dr,po,Vn,kr,Rs,Ls,Ds,Kt,ci,go,mo,St,ne,hi,pf,u0,xh,Tg,Th,Sg,Sh,Cg,vo,wd;const cn=class cn{constructor({uiManager:e,pageIndex:t,div:n,accessibilityManager:s,annotationLayer:i,drawLayer:a,textLayer:l,viewport:c,l10n:h}){p(this,pf);p(this,xh);p(this,Th);p(this,Sh);p(this,vo);p(this,Dr,void 0);p(this,po,!1);p(this,Vn,null);p(this,kr,null);p(this,Rs,null);p(this,Ls,null);p(this,Ds,null);p(this,Kt,new Map);p(this,ci,!1);p(this,go,!1);p(this,mo,!1);p(this,St,null);p(this,ne,void 0);const d=[...o(cn,hi).values()];if(!cn._initialized){cn._initialized=!0;for(const u of d)u.initialize(h,e)}e.registerEditorTypes(d),v(this,ne,e),this.pageIndex=t,this.div=n,v(this,Dr,s),v(this,Vn,i),this.viewport=c,v(this,St,l),this.drawLayer=a,o(this,ne).addLayer(this)}get isEmpty(){return o(this,Kt).size===0}get isInvisible(){return this.isEmpty&&o(this,ne).getMode()===be.NONE}updateToolbar(e){o(this,ne).updateToolbar(e)}updateMode(e=o(this,ne).getMode()){switch(b(this,vo,wd).call(this),e){case be.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case be.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case be.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of o(cn,hi).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=o(this,St))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(o(this,ne).getMode()!==be.INK)return;if(!e){for(const n of o(this,Kt).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){o(this,ne).setEditingState(e)}addCommands(e){o(this,ne).addCommands(e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=o(this,Vn))==null||t.div.classList.toggle("disabled",!e)}enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of o(this,Kt).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(o(this,ne).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!o(this,Vn))return;const t=o(this,Vn).getEditableAnnotations();for(const n of t){if(n.hide(),o(this,ne).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const s=this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;v(this,mo,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const i of o(this,Kt).values())if(i.disableEditing(),!!i.annotationElementId){if(i.serialize()!==null){e.set(i.annotationElementId,i);continue}else t.set(i.annotationElementId,i);(s=this.getEditableAnnotation(i.annotationElementId))==null||s.show(),i.remove()}if(o(this,Vn)){const i=o(this,Vn).getEditableAnnotations();for(const a of i){const{id:l}=a.data;if(o(this,ne).isDeletedAnnotationElement(l))continue;let c=t.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=e.get(l),c&&(o(this,ne).addChangedExistingAnnotation(c),c.renderAnnotationElement(a),c.show(!1)),a.show()}}b(this,vo,wd).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of o(cn,hi).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),v(this,mo,!1)}getEditableAnnotation(e){var t;return((t=o(this,Vn))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){o(this,ne).getActive()!==e&&o(this,ne).setActiveEditor(e)}enableTextSelection(){var e;this.div.tabIndex=-1,(e=o(this,St))!=null&&e.div&&!o(this,Ls)&&(v(this,Ls,b(this,pf,u0).bind(this)),o(this,St).div.addEventListener("pointerdown",o(this,Ls)),o(this,St).div.classList.add("highlighting"))}disableTextSelection(){var e;this.div.tabIndex=0,(e=o(this,St))!=null&&e.div&&o(this,Ls)&&(o(this,St).div.removeEventListener("pointerdown",o(this,Ls)),v(this,Ls,null),o(this,St).div.classList.remove("highlighting"))}enableClick(){o(this,Rs)||(v(this,Rs,this.pointerdown.bind(this)),v(this,kr,this.pointerup.bind(this)),this.div.addEventListener("pointerdown",o(this,Rs)),this.div.addEventListener("pointerup",o(this,kr)))}disableClick(){o(this,Rs)&&(this.div.removeEventListener("pointerdown",o(this,Rs)),this.div.removeEventListener("pointerup",o(this,kr)),v(this,Rs,null),v(this,kr,null))}attach(e){o(this,Kt).set(e.id,e);const{annotationElementId:t}=e;t&&o(this,ne).isDeletedAnnotationElement(t)&&o(this,ne).removeDeletedAnnotationElement(e)}detach(e){var t;o(this,Kt).delete(e.id),(t=o(this,Dr))==null||t.removePointerInTextLayer(e.contentDiv),!o(this,mo)&&e.annotationElementId&&o(this,ne).addDeletedAnnotationElement(e)}remove(e){this.detach(e),o(this,ne).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,o(this,go)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(o(this,ne).addDeletedAnnotationElement(e.annotationElementId),Se.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),o(this,ne).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),o(this,ne).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!o(this,Ds)&&(e._focusEventsAllowed=!1,v(this,Ds,setTimeout(()=>{v(this,Ds,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus())},0))),e._structTreeParentId=(n=o(this,Dr))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return o(this,ne).getId()}canCreateNewEmptyEditor(){var e;return(e=o(this,xh,Tg))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){o(this,ne).updateToolbar(e),o(this,ne).updateMode(e);const{offsetX:n,offsetY:s}=b(this,Sh,Cg).call(this),i=this.getNextId(),a=b(this,Th,Sg).call(this,{parent:this,id:i,x:n,y:s,uiManager:o(this,ne),isCentered:!0,...t});a&&this.add(a)}deserialize(e){var t;return((t=o(cn,hi).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,o(this,ne)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),i=b(this,Th,Sg).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:o(this,ne),isCentered:t,...n});return i&&this.add(i),i}addNewEditor(){this.createAndAddNewEditor(b(this,Sh,Cg).call(this),!0)}setSelected(e){o(this,ne).setSelected(e)}toggleSelected(e){o(this,ne).toggleSelected(e)}isSelected(e){return o(this,ne).isSelected(e)}unselect(e){o(this,ne).unselect(e)}pointerup(e){const{isMac:t}=jt.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&o(this,ci)){if(v(this,ci,!1),!o(this,po)){v(this,po,!0);return}if(o(this,ne).getMode()===be.STAMP){o(this,ne).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(o(this,ne).getMode()===be.HIGHLIGHT&&this.enableTextSelection(),o(this,ci)){v(this,ci,!1);return}const{isMac:t}=jt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;v(this,ci,!0);const n=o(this,ne).getActive();v(this,po,!n||n.isEmpty())}findNewParent(e,t,n){const s=o(this,ne).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}destroy(){var e,t;((e=o(this,ne).getActive())==null?void 0:e.parent)===this&&(o(this,ne).commitOrRemove(),o(this,ne).setActiveEditor(null)),o(this,Ds)&&(clearTimeout(o(this,Ds)),v(this,Ds,null));for(const n of o(this,Kt).values())(t=o(this,Dr))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,o(this,Kt).clear(),o(this,ne).removeLayer(this)}render({viewport:e}){this.viewport=e,Ir(this.div,e);for(const t of o(this,ne).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){o(this,ne).commitOrRemove(),b(this,vo,wd).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Ir(this.div,{rotation:n}),t!==n)for(const s of o(this,Kt).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return o(this,ne).viewParameters.realScale}};Dr=new WeakMap,po=new WeakMap,Vn=new WeakMap,kr=new WeakMap,Rs=new WeakMap,Ls=new WeakMap,Ds=new WeakMap,Kt=new WeakMap,ci=new WeakMap,go=new WeakMap,mo=new WeakMap,St=new WeakMap,ne=new WeakMap,hi=new WeakMap,pf=new WeakSet,u0=function(e){if(o(this,ne).unselectAll(),e.target===o(this,St).div){const{isMac:t}=jt.platform;if(e.button!==0||e.ctrlKey&&t)return;o(this,ne).showAllEditors("highlight",!0,!0),o(this,St).div.classList.add("free"),Ld.startHighlighting(this,o(this,ne).direction==="ltr",e),o(this,St).div.addEventListener("pointerup",()=>{o(this,St).div.classList.remove("free")},{once:!0}),e.preventDefault()}},xh=new WeakSet,Tg=function(){return o(cn,hi).get(o(this,ne).getMode())},Th=new WeakSet,Sg=function(e){const t=o(this,xh,Tg);return t?new t.prototype.constructor(e):null},Sh=new WeakSet,Cg=function(){const{x:e,y:t,width:n,height:s}=this.div.getBoundingClientRect(),i=Math.max(0,e),a=Math.max(0,t),l=Math.min(window.innerWidth,e+n),c=Math.min(window.innerHeight,t+s),h=(i+l)/2-e,d=(a+c)/2-t,[u,f]=this.viewport.rotation%180===0?[h,d]:[d,h];return{offsetX:u,offsetY:f}},vo=new WeakSet,wd=function(){v(this,go,!0);for(const e of o(this,Kt).values())e.isEmpty()&&e.remove();v(this,go,!1)},re(cn,"_initialized",!1),p(cn,hi,new Map([sg,pg,_g,Ld].map(e=>[e._editorType,e])));let xg=cn;var qn,Ch,Ze,di,Ph,Rg,Rh,Lg,gf,f0;const ot=class ot{constructor({pageIndex:e}){p(this,Rh);p(this,gf);p(this,qn,null);p(this,Ch,0);p(this,Ze,new Map);p(this,di,new Map);this.pageIndex=e}setParent(e){if(!o(this,qn)){v(this,qn,e);return}if(o(this,qn)!==e){if(o(this,Ze).size>0)for(const t of o(this,Ze).values())t.remove(),e.append(t);v(this,qn,e)}}static get _svgFactory(){return Ae(this,"_svgFactory",new Ug)}highlight(e,t,n,s=!1){const i=zt(this,Ch)._++,a=b(this,Rh,Lg).call(this,e.box);a.classList.add("highlight"),e.free&&a.classList.add("free");const l=ot._svgFactory.createElement("defs");a.append(l);const c=ot._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",h),c.setAttribute("d",e.toSVGPath()),s&&o(this,di).set(i,c);const d=b(this,gf,f0).call(this,l,h),u=ot._svgFactory.createElement("use");return a.append(u),a.setAttribute("fill",t),a.setAttribute("fill-opacity",n),u.setAttribute("href",`#${h}`),o(this,Ze).set(i,a),{id:i,clipPathId:`url(#${d})`}}highlightOutline(e){const t=zt(this,Ch)._++,n=b(this,Rh,Lg).call(this,e.box);n.classList.add("highlightOutline");const s=ot._svgFactory.createElement("defs");n.append(s);const i=ot._svgFactory.createElement("path");s.append(i);const a=`path_p${this.pageIndex}_${t}`;i.setAttribute("id",a),i.setAttribute("d",e.toSVGPath()),i.setAttribute("vector-effect","non-scaling-stroke");let l;if(e.free){n.classList.add("free");const d=ot._svgFactory.createElement("mask");s.append(d),l=`mask_p${this.pageIndex}_${t}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");const u=ot._svgFactory.createElement("rect");d.append(u),u.setAttribute("width","1"),u.setAttribute("height","1"),u.setAttribute("fill","white");const f=ot._svgFactory.createElement("use");d.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const c=ot._svgFactory.createElement("use");n.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const h=c.cloneNode();return n.append(h),c.classList.add("mainOutline"),h.classList.add("secondaryOutline"),o(this,Ze).set(t,n),t}finalizeLine(e,t){const n=o(this,di).get(e);o(this,di).delete(e),this.updateBox(e,t.box),n.setAttribute("d",t.toSVGPath())}updateLine(e,t){o(this,Ze).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}removeFreeHighlight(e){this.remove(e),o(this,di).delete(e)}updatePath(e,t){o(this,di).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var n;b(n=ot,Ph,Rg).call(n,o(this,Ze).get(e),t)}show(e,t){o(this,Ze).get(e).classList.toggle("hidden",!t)}rotate(e,t){o(this,Ze).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){o(this,Ze).get(e).setAttribute("fill",t)}changeOpacity(e,t){o(this,Ze).get(e).setAttribute("fill-opacity",t)}addClass(e,t){o(this,Ze).get(e).classList.add(t)}removeClass(e,t){o(this,Ze).get(e).classList.remove(t)}remove(e){o(this,qn)!==null&&(o(this,Ze).get(e).remove(),o(this,Ze).delete(e))}destroy(){v(this,qn,null);for(const e of o(this,Ze).values())e.remove();o(this,Ze).clear()}};qn=new WeakMap,Ch=new WeakMap,Ze=new WeakMap,di=new WeakMap,Ph=new WeakSet,Rg=function(e,{x:t=0,y:n=0,width:s=1,height:i=1}={}){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`},Rh=new WeakSet,Lg=function(e){var n;const t=ot._svgFactory.create(1,1,!0);return o(this,qn).append(t),t.setAttribute("aria-hidden",!0),b(n=ot,Ph,Rg).call(n,t,e),t},gf=new WeakSet,f0=function(e,t){const n=ot._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const i=ot._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},p(ot,Ph);let Pg=ot;var S1=se.AbortException,C1=se.AnnotationEditorLayer,P1=se.AnnotationEditorParamsType,R1=se.AnnotationEditorType,L1=se.AnnotationEditorUIManager,p0=se.AnnotationLayer,g0=se.AnnotationMode,D1=se.CMapCompressionType,k1=se.ColorPicker,I1=se.DOMSVGFactory,M1=se.DrawLayer,N1=se.FeatureTest,Yg=se.GlobalWorkerOptions,F1=se.ImageKind,O1=se.InvalidPDFException,j1=se.MissingPDFException,B1=se.OPS,H1=se.Outliner,U1=se.PDFDataRangeTransport,z1=se.PDFDateString,W1=se.PDFWorker,G1=se.PasswordResponses,V1=se.PermissionFlag,q1=se.PixelsPerInch,$1=se.RenderingCancelledException,m0=se.TextLayer,X1=se.UnexpectedResponseException,Y1=se.Util,K1=se.VerbosityLevel,Z1=se.XfaLayer,J1=se.build,Q1=se.createValidAbsoluteUrl,eS=se.fetchData,v0=se.getDocument,tS=se.getFilenameFromUrl,nS=se.getPdfFilenameFromUrl,sS=se.getXfaPageViewport,iS=se.isDataScheme,rS=se.isPdfFile,aS=se.noContextMenu,oS=se.normalizeUnicode,lS=se.renderTextLayer,cS=se.setLayerDimensions,hS=se.shadow,dS=se.updateTextLayer,uS=se.version;const fS=Object.freeze(Object.defineProperty({__proto__:null,AbortException:S1,AnnotationEditorLayer:C1,AnnotationEditorParamsType:P1,AnnotationEditorType:R1,AnnotationEditorUIManager:L1,AnnotationLayer:p0,AnnotationMode:g0,CMapCompressionType:D1,ColorPicker:k1,DOMSVGFactory:I1,DrawLayer:M1,FeatureTest:N1,GlobalWorkerOptions:Yg,ImageKind:F1,InvalidPDFException:O1,MissingPDFException:j1,OPS:B1,Outliner:H1,PDFDataRangeTransport:U1,PDFDateString:z1,PDFWorker:W1,PasswordResponses:G1,PermissionFlag:V1,PixelsPerInch:q1,RenderingCancelledException:$1,TextLayer:m0,UnexpectedResponseException:X1,Util:Y1,VerbosityLevel:K1,XfaLayer:Z1,build:J1,createValidAbsoluteUrl:Q1,fetchData:eS,getDocument:v0,getFilenameFromUrl:tS,getPdfFilenameFromUrl:nS,getXfaPageViewport:sS,isDataScheme:iS,isPdfFile:rS,noContextMenu:aS,normalizeUnicode:oS,renderTextLayer:lS,setLayerDimensions:cS,shadow:hS,updateTextLayer:dS,version:uS},Symbol.toStringTag,{value:"Module"}));var tt=function(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},pS=["onCopy","onCut","onPaste"],gS=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],mS=["onFocus","onBlur"],vS=["onInput","onInvalid","onReset","onSubmit"],bS=["onLoad","onError"],yS=["onKeyDown","onKeyPress","onKeyUp"],AS=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],_S=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],ES=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],wS=["onSelect"],xS=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],TS=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],SS=["onScroll"],CS=["onWheel"],PS=["onAnimationStart","onAnimationEnd","onAnimationIteration"],RS=["onTransitionEnd"],LS=["onToggle"],DS=["onChange"],kS=tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt(tt([],pS,!0),gS,!0),mS,!0),vS,!0),bS,!0),yS,!0),AS,!0),_S,!0),ES,!0),wS,!0),xS,!0),TS,!0),SS,!0),CS,!0),PS,!0),RS,!0),DS,!0),LS,!0);function b0(r,e){var t={};return kS.forEach(function(n){var s=r[n];s&&(e?t[n]=function(i){return s(i,e(n))}:t[n]=s)}),t}function Oh(r){var e=!1,t=new Promise(function(n,s){r.then(function(i){return!e&&n(i)}).catch(function(i){return!e&&s(i)})});return{promise:t,cancel:function(){e=!0}}}function y0(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=y0(r[e]))&&(n&&(n+=" "),n+=t);else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function Lf(){for(var r,e,t=0,n="";t<arguments.length;)(r=arguments[t++])&&(e=y0(r))&&(n&&(n+=" "),n+=e);return n}var IS=function(){},MS=IS;const At=Vv(MS);var Ym=Object.prototype.hasOwnProperty;function Km(r,e,t){for(t of r.keys())if(Qr(t,e))return t}function Qr(r,e){var t,n,s;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&Qr(r[n],e[n]););return n===-1}if(t===Set){if(r.size!==e.size)return!1;for(n of r)if(s=n,s&&typeof s=="object"&&(s=Km(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(n of r)if(s=n[0],s&&typeof s=="object"&&(s=Km(e,s),!s)||!Qr(n[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((n=r.byteLength)===e.byteLength)for(;n--&&r.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===e.byteLength)for(;n--&&r[n]===e[n];);return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(Ym.call(r,t)&&++n&&!Ym.call(e,t)||!(t in e)||!Qr(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}const A0=P.createContext(null);function ea({children:r,type:e}){return y.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:r})}const NS="noopener noreferrer nofollow";class FS{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ke(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){ke(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(t=>{ke(this.pdfDocument),ke(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{ke(Array.isArray(t));const n=t[0];new Promise(s=>{ke(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(i=>{s(i)}).catch(()=>{ke(!1)}):typeof n=="number"?s(n):ke(!1)}).then(s=>{const i=s+1;ke(this.pdfViewer),ke(i>=1&&i<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:i})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const t=e-1;ke(this.pdfViewer),ke(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||NS,e.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Zm={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},Df=typeof document<"u",_0=Df&&window.location.protocol==="file:";function OS(r){return typeof r<"u"}function bi(r){return OS(r)&&r!==null}function jS(r){return typeof r=="string"}function BS(r){return r instanceof ArrayBuffer}function HS(r){return ke(Df),r instanceof Blob}function Dg(r){return jS(r)&&/^data:/.test(r)}function Jm(r){ke(Dg(r));const[e="",t=""]=r.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function US(){return Df&&window.devicePixelRatio||1}const E0="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Qm(){At(!_0,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${E0}`)}function zS(){At(!_0,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${E0}`)}function Fr(r){r&&r.cancel&&r.cancel()}function kg(r,e){return Object.defineProperty(r,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(r,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(r,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(r,"originalHeight",{get(){return this.view[3]},configurable:!0}),r}function WS(r){return r.name==="RenderingCancelledException"}function GS(r){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:i}=s.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(r)})}function VS(r,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return r}}function yo(){return P.useReducer(VS,{value:void 0,error:void 0})}var qS=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(d){try{h(n.next(d))}catch(u){a(u)}}function c(d){try{h(n.throw(d))}catch(u){a(u)}}function h(d){d.done?i(d.value):s(d.value).then(l,c)}h((n=n.apply(r,e||[])).next())})},ev=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const{PDFDataRangeTransport:$S}=fS,XS=(r,e)=>{switch(e){case Zm.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");r(t);break}case Zm.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");r(t);break}}};function tv(r){return typeof r=="object"&&r!==null&&("data"in r||"range"in r||"url"in r)}const YS=P.forwardRef(function(e,t){var{children:n,className:s,error:i="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:l,file:c,inputRef:h,imageResourcesPath:d,loading:u="Loading PDF…",noData:f="No PDF file specified.",onItemClick:g,onLoadError:m,onLoadProgress:A,onLoadSuccess:E,onPassword:_=XS,onSourceError:T,onSourceSuccess:C,options:L,renderMode:D,rotate:I}=e,N=ev(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[w,x]=yo(),{value:k,error:R}=w,[F,O]=yo(),{value:j,error:q}=F,X=P.useRef(new FS),M=P.useRef([]),U=P.useRef(void 0),z=P.useRef(void 0);c&&c!==U.current&&tv(c)&&(At(!Qr(c,U.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),U.current=c),L&&L!==z.current&&(At(!Qr(L,z.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),z.current=L);const _e=P.useRef({scrollPageIntoView:V=>{const{dest:pe,pageNumber:ge,pageIndex:xe=ge-1}=V;if(g){g({dest:pe,pageIndex:xe,pageNumber:ge});return}const je=M.current[xe];if(je){je.scrollIntoView();return}At(!1,`An internal link leading to page ${ge} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});P.useImperativeHandle(t,()=>({linkService:X,pages:M,viewer:_e}),[]);function ee(){C&&C()}function H(){R&&(At(!1,R.toString()),T&&T(R))}function W(){x({type:"RESET"})}P.useEffect(W,[c,x]);const ce=P.useCallback(()=>qS(this,void 0,void 0,function*(){if(!c)return null;if(typeof c=="string")return Dg(c)?{data:Jm(c)}:(Qm(),{url:c});if(c instanceof $S)return{range:c};if(BS(c))return{data:c};if(Df&&HS(c))return{data:yield GS(c)};if(ke(typeof c=="object"),ke(tv(c)),"url"in c&&typeof c.url=="string"){if(Dg(c.url)){const{url:V}=c,pe=ev(c,["url"]),ge=Jm(V);return Object.assign({data:ge},pe)}Qm()}return c}),[c]);P.useEffect(()=>{const V=Oh(ce());return V.promise.then(pe=>{x({type:"RESOLVE",value:pe})}).catch(pe=>{x({type:"REJECT",error:pe})}),()=>{Fr(V)}},[ce,x]),P.useEffect(()=>{if(!(typeof k>"u")){if(k===!1){H();return}ee()}},[k]);function K(){j&&(E&&E(j),M.current=new Array(j.numPages),X.current.setDocument(j))}function oe(){q&&(At(!1,q.toString()),m&&m(q))}function Z(){O({type:"RESET"})}P.useEffect(Z,[O,k]);function ue(){if(!k)return;const V=Object.assign(Object.assign({},k),L),pe=v0(V);A&&(pe.onProgress=A),_&&(pe.onPassword=_);const ge=pe;return ge.promise.then(xe=>{O({type:"RESOLVE",value:xe})}).catch(xe=>{ge.destroyed||O({type:"REJECT",error:xe})}),()=>{ge.destroy()}}P.useEffect(ue,[L,O,k]),P.useEffect(()=>{if(!(typeof j>"u")){if(j===!1){oe();return}K()}},[j]);function G(){X.current.setViewer(_e.current),X.current.setExternalLinkRel(a),X.current.setExternalLinkTarget(l)}P.useEffect(G,[a,l]);function J(V,pe){M.current[V]=pe}function ve(V){delete M.current[V]}const Ee=P.useMemo(()=>({imageResourcesPath:d,linkService:X.current,onItemClick:g,pdf:j,registerPage:J,renderMode:D,rotate:I,unregisterPage:ve}),[d,g,j,D,I]),te=P.useMemo(()=>b0(N,()=>j),[N,j]);function fe(){return y.jsx(A0.Provider,{value:Ee,children:n})}function ae(){return c?j==null?y.jsx(ea,{type:"loading",children:typeof u=="function"?u():u}):j===!1?y.jsx(ea,{type:"error",children:typeof i=="function"?i():i}):fe():y.jsx(ea,{type:"no-data",children:typeof f=="function"?f():f})}return y.jsx("div",Object.assign({className:Lf("react-pdf__Document",s),ref:h,style:{"--scale-factor":"1"}},te,{children:ae()}))});function w0(){return P.useContext(A0)}function x0(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(i){t.forEach(function(a){typeof a=="function"?a(i):a&&(a.current=i)})}}const T0=P.createContext(null),S0={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},KS=/^H(\d+)$/;function ZS(r){return r in S0}function kf(r){return"children"in r}function C0(r){return kf(r)?r.children.length===1&&0 in r.children&&"id"in r.children[0]:!1}function JS(r){const e={};if(kf(r)){const{role:t}=r,n=t.match(KS);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(ZS(t)){const s=S0[t];s&&(e.role=s)}}return e}function P0(r){const e={};if(kf(r)){if(r.alt!==void 0&&(e["aria-label"]=r.alt),r.lang!==void 0&&(e.lang=r.lang),C0(r)){const[t]=r.children;if(t){const n=P0(t);return Object.assign(Object.assign({},e),n)}}}else"id"in r&&(e["aria-owns"]=r.id);return e}function QS(r){return r?Object.assign(Object.assign({},JS(r)),P0(r)):null}function R0({className:r,node:e}){const t=P.useMemo(()=>QS(e),[e]),n=P.useMemo(()=>!kf(e)||C0(e)?null:e.children.map((s,i)=>y.jsx(R0,{node:s},i)),[e]);return y.jsx("span",Object.assign({className:r},t,{children:n}))}function If(){return P.useContext(T0)}function eC(){const r=If();ke(r);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=r,[n,s]=yo(),{value:i,error:a}=n,{customTextRenderer:l,page:c}=r;function h(){i&&t&&t(i)}function d(){a&&(At(!1,a.toString()),e&&e(a))}function u(){s({type:"RESET"})}P.useEffect(u,[s,c]);function f(){if(l||!c)return;const g=Oh(c.getStructTree()),m=g;return g.promise.then(A=>{s({type:"RESOLVE",value:A})}).catch(A=>{s({type:"REJECT",error:A})}),()=>Fr(m)}return P.useEffect(f,[l,c,s]),P.useEffect(()=>{if(i!==void 0){if(i===!1){d();return}h()}},[i]),i?y.jsx(R0,{className:"react-pdf__Page__structTree structTree",node:i}):null}const nv=g0;function tC(r){const e=If();ke(e);const t=Object.assign(Object.assign({},e),r),{_className:n,canvasBackground:s,devicePixelRatio:i=US(),onRenderError:a,onRenderSuccess:l,page:c,renderForms:h,renderTextLayer:d,rotate:u,scale:f}=t,{canvasRef:g}=r;ke(c);const m=P.useRef(null);function A(){c&&l&&l(kg(c,f))}function E(D){WS(D)||(At(!1,D.toString()),a&&a(D))}const _=P.useMemo(()=>c.getViewport({scale:f*i,rotation:u}),[i,c,u,f]),T=P.useMemo(()=>c.getViewport({scale:f,rotation:u}),[c,u,f]);function C(){if(!c)return;c.cleanup();const{current:D}=m;if(!D)return;D.width=_.width,D.height=_.height,D.style.width=`${Math.floor(T.width)}px`,D.style.height=`${Math.floor(T.height)}px`,D.style.visibility="hidden";const I={annotationMode:h?nv.ENABLE_FORMS:nv.ENABLE,canvasContext:D.getContext("2d",{alpha:!1}),viewport:_};s&&(I.background=s);const N=c.render(I),w=N;return N.promise.then(()=>{D.style.visibility="",A()}).catch(E),()=>Fr(w)}P.useEffect(C,[s,m,i,c,h,_,T]);const L=P.useCallback(()=>{const{current:D}=m;D&&(D.width=0,D.height=0)},[m]);return P.useEffect(()=>L,[L]),y.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:x0(g,m),style:{display:"block",userSelect:"none"},children:d?y.jsx(eC,{}):null})}function nC(r){return"str"in r}function sC(){const r=If();ke(r);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:i,page:a,pageIndex:l,pageNumber:c,rotate:h,scale:d}=r;ke(a);const[u,f]=yo(),{value:g,error:m}=u,A=P.useRef(null),E=P.useRef(void 0);At(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function _(){g&&n&&n(g)}function T(){m&&(At(!1,m.toString()),t&&t(m))}function C(){f({type:"RESET"})}P.useEffect(C,[a,f]);function L(){if(!a)return;const R=Oh(a.getTextContent()),F=R;return R.promise.then(O=>{f({type:"RESOLVE",value:O})}).catch(O=>{f({type:"REJECT",error:O})}),()=>Fr(F)}P.useEffect(L,[a,f]),P.useEffect(()=>{if(g!==void 0){if(g===!1){T();return}_()}},[g]);const D=P.useCallback(()=>{i&&i()},[i]),I=P.useCallback(R=>{At(!1,R.toString()),s&&s(R)},[s]);function N(){const R=E.current;R&&R.classList.add("active")}function w(){const R=E.current;R&&R.classList.remove("active")}const x=P.useMemo(()=>a.getViewport({scale:d,rotation:h}),[a,h,d]);function k(){if(!a||!g)return;const{current:R}=A;if(!R)return;R.innerHTML="";const F=a.streamTextContent({includeMarkedContent:!0}),O={container:R,textContentSource:F,viewport:x},j=new m0(O),q=j;return j.render().then(()=>{const X=document.createElement("div");X.className="endOfContent",R.append(X),E.current=X;const M=R.querySelectorAll('[role="presentation"]');if(e){let U=0;g.items.forEach((z,_e)=>{if(!nC(z))return;const ee=M[U];if(!ee)return;const H=e(Object.assign({pageIndex:l,pageNumber:c,itemIndex:_e},z));ee.innerHTML=H,U+=z.str&&z.hasEOL?2:1})}D()}).catch(I),()=>Fr(q)}return P.useLayoutEffect(k,[e,I,D,a,l,c,g,x]),y.jsx("div",{className:Lf("react-pdf__Page__textContent","textLayer"),onMouseUp:w,onMouseDown:N,ref:A})}function iC(){const r=w0(),e=If();ke(e);const t=Object.assign(Object.assign({},r),e),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:i,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:h,pdf:d,renderForms:u,rotate:f,scale:g=1}=t;ke(d),ke(h),ke(s);const[m,A]=yo(),{value:E,error:_}=m,T=P.useRef(null);At(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function C(){E&&a&&a(E)}function L(){_&&(At(!1,_.toString()),i&&i(_))}function D(){A({type:"RESET"})}P.useEffect(D,[A,h]);function I(){if(!h)return;const R=Oh(h.getAnnotations()),F=R;return R.promise.then(O=>{A({type:"RESOLVE",value:O})}).catch(O=>{A({type:"REJECT",error:O})}),()=>{Fr(F)}}P.useEffect(I,[A,h,u]),P.useEffect(()=>{if(E!==void 0){if(E===!1){L();return}C()}},[E]);function N(){c&&c()}function w(R){At(!1,`${R}`),l&&l(R)}const x=P.useMemo(()=>h.getViewport({scale:g,rotation:f}),[h,f,g]);function k(){if(!d||!h||!s||!E)return;const{current:R}=T;if(!R)return;const F=x.clone({dontFlip:!0}),O={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,div:R,l10n:null,page:h,viewport:F},j={annotations:E,annotationStorage:d.annotationStorage,div:R,imageResourcesPath:n,linkService:s,page:h,renderForms:u,viewport:F};R.innerHTML="";try{new p0(O).render(j),N()}catch(q){w(q)}return()=>{}}return P.useEffect(k,[E,n,s,h,u,x]),y.jsx("div",{className:Lf("react-pdf__Page__annotations","annotationLayer"),ref:T})}var rC=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const sv=1;function L0(r){const e=w0(),t=Object.assign(Object.assign({},e),r),{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:i,canvasRef:a,children:l,className:c,customRenderer:h,customTextRenderer:d,devicePixelRatio:u,error:f="Failed to load the page.",height:g,inputRef:m,loading:A="Loading page…",noData:E="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:L,onGetTextError:D,onGetTextSuccess:I,onLoadError:N,onLoadSuccess:w,onRenderAnnotationLayerError:x,onRenderAnnotationLayerSuccess:k,onRenderError:R,onRenderSuccess:F,onRenderTextLayerError:O,onRenderTextLayerSuccess:j,pageIndex:q,pageNumber:X,pdf:M,registerPage:U,renderAnnotationLayer:z=!0,renderForms:_e=!1,renderMode:ee="canvas",renderTextLayer:H=!0,rotate:W,scale:ce=sv,unregisterPage:K,width:oe}=t,Z=rC(t,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[ue,G]=yo(),{value:J,error:ve}=ue,Ee=P.useRef(null);ke(M);const te=bi(X)?X-1:q??null,fe=X??(bi(q)?q+1:null),ae=W??(J?J.rotate:null),V=P.useMemo(()=>{if(!J)return null;let et=1;const gt=ce??sv;if(oe||g){const Be=J.getViewport({scale:1,rotation:ae});oe?et=oe/Be.width:g&&(et=g/Be.height)}return gt*et},[g,J,ae,ce,oe]);function pe(){return()=>{bi(te)&&s&&K&&K(te)}}P.useEffect(pe,[s,M,te,K]);function ge(){if(w){if(!J||!V)return;w(kg(J,V))}if(s&&U){if(!bi(te)||!Ee.current)return;U(te,Ee.current)}}function xe(){ve&&(At(!1,ve.toString()),N&&N(ve))}function je(){G({type:"RESET"})}P.useEffect(je,[G,M,te]);function Fe(){if(!M||!fe)return;const et=Oh(M.getPage(fe)),gt=et;return et.promise.then(Be=>{G({type:"RESOLVE",value:Be})}).catch(Be=>{G({type:"REJECT",error:Be})}),()=>Fr(gt)}P.useEffect(Fe,[G,M,te,fe,U]),P.useEffect(()=>{if(J!==void 0){if(J===!1){xe();return}ge()}},[J,V]);const we=P.useMemo(()=>J&&bi(te)&&fe&&bi(ae)&&bi(V)?{_className:n,canvasBackground:i,customTextRenderer:d,devicePixelRatio:u,onGetAnnotationsError:_,onGetAnnotationsSuccess:T,onGetStructTreeError:C,onGetStructTreeSuccess:L,onGetTextError:D,onGetTextSuccess:I,onRenderAnnotationLayerError:x,onRenderAnnotationLayerSuccess:k,onRenderError:R,onRenderSuccess:F,onRenderTextLayerError:O,onRenderTextLayerSuccess:j,page:J,pageIndex:te,pageNumber:fe,renderForms:_e,renderTextLayer:H,rotate:ae,scale:V}:null,[n,i,d,u,_,T,C,L,D,I,x,k,R,F,O,j,J,te,fe,_e,H,ae,V]),Ce=P.useMemo(()=>b0(Z,()=>J&&(V?kg(J,V):void 0)),[Z,J,V]),Ue=`${te}@${V}/${ae}`;function le(){switch(ee){case"custom":return ke(h),y.jsx(h,{},`${Ue}_custom`);case"none":return null;case"canvas":default:return y.jsx(tC,{canvasRef:a},`${Ue}_canvas`)}}function Qe(){return H?y.jsx(sC,{},`${Ue}_text`):null}function Me(){return z?y.jsx(iC,{},`${Ue}_annotations`):null}function Ht(){return y.jsxs(T0.Provider,{value:we,children:[le(),Qe(),Me(),l]})}function Ut(){return fe?M===null||J===void 0||J===null?y.jsx(ea,{type:"loading",children:typeof A=="function"?A():A}):M===!1||J===!1?y.jsx(ea,{type:"error",children:typeof f=="function"?f():f}):Ht():y.jsx(ea,{type:"no-data",children:typeof E=="function"?E():E})}return y.jsx("div",Object.assign({className:Lf(n,c),"data-page-number":fe,ref:x0(m,Ee),style:{"--scale-factor":`${V}`,backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},Ce,{children:Ut()}))}zS();Yg.workerSrc="pdf.worker.mjs";const D0="SET_ZOOM_LEVEL",rp=r=>({type:D0,value:r}),k0="SET_PDF_PAGINATED",Kg=r=>({type:k0,value:r}),I0="SET_NUM_PAGES",iv=r=>({type:I0,value:r}),M0="SET_CURRENT_PAGE",N0="SET_CURRENT_MAIN_STATE",Dd=r=>({type:M0,value:r}),Bs={defaultZoomLevel:1,zoomLevel:1,zoomJump:.1,paginated:!0,numPages:0,currentPage:1},aC=(r=Bs,e)=>{switch(e.type){case D0:{const{value:t}=e;return{...r,zoomLevel:t}}case k0:{const{value:t}=e;return{...r,paginated:t}}case I0:{const{value:t}=e;return{...r,numPages:t}}case M0:{const{value:t}=e;return{...r,currentPage:t}}case N0:{const{value:t}=e;return{...r,mainState:t}}default:return r}},gi=P.createContext({state:Bs,dispatch:()=>null}),F0=({children:r,mainState:e})=>{var i,a,l,c,h,d,u;const[t,n]=P.useReducer(aC,{...Bs,defaultZoomLevel:((a=(i=e.config)==null?void 0:i.pdfZoom)==null?void 0:a.defaultZoom)??Bs.defaultZoomLevel,zoomLevel:((c=(l=e.config)==null?void 0:l.pdfZoom)==null?void 0:c.defaultZoom)??Bs.zoomLevel,zoomJump:((d=(h=e.config)==null?void 0:h.pdfZoom)==null?void 0:d.zoomJump)??Bs.zoomJump,paginated:(u=e.config)!=null&&u.pdfVerticalScrollByDefault?!1:Bs.paginated,mainState:e}),s=P.useRef(void 0);return P.useEffect(()=>{n({type:N0,value:e})},[e]),P.useEffect(()=>{e.targetPage!==void 0&&e.targetPage!==s.current&&e.targetPage>=1&&e.targetPage<=t.numPages&&(n(Dd(e.targetPage)),t.paginated||n(Kg(!0)),s.current=e.targetPage)},[e.targetPage,t.numPages,t.paginated]),y.jsx(gi.Provider,{value:{state:t,dispatch:n},children:r})};F0.__docgenInfo={description:"",methods:[],displayName:"PDFProvider",props:{mainState:{required:!0,tsType:{name:"signature",type:"object",raw:`{
  currentFileNo: number;
  documents: IDocument[];
  documentLoading?: boolean;
  currentDocument?: IDocument;
  rendererRect?: DOMRect;
  config?: IConfig;
  pluginRenderers?: DocRenderer[];
  prefetchMethod?: string;
  requestHeaders?: Record<string, string>;
  language: AvailableLanguages;
  activeDocument?: IDocument;
  onDocumentChange?: (document: IDocument) => void;
  isDragging?: boolean;
  targetPage?: number;
}`,signature:{properties:[{key:"currentFileNo",value:{name:"number",required:!0}},{key:"documents",value:{name:"Array",elements:[{name:"IDocument"}],raw:"IDocument[]",required:!0}},{key:"documentLoading",value:{name:"boolean",required:!1}},{key:"currentDocument",value:{name:"IDocument",required:!1}},{key:"rendererRect",value:{name:"DOMRect",required:!1}},{key:"config",value:{name:"IConfig",required:!1}},{key:"pluginRenderers",value:{name:"Array",elements:[{name:"DocRenderer"}],raw:"DocRenderer[]",required:!1}},{key:"prefetchMethod",value:{name:"string",required:!1}},{key:"requestHeaders",value:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>",required:!1}},{key:"language",value:{name:"union",raw:"keyof typeof locales",elements:[{name:"literal",value:"en"},{name:"literal",value:"pl"},{name:"literal",value:"es"},{name:"literal",value:"de"},{name:"literal",value:"it"},{name:"literal",value:"pt"},{name:"literal",value:"fr"},{name:"literal",value:"ar"},{name:"literal",value:"sr"},{name:"literal",value:"sr_cyr"},{name:"literal",value:"ja"},{name:"literal",value:"ru"},{name:"literal",value:"se"},{name:"literal",value:"tr"}],required:!0}},{key:"activeDocument",value:{name:"IDocument",required:!1}},{key:"onDocumentChange",value:{name:"signature",type:"function",raw:"(document: IDocument) => void",signature:{arguments:[{type:{name:"IDocument"},name:"document"}],return:{name:"void"}},required:!1}},{key:"isDragging",value:{name:"boolean",required:!1}},{key:"targetPage",value:{name:"number",required:!1}}]}},description:""}}};const O0="SET_ACTIVE_TOOL",j0="SET_CURRENT_COLOR",B0="ADD_ANNOTATION",H0="UPDATE_ANNOTATION",U0="DELETE_ANNOTATION",z0="SET_ANNOTATIONS",W0="SET_SELECTED_ANNOTATION",G0="SET_IS_DRAWING",oC=r=>({type:O0,tool:r}),lC=r=>({type:j0,color:r}),Zg=r=>({type:B0,annotation:r}),cC=(r,e)=>({type:H0,id:r,updates:e}),Jg=r=>({type:U0,id:r}),hC=r=>({type:z0,annotations:r}),Qg=r=>({type:W0,id:r}),rv=r=>({type:G0,isDrawing:r}),V0=["#FFFF00","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8"],q0=["select","highlight","pen","comment","eraser"],kd={activeTool:"select",currentColor:"#FFFF00",annotations:[],selectedAnnotationId:null,isDrawing:!1,availableColors:V0,availableTools:q0},dC=(r=kd,e)=>{switch(e.type){case O0:{const{tool:t}=e;return{...r,activeTool:t}}case j0:{const{color:t}=e;return{...r,currentColor:t}}case B0:{const{annotation:t}=e;return{...r,annotations:[...r.annotations,t]}}case H0:{const{id:t,updates:n}=e;return{...r,annotations:r.annotations.map(s=>s.id===t?{...s,...n}:s)}}case U0:{const{id:t}=e;return{...r,annotations:r.annotations.filter(n=>n.id!==t),selectedAnnotationId:r.selectedAnnotationId===t?null:r.selectedAnnotationId}}case z0:{const{annotations:t}=e;return{...r,annotations:t}}case W0:{const{id:t}=e;return{...r,selectedAnnotationId:t}}case G0:{const{isDrawing:t}=e;return{...r,isDrawing:t}}default:return r}},Yn=P.createContext({state:kd,dispatch:()=>null}),$0=({children:r,config:e,documentUri:t})=>{var i;const[n,s]=P.useReducer(dC,{...kd,currentColor:(e==null?void 0:e.defaultColor)||kd.currentColor,availableColors:(e==null?void 0:e.colors)||V0,availableTools:(e==null?void 0:e.tools)||q0,activeTool:((i=e==null?void 0:e.tools)==null?void 0:i[0])||"select",annotations:(e==null?void 0:e.initialAnnotations)||[]});return P.useEffect(()=>{e!=null&&e.initialAnnotations&&s(hC(e.initialAnnotations))},[e==null?void 0:e.initialAnnotations]),P.useEffect(()=>{e!=null&&e.onAnnotationChange&&e.onAnnotationChange(n.annotations)},[n.annotations,e==null?void 0:e.onAnnotationChange]),y.jsx(Yn.Provider,{value:{state:n,dispatch:s,config:e},children:r})};$0.__docgenInfo={description:"",methods:[],displayName:"AnnotationProvider",props:{config:{required:!1,tsType:{name:"IAnnotationConfig"},description:""},documentUri:{required:!1,tsType:{name:"string"},description:""}}};const uC=({canvasRef:r,pageNumber:e,documentUri:t})=>{const{state:n,dispatch:s}=P.useContext(Yn),[i,a]=P.useState([]),l=P.useRef(!1),c=P.useCallback(g=>{const m=r.current;if(!m)return null;const A=m.getBoundingClientRect(),E=m.width/A.width,_=m.height/A.height;return{x:(g.clientX-A.left)*E,y:(g.clientY-A.top)*_}},[r]),h=P.useCallback(g=>{if(n.activeTool!=="pen")return;const m=c(g);if(!m)return;l.current=!0,s(rv(!0)),a([m]);const A=r.current,E=A==null?void 0:A.getContext("2d");E&&(E.beginPath(),E.moveTo(m.x,m.y),E.strokeStyle=n.currentColor,E.lineWidth=3,E.lineCap="round",E.lineJoin="round")},[n.activeTool,n.currentColor,c,s,r]),d=P.useCallback(g=>{if(!l.current||n.activeTool!=="pen")return;const m=c(g);if(!m)return;a(_=>[..._,m]);const A=r.current,E=A==null?void 0:A.getContext("2d");E&&(E.lineTo(m.x,m.y),E.stroke())},[n.activeTool,c,r]),u=P.useCallback(()=>{if(l.current){if(l.current=!1,s(rv(!1)),i.length>1){const g={paths:[i],strokeWidth:3},m={id:crypto.randomUUID(),type:"drawing",documentUri:t,pageNumber:e,color:n.currentColor,data:g};s(Zg(m))}a([])}},[i,t,e,n.currentColor,s]),f=P.useCallback(g=>{const m=r.current,A=m==null?void 0:m.getContext("2d");!A||!m||(A.clearRect(0,0,m.width,m.height),g.filter(E=>E.type==="drawing"&&E.pageNumber===e&&E.documentUri===t).forEach(E=>{const _=E.data;_!=null&&_.paths&&(A.strokeStyle=E.color,A.lineWidth=_.strokeWidth||3,A.lineCap="round",A.lineJoin="round",_.paths.forEach(T=>{T.length<2||(A.beginPath(),A.moveTo(T[0].x,T[0].y),T.slice(1).forEach(C=>{A.lineTo(C.x,C.y)}),A.stroke())}))}))},[r,e,t]);return{startDrawing:h,draw:d,stopDrawing:u,redrawAnnotations:f,isDrawing:n.isDrawing}},fC=({pageNumber:r,documentUri:e,containerRef:t})=>{const{state:n,dispatch:s}=P.useContext(Yn);return{handleTextSelection:P.useCallback(()=>{if(n.activeTool!=="highlight")return;const a=window.getSelection();if(!a||a.isCollapsed)return;const l=a.getRangeAt(0),c=t.current;if(!c)return;const h=c.getBoundingClientRect(),d=Array.from(l.getClientRects());if(d.length===0)return;const f={rects:d.map(m=>({x:m.left-h.left,y:m.top-h.top,width:m.width,height:m.height})),text:a.toString()},g={id:crypto.randomUUID(),type:"highlight",documentUri:e,pageNumber:r,color:n.currentColor,data:f};s(Zg(g)),a.removeAllRanges()},[n.activeTool,n.currentColor,e,r,t,s])}},X0=({annotation:r})=>{const{state:e,dispatch:t}=P.useContext(Yn),n=r.data,s=e.selectedAnnotationId===r.id;if(!(n!=null&&n.rects))return null;const i=a=>{a.stopPropagation(),e.activeTool==="select"?t(Qg(r.id)):e.activeTool==="eraser"&&t(Jg(r.id))};return y.jsx(y.Fragment,{children:n.rects.map((a,l)=>y.jsx("div",{className:"rdv-highlight-rect",style:{left:a.x,top:a.y,width:a.width,height:a.height,backgroundColor:r.color},...s?{"data-selected":""}:{},onClick:i,title:n.text},`${r.id}-${l}`))})};X0.__docgenInfo={description:"",methods:[],displayName:"TextHighlight",props:{annotation:{required:!0,tsType:{name:"IAnnotation"},description:""}}};const Y0=({color:r="#000",size:e="100%"})=>y.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),y.jsx("path",{d:"M13 13l6 6"})]}),K0=({color:r="#000",size:e="100%"})=>y.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M12 20h9"}),y.jsx("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}),y.jsx("rect",{x:"3",y:"17",width:"18",height:"4",rx:"1",fill:r,opacity:"0.3"})]}),Z0=({color:r="#000",size:e="100%"})=>y.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M12 19l7-7 3 3-7 7-3-3z"}),y.jsx("path",{d:"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"}),y.jsx("path",{d:"M2 2l7.586 7.586"}),y.jsx("circle",{cx:"11",cy:"11",r:"2"})]}),J0=({color:r="#000",size:e="100%"})=>y.jsx("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:y.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),Q0=({color:r="#000",size:e="100%"})=>y.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M20 20H7L3 16c-.6-.6-.6-1.5 0-2.1L13.1 3.9c.6-.6 1.5-.6 2.1 0l5.7 5.7c.6.6.6 1.5 0 2.1L11 21"}),y.jsx("path",{d:"M6 11l7 7"})]}),eA=({color:r="#000",size:e="100%"})=>y.jsxs("svg",{width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("polyline",{points:"3 6 5 6 21 6"}),y.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),y.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),y.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]});Y0.__docgenInfo={description:"",methods:[],displayName:"SelectIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};K0.__docgenInfo={description:"",methods:[],displayName:"HighlightIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};Z0.__docgenInfo={description:"",methods:[],displayName:"PenIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};J0.__docgenInfo={description:"",methods:[],displayName:"CommentIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};Q0.__docgenInfo={description:"",methods:[],displayName:"EraserIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};eA.__docgenInfo={description:"",methods:[],displayName:"DeleteIcon",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#000"',computed:!1}},size:{required:!1,tsType:{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]},description:"",defaultValue:{value:'"100%"',computed:!1}},isActive:{required:!1,tsType:{name:"boolean"},description:""}}};const tA=({annotation:r,onClose:e})=>{const{dispatch:t}=P.useContext(Yn),n=r.data,[s,i]=P.useState((n==null?void 0:n.text)||""),[a,l]=P.useState(!(n!=null&&n.text)),c=()=>{if(s.trim()){const u={...n,text:s.trim(),timestamp:Date.now()};t(cC(r.id,{data:u})),l(!1)}},h=()=>{t(Jg(r.id)),e()},d=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),c()),u.key==="Escape"&&e()};return y.jsxs("div",{className:"rdv-comment-popover",onClick:u=>u.stopPropagation(),children:[y.jsxs("div",{className:"rdv-comment-popover-header",children:[y.jsx("span",{className:"rdv-comment-popover-title",children:"Comment"}),y.jsx("button",{className:"rdv-comment-popover-delete",onClick:h,title:"Delete comment",children:y.jsx(eA,{size:"14",color:"#666"})})]}),a?y.jsx("textarea",{className:"rdv-comment-popover-textarea",value:s,onChange:u=>i(u.target.value),onKeyDown:d,placeholder:"Enter your comment...",autoFocus:!0}):y.jsx("div",{className:"rdv-comment-popover-text",onClick:()=>l(!0),children:s}),y.jsxs("div",{className:"rdv-comment-popover-footer",children:[(n==null?void 0:n.timestamp)&&y.jsx("span",{className:"rdv-comment-popover-timestamp",children:new Date(n.timestamp).toLocaleString()}),a&&y.jsx("button",{className:"rdv-comment-popover-save",onClick:c,disabled:!s.trim(),children:"Save"})]})]})};tA.__docgenInfo={description:"",methods:[],displayName:"CommentPopover",props:{annotation:{required:!0,tsType:{name:"IAnnotation"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const nA=({annotation:r})=>{const{state:e,dispatch:t}=P.useContext(Yn),[n,s]=P.useState(!1),i=r.data,a=e.selectedAnnotationId===r.id;if(!i)return null;const l=c=>{c.stopPropagation(),e.activeTool==="eraser"?t(Jg(r.id)):(t(Qg(r.id)),s(!n))};return y.jsxs("div",{className:"rdv-comment-container",style:{left:i.x,top:i.y},children:[y.jsx("button",{className:"rdv-comment-marker",style:{backgroundColor:r.color},...a?{"data-selected":""}:{},onClick:l,"aria-label":"Comment",children:y.jsx(pC,{})}),n&&y.jsx(tA,{annotation:r,onClose:()=>s(!1)})]})},pC=()=>y.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"white",stroke:"white",strokeWidth:"2",children:y.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})});nA.__docgenInfo={description:"",methods:[],displayName:"CommentMarker",props:{annotation:{required:!0,tsType:{name:"IAnnotation"},description:""}}};const sA=({pageNumber:r,documentUri:e,width:t,height:n})=>{const{state:s,dispatch:i}=P.useContext(Yn),a=P.useRef(null),l=P.useRef(null),{startDrawing:c,draw:h,stopDrawing:d,redrawAnnotations:u}=uC({canvasRef:l,pageNumber:r,documentUri:e}),{handleTextSelection:f}=fC({pageNumber:r,documentUri:e,containerRef:a}),g=s.annotations.filter(C=>C.pageNumber===r&&C.documentUri===e),m=g.filter(C=>C.type==="highlight"),A=g.filter(C=>C.type==="comment"),E=g.filter(C=>C.type==="drawing");P.useEffect(()=>{u(E)},[E,u]),P.useEffect(()=>{const C=l.current;C&&(C.width=t,C.height=n,u(E))},[t,n,u,E]);const _=C=>{var L;if(s.activeTool==="comment"){const D=(L=a.current)==null?void 0:L.getBoundingClientRect();if(!D)return;const I=C.clientX-D.left,N=C.clientY-D.top,w={x:I,y:N,text:"",timestamp:Date.now()},x={id:crypto.randomUUID(),type:"comment",documentUri:e,pageNumber:r,color:s.currentColor,data:w};i(Zg(x))}else s.activeTool==="select"&&i(Qg(null))},T=()=>{switch(s.activeTool){case"highlight":return"text";case"pen":return"crosshair";case"comment":return"pointer";case"eraser":return"not-allowed";default:return"default"}};return y.jsxs("div",{ref:a,className:"rdv-annotation-layer",style:{width:t,height:n,cursor:T()},onClick:_,onMouseUp:f,children:[m.map(C=>y.jsx(X0,{annotation:C},C.id)),A.map(C=>y.jsx(nA,{annotation:C},C.id)),y.jsx("canvas",{ref:l,className:"rdv-annotation-drawing-canvas",width:t,height:n,onMouseDown:c,onMouseMove:h,onMouseUp:d,onMouseLeave:d,...s.activeTool==="pen"?{"data-pen-active":""}:{}})]})};sA.__docgenInfo={description:"",methods:[],displayName:"AnnotationLayer",props:{pageNumber:{required:!0,tsType:{name:"number"},description:""},documentUri:{required:!0,tsType:{name:"string"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""}}};const iA=()=>{const{state:r,dispatch:e}=P.useContext(Yn);return y.jsx("div",{className:"rdv-color-picker",children:r.availableColors.map(t=>y.jsx("button",{className:"rdv-color-btn",style:{backgroundColor:t},...r.currentColor===t?{"data-selected":""}:{},onClick:()=>e(lC(t)),title:t,"aria-label":`Select color ${t}`,"aria-pressed":r.currentColor===t},t))})};iA.__docgenInfo={description:"",methods:[],displayName:"ColorPicker"};const gC={select:Y0,highlight:K0,pen:Z0,comment:J0,eraser:Q0},av={select:"Select",highlight:"Highlight",pen:"Draw",comment:"Comment",eraser:"Eraser"},rA=()=>{const{state:r,dispatch:e}=P.useContext(Yn);return y.jsxs("div",{className:"rdv-annotation-toolbar",children:[y.jsx("div",{className:"rdv-annotation-tool-group",children:r.availableTools.map(t=>{const n=gC[t],s=r.activeTool===t;return y.jsx("button",{className:"rdv-annotation-tool-btn",...s?{"data-active":""}:{},onClick:()=>e(oC(t)),title:av[t],"aria-label":av[t],"aria-pressed":s,children:y.jsx(n,{color:s?"#0064c8":"#333",size:"60%"})},t)})}),(r.activeTool==="highlight"||r.activeTool==="pen"||r.activeTool==="comment")&&y.jsx("div",{className:"rdv-annotation-separator"}),(r.activeTool==="highlight"||r.activeTool==="pen"||r.activeTool==="comment")&&y.jsx(iA,{})]})};rA.__docgenInfo={description:"",methods:[],displayName:"AnnotationToolbar"};const em=({pageNum:r})=>{var E,_;const{state:{mainState:e,paginated:t,zoomLevel:n,numPages:s,currentPage:i}}=P.useContext(gi);P.useContext(Yn);const{t:a}=Or(),l=P.useRef(null),[c,h]=P.useState({width:0,height:0}),d=(e==null?void 0:e.rendererRect)||null,u=(E=e==null?void 0:e.config)==null?void 0:E.annotations,f=(u==null?void 0:u.enableAnnotations)??!1,g=r??i;P.useEffect(()=>{if(l.current){const T=l.current.querySelector("canvas");T&&h({width:T.width,height:T.height})}},[n,g]);const m=()=>{if(l.current){const T=l.current.querySelector("canvas");T&&h({width:T.offsetWidth,height:T.offsetHeight})}},A=g>=s;return y.jsxs("div",{id:"pdf-page-wrapper",className:"rdv-pdf-page-wrapper",...A?{"data-last-page":""}:{},children:[!t&&y.jsx("div",{id:"pdf-page-info",className:"rdv-pdf-page-tag-info",children:a("pdfPluginPageNumber",{currentPage:g,allPagesCount:s})}),y.jsxs("div",{className:"rdv-pdf-page-container",ref:l,children:[y.jsx(L0,{pageNumber:g||i,scale:n,height:((d==null?void 0:d.height)??100)-100,width:((d==null?void 0:d.width)??100)-100,loading:a("pdfPluginLoading"),onRenderSuccess:m}),f&&c.width>0&&y.jsx(sA,{pageNumber:g,documentUri:((_=e==null?void 0:e.currentDocument)==null?void 0:_.uri)||"",width:c.width,height:c.height})]})]})};em.__docgenInfo={description:"",methods:[],displayName:"PDFSinglePage",props:{pageNum:{required:!1,tsType:{name:"number"},description:""}}};const aA=()=>{const{state:{numPages:r}}=P.useContext(gi),e=[];for(let t=0;t<r;t++)e.push(y.jsx(em,{pageNum:t+1},t+1));return y.jsx(y.Fragment,{children:e})};aA.__docgenInfo={description:"",methods:[],displayName:"PDFAllPages",props:{pageNum:{required:!1,tsType:{name:"number"},description:""}}};const oA="SET_SIDEBAR_OPEN",lA="SET_THUMBNAILS",cA="SET_SELECTED_PAGE",hA="UPDATE_SINGLE_THUMBNAIL",mC=r=>({type:oA,isOpen:r}),vC=r=>({type:lA,thumbnails:r}),ov=r=>({type:cA,pageNumber:r}),lv=(r,e)=>({type:hA,pageNumber:r,dataUrl:e}),tm={isOpen:!1,thumbnails:[],selectedPage:1,thumbnailWidth:120},bC=(r=tm,e)=>{switch(e.type){case oA:{const{isOpen:t}=e;return{...r,isOpen:t}}case lA:{const{thumbnails:t}=e;return{...r,thumbnails:t}}case cA:{const{pageNumber:t}=e;return{...r,selectedPage:t}}case hA:{const{pageNumber:t,dataUrl:n}=e;return{...r,thumbnails:r.thumbnails.map(s=>s.pageNumber===t?{...s,dataUrl:n,isLoading:!1}:s)}}default:return r}},jh=P.createContext({state:tm,dispatch:()=>null}),dA=({children:r,config:e})=>{const[t,n]=P.useReducer(bC,{...tm,isOpen:(e==null?void 0:e.sidebarDefaultOpen)??!1,thumbnailWidth:(e==null?void 0:e.thumbnailWidth)??120});return y.jsx(jh.Provider,{value:{state:t,dispatch:n},children:r})};dA.__docgenInfo={description:"",methods:[],displayName:"ThumbnailProvider",props:{config:{required:!1,tsType:{name:"IThumbnailConfig"},description:""}}};const uA=({thumbnail:r,isSelected:e,width:t,onClick:n})=>y.jsxs("div",{className:"rdv-thumbnail-item",onClick:n,...e?{"data-selected":""}:{},role:"button",tabIndex:0,"aria-label":`Page ${r.pageNumber}`,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&n()},children:[y.jsx("div",{className:"rdv-thumbnail-wrapper",children:r.isLoading?y.jsx("div",{className:"rdv-thumbnail-loading",style:{width:t,height:t*1.4},children:y.jsx("div",{className:"rdv-thumbnail-spinner"})}):r.dataUrl?y.jsx("img",{className:"rdv-thumbnail-image",src:r.dataUrl,alt:`Page ${r.pageNumber}`,style:{width:t}}):y.jsx("div",{className:"rdv-thumbnail-placeholder",style:{width:t,height:t*1.4},children:r.pageNumber})}),y.jsx("span",{className:"rdv-thumbnail-page-number",children:r.pageNumber})]});uA.__docgenInfo={description:"",methods:[],displayName:"ThumbnailItem",props:{thumbnail:{required:!0,tsType:{name:"IThumbnail"},description:""},isSelected:{required:!0,tsType:{name:"boolean"},description:""},width:{required:!0,tsType:{name:"number"},description:""},onClick:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const fA=({onPageSelect:r,currentPage:e})=>{const{state:t,dispatch:n}=P.useContext(jh),s=P.useRef(null),i=P.useRef(null);if(P.useEffect(()=>{n(ov(e))},[e,n]),P.useEffect(()=>{if(i.current&&s.current){const l=s.current,c=i.current,h=l.getBoundingClientRect(),d=c.getBoundingClientRect();(d.top<h.top||d.bottom>h.bottom)&&c.scrollIntoView({behavior:"smooth",block:"center"})}},[t.selectedPage]),!t.isOpen)return null;const a=l=>{n(ov(l)),r(l)};return y.jsx("div",{className:"rdv-thumbnail-sidebar",children:y.jsx("div",{className:"rdv-thumbnail-scroll-area",ref:s,children:t.thumbnails.map(l=>y.jsx("div",{ref:l.pageNumber===t.selectedPage?i:null,children:y.jsx(uA,{thumbnail:l,isSelected:l.pageNumber===t.selectedPage,width:t.thumbnailWidth,onClick:()=>a(l.pageNumber)})},l.pageNumber))})})};fA.__docgenInfo={description:"",methods:[],displayName:"ThumbnailSidebar",props:{onPageSelect:{required:!0,tsType:{name:"signature",type:"function",raw:"(pageNumber: number) => void",signature:{arguments:[{type:{name:"number"},name:"pageNumber"}],return:{name:"void"}}},description:""},currentPage:{required:!0,tsType:{name:"number"},description:""}}};const pA=({title:r="Toggle thumbnails"})=>{const{state:e,dispatch:t}=P.useContext(jh),n=()=>{t(mC(!e.isOpen))};return y.jsx("button",{className:"rdv-thumbnail-toggle",onClick:n,title:r,"aria-label":r,"aria-pressed":e.isOpen,children:y.jsx(yC,{isOpen:e.isOpen})})},yC=({isOpen:r})=>y.jsxs("svg",{width:"70%",height:"70%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{opacity:r?1:.7},children:[y.jsx("rect",{x:"3",y:"3",width:"7",height:"9",rx:"1"}),y.jsx("rect",{x:"14",y:"3",width:"7",height:"9",rx:"1"}),y.jsx("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}),y.jsx("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1"})]});pA.__docgenInfo={description:"",methods:[],displayName:"ThumbnailToggle",props:{title:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Toggle thumbnails"',computed:!1}}}};const AC=({numPages:r,documentUri:e,scale:t=.15})=>{const{state:n,dispatch:s}=P.useContext(jh),i=P.useCallback(()=>{if(r>0){const l=Array.from({length:r},(c,h)=>({pageNumber:h+1,isLoading:!0}));s(vC(l))}},[r,s]),a=P.useCallback((l,c)=>{try{const h=l.toDataURL("image/png",.8);s(lv(c,h))}catch{s(lv(c,""))}},[s]);return P.useEffect(()=>{i()},[r,e,i]),{thumbnails:n.thumbnails,generateThumbnailFromCanvas:a,scale:t}},_C=120,gA=()=>{var h,d;const{state:r}=P.useContext(gi),{state:e}=P.useContext(jh),{numPages:t,mainState:n}=r,s=(h=n==null?void 0:n.config)==null?void 0:h.thumbnail,i=(s==null?void 0:s.enableThumbnails)??!1,a=P.useRef(new Set),{generateThumbnailFromCanvas:l}=AC({numPages:t,documentUri:(d=n==null?void 0:n.currentDocument)==null?void 0:d.uri}),c=P.useCallback(u=>{setTimeout(()=>{const f=document.querySelector(`[data-thumbnail-page="${u}"]`);if(f){const g=f.querySelector("canvas");g&&!a.current.has(u)&&(l(g,u),a.current.add(u))}},100)},[l]);return!i||!e.isOpen||t===0?null:y.jsx("div",{className:"rdv-pdf-thumbnail-hidden","aria-hidden":"true",children:Array.from({length:t},(u,f)=>f+1).map(u=>{const f=e.thumbnails.find(g=>g.pageNumber===u);return f!=null&&f.dataUrl?null:y.jsx("div",{className:"rdv-pdf-thumbnail-page","data-thumbnail-page":u,children:y.jsx(L0,{pageNumber:u,width:_C,onRenderSuccess:()=>c(u),renderTextLayer:!1,renderAnnotationLayer:!1})},u)})})};gA.__docgenInfo={description:"",methods:[],displayName:"PDFThumbnailGenerator"};const mA=()=>{const{state:{mainState:r,paginated:e},dispatch:t}=P.useContext(gi),{t:n}=Or(),s=(r==null?void 0:r.currentDocument)||null;return P.useEffect(()=>{t(iv(Bs.numPages))},[s]),!s||s.fileData===void 0?null:y.jsxs(YS,{className:"rdv-pdf-document",file:s.fileData,onLoadSuccess:({numPages:i})=>t(iv(i)),loading:y.jsx("span",{children:n("pdfPluginLoading")}),children:[e?y.jsx(em,{}):y.jsx(aA,{}),y.jsx(gA,{})]})};mA.__docgenInfo={description:"",methods:[],displayName:"PDFPages"};const vA=r=>y.jsx(yA,{...r,reverse:!0}),bA=r=>y.jsx(yA,{...r}),yA=r=>{const{color:e,size:t,reverse:n}=r;return y.jsx("svg",{width:t||"100%",height:t||"100%",style:{transform:`${n?"rotate(180deg)":""}`},viewBox:"0 0 12 12",version:"1.1",children:y.jsx("g",{id:"Icons",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:y.jsx("g",{id:"Rounded",transform:"translate(-548.000000, -1000.000000)",children:y.jsx("g",{id:"AV",transform:"translate(100.000000, 852.000000)",children:y.jsx("g",{id:"-Round-/-AV-/-skip_next",transform:"translate(442.000000, 142.000000)",children:y.jsxs("g",{children:[y.jsx("rect",{id:"Rectangle-Copy-52",x:"0",y:"0",width:"24",height:"24"}),y.jsx("path",{d:"M7.58,16.89 L13.35,12.82 C13.91,12.42 13.91,11.58 13.35,11.19 L7.58,7.11 C6.91,6.65 6,7.12 6,7.93 L6,16.07 C6,16.88 6.91,17.35 7.58,16.89 Z M16,7 L16,17 C16,17.55 16.45,18 17,18 C17.55,18 18,17.55 18,17 L18,7 C18,6.45 17.55,6 17,6 C16.45,6 16,6.45 16,7 Z",id:"icon_color",fill:e||"#aaa"})]})})})})})})},AA=r=>{const{color:e,size:t,reverse:n}=r;return y.jsxs("svg",{width:t||"100%",height:t||"100%",style:{transform:`${n?"rotate(180deg)":""}`},id:"Layer_1",viewBox:"0 0 24 24",children:[y.jsx("path",{d:"M20.57,9.43A8,8,0,0,0,5.26,10,5,5,0,1,0,5,20h5V18H5a3,3,0,0,1,0-6,3.1,3.1,0,0,1,.79.12l1.12.31.14-1.15a6,6,0,0,1,11.74-.82l.15.54.54.16A3.46,3.46,0,0,1,22,14.5,3.5,3.5,0,0,1,18.5,18H16v2h2.5A5.48,5.48,0,0,0,20.57,9.43Z",fill:e||"#aaa"}),y.jsx("polygon",{points:"12 11 12 15.59 10.71 14.29 9.29 15.71 13 19.41 16.71 15.71 15.29 14.29 14 15.59 14 11 12 11",fill:e||"#aaa"})]})},_A=r=>y.jsx(wA,{...r}),EA=r=>y.jsx(wA,{...r,reverse:!0}),wA=r=>{const{color:e,size:t,reverse:n}=r;return y.jsx("svg",{width:t||"100%",height:t||"100%",viewBox:"0 0 32 32",version:"1.1",children:y.jsx("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:y.jsx("g",{id:"search-plus-icon",fill:e||"#aaa",children:y.jsx("path",{id:"search-plus",d:n?"M 13 13 L 16 13 L 19 13 L 19 16 L 16 16 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z":"M 13 13 L 13 10 L 16 10 L 16 13 L 19 13 L 19 16 L 16 16 L 16 19 L 13 19 L 13 16 L 10 16 L 10 13 Z M 19.4271 21.4271 C 18.0372 22.4175 16.3367 23 14.5 23 C 9.8056 23 6 19.1944 6 14.5 C 6 9.8056 9.8056 6 14.5 6 C 19.1944 6 23 9.8056 23 14.5 C 23 16.3367 22.4175 18.0372 21.4271 19.4271 L 27.0119 25.0119 C 27.5621 25.5621 27.5575 26.4425 27.0117 26.9883 L 26.9883 27.0117 C 26.4439 27.5561 25.5576 27.5576 25.0119 27.0119 L 19.4271 21.4271 L 19.4271 21.4271 L 19.4271 21.4271 Z M 14.5 21 C 18.0899 21 21 18.0899 21 14.5 C 21 10.9101 18.0899 8 14.5 8 C 10.9101 8 8 10.9101 8 14.5 C 8 18.0899 10.9101 21 14.5 21 L 14.5 21 Z"})})})})},xA=r=>{const{color:e,size:t}=r;return y.jsx("svg",{width:t||"100%",height:t||"100%",viewBox:"0 0 24 24",children:y.jsx("path",{fill:e||"#aaa",d:"M9.29,13.29,4,18.59V17a1,1,0,0,0-2,0v4a1,1,0,0,0,.08.38,1,1,0,0,0,.54.54A1,1,0,0,0,3,22H7a1,1,0,0,0,0-2H5.41l5.3-5.29a1,1,0,0,0-1.42-1.42ZM5.41,4H7A1,1,0,0,0,7,2H3a1,1,0,0,0-.38.08,1,1,0,0,0-.54.54A1,1,0,0,0,2,3V7A1,1,0,0,0,4,7V5.41l5.29,5.3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42ZM21,16a1,1,0,0,0-1,1v1.59l-5.29-5.3a1,1,0,0,0-1.42,1.42L18.59,20H17a1,1,0,0,0,0,2h4a1,1,0,0,0,.38-.08,1,1,0,0,0,.54-.54A1,1,0,0,0,22,21V17A1,1,0,0,0,21,16Zm.92-13.38a1,1,0,0,0-.54-.54A1,1,0,0,0,21,2H17a1,1,0,0,0,0,2h1.59l-5.3,5.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0L20,5.41V7a1,1,0,0,0,2,0V3A1,1,0,0,0,21.92,2.62Z"})})},TA=r=>{const{color:e,size:t,reverse:n}=r;return y.jsx("svg",{width:t||"100%",height:t||"100%",style:{transform:`${n?"rotate(90deg)":""}`},version:"1.1",id:"Scroll_1",viewBox:"0 0 297 297",xmlSpace:"preserve",children:y.jsx("path",{fill:e||"#aaa",d:`M206.004,200.723h-31.231V96.277h31.231c0.005,0,0.014,0,0.019,0c5.289,0,9.575-4.287,9.575-9.574
  c0-2.342-0.841-4.488-2.236-6.151L156.168,3.851C154.36,1.428,151.515,0,148.492,0c-3.023,0-5.868,1.428-7.675,3.851L83.302,80.98
  c-2.166,2.902-2.507,6.779-0.883,10.017c1.624,3.236,4.936,5.28,8.559,5.28h31.231v104.445H90.978c-3.623,0-6.934,2.044-8.559,5.28
  c-1.624,3.237-1.283,7.114,0.883,10.017l57.513,77.129c1.808,2.424,4.652,3.852,7.675,3.852c3.023,0,5.868-1.428,7.676-3.852
  l57.514-77.129c2.164-2.902,2.507-6.779,0.883-10.017C212.938,202.767,209.627,200.723,206.004,200.723z`})})};vA.__docgenInfo={description:"",methods:[],displayName:"PrevPDFNavIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};bA.__docgenInfo={description:"",methods:[],displayName:"NextPDFNavIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};AA.__docgenInfo={description:"",methods:[],displayName:"DownloadPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};_A.__docgenInfo={description:"",methods:[],displayName:"ZoomInPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};EA.__docgenInfo={description:"",methods:[],displayName:"ZoomOutPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};xA.__docgenInfo={description:"",methods:[],displayName:"ResetZoomPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};TA.__docgenInfo={description:"",methods:[],displayName:"TogglePaginationPDFIcon",props:{color:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"string | number | string | undefined",elements:[{name:"string"},{name:"number"},{name:"string"},{name:"undefined"}]},description:""},reverse:{required:!1,tsType:{name:"boolean"},description:""}}};const SA=()=>{const{state:{currentPage:r,numPages:e},dispatch:t}=P.useContext(gi),{t:n}=Or();return y.jsxs("div",{id:"pdf-pagination",className:"rdv-pdf-pagination",children:[y.jsx(Ti,{id:"pdf-pagination-prev",className:"rdv-pdf-page-nav-btn-left",onClick:()=>t(Dd(r-1)),disabled:r===1,children:y.jsx(vA,{color:"#000",size:"50%"})}),y.jsx("div",{id:"pdf-pagination-info",className:"rdv-pdf-page-tag",children:n("pdfPluginPageNumber",{currentPage:r,allPagesCount:e})}),y.jsx(Ti,{id:"pdf-pagination-next",className:"rdv-pdf-page-nav-btn-right",onClick:()=>t(Dd(r+1)),disabled:r>=e,children:y.jsx(bA,{color:"#000",size:"50%"})})]})};SA.__docgenInfo={description:"",methods:[],displayName:"PDFPagination"};const CA=()=>{var u;const{t:r}=Or(),{state:{mainState:e,paginated:t,zoomLevel:n,numPages:s,zoomJump:i,defaultZoomLevel:a},dispatch:l}=P.useContext(gi),c=(e==null?void 0:e.currentDocument)||null,h=(u=e==null?void 0:e.config)==null?void 0:u.thumbnail,d=(h==null?void 0:h.enableThumbnails)??!1;return y.jsxs("div",{id:"pdf-controls",className:"rdv-pdf-controls",children:[d&&s>1&&y.jsx(pA,{title:"Toggle thumbnails"}),t&&s>1&&y.jsx(SA,{}),(c==null?void 0:c.fileData)&&y.jsx(Fg,{id:"pdf-download",className:"rdv-pdf-download-btn",href:c==null?void 0:c.fileData,download:(c==null?void 0:c.fileName)||(c==null?void 0:c.uri),title:r("downloadButtonLabel"),children:y.jsx(AA,{color:"#000",size:"75%"})}),y.jsx(Ti,{id:"pdf-zoom-out",className:"rdv-pdf-control-btn",onMouseDown:()=>l(rp(n-i)),children:y.jsx(EA,{color:"#000",size:"80%"})}),y.jsx(Ti,{id:"pdf-zoom-in",className:"rdv-pdf-control-btn",onMouseDown:()=>l(rp(n+i)),children:y.jsx(_A,{color:"#000",size:"80%"})}),y.jsx(Ti,{id:"pdf-zoom-reset",className:"rdv-pdf-control-btn",onMouseDown:()=>l(rp(a)),disabled:n===a,children:y.jsx(xA,{color:"#000",size:"70%"})}),s>1&&y.jsx(Ti,{id:"pdf-toggle-pagination",className:"rdv-pdf-control-btn",onMouseDown:()=>l(Kg(!t)),children:y.jsx(TA,{color:"#000",size:"70%",reverse:t})})]})};CA.__docgenInfo={description:"",methods:[],displayName:"PDFControls"};Yg.workerSrc=new URL(""+new URL("pdf.worker.min-l1Cnq-yx.mjs",import.meta.url).href,import.meta.url).toString();const EC=()=>{var l,c,h,d;const{state:r,dispatch:e}=P.useContext(gi),t=(c=(l=r.mainState)==null?void 0:l.config)==null?void 0:c.thumbnail,n=(d=(h=r.mainState)==null?void 0:h.config)==null?void 0:d.annotations,s=(t==null?void 0:t.enableThumbnails)??!1,i=(n==null?void 0:n.enableAnnotations)??!1,a=u=>{e(Dd(u)),r.paginated||e(Kg(!0))};return y.jsxs("div",{className:"rdv-pdf-content-wrapper",children:[s&&y.jsx(fA,{onPageSelect:a,currentPage:r.currentPage}),y.jsxs("div",{className:"rdv-pdf-main-content",children:[i&&y.jsx(rA,{}),y.jsx(CA,{}),y.jsx(mA,{})]})]})},Mf=({mainState:r})=>{var s,i,a,l;const e=(s=r.config)==null?void 0:s.thumbnail,t=(i=r.config)==null?void 0:i.annotations,n=(a=r.config)==null?void 0:a.pdfVerticalScrollByDefault;return y.jsx(F0,{mainState:r,children:y.jsx(dA,{config:e,children:y.jsx($0,{config:t,documentUri:(l=r.currentDocument)==null?void 0:l.uri,children:y.jsx("div",{id:"pdf-renderer","data-testid":"pdf-renderer",className:"rdv-pdf-container",...n?{"data-disable-scrollbar":""}:{},children:y.jsx(EC,{})})})})})};Mf.fileTypes=["pdf","application/pdf"];Mf.weight=0;Mf.__docgenInfo={description:"",methods:[],displayName:"PDFRenderer"};const Nf=r=>y.jsx("div",{className:"rdv-png-checkerboard",children:y.jsx($n,{...r})});Nf.fileTypes=["png","image/png"];Nf.weight=0;Nf.__docgenInfo={description:"",methods:[],displayName:"PNGRenderer"};let ks,Zt,Id=[];const wC=()=>{var r=Ot(2,0);if(r===18761)Zt=!0;else if(r===19789)Zt=!1;else throw TypeError("Invalid byte order value.");return Zt},xC=()=>{if(Ot(2,2)!==42)throw RangeError("You forgot your towel!");return!0},TC=r=>{var e={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},t;return r in e?t=e[r]:t="Tag"+r,t},SC=r=>{var e={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"},t;return r in e&&(t=e[r]),t},CC=r=>{var e;return["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(r)!==-1?e=1:["SHORT","SSHORT"].indexOf(r)!==-1?e=2:["LONG","SLONG","FLOAT"].indexOf(r)!==-1?e=4:["RATIONAL","SRATIONAL","DOUBLE"].indexOf(r)!==-1&&(e=8),e},PC=(r,e,t)=>{t=t||0;var n=Math.floor(t/8),s=e+n,i=t+r,a=32-r;if(i<=0)throw RangeError("No bits requested");if(i<=8)var l=24+t,c=ks.getUint8(s,Zt);else if(i<=16)var l=16+t,c=ks.getUint16(s,Zt);else if(i<=32)var l=t,c=ks.getUint32(s,Zt);else throw RangeError("Too many bits requested");var h={bits:c<<l>>>a,byteOffset:s+Math.floor(i/8),bitOffset:i%8};return h},Ot=(r,e)=>{if(r<=0)throw RangeError("No bytes requested");if(r<=1)return ks.getUint8(e,Zt);if(r<=2)return ks.getUint16(e,Zt);if(r<=3)return ks.getUint32(e,Zt)>>>8;if(r<=4)return ks.getUint32(e,Zt);throw RangeError("Too many bytes requested")},RC=(r,e,t,n)=>{var s=[],i=CC(e),a=i*t;if(a<=4){if(Zt===!1)var l=n>>>(4-i)*8;else var l=n;s.push(l)}else for(var c=0;c<t;c++){var h=i*c;if(i>=8)if(["RATIONAL","SRATIONAL"].indexOf(e)!==-1)s.push(Ot(4,n+h)),s.push(Ot(4,n+h+4));else throw TypeError("Can't handle this field type or size");else s.push(Ot(i,n+h))}return e==="ASCII"&&s.forEach(function(d,u,f){f[u]=String.fromCharCode(d)}),s},yi=(r,e)=>{var t=Math.pow(2,8-e);return Math.floor(r*t+(t-1))},cv=(r,e,t,n)=>(typeof n>"u"&&(n=1),"rgba("+r+", "+e+", "+t+", "+n+")"),PA=r=>{for(var e=Ot(2,r),t=[],n=r+2,s=0;s<e;n+=12,s++){var i=Ot(2,n),a=Ot(2,n+2),l=Ot(4,n+4),c=Ot(4,n+8),h=TC(i),d=SC(a),u=RC(h,d,l,c);t[h]={type:d,values:u}}Id.push(t);var f=Ot(4,n);return f===0?Id:PA(f)},LC=(r,e)=>{let t=e||document.createElement("canvas");if(r&&(ks=new DataView(r),Zt=wC(),!!xC())){var n=Ot(4,4);Id=PA(n);var s=Id[0],i=s.ImageWidth.values[0],a=s.ImageLength.values[0];t.width=i,t.height=a;var l=[],c=s.Compression?s.Compression.values[0]:1,h=s.SamplesPerPixel.values[0],d=[],u=0,f=!1;if(s.BitsPerSample.values.forEach(function(Ue,le,Qe){d[le]={bitsPerSample:Ue,hasBytesPerSample:!1,bytesPerSample:void 0},Ue%8===0&&(d[le].hasBytesPerSample=!0,d[le].bytesPerSample=Ue/8),u+=Ue},void 0),u%8===0){f=!0;var g=u/8}var m=s.StripOffsets.values,A=m.length;if(s.StripByteCounts)var E=s.StripByteCounts.values;else if(A===1)var E=[Math.ceil(i*a*u/8)];else throw Error("Cannot recover from missing StripByteCounts");for(var _=0;_<A;_++){var T=m[_];l[_]=[];for(var C=E[_],L=0,D=0,I=1,N=!0,w=[],x=0,k=0,R=0;L<C;L+=I)switch(c){case 1:for(var F=0,w=[];F<h;F++)if(d[F].hasBytesPerSample){var O=d[F].bytesPerSample*F;w.push(Ot(d[F].bytesPerSample,T+L+O))}else{var j=PC(d[F].bitsPerSample,T+L,D);throw w.push(j.bits),L=j.byteOffset-T,D=j.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}if(l[_].push(w),f)I=g;else throw I=0,RangeError("Cannot handle sub-byte bits per pixel");break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:break;case 7:break;case 32773:if(N){N=!1;var q=1,X=1,M=ks.getInt8(T+L,Zt);M>=0&&M<=127?q=M+1:M>=-127&&M<=-1?X=-M+1:N=!0}else{for(var U=Ot(1,T+L),F=0;F<X;F++){if(d[k].hasBytesPerSample)R=R<<8*x|U,x++,x===d[k].bytesPerSample&&(w.push(R),R=x=0,k++);else throw RangeError("Cannot handle sub-byte bits per sample");k===h&&(l[_].push(w),w=[],k=0)}q--,q===0&&(N=!0)}I=1;break}}if(t.getContext){var z=t.getContext("2d");if(z.fillStyle=cv(255,255,255,0),s.RowsPerStrip)var _e=s.RowsPerStrip.values[0];else var _e=a;var ee=l.length,H=a%_e,W=H===0?_e:H,ce=_e,K=0,oe=s.PhotometricInterpretation.values[0],Z=[],ue=0;if(s.ExtraSamples&&(Z=s.ExtraSamples.values,ue=Z.length),s.ColorMap)var G=s.ColorMap.values,J=Math.pow(2,d[0].bitsPerSample);for(var _=0;_<ee;_++){_+1===ee&&(ce=W);for(var ve=l[_].length,Ee=K*_,te=0,fe=0;fe<ve;te++)for(var ae=0;ae<i;ae++,fe++){var V=l[_][fe],pe=0,ge=0,xe=0,je=1;if(ue>0){for(var Fe=0;Fe<ue;Fe++)if(Z[Fe]===1||Z[Fe]===2){je=V[3+Fe]/256;break}}switch(oe){case 0:if(d[0].hasBytesPerSample)var we=Math.pow(16,d[0].bytesPerSample*2);V.forEach(function(le,Qe,Me){Me[Qe]=we-le});case 1:pe=ge=xe=yi(V[0],d[0].bitsPerSample);break;case 2:pe=yi(V[0],d[0].bitsPerSample),ge=yi(V[1],d[1].bitsPerSample),xe=yi(V[2],d[2].bitsPerSample);break;case 3:if(G===void 0)throw Error("Palette image missing color map");var Ce=V[0];pe=yi(G[Ce],16),ge=yi(G[J+Ce],16),xe=yi(G[2*J+Ce],16);break;case 4:throw RangeError("Not Yet Implemented: Transparency mask");case 5:throw RangeError("Not Yet Implemented: CMYK");case 6:throw RangeError("Not Yet Implemented: YCbCr");case 8:throw RangeError("Not Yet Implemented: CIELab");default:throw RangeError("Unknown Photometric Interpretation:",oe)}z.fillStyle=cv(pe,ge,xe,je),z.fillRect(ae,Ee+te,1,1)}K=ce}}return t}},Bh=r=>{const{mainState:{currentDocument:e}}=r,{t}=Or(),[n,s]=P.useState(!1),[i,a]=P.useState(!1);return P.useEffect(()=>{if(!e||n)return;const l=document.getElementById("tiff-img");try{l&&LC(e.fileData,l),s(!0)}catch{a(!0)}},[e,n]),i?y.jsx($n,{...r,children:y.jsx("div",{children:t("brokenFile")})}):y.jsx($n,{...r,children:y.jsx("canvas",{id:"tiff-img",className:"rdv-tiff-canvas"})})};Bh.fileTypes=["tif","tiff","image/tif","image/tiff"];Bh.weight=0;Bh.fileLoader=Jw;Bh.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"TIFFRenderer"};const Hh=({mainState:{currentDocument:r}})=>y.jsx("div",{id:"txt-renderer",className:"rdv-txt-container",children:r==null?void 0:r.fileData});Hh.fileTypes=["txt","text/plain"];Hh.weight=0;Hh.fileLoader=pb;Hh.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"TXTRenderer"};var RA={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(r,e){(function(t,n){r.exports=n()})(HA,function t(){var n=typeof self<"u"?self:typeof window<"u"?window:n!==void 0?n:{},s=!n.document&&!!n.postMessage,i=n.IS_PAPA_WORKER||!1,a={},l=0,c={parse:function(w,x){var k=(x=x||{}).dynamicTyping||!1;if(N(k)&&(x.dynamicTypingFunction=k,k={}),x.dynamicTyping=k,x.transform=!!N(x.transform)&&x.transform,x.worker&&c.WORKERS_SUPPORTED){var R=function(){if(!c.WORKERS_SUPPORTED)return!1;var O=(q=n.URL||n.webkitURL||null,X=t.toString(),c.BLOB_URL||(c.BLOB_URL=q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",X,")();"],{type:"text/javascript"})))),j=new n.Worker(O),q,X;return j.onmessage=T,j.id=l++,a[j.id]=j}();return R.userStep=x.step,R.userChunk=x.chunk,R.userComplete=x.complete,R.userError=x.error,x.step=N(x.step),x.chunk=N(x.chunk),x.complete=N(x.complete),x.error=N(x.error),delete x.worker,void R.postMessage({input:w,config:x,workerId:R.id})}var F=null;return c.NODE_STREAM_INPUT,typeof w=="string"?(w=function(O){return O.charCodeAt(0)===65279?O.slice(1):O}(w),F=x.download?new u(x):new g(x)):w.readable===!0&&N(w.read)&&N(w.on)?F=new m(x):(n.File&&w instanceof File||w instanceof Object)&&(F=new f(x)),F.stream(w)},unparse:function(w,x){var k=!1,R=!0,F=",",O=`\r
`,j='"',q=j+j,X=!1,M=null,U=!1;(function(){if(typeof x=="object"){if(typeof x.delimiter!="string"||c.BAD_DELIMITERS.filter(function(H){return x.delimiter.indexOf(H)!==-1}).length||(F=x.delimiter),(typeof x.quotes=="boolean"||typeof x.quotes=="function"||Array.isArray(x.quotes))&&(k=x.quotes),typeof x.skipEmptyLines!="boolean"&&typeof x.skipEmptyLines!="string"||(X=x.skipEmptyLines),typeof x.newline=="string"&&(O=x.newline),typeof x.quoteChar=="string"&&(j=x.quoteChar),typeof x.header=="boolean"&&(R=x.header),Array.isArray(x.columns)){if(x.columns.length===0)throw new Error("Option columns is empty");M=x.columns}x.escapeChar!==void 0&&(q=x.escapeChar+j),(typeof x.escapeFormulae=="boolean"||x.escapeFormulae instanceof RegExp)&&(U=x.escapeFormulae instanceof RegExp?x.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var z=new RegExp(E(j),"g");if(typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(w)){if(!w.length||Array.isArray(w[0]))return _e(null,w,X);if(typeof w[0]=="object")return _e(M||Object.keys(w[0]),w,X)}else if(typeof w=="object")return typeof w.data=="string"&&(w.data=JSON.parse(w.data)),Array.isArray(w.data)&&(w.fields||(w.fields=w.meta&&w.meta.fields||M),w.fields||(w.fields=Array.isArray(w.data[0])?w.fields:typeof w.data[0]=="object"?Object.keys(w.data[0]):[]),Array.isArray(w.data[0])||typeof w.data[0]=="object"||(w.data=[w.data])),_e(w.fields||[],w.data||[],X);throw new Error("Unable to serialize unrecognized input");function _e(H,W,ce){var K="";typeof H=="string"&&(H=JSON.parse(H)),typeof W=="string"&&(W=JSON.parse(W));var oe=Array.isArray(H)&&0<H.length,Z=!Array.isArray(W[0]);if(oe&&R){for(var ue=0;ue<H.length;ue++)0<ue&&(K+=F),K+=ee(H[ue],ue);0<W.length&&(K+=O)}for(var G=0;G<W.length;G++){var J=oe?H.length:W[G].length,ve=!1,Ee=oe?Object.keys(W[G]).length===0:W[G].length===0;if(ce&&!oe&&(ve=ce==="greedy"?W[G].join("").trim()==="":W[G].length===1&&W[G][0].length===0),ce==="greedy"&&oe){for(var te=[],fe=0;fe<J;fe++){var ae=Z?H[fe]:fe;te.push(W[G][ae])}ve=te.join("").trim()===""}if(!ve){for(var V=0;V<J;V++){0<V&&!Ee&&(K+=F);var pe=oe&&Z?H[V]:V;K+=ee(W[G][pe],V)}G<W.length-1&&(!ce||0<J&&!Ee)&&(K+=O)}}return K}function ee(H,W){if(H==null)return"";if(H.constructor===Date)return JSON.stringify(H).slice(1,25);var ce=!1;U&&typeof H=="string"&&U.test(H)&&(H="'"+H,ce=!0);var K=H.toString().replace(z,q);return(ce=ce||k===!0||typeof k=="function"&&k(H,W)||Array.isArray(k)&&k[W]||function(oe,Z){for(var ue=0;ue<Z.length;ue++)if(-1<oe.indexOf(Z[ue]))return!0;return!1}(K,c.BAD_DELIMITERS)||-1<K.indexOf(F)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?j+K+j:K}}};if(c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!n.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=_,c.ParserHandle=A,c.NetworkStreamer=u,c.FileStreamer=f,c.StringStreamer=g,c.ReadableStreamStreamer=m,n.jQuery){var h=n.jQuery;h.fn.parse=function(w){var x=w.config||{},k=[];return this.each(function(O){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var j=0;j<this.files.length;j++)k.push({file:this.files[j],inputElem:this,instanceConfig:h.extend({},x)})}),R(),this;function R(){if(k.length!==0){var O,j,q,X,M=k[0];if(N(w.before)){var U=w.before(M.file,M.inputElem);if(typeof U=="object"){if(U.action==="abort")return O="AbortError",j=M.file,q=M.inputElem,X=U.reason,void(N(w.error)&&w.error({name:O},j,q,X));if(U.action==="skip")return void F();typeof U.config=="object"&&(M.instanceConfig=h.extend(M.instanceConfig,U.config))}else if(U==="skip")return void F()}var z=M.instanceConfig.complete;M.instanceConfig.complete=function(_e){N(z)&&z(_e,M.file,M.inputElem),F()},c.parse(M.file,M.instanceConfig)}else N(w.complete)&&w.complete()}function F(){k.splice(0,1),R()}}}function d(w){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(x){var k=D(x);k.chunkSize=parseInt(k.chunkSize),x.step||x.chunk||(k.chunkSize=null),this._handle=new A(k),(this._handle.streamer=this)._config=k}).call(this,w),this.parseChunk=function(x,k){if(this.isFirstChunk&&N(this._config.beforeFirstChunk)){var R=this._config.beforeFirstChunk(x);R!==void 0&&(x=R)}this.isFirstChunk=!1,this._halted=!1;var F=this._partialLine+x;this._partialLine="";var O=this._handle.parse(F,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var j=O.meta.cursor;this._finished||(this._partialLine=F.substring(j-this._baseIndex),this._baseIndex=j),O&&O.data&&(this._rowCount+=O.data.length);var q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)n.postMessage({results:O,workerId:c.WORKER_ID,finished:q});else if(N(this._config.chunk)&&!k){if(this._config.chunk(O,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);O=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(O.data),this._completeResults.errors=this._completeResults.errors.concat(O.errors),this._completeResults.meta=O.meta),this._completed||!q||!N(this._config.complete)||O&&O.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),q||O&&O.meta.paused||this._nextChunk(),O}this._halted=!0},this._sendError=function(x){N(this._config.error)?this._config.error(x):i&&this._config.error&&n.postMessage({workerId:c.WORKER_ID,error:x,finished:!1})}}function u(w){var x;(w=w||{}).chunkSize||(w.chunkSize=c.RemoteChunkSize),d.call(this,w),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(k){this._input=k,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(x=new XMLHttpRequest,this._config.withCredentials&&(x.withCredentials=this._config.withCredentials),s||(x.onload=I(this._chunkLoaded,this),x.onerror=I(this._chunkError,this)),x.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var k=this._config.downloadRequestHeaders;for(var R in k)x.setRequestHeader(R,k[R])}if(this._config.chunkSize){var F=this._start+this._config.chunkSize-1;x.setRequestHeader("Range","bytes="+this._start+"-"+F)}try{x.send(this._config.downloadRequestBody)}catch(O){this._chunkError(O.message)}s&&x.status===0&&this._chunkError()}},this._chunkLoaded=function(){x.readyState===4&&(x.status<200||400<=x.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:x.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(k){var R=k.getResponseHeader("Content-Range");return R===null?-1:parseInt(R.substring(R.lastIndexOf("/")+1))}(x),this.parseChunk(x.responseText)))},this._chunkError=function(k){var R=x.statusText||k;this._sendError(new Error(R))}}function f(w){var x,k;(w=w||{}).chunkSize||(w.chunkSize=c.LocalChunkSize),d.call(this,w);var R=typeof FileReader<"u";this.stream=function(F){this._input=F,k=F.slice||F.webkitSlice||F.mozSlice,R?((x=new FileReader).onload=I(this._chunkLoaded,this),x.onerror=I(this._chunkError,this)):x=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var F=this._input;if(this._config.chunkSize){var O=Math.min(this._start+this._config.chunkSize,this._input.size);F=k.call(F,this._start,O)}var j=x.readAsText(F,this._config.encoding);R||this._chunkLoaded({target:{result:j}})},this._chunkLoaded=function(F){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(F.target.result)},this._chunkError=function(){this._sendError(x.error)}}function g(w){var x;d.call(this,w=w||{}),this.stream=function(k){return x=k,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var k,R=this._config.chunkSize;return R?(k=x.substring(0,R),x=x.substring(R)):(k=x,x=""),this._finished=!x,this.parseChunk(k)}}}function m(w){d.call(this,w=w||{});var x=[],k=!0,R=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(F){this._input=F,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&x.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),x.length?this.parseChunk(x.shift()):k=!0},this._streamData=I(function(F){try{x.push(typeof F=="string"?F:F.toString(this._config.encoding)),k&&(k=!1,this._checkIsFinished(),this.parseChunk(x.shift()))}catch(O){this._streamError(O)}},this),this._streamError=I(function(F){this._streamCleanUp(),this._sendError(F)},this),this._streamEnd=I(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=I(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function A(w){var x,k,R,F=Math.pow(2,53),O=-F,j=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,X=this,M=0,U=0,z=!1,_e=!1,ee=[],H={data:[],errors:[],meta:{}};if(N(w.step)){var W=w.step;w.step=function(G){if(H=G,oe())K();else{if(K(),H.data.length===0)return;M+=G.data.length,w.preview&&M>w.preview?k.abort():(H.data=H.data[0],W(H,X))}}}function ce(G){return w.skipEmptyLines==="greedy"?G.join("").trim()==="":G.length===1&&G[0].length===0}function K(){return H&&R&&(ue("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),R=!1),w.skipEmptyLines&&(H.data=H.data.filter(function(G){return!ce(G)})),oe()&&function(){if(!H)return;function G(ve,Ee){N(w.transformHeader)&&(ve=w.transformHeader(ve,Ee)),ee.push(ve)}if(Array.isArray(H.data[0])){for(var J=0;oe()&&J<H.data.length;J++)H.data[J].forEach(G);H.data.splice(0,1)}else H.data.forEach(G)}(),function(){if(!H||!w.header&&!w.dynamicTyping&&!w.transform)return H;function G(ve,Ee){var te,fe=w.header?{}:[];for(te=0;te<ve.length;te++){var ae=te,V=ve[te];w.header&&(ae=te>=ee.length?"__parsed_extra":ee[te]),w.transform&&(V=w.transform(V,ae)),V=Z(ae,V),ae==="__parsed_extra"?(fe[ae]=fe[ae]||[],fe[ae].push(V)):fe[ae]=V}return w.header&&(te>ee.length?ue("FieldMismatch","TooManyFields","Too many fields: expected "+ee.length+" fields but parsed "+te,U+Ee):te<ee.length&&ue("FieldMismatch","TooFewFields","Too few fields: expected "+ee.length+" fields but parsed "+te,U+Ee)),fe}var J=1;return!H.data.length||Array.isArray(H.data[0])?(H.data=H.data.map(G),J=H.data.length):H.data=G(H.data,0),w.header&&H.meta&&(H.meta.fields=ee),U+=J,H}()}function oe(){return w.header&&ee.length===0}function Z(G,J){return ve=G,w.dynamicTypingFunction&&w.dynamicTyping[ve]===void 0&&(w.dynamicTyping[ve]=w.dynamicTypingFunction(ve)),(w.dynamicTyping[ve]||w.dynamicTyping)===!0?J==="true"||J==="TRUE"||J!=="false"&&J!=="FALSE"&&(function(Ee){if(j.test(Ee)){var te=parseFloat(Ee);if(O<te&&te<F)return!0}return!1}(J)?parseFloat(J):q.test(J)?new Date(J):J===""?null:J):J;var ve}function ue(G,J,ve,Ee){var te={type:G,code:J,message:ve};Ee!==void 0&&(te.row=Ee),H.errors.push(te)}this.parse=function(G,J,ve){var Ee=w.quoteChar||'"';if(w.newline||(w.newline=function(ae,V){ae=ae.substring(0,1048576);var pe=new RegExp(E(V)+"([^]*?)"+E(V),"gm"),ge=(ae=ae.replace(pe,"")).split("\r"),xe=ae.split(`
`),je=1<xe.length&&xe[0].length<ge[0].length;if(ge.length===1||je)return`
`;for(var Fe=0,we=0;we<ge.length;we++)ge[we][0]===`
`&&Fe++;return Fe>=ge.length/2?`\r
`:"\r"}(G,Ee)),R=!1,w.delimiter)N(w.delimiter)&&(w.delimiter=w.delimiter(G),H.meta.delimiter=w.delimiter);else{var te=function(ae,V,pe,ge,xe){var je,Fe,we,Ce;xe=xe||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Ue=0;Ue<xe.length;Ue++){var le=xe[Ue],Qe=0,Me=0,Ht=0;we=void 0;for(var Ut=new _({comments:ge,delimiter:le,newline:V,preview:10}).parse(ae),et=0;et<Ut.data.length;et++)if(pe&&ce(Ut.data[et]))Ht++;else{var gt=Ut.data[et].length;Me+=gt,we!==void 0?0<gt&&(Qe+=Math.abs(gt-we),we=gt):we=gt}0<Ut.data.length&&(Me/=Ut.data.length-Ht),(Fe===void 0||Qe<=Fe)&&(Ce===void 0||Ce<Me)&&1.99<Me&&(Fe=Qe,je=le,Ce=Me)}return{successful:!!(w.delimiter=je),bestDelimiter:je}}(G,w.newline,w.skipEmptyLines,w.comments,w.delimitersToGuess);te.successful?w.delimiter=te.bestDelimiter:(R=!0,w.delimiter=c.DefaultDelimiter),H.meta.delimiter=w.delimiter}var fe=D(w);return w.preview&&w.header&&fe.preview++,x=G,k=new _(fe),H=k.parse(x,J,ve),K(),z?{meta:{paused:!0}}:H||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,k.abort(),x=N(w.chunk)?"":x.substring(k.getCharIndex())},this.resume=function(){X.streamer._halted?(z=!1,X.streamer.parseChunk(x,!0)):setTimeout(X.resume,3)},this.aborted=function(){return _e},this.abort=function(){_e=!0,k.abort(),H.meta.aborted=!0,N(w.complete)&&w.complete(H),x=""}}function E(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(w){var x,k=(w=w||{}).delimiter,R=w.newline,F=w.comments,O=w.step,j=w.preview,q=w.fastMode,X=x=w.quoteChar===void 0||w.quoteChar===null?'"':w.quoteChar;if(w.escapeChar!==void 0&&(X=w.escapeChar),(typeof k!="string"||-1<c.BAD_DELIMITERS.indexOf(k))&&(k=","),F===k)throw new Error("Comment character same as delimiter");F===!0?F="#":(typeof F!="string"||-1<c.BAD_DELIMITERS.indexOf(F))&&(F=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var M=0,U=!1;this.parse=function(z,_e,ee){if(typeof z!="string")throw new Error("Input must be a string");var H=z.length,W=k.length,ce=R.length,K=F.length,oe=N(O),Z=[],ue=[],G=[],J=M=0;if(!z)return Be();if(w.header&&!_e){var ve=z.split(R)[0].split(k),Ee=[],te={},fe=!1;for(var ae in ve){var V=ve[ae];N(w.transformHeader)&&(V=w.transformHeader(V,ae));var pe=V,ge=te[V]||0;for(0<ge&&(fe=!0,pe=V+"_"+ge),te[V]=ge+1;Ee.includes(pe);)pe=pe+"_"+ge;Ee.push(pe)}if(fe){var xe=z.split(R);xe[0]=Ee.join(k),z=xe.join(R)}}if(q||q!==!1&&z.indexOf(x)===-1){for(var je=z.split(R),Fe=0;Fe<je.length;Fe++){if(G=je[Fe],M+=G.length,Fe!==je.length-1)M+=R.length;else if(ee)return Be();if(!F||G.substring(0,K)!==F){if(oe){if(Z=[],Ht(G.split(k)),Kn(),U)return Be()}else Ht(G.split(k));if(j&&j<=Fe)return Z=Z.slice(0,j),Be(!0)}}return Be()}for(var we=z.indexOf(k,M),Ce=z.indexOf(R,M),Ue=new RegExp(E(X)+E(x),"g"),le=z.indexOf(x,M);;)if(z[M]!==x)if(F&&G.length===0&&z.substring(M,M+K)===F){if(Ce===-1)return Be();M=Ce+ce,Ce=z.indexOf(R,M),we=z.indexOf(k,M)}else if(we!==-1&&(we<Ce||Ce===-1))G.push(z.substring(M,we)),M=we+W,we=z.indexOf(k,M);else{if(Ce===-1)break;if(G.push(z.substring(M,Ce)),gt(Ce+ce),oe&&(Kn(),U))return Be();if(j&&Z.length>=j)return Be(!0)}else for(le=M,M++;;){if((le=z.indexOf(x,le+1))===-1)return ee||ue.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Z.length,index:M}),et();if(le===H-1)return et(z.substring(M,le).replace(Ue,x));if(x!==X||z[le+1]!==X){if(x===X||le===0||z[le-1]!==X){we!==-1&&we<le+1&&(we=z.indexOf(k,le+1)),Ce!==-1&&Ce<le+1&&(Ce=z.indexOf(R,le+1));var Qe=Ut(Ce===-1?we:Math.min(we,Ce));if(z.substr(le+1+Qe,W)===k){G.push(z.substring(M,le).replace(Ue,x)),z[M=le+1+Qe+W]!==x&&(le=z.indexOf(x,M)),we=z.indexOf(k,M),Ce=z.indexOf(R,M);break}var Me=Ut(Ce);if(z.substring(le+1+Me,le+1+Me+ce)===R){if(G.push(z.substring(M,le).replace(Ue,x)),gt(le+1+Me+ce),we=z.indexOf(k,M),le=z.indexOf(x,M),oe&&(Kn(),U))return Be();if(j&&Z.length>=j)return Be(!0);break}ue.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Z.length,index:M}),le++}}else le++}return et();function Ht(rt){Z.push(rt),J=M}function Ut(rt){var Qt=0;if(rt!==-1){var xn=z.substring(le+1,rt);xn&&xn.trim()===""&&(Qt=xn.length)}return Qt}function et(rt){return ee||(rt===void 0&&(rt=z.substring(M)),G.push(rt),M=H,Ht(G),oe&&Kn()),Be()}function gt(rt){M=rt,Ht(G),G=[],Ce=z.indexOf(R,M)}function Be(rt){return{data:Z,errors:ue,meta:{delimiter:k,linebreak:R,aborted:U,truncated:!!rt,cursor:J+(_e||0)}}}function Kn(){O(Be()),Z=[],ue=[]}},this.abort=function(){U=!0},this.getCharIndex=function(){return M}}function T(w){var x=w.data,k=a[x.workerId],R=!1;if(x.error)k.userError(x.error,x.file);else if(x.results&&x.results.data){var F={abort:function(){R=!0,C(x.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:L,resume:L};if(N(k.userStep)){for(var O=0;O<x.results.data.length&&(k.userStep({data:x.results.data[O],errors:x.results.errors,meta:x.results.meta},F),!R);O++);delete x.results}else N(k.userChunk)&&(k.userChunk(x.results,F,x.file),delete x.results)}x.finished&&!R&&C(x.workerId,x.results)}function C(w,x){var k=a[w];N(k.userComplete)&&k.userComplete(x),k.terminate(),delete a[w]}function L(){throw new Error("Not implemented.")}function D(w){if(typeof w!="object"||w===null)return w;var x=Array.isArray(w)?[]:{};for(var k in w)x[k]=D(w[k]);return x}function I(w,x){return function(){w.apply(x,arguments)}}function N(w){return typeof w=="function"}return i&&(n.onmessage=function(w){var x=w.data;if(c.WORKER_ID===void 0&&x&&(c.WORKER_ID=x.workerId),typeof x.input=="string")n.postMessage({workerId:c.WORKER_ID,results:c.parse(x.input,x.config),finished:!0});else if(n.File&&x.input instanceof File||x.input instanceof Object){var k=c.parse(x.input,x.config);k&&n.postMessage({workerId:c.WORKER_ID,results:k,finished:!0})}}),(u.prototype=Object.create(d.prototype)).constructor=u,(f.prototype=Object.create(d.prototype)).constructor=f,(g.prototype=Object.create(g.prototype)).constructor=g,(m.prototype=Object.create(d.prototype)).constructor=m,c})})(RA);var DC=RA.exports;const kC=Vv(DC),Uh=({mainState:{currentDocument:r,config:e}})=>{const[t,n]=P.useState([]);return P.useEffect(()=>{var s;if(r!=null&&r.fileData){const i=kC.parse(r.fileData,{delimiter:(e==null?void 0:e.csvDelimiter)??","});!((s=i.errors)!=null&&s.length)&&i.data&&n(i.data)}},[r,e==null?void 0:e.csvDelimiter]),t.length?y.jsx("div",{className:"rdv-csv-container",children:y.jsxs("table",{className:"rdv-csv-table",children:[y.jsx("thead",{children:y.jsx("tr",{children:t[0].map(s=>y.jsx("th",{children:s},s))})}),y.jsx("tbody",{children:t.slice(1,t.length).map(s=>y.jsx("tr",{children:s.map(i=>y.jsx("td",{children:i},i))},s.join("")))})]})}):null};Uh.fileTypes=["csv","text/csv"];Uh.weight=0;Uh.fileLoader=pb;Uh.__docgenInfo={description:"",methods:[{name:"fileLoader",docblock:null,modifiers:["static"],params:[{name:"props",optional:!1,type:null}],returns:null}],displayName:"CSVRenderer"};const Ff=r=>y.jsx($n,{...r});Ff.fileTypes=["gif","image/gif"];Ff.weight=0;Ff.__docgenInfo={description:"",methods:[],displayName:"JPGRenderer"};const Of=({mainState:{currentDocument:r}})=>r?y.jsx("div",{id:"video-renderer",className:"rdv-video-container",children:y.jsx("video",{className:"rdv-video-player",controls:!0,src:r.uri})}):null;Of.fileTypes=["video/mp4","video/quicktime","video/x-msvideo"];Of.weight=0;Of.__docgenInfo={description:"",methods:[],displayName:"VideoRenderer"};const jf=r=>y.jsx($n,{...r});jf.fileTypes=["webp","image/webp"];jf.weight=0;jf.__docgenInfo={description:"",methods:[],displayName:"WebPRenderer"};const nm=[vf,Dh,bf,kh,Mf,Nf,Bh,Hh,Uh,Ff,Of,jf],LA=P.forwardRef((r,e)=>{const{documents:t,theme:n,config:s}=r,i=s==null?void 0:s.dragDrop,a=(i==null?void 0:i.enableDragDrop)??!1,l=P.useRef(null),{dragState:c,handleDragEnter:h,handleDragLeave:d,handleDragOver:u,handleDrop:f}=Dw(),g=P.useCallback(E=>{var _;(_=l.current)==null||_.handleFilesDropped(E)},[]),m=P.useMemo(()=>n?{...Em,...n}:Em,[n]),A=P.useMemo(()=>({"--rdv-primary":m.primary,"--rdv-secondary":m.secondary,"--rdv-tertiary":m.tertiary,"--rdv-text-primary":m.textPrimary,"--rdv-text-secondary":m.textSecondary,"--rdv-text-tertiary":m.textTertiary,...r.style}),[m,r.style]);if(!t)throw new Error("Please provide an array of documents to DocViewer!");return y.jsx(ib,{ref:e,providerRef:l,pluginRenderers:nm,...r,dragDropConfig:a?i:void 0,children:y.jsxs("div",{id:"react-doc-viewer","data-testid":"react-doc-viewer",className:`rdv-container ${r.className||""}`,style:A,onDragEnter:a?h:void 0,onDragLeave:a?d:void 0,onDragOver:a?u:void 0,onDrop:a?E=>f(E,g):void 0,children:[y.jsx(ub,{}),y.jsx(gb,{}),a&&y.jsx(sb,{dragState:c})]})})}),wn=P.memo(LA);LA.__docgenInfo={description:"",methods:[],displayName:"DocViewer"};const IC=""+new URL("pdf-file-WcEvyvrI.pdf",import.meta.url).href,Eo=""+new URL("pdf-multiple-pages-file-8RGaYDzJ.pdf",import.meta.url).href,MC=""+new URL("png-image-CRDE63nX.png",import.meta.url).href,NC="data:text/csv;base64,Zmlyc3ROYW1lLGxhc3ROYW1lLGVtYWlsLHBob25lTnVtYmVyCkpvaG4sRG9lLGpvaG5AZG9lLmNvbSwwMTIzNDU2Nzg5CkphbmUsRG9lLGphbmVAZG9lLmNvbSw5ODc2NTQzMjEwClRvbSxEb2UsdG9tQGRvZS5jb20sMDYxMjM0NTY3OAo=",FC="data:application/postscript;base64,JSFQUy1BZG9iZS0zLjAgRVBTRi0zLjAKJSVEb2N1bWVudC1Gb250czogVGltZXMtUm9tYW4KJSVUaXRsZTogY2lyY2xlLmVwcwolJUNyZWF0b3I6IFBTX1dyaXRlLkYKJSVDcmVhdGlvbkRhdGU6IDAyLUF1Zy05OQolJVBhZ2VzOiAxCiUlQm91bmRpbmdCb3g6ICAgMzYgICAzNiAgNTc2ICA3NTYKJSVMYW5ndWFnZUxldmVsOiAxCiUlRW5kQ29tbWVudHMKJSVCZWdpblByb2xvZwolJUVuZFByb2xvZwovaW5jaCB7NzIgbXVsfSBkZWYKL1BhbGF0aW5vLVJvbWFuIGZpbmRmb250CjEuMDAgaW5jaCBzY2FsZWZvbnQKc2V0Zm9udAogMC4wMDAwIDAuMDAwMCAwLjAwMDAgc2V0cmdiY29sb3IKJSUgUGFnZTogICAgIDEgICAgMQpzYXZlCiAgNjMgMTUzIG1vdmV0bwogbmV3cGF0aAogIDYzIDE1MyBtb3ZldG8KIDU0OSAxNTMgbGluZXRvCiBzdHJva2UKIG5ld3BhdGgKIDMwNiAzOTYgICA1ICAgMCAzNjAgYXJjCiBjbG9zZXBhdGggc3Ryb2tlCiAwLjAwMDAgMS4wMDAwIDAuMDAwMCBzZXRyZ2Jjb2xvcgogbmV3cGF0aAogMzg3IDQ3NyAgNTQgICAwICA5MCBhcmMKIHN0cm9rZQogMTcxIDI2MSBtb3ZldG8KIDAuMDAwMCAwLjAwMDAgMC4wMDAwIHNldHJnYmNvbG9yCi9QYWxhdGluby1Sb21hbiBmaW5kZm9udAogICAwLjI1MCBpbmNoIHNjYWxlZm9udApzZXRmb250CihUaGlzIGlzICJjaXJjbGUucGxvdCIuKSBzaG93CiAxNzEgMzQyIG1vdmV0bwovUGFsYXRpbm8tUm9tYW4gZmluZGZvbnQKICAgMC4xMjUgaW5jaCBzY2FsZWZvbnQKc2V0Zm9udAooVGhpcyBpcyBzbWFsbCBwcmludC4pIHNob3cKcmVzdG9yZSBzaG93cGFnZQolJVRyYWlsZXIKCg==",OC="data:image/webp;base64,UklGRioPAABXRUJQVlA4IB4PAADQYACdASrIAMgAPpFAmkklo6uoqRVb8XASCWdtyDBnze9cMHAl2y/ip6n/VPfqlZ1tefftj/g97/3X/acbBOz+xGYo9B/8+eH+D/+xmzK7YniXZnEW1qWdKgSe1qf+8qsepCIH0ABwDpbNN25/jy5ZosqyjHUIKs2yD2yxphx8GgI3Qm9fmEwaK0uIKtaePpxf+MlU4FcJyWd01tsd2GoG9dGiauP4vyAWMNd0MHqS/8A1Bf/31fYhi0C+j67G9nwCEz13lfOCW6ruqvWBGE3lCmM1AB10YWrc/bOARki5zK9mzC93h/qy4UR7tMqsmZ88d5U1c4MGnMQvqtYX9qOiyB1KzRrc8RVRlYZSdwxpWhnq4GLs3e6ByXoRKfCnuYJhGGTQh6NE0t8b6aKnAWVuyYysRz60u+lL37Oani/68eLETtUMbs+3ckAGr+EO56d0frGZueEQurCbk12GLYi8tnDrJTrfomHR2+sxJuYXu7BYMob75ucqUHK3afnZg2UWUOpybe54gA0k0Esl6Y6v41F85gCHhFFB/0tr6U5QESmevGyI2Pk8pePcWGB+ZRTqNLpW4CaMcg4ChutqfUkZsJGBcUvl6HTDyZSqpEyWzpQfBYvo7fYEX/55Ug4CzgV1ms5FmFtpp94+oPF/zv3W/YUebTd/wVjbNl40SowgMgEX99jZeJFSyP+1mg4tZRsy3C8lhA5vXn5RSsbUDrygWFTF3XLcW3pg7xmvM7T6gVWQt5o0cecHJtoKsGFv4lcKU/vBTskX8YwQlqjtyzPlmCssAPXhGeOs42SvMzyOccNpUd0tnajpPnD1ejYffBfvnVmfVP3WZqMuCXH5ECQlpFAIJcNUgPwdDibseoBZt8H4u/8OPyQyMAXfVEyh6pNMHPpb2MWb/VH0TwXWTah3I522vJiNdpJJp1PTTOKk/Q9NJoUEXKk0tsGpym2m1/9hH7PjQop7f+WE9pCuaOZMeed8a37bZC8qFktmGqqac/jyZFcFAJ8pAE+GdQqKWdT0bDKJm4X8q1lqhYEtXQAA/u9fNVjoRT8A0YJsO8k0EcwXO0Y7U5o81EFO6tNOOkayxcXTZZimzyNTkoqZ2BcBxhOixiIBBSjMrLZsg1SXaQjW93RbKL/gMUdtxLLakvoAxu65m75GGes7vmGwYpEbCdLSWvjuCBxSxTxQl3+uBsfbaJEFXXrP4pheCkNDlsstv7ZNAhAaNngSDuT3qcCn89Rt2n13a95gHzu6iKTxBACi9ah65Zum1BDw8xwKR9BkBhOA45l7m8f/ehRzelvE81HOPwQbvABJJMMbSRwwnl3tAlxnVASwLP289PJ6thlko5aFBbBU14oXvMeoolOYrNlVY/xPmbCoyoEFFnTkOio/t9X0XhwcWGlpsrPAL3Dk9IK/0oCBWd/NvJF0D0P/MpFc0LprdeeGotItWEw9ePoBu1X9wYxQ40j0kQt3OneVUjQKuyJRJ11EanFeRs7eoDXGbR0Oz7wojkmPCRRWA/e5EEQsVEOekA3PtA5Li33RUvQ2MUB36DeKio9WDqDa3App9u0j6O6cjyuPHqzPDXN9RuSkP8zAsg+e2mj6d/ZwqtmLyGUMX8cVk53gAn1MQxZZ+52I3glLE8LiJlQ5is95dBtvXMK39P1LrYd9ycjMg6kiU7JsHAXpvNw97S9djNYMAjCiC4SdwQcFtpayhT9J4jezaAwF5RPoTeTXqpYDpfn1pL4lTFKSLGmvmgIitb04rMI1Ex4ZcrvNtlUTQNoQKlBWyB2mSOie8mGOKKYsOign+bRcXkDfqmBM01R1+GQXOL7F5i/au7NGE+uzmtgSqzidHqOJvph9gLbAY1QKbCL7IPVk8d6X5StvhXI9oC3WGn9iKrGib2yjcXuK7Tpw6KdfDuVdBHb6apmpt88OJLQ8vXkGXzqAgxGgCMZjblxd++rLTooeln6mf7c3HQF9nab9q1YtiIZWjL13uqHclk+rFsTrY8VDP+bSsOj1fXyJhwh1d8EYp7iKJmnLXUX+xKo7U1o7yMGwvlBtCJ3jiT6h/CJrh2aFHn9A2afvvllkstXL81k37wzQD63HomKktuvKba2MgljpTpCbnLv8ksZM2qnolP0Zi1DrRtzjXrrR51PIj03DyIezoRLDauXCp4u6vlyjYbkPPaJJHZwksKtxDF5xFmP5LtNd7d+3e9HhqW4yV8M70IJWFndNRYBeiAwwiPeolDjqcQiAK6TwVTzunnYS6POn5ejrnDyfld2PXbqY/ZC0KbZDkPGGdw9ahSkviOl+UJ3hXOhrJz4ON7KZ4NfBe18tM+ybbcfLzzMME4bqNAbS4maJlht/HCZSrTvxc0/NX01Qq0wjud55EDPGDYZcJVOX4Rp2e7M2OQKv6Eh8FfHKrXPxOdIqOsiraOpgJ1B7P3fca/j9xuhx/poK/u5XhLz3F9SXxx2t5CyCsGR6S5WmwFVZe/1NiCXaRpTBuw0tUdxsrPs4QHAx1HhDU/HfMiqG4ptE/LKmaM/VjZbS2JQgXEoFrqHZiy8vZZfq5tCfCSZc4LzpZbXRrqeobEfXk57fGkX/ZiETE0nlIY5XSG8bjK5l8grDAnGKQVXi8Ai/LvZUYUTISX0GTAyfRrgAPKydy8SaYJkgzMpBbl9SjE4USh0khUBsJiVRC67BIh1edy6SyQfQt3b5AFTi9MpUO3e7H2nZH5edkbzetZA9suIierqrxhwGTIRA+FoL2eXu892aOWxdoX9GBW4CLsf/tmLidh7FwXvXyOF3wrW+aiS2jxyzizjt5s7iqxBWNPLRwjIzWsBov+SBThzrZAjREAvbf7zFFiVdDkjSyQn1PFLsSxnq7zuIR19uej6lBrViIJuFZvPaSkBUihW12JIOFVnhFwdWCmFXU+lNkfrdYpELUP0fTy3XHXJnPRtNCwyDZ1r1lQnhNmrwHakB1hqh0G6Xd6xNmCCdiNrn3BquZaWsmkAn0mV1bJuusX7wIbLvw43OK1keTNGv22QG3zJJJAJu7kYJiBCLqJ8j+B7gfQU+9coUy865noMNVNODhecb2EXtFl398pg6PjzEJoXji4PLMade++/JSyUyJK9iGnJiEWa7Nnr8HL28SXKyFhpeg2yvv2jJjfbJ/r++Sxxz8QQWfghDOlD5BO5MUTNjBwtqPfquiWaWZjZ8yYWXChUZq5X9JboeuPQkt47tSE4aFSeGq6I5FYl5npPKHrCXzzLHXTHavYuDzckelVylavO5diZ0M05GOfd8nylV704kDOnIhErWqR7vGzDTFofaMSLngIGq99K1wkEjSeAK7KhEBlOiof6/Z2JNFGX9usjd7ihkCVX+9kLVhymuuSl/ZNQ5yrcRq9LloI8nP6XbG80DtnOs3O3XAfwUJgcMiQdOq13e0f2j7zTQ9Ou0cQ5oLBUw3DuayH5UQaBlatJIplVxDvdqsfaLaZyKZxgqRciyoFRab+4yoHcN+2WovgvuVMVlWcvDi97C5pQrDrNjmH3jzq66hqJl3dwAy4jU18jMcaL9OOLPDLpahahKlQlwM9VuQK+dU+V/1+cMS8LF9sb10BIQ2C9Wz+1rBzouGUUP8IAXTbi9wuCyUvulWBZHnmu7ZdP8qkw4TxKtzcHJaOojoyRAsLFsjiVL5sNtyjtCGLeI6i7xYhwpkfESPJ3aROnaoKPEgKkjQLKf7xBm0leYGqtB1UqToZyTaMIg3CaQn6tWrpSIeQN7LGsq5URJ43zXmrdo5QQph3ohAbySs9Pv5zEmMDoSQsagQa+9a5TPYZ9NLFd9m9nFSpGQnvU1vaxbrDJQ0gDxKrvzvLTFEPiooSpWfEphVM6CUS75kD5D3dBQeRxlJUuv/1o9HMPN2wAwWNFGg7wA7FgHUj1f2Dgi5w5tyNe2U2M1GICeikdEuvDtL4W/E7ZTWyC+7KBdeksK8tlWFzAXtl9lE6pJnkDW7Y3IT8wVYs7VSUeVktsetrWWvZmuq1xfpKESubTbkZI5K3dJBUf07dzqTIyNvcBMhZMHNQGajsRd6+BGlAcay7DWiAxcRlJdIvnliXcwQMB0QyZgx+0uBeBzuo1Sxix8ZqYD6X8v9IdKddG42iAHMJAQc5lUrNGgABTYD6D6z1yS1/T+t6hPtOs52bVUo2rfPOsvkwXVtKpt+zw+qvvJBWsQJ0bGRMGp3SXNc70pkUuCFUKkGRphRSaYu6eaUGoytpjR9bNJ1m2DiLiM5KurtImIgwWyZ1gKcXlBHWGyDiF5ODcT0pc4N3+FcpooXZhZRQd+QoYKmxb590JxM2W58zqdPP5dj8YN//Wq+StUgXOCFT2iKTtac0rWpN2acMA5/3vkdSV9lS9H7AoZFIMD8qO0/IxWYcd4tyirS9Ehnrs7+IrydwVQrYScDCjmLLcicnQJIdo5OeJ3SA2SlbQm8AtvRrNtd4khwvqRYxsHQUS+zZ3NP4k46PSeQQ6ur5TINeggKm/1QTTBU/Nl+IEb9TWYBO/5R1+3r3SLwQTSs/0dN2bBSNZgHcUrEAX98+VnMAe107ZMf5RbOjmCD6WovffcwetpwZSYEEYrly3fG+sZ188poDtgDSu7E5MLdBnud2mgKVEJmGWfkiSW3qQGiwTRHvyv7vodtlTMwQcc44TUQ54zvfw3x1OPQrxvCFQqAVIr94STjrZpp5GjKmTTUaTgsgpeUTgv0rg9Efj+syoKjH8saB3eHd0AEy/of8IKR89wHoVr4YBqOLetEi0kiEBxy7pVVTOO0WaTHeAyJP2xM5W2g9ejDqZlDIDWd1DioOBuUUgcQ0MFYPVGRHjefz67x2Fl/VRu8HGvQBNi1N9a+qG8wsE3Ryiz/jWTeJrpr4U09ALhSlWvcltiql6n3Vji6qw2DlQ/xfCxtJLs+Ul4LmtZLcqJ3XDH5DERMGvdlCnU4FjNHiPgqj2iCk2R0D+URRYC5rSQcz+PLVgrOZbkHJL6nWmZMzgWMCH/Se/esBc68SlDExtvz4OzfWPP5RLnJHD62QSosMFVOE+S2AUnxWWs0s88eWzjBiHu4EW/JVH0nEKeQgpX9b4VIf/Z2ZatglT2+/W1dYNeQ/0JzF1ik2rp28IrdEoqwJEQKymej2SZfTe1zPH5ldQ52lg0OK1ywM5pyO3yhaF1pkLgYnQPr4AAAAA=",$C={title:"DocViewer"},Ao=[{uri:IC},{uri:MC},{uri:NC},{uri:Eo},{uri:OC}],$o=()=>y.jsx(wn,{documents:Ao,initialActiveDocument:Ao[1],config:{noRenderer:{overrideComponent:({document:r,fileName:e})=>{const t=e||(r==null?void 0:r.fileType)||"";return console.log(r),t?y.jsxs("div",{children:["no renderer for ",t]}):y.jsx("div",{children:"no renderer"})}},loadingRenderer:{overrideComponent:({document:r,fileName:e})=>{const t=e||(r==null?void 0:r.fileType)||"";return t?y.jsxs("div",{children:["loading (",t,")"]}):y.jsx("div",{children:"loading"})}},csvDelimiter:",",pdfZoom:{defaultZoom:1.1,zoomJump:.2},pdfVerticalScrollByDefault:!0},language:"pl"}),Xo=()=>{const[r,e]=P.useState([]);return y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",accept:".pdf",multiple:!0,onChange:t=>{var n;return((n=t.target.files)==null?void 0:n.length)&&e(Array.from(t.target.files))}}),y.jsx(wn,{documents:r.map(t=>({uri:window.URL.createObjectURL(t),fileName:t.name})),pluginRenderers:nm})]})},Yo=()=>{const[r,e]=P.useState(Ao[0]),t=n=>{e(n)};return y.jsx(y.Fragment,{children:y.jsx(wn,{documents:Ao,activeDocument:r,onDocumentChange:t})})},Ko=()=>{const r=P.useRef(null);return y.jsxs(y.Fragment,{children:[y.jsxs("div",{children:[y.jsx("button",{onClick:()=>{var e;return(e=r==null?void 0:r.current)==null?void 0:e.prev()},children:"Prev Document By Ref"}),y.jsx("button",{onClick:()=>{var e;return(e=r==null?void 0:r.current)==null?void 0:e.next()},children:"Next Document By Ref"})]}),y.jsx(wn,{ref:r,documents:Ao,config:{header:{disableHeader:!0}}})]})},Zo=()=>{const r=[{uri:FC,fileType:"application/postscript"}];return y.jsx(wn,{documents:r,initialActiveDocument:r[0],pluginRenderers:nm,language:"en"})},Jo=()=>{const[r,e]=P.useState([]);return y.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[y.jsxs("div",{style:{padding:"10px",background:"#f0f0f0"},children:[y.jsx("strong",{children:"Drag & Drop Demo"})," - Drag PDF or image files onto the viewer below",r.length>0&&y.jsxs("div",{style:{marginTop:"5px",fontSize:"12px"},children:["Dropped: ",r.join(", ")]})]}),y.jsx("div",{style:{flex:1},children:y.jsx(wn,{documents:Ao,config:{dragDrop:{enableDragDrop:!0,acceptedFileTypes:["application/pdf","image/*"],maxFileSize:50*1024*1024,dropBehavior:"append",onDrop:t=>{e(t.map(n=>n.name)),console.log("Files dropped:",t)},onDropRejected:(t,n)=>{console.log("Files rejected:",t,"Reason:",n),alert(`Files rejected: ${n}`)}}}})})]})},Qo=()=>y.jsx("div",{style:{height:"100vh"},children:y.jsx(wn,{documents:[{uri:Eo}],config:{thumbnail:{enableThumbnails:!0,thumbnailWidth:120,sidebarDefaultOpen:!0},pdfVerticalScrollByDefault:!1}})}),el=()=>{const[r,e]=P.useState([]);return y.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[y.jsxs("div",{style:{padding:"10px",background:"#f0f0f0"},children:[y.jsx("strong",{children:"Annotations Demo"})," - Use the toolbar to highlight, draw, or add comments",y.jsxs("div",{style:{marginTop:"5px",fontSize:"12px"},children:["Annotations count: ",r.length]})]}),y.jsx("div",{style:{flex:1},children:y.jsx(wn,{documents:[{uri:Eo}],config:{annotations:{enableAnnotations:!0,defaultColor:"#FFFF00",colors:["#FFFF00","#FF6B6B","#4ECDC4","#45B7D1","#96CEB4"],tools:["select","highlight","pen","comment","eraser"],onAnnotationChange:t=>{e(t),console.log("Annotations updated:",t)}},pdfVerticalScrollByDefault:!1}})})]})},tl=()=>{const r=P.useRef(null),[e,t]=P.useState("1");return y.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[y.jsxs("div",{style:{padding:"10px",background:"#f0f0f0",display:"flex",gap:"10px",alignItems:"center"},children:[y.jsx("strong",{children:"Page Jump Demo"}),y.jsx("input",{type:"number",min:"1",value:e,onChange:n=>t(n.target.value),style:{width:"60px",padding:"5px"}}),y.jsx("button",{onClick:()=>{var s;const n=parseInt(e,10);n>0&&((s=r.current)==null||s.goToPage(n))},style:{padding:"5px 15px"},children:"Go to Page"}),y.jsx("button",{onClick:()=>{var n;return(n=r.current)==null?void 0:n.prev()},style:{padding:"5px 15px"},children:"Prev Doc"}),y.jsx("button",{onClick:()=>{var n;return(n=r.current)==null?void 0:n.next()},style:{padding:"5px 15px"},children:"Next Doc"})]}),y.jsx("div",{style:{flex:1},children:y.jsx(wn,{ref:r,documents:[{uri:Eo}],config:{pdfVerticalScrollByDefault:!1}})})]})},nl=()=>{const[r,e]=P.useState(1);return y.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[y.jsxs("div",{style:{padding:"10px",background:"#f0f0f0",display:"flex",gap:"10px",alignItems:"center"},children:[y.jsx("strong",{children:"Jump To Page Prop Demo"}),y.jsxs("span",{children:["Current Page: ",r]}),y.jsx("button",{onClick:()=>e(1),style:{padding:"5px 15px"},children:"Page 1"}),y.jsx("button",{onClick:()=>e(3),style:{padding:"5px 15px"},children:"Page 3"}),y.jsx("button",{onClick:()=>e(5),style:{padding:"5px 15px"},children:"Page 5"}),y.jsx("button",{onClick:()=>e(10),style:{padding:"5px 15px"},children:"Page 10"}),y.jsx("input",{type:"number",min:"1",max:"10",value:r,onChange:t=>e(parseInt(t.target.value,10)||1),style:{width:"60px",padding:"5px"}})]}),y.jsx("div",{style:{flex:1},children:y.jsx(wn,{documents:[{uri:Eo}],jumpToPage:r,config:{pdfVerticalScrollByDefault:!1}})})]})},sl=()=>{const r=P.useRef(null),[e,t]=P.useState("1"),[n,s]=P.useState([]);return y.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[y.jsxs("div",{style:{padding:"10px",background:"#f0f0f0",display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap"},children:[y.jsx("strong",{children:"All Features Demo"}),y.jsx("span",{children:"|"}),y.jsx("input",{type:"number",min:"1",value:e,onChange:i=>t(i.target.value),style:{width:"50px",padding:"4px"},placeholder:"Page"}),y.jsx("button",{onClick:()=>{var a;const i=parseInt(e,10);i>0&&((a=r.current)==null||a.goToPage(i))},style:{padding:"4px 10px"},children:"Jump"}),y.jsx("span",{children:"|"}),y.jsxs("span",{style:{fontSize:"12px"},children:["Annotations: ",n.length]}),y.jsx("span",{children:"|"}),y.jsx("span",{style:{fontSize:"12px",color:"#666"},children:"Drag files to add • Click thumbnails to navigate"})]}),y.jsx("div",{style:{flex:1},children:y.jsx(wn,{ref:r,documents:[{uri:Eo}],config:{dragDrop:{enableDragDrop:!0,acceptedFileTypes:["application/pdf","image/*"],dropBehavior:"append"},thumbnail:{enableThumbnails:!0,thumbnailWidth:100,sidebarDefaultOpen:!1},annotations:{enableAnnotations:!0,colors:["#FFFF00","#FF6B6B","#4ECDC4","#45B7D1"],tools:["select","highlight","pen","comment","eraser"],onAnnotationChange:s},pdfVerticalScrollByDefault:!1}})})]})};$o.__docgenInfo={description:"",methods:[],displayName:"Default"};Xo.__docgenInfo={description:"",methods:[],displayName:"WithPDFInput"};Yo.__docgenInfo={description:"",methods:[],displayName:"ManualNextPrevNavigation"};Ko.__docgenInfo={description:"",methods:[],displayName:"WithRef"};Zo.__docgenInfo={description:"",methods:[],displayName:"NoRenderType"};Jo.__docgenInfo={description:"",methods:[],displayName:"WithDragAndDrop"};Qo.__docgenInfo={description:"",methods:[],displayName:"WithThumbnailSidebar"};el.__docgenInfo={description:"",methods:[],displayName:"WithAnnotations"};tl.__docgenInfo={description:"",methods:[],displayName:"WithPageJump"};nl.__docgenInfo={description:"",methods:[],displayName:"WithJumpToPageProp"};sl.__docgenInfo={description:"",methods:[],displayName:"AllFeaturesCombined"};var uv,fv,pv;$o.parameters={...$o.parameters,docs:{...(uv=$o.parameters)==null?void 0:uv.docs,source:{originalSource:`() => <DocViewer documents={docs} initialActiveDocument={docs[1]} config={{
  noRenderer: {
    overrideComponent: ({
      document,
      fileName
    }) => {
      const fileText = fileName || document?.fileType || "";
      console.log(document);
      if (fileText) {
        return <div>no renderer for {fileText}</div>;
      }
      return <div>no renderer</div>;
    }
  },
  loadingRenderer: {
    overrideComponent: ({
      document,
      fileName
    }) => {
      const fileText = fileName || document?.fileType || "";
      if (fileText) {
        return <div>loading ({fileText})</div>;
      }
      return <div>loading</div>;
    }
  },
  csvDelimiter: ",",
  pdfZoom: {
    defaultZoom: 1.1,
    zoomJump: 0.2
  },
  pdfVerticalScrollByDefault: true
}} language="pl" />`,...(pv=(fv=$o.parameters)==null?void 0:fv.docs)==null?void 0:pv.source}}};var gv,mv,vv;Xo.parameters={...Xo.parameters,docs:{...(gv=Xo.parameters)==null?void 0:gv.docs,source:{originalSource:`() => {
  const [selectedDocs, setSelectedDocs] = useState<File[]>([]);
  return <>
      <input type="file" accept=".pdf" multiple onChange={el => el.target.files?.length && setSelectedDocs(Array.from(el.target.files))} />
      <DocViewer documents={selectedDocs.map(file => ({
      uri: window.URL.createObjectURL(file),
      fileName: file.name
    }))} pluginRenderers={DocViewerRenderers} />
    </>;
}`,...(vv=(mv=Xo.parameters)==null?void 0:mv.docs)==null?void 0:vv.source}}};var bv,yv,Av;Yo.parameters={...Yo.parameters,docs:{...(bv=Yo.parameters)==null?void 0:bv.docs,source:{originalSource:`() => {
  const [activeDocument, setActiveDocument] = useState(docs[0]);
  const handleDocumentChange = (document: IDocument) => {
    setActiveDocument(document);
  };
  return <>
      <DocViewer documents={docs} activeDocument={activeDocument} onDocumentChange={handleDocumentChange} />
    </>;
}`,...(Av=(yv=Yo.parameters)==null?void 0:yv.docs)==null?void 0:Av.source}}};var _v,Ev,wv;Ko.parameters={...Ko.parameters,docs:{...(_v=Ko.parameters)==null?void 0:_v.docs,source:{originalSource:`() => {
  const docViewerRef = useRef<DocViewerRef>(null);
  return <>
      <div>
        <button onClick={() => docViewerRef?.current?.prev()}>
          Prev Document By Ref
        </button>
        <button onClick={() => docViewerRef?.current?.next()}>
          Next Document By Ref
        </button>
      </div>
      <DocViewer ref={docViewerRef} documents={docs} config={{
      header: {
        disableHeader: true
      }
    }} />
    </>;
}`,...(wv=(Ev=Ko.parameters)==null?void 0:Ev.docs)==null?void 0:wv.source}}};var xv,Tv,Sv;Zo.parameters={...Zo.parameters,docs:{...(xv=Zo.parameters)==null?void 0:xv.docs,source:{originalSource:`() => {
  const docs = [{
    uri: epsFile,
    fileType: "application/postscript"
  }];
  return <DocViewer documents={docs} initialActiveDocument={docs[0]} pluginRenderers={DocViewerRenderers} language="en" />;
}`,...(Sv=(Tv=Zo.parameters)==null?void 0:Tv.docs)==null?void 0:Sv.source}}};var Cv,Pv,Rv;Jo.parameters={...Jo.parameters,docs:{...(Cv=Jo.parameters)==null?void 0:Cv.docs,source:{originalSource:`() => {
  const [droppedFiles, setDroppedFiles] = useState<string[]>([]);
  return <div style={{
    height: "100vh",
    display: "flex",
    flexDirection: "column"
  }}>
      <div style={{
      padding: "10px",
      background: "#f0f0f0"
    }}>
        <strong>Drag & Drop Demo</strong> - Drag PDF or image files onto the viewer below
        {droppedFiles.length > 0 && <div style={{
        marginTop: "5px",
        fontSize: "12px"
      }}>
            Dropped: {droppedFiles.join(", ")}
          </div>}
      </div>
      <div style={{
      flex: 1
    }}>
        <DocViewer documents={docs} config={{
        dragDrop: {
          enableDragDrop: true,
          acceptedFileTypes: ["application/pdf", "image/*"],
          maxFileSize: 50 * 1024 * 1024,
          dropBehavior: "append",
          onDrop: files => {
            setDroppedFiles(files.map(f => f.name));
            console.log("Files dropped:", files);
          },
          onDropRejected: (files, reason) => {
            console.log("Files rejected:", files, "Reason:", reason);
            alert(\`Files rejected: \${reason}\`);
          }
        }
      }} />
      </div>
    </div>;
}`,...(Rv=(Pv=Jo.parameters)==null?void 0:Pv.docs)==null?void 0:Rv.source}}};var Lv,Dv,kv;Qo.parameters={...Qo.parameters,docs:{...(Lv=Qo.parameters)==null?void 0:Lv.docs,source:{originalSource:`() => {
  return <div style={{
    height: "100vh"
  }}>
      <DocViewer documents={[{
      uri: pdfMultiplePagesFile
    }]} config={{
      thumbnail: {
        enableThumbnails: true,
        thumbnailWidth: 120,
        sidebarDefaultOpen: true
      },
      pdfVerticalScrollByDefault: false
    }} />
    </div>;
}`,...(kv=(Dv=Qo.parameters)==null?void 0:Dv.docs)==null?void 0:kv.source}}};var Iv,Mv,Nv;el.parameters={...el.parameters,docs:{...(Iv=el.parameters)==null?void 0:Iv.docs,source:{originalSource:`() => {
  const [annotations, setAnnotations] = useState<unknown[]>([]);
  return <div style={{
    height: "100vh",
    display: "flex",
    flexDirection: "column"
  }}>
      <div style={{
      padding: "10px",
      background: "#f0f0f0"
    }}>
        <strong>Annotations Demo</strong> - Use the toolbar to highlight, draw, or add comments
        <div style={{
        marginTop: "5px",
        fontSize: "12px"
      }}>
          Annotations count: {annotations.length}
        </div>
      </div>
      <div style={{
      flex: 1
    }}>
        <DocViewer documents={[{
        uri: pdfMultiplePagesFile
      }]} config={{
        annotations: {
          enableAnnotations: true,
          defaultColor: "#FFFF00",
          colors: ["#FFFF00", "#FF6B6B", "#4ECDC4", "#45B7D1", "#96CEB4"],
          tools: ["select", "highlight", "pen", "comment", "eraser"],
          onAnnotationChange: newAnnotations => {
            setAnnotations(newAnnotations);
            console.log("Annotations updated:", newAnnotations);
          }
        },
        pdfVerticalScrollByDefault: false
      }} />
      </div>
    </div>;
}`,...(Nv=(Mv=el.parameters)==null?void 0:Mv.docs)==null?void 0:Nv.source}}};var Fv,Ov,jv;tl.parameters={...tl.parameters,docs:{...(Fv=tl.parameters)==null?void 0:Fv.docs,source:{originalSource:`() => {
  const docViewerRef = useRef<DocViewerRef>(null);
  const [pageInput, setPageInput] = useState("1");
  return <div style={{
    height: "100vh",
    display: "flex",
    flexDirection: "column"
  }}>
      <div style={{
      padding: "10px",
      background: "#f0f0f0",
      display: "flex",
      gap: "10px",
      alignItems: "center"
    }}>
        <strong>Page Jump Demo</strong>
        <input type="number" min="1" value={pageInput} onChange={e => setPageInput(e.target.value)} style={{
        width: "60px",
        padding: "5px"
      }} />
        <button onClick={() => {
        const page = parseInt(pageInput, 10);
        if (page > 0) {
          docViewerRef.current?.goToPage(page);
        }
      }} style={{
        padding: "5px 15px"
      }}>
          Go to Page
        </button>
        <button onClick={() => docViewerRef.current?.prev()} style={{
        padding: "5px 15px"
      }}>
          Prev Doc
        </button>
        <button onClick={() => docViewerRef.current?.next()} style={{
        padding: "5px 15px"
      }}>
          Next Doc
        </button>
      </div>
      <div style={{
      flex: 1
    }}>
        <DocViewer ref={docViewerRef} documents={[{
        uri: pdfMultiplePagesFile
      }]} config={{
        pdfVerticalScrollByDefault: false
      }} />
      </div>
    </div>;
}`,...(jv=(Ov=tl.parameters)==null?void 0:Ov.docs)==null?void 0:jv.source}}};var Bv,Hv,Uv;nl.parameters={...nl.parameters,docs:{...(Bv=nl.parameters)==null?void 0:Bv.docs,source:{originalSource:`() => {
  const [currentPage, setCurrentPage] = useState(1);
  return <div style={{
    height: "100vh",
    display: "flex",
    flexDirection: "column"
  }}>
      <div style={{
      padding: "10px",
      background: "#f0f0f0",
      display: "flex",
      gap: "10px",
      alignItems: "center"
    }}>
        <strong>Jump To Page Prop Demo</strong>
        <span>Current Page: {currentPage}</span>
        <button onClick={() => setCurrentPage(1)} style={{
        padding: "5px 15px"
      }}>
          Page 1
        </button>
        <button onClick={() => setCurrentPage(3)} style={{
        padding: "5px 15px"
      }}>
          Page 3
        </button>
        <button onClick={() => setCurrentPage(5)} style={{
        padding: "5px 15px"
      }}>
          Page 5
        </button>
        <button onClick={() => setCurrentPage(10)} style={{
        padding: "5px 15px"
      }}>
          Page 10
        </button>
        <input type="number" min="1" max="10" value={currentPage} onChange={e => setCurrentPage(parseInt(e.target.value, 10) || 1)} style={{
        width: "60px",
        padding: "5px"
      }} />
      </div>
      <div style={{
      flex: 1
    }}>
        <DocViewer documents={[{
        uri: pdfMultiplePagesFile
      }]} jumpToPage={currentPage} config={{
        pdfVerticalScrollByDefault: false
      }} />
      </div>
    </div>;
}`,...(Uv=(Hv=nl.parameters)==null?void 0:Hv.docs)==null?void 0:Uv.source}}};var zv,Wv,Gv;sl.parameters={...sl.parameters,docs:{...(zv=sl.parameters)==null?void 0:zv.docs,source:{originalSource:`() => {
  const docViewerRef = useRef<DocViewerRef>(null);
  const [pageInput, setPageInput] = useState("1");
  const [annotations, setAnnotations] = useState<unknown[]>([]);
  return <div style={{
    height: "100vh",
    display: "flex",
    flexDirection: "column"
  }}>
      <div style={{
      padding: "10px",
      background: "#f0f0f0",
      display: "flex",
      gap: "10px",
      alignItems: "center",
      flexWrap: "wrap"
    }}>
        <strong>All Features Demo</strong>
        <span>|</span>
        <input type="number" min="1" value={pageInput} onChange={e => setPageInput(e.target.value)} style={{
        width: "50px",
        padding: "4px"
      }} placeholder="Page" />
        <button onClick={() => {
        const page = parseInt(pageInput, 10);
        if (page > 0) docViewerRef.current?.goToPage(page);
      }} style={{
        padding: "4px 10px"
      }}>
          Jump
        </button>
        <span>|</span>
        <span style={{
        fontSize: "12px"
      }}>Annotations: {annotations.length}</span>
        <span>|</span>
        <span style={{
        fontSize: "12px",
        color: "#666"
      }}>Drag files to add • Click thumbnails to navigate</span>
      </div>
      <div style={{
      flex: 1
    }}>
        <DocViewer ref={docViewerRef} documents={[{
        uri: pdfMultiplePagesFile
      }]} config={{
        dragDrop: {
          enableDragDrop: true,
          acceptedFileTypes: ["application/pdf", "image/*"],
          dropBehavior: "append"
        },
        thumbnail: {
          enableThumbnails: true,
          thumbnailWidth: 100,
          sidebarDefaultOpen: false
        },
        annotations: {
          enableAnnotations: true,
          colors: ["#FFFF00", "#FF6B6B", "#4ECDC4", "#45B7D1"],
          tools: ["select", "highlight", "pen", "comment", "eraser"],
          onAnnotationChange: setAnnotations
        },
        pdfVerticalScrollByDefault: false
      }} />
      </div>
    </div>;
}`,...(Gv=(Wv=sl.parameters)==null?void 0:Wv.docs)==null?void 0:Gv.source}}};const XC=["Default","WithPDFInput","ManualNextPrevNavigation","WithRef","NoRenderType","WithDragAndDrop","WithThumbnailSidebar","WithAnnotations","WithPageJump","WithJumpToPageProp","AllFeaturesCombined"];export{sl as AllFeaturesCombined,$o as Default,Yo as ManualNextPrevNavigation,Zo as NoRenderType,el as WithAnnotations,Jo as WithDragAndDrop,nl as WithJumpToPageProp,Xo as WithPDFInput,tl as WithPageJump,Ko as WithRef,Qo as WithThumbnailSidebar,XC as __namedExportsOrder,$C as default};
